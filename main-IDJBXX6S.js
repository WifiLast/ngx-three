import{a as pe,b as Gt,c as Ow,e as yH,g as _i}from"./chunk-GAL4ENT6.js";function SI(n,t){return Object.is(n,t)}var Zn=null,ep=!1,a_=1,ss=Symbol("SIGNAL");function bi(n){let t=Zn;return Zn=n,t}function RI(){return Zn}function xH(){return ep}var Su={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function l_(n){if(ep)throw new Error("");if(Zn===null)return;Zn.consumerOnSignalRead(n);let t=Zn.nextProducerIndex++;if(p_(Zn),t<Zn.producerNode.length&&Zn.producerNode[t]!==n&&tp(Zn)){let e=Zn.producerNode[t];f_(e,Zn.producerIndexOfThis[t])}Zn.producerNode[t]!==n&&(Zn.producerNode[t]=n,Zn.producerIndexOfThis[t]=tp(Zn)?AI(n,Zn,t):0),Zn.producerLastReadVersion[t]=n.version}function wH(){a_++}function TI(n){if(!(tp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===a_)){if(!n.producerMustRecompute(n)&&!u_(n)){n.dirty=!1,n.lastCleanEpoch=a_;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=a_}}function CI(n){if(n.liveConsumerNode===void 0)return;let t=ep;ep=!0;try{for(let e of n.liveConsumerNode)e.dirty||DI(e)}finally{ep=t}}function EI(){return Zn?.consumerAllowSignalWrites!==!1}function DI(n){n.dirty=!0,CI(n),n.consumerMarkedDirty?.(n)}function ip(n){return n&&(n.nextProducerIndex=0),bi(n)}function d_(n,t){if(bi(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tp(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)f_(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function u_(n){p_(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(TI(e),i!==e.version))return!0}return!1}function h_(n){if(p_(n),tp(n))for(let t=0;t<n.producerNode.length;t++)f_(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function AI(n,t,e){if(II(n),n.liveConsumerNode.length===0&&PI(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=AI(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function f_(n,t){if(II(n),n.liveConsumerNode.length===1&&PI(n))for(let i=0;i<n.producerNode.length;i++)f_(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];p_(r),r.producerIndexOfThis[i]=t}}function tp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function p_(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function II(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function PI(n){return n.producerNode!==void 0}function FI(n){let t=Object.create(MH);t.computation=n;let e=()=>{if(TI(t),l_(t),t.value===c_)throw t.error;return t.value};return e[ss]=t,e}var Nw=Symbol("UNSET"),Lw=Symbol("COMPUTING"),c_=Symbol("ERRORED"),MH=Gt(pe({},Su),{value:Nw,dirty:!0,error:null,equal:SI,producerMustRecompute(n){return n.value===Nw||n.value===Lw},producerRecomputeValue(n){if(n.value===Lw)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Lw;let e=ip(n),i;try{i=n.computation()}catch(r){i=c_,n.error=r}finally{d_(n,e)}if(t!==Nw&&t!==c_&&i!==c_&&n.equal(t,i)){n.value=t;return}n.value=i,n.version++}});function SH(){throw new Error}var kI=SH;function jI(){kI()}function OI(n){kI=n}var RH=null;function NI(n){let t=Object.create(Uw);t.value=n;let e=()=>(l_(t),t.value);return e[ss]=t,e}function m_(n,t){EI()||jI(),n.equal(n.value,t)||(n.value=t,TH(n))}function LI(n,t){EI()||jI(),m_(n,t(n.value))}var Uw=Gt(pe({},Su),{equal:SI,value:void 0});function TH(n){n.version++,wH(),CI(n),RH?.()}function BI(n,t,e){let i=Object.create(CH);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;let r=c=>{i.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(h_(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Bw)}let a=()=>{if(i.fn===null)return;if(xH())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!u_(i))return;i.hasRun=!0;let c=ip(i);try{i.cleanupFn(),i.cleanupFn=Bw,i.fn(r)}finally{d_(i,c)}};return i.ref={notify:()=>DI(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>s(i),[ss]:i},i.ref}var Bw=()=>{},CH=Gt(pe({},Su),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Bw});function St(n){return typeof n=="function"}function Ru(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var g_=Ru(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Vl(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var mi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(St(i))try{i()}catch(o){t=o instanceof g_?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{UI(o)}catch(s){t=t??[],s instanceof g_?t=[...t,...s.errors]:t.push(s)}}if(t)throw new g_(t)}}add(t){var e;if(t&&t!==this)if(this.closed)UI(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Vl(e,t)}remove(t){let{_finalizers:e}=this;e&&Vl(e,t),t instanceof n&&t._removeParent(this)}};mi.EMPTY=(()=>{let n=new mi;return n.closed=!0,n})();var Vw=mi.EMPTY;function __(n){return n instanceof mi||n&&"closed"in n&&St(n.remove)&&St(n.add)&&St(n.unsubscribe)}function UI(n){St(n)?n():n.unsubscribe()}var as={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Tu={setTimeout(n,t,...e){let{delegate:i}=Tu;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Tu;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function b_(n){Tu.setTimeout(()=>{let{onUnhandledError:t}=as;if(t)t(n);else throw n})}function np(){}var VI=zw("C",void 0,void 0);function zI(n){return zw("E",void 0,n)}function HI(n){return zw("N",n,void 0)}function zw(n,t,e){return{kind:n,value:t,error:e}}var zl=null;function Cu(n){if(as.useDeprecatedSynchronousErrorHandling){let t=!zl;if(t&&(zl={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=zl;if(zl=null,e)throw i}}else n()}function GI(n){as.useDeprecatedSynchronousErrorHandling&&zl&&(zl.errorThrown=!0,zl.error=n)}var Hl=class extends mi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,__(t)&&t.add(this)):this.destination=AH}static create(t,e,i){return new cs(t,e,i)}next(t){this.isStopped?Gw(HI(t),this):this._next(t)}error(t){this.isStopped?Gw(zI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Gw(VI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},EH=Function.prototype.bind;function Hw(n,t){return EH.call(n,t)}var Ww=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){v_(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){v_(i)}else v_(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){v_(e)}}},cs=class extends Hl{constructor(t,e,i){super();let r;if(St(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&as.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Hw(t.next,o),error:t.error&&Hw(t.error,o),complete:t.complete&&Hw(t.complete,o)}):r=t}this.destination=new Ww(r)}};function v_(n){as.useDeprecatedSynchronousErrorHandling?GI(n):b_(n)}function DH(n){throw n}function Gw(n,t){let{onStoppedNotification:e}=as;e&&Tu.setTimeout(()=>e(n,t))}var AH={closed:!0,next:np,error:DH,complete:np};var Eu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nr(n){return n}function $w(...n){return qw(n)}function qw(n){return n.length===0?Nr:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var It=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=PH(e)?e:new cs(e,i,r);return Cu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=WI(i),new i((r,o)=>{let s=new cs({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Eu](){return this}pipe(...e){return qw(e)(this)}toPromise(e){return e=WI(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function WI(n){var t;return(t=n??as.Promise)!==null&&t!==void 0?t:Promise}function IH(n){return n&&St(n.next)&&St(n.error)&&St(n.complete)}function PH(n){return n&&n instanceof Hl||IH(n)&&__(n)}function Xw(n){return St(n?.lift)}function Qt(n){return t=>{if(Xw(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xt(n,t,e,i,r){return new Yw(n,t,e,i,r)}var Yw=class extends Hl{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Du(){return Qt((n,t)=>{let e=null;n._refCount++;let i=Xt(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Au=class extends It{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Xw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new mi;let e=this.getSubject();t.add(this.source.subscribe(Xt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=mi.EMPTY)}return t}refCount(){return Du()(this)}};var $I=Ru(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends It{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new y_(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new $I}next(e){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Vw:(this.currentObservers=null,o.push(e),new mi(()=>{this.currentObservers=null,Vl(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new It;return e.source=this,e}}return n.create=(t,e)=>new y_(t,e),n})(),y_=class extends at{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:Vw}};var Sn=class extends at{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var rp={now(){return(rp.delegate||Date).now()},delegate:void 0};var Gl=class extends at{constructor(t=1/0,e=1/0,i=rp){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var x_=class extends mi{constructor(t,e){super()}schedule(t,e=0){return this}};var op={setInterval(n,t,...e){let{delegate:i}=op;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=op;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var w_=class extends x_{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return op.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&op.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Vl(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Iu=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Iu.now=rp.now;var M_=class extends Iu{constructor(t,e=Iu.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var sp=new M_(w_),qI=sp;var pn=new It(n=>n.complete());function S_(n){return n&&St(n.schedule)}function Zw(n){return n[n.length-1]}function R_(n){return St(Zw(n))?n.pop():void 0}function Bs(n){return S_(Zw(n))?n.pop():void 0}function XI(n,t){return typeof Zw(n)=="number"?n.pop():t}function ZI(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(u){s(u)}}function c(d){try{l(i.throw(d))}catch(u){s(u)}}function l(d){d.done?o(d.value):r(d.value).then(a,c)}l((i=i.apply(n,t||[])).next())})}function YI(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wl(n){return this instanceof Wl?(this.v=n,this):new Wl(n)}function QI(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r={},a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(m){return Promise.resolve(m).then(f,u)}}function a(f,m){i[f]&&(r[f]=function(_){return new Promise(function(g,p){o.push([f,_,g,p])>1||c(f,_)})},m&&(r[f]=m(r[f])))}function c(f,m){try{l(i[f](m))}catch(_){h(o[0][3],_)}}function l(f){f.value instanceof Wl?Promise.resolve(f.value.v).then(d,u):h(o[0][2],f)}function d(f){c("next",f)}function u(f){c("throw",f)}function h(f,m){f(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function KI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof YI=="function"?YI(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Pu=n=>n&&typeof n.length=="number"&&typeof n!="function";function T_(n){return St(n?.then)}function C_(n){return St(n[Eu])}function E_(n){return Symbol.asyncIterator&&St(n?.[Symbol.asyncIterator])}function D_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var A_=FH();function I_(n){return St(n?.[A_])}function P_(n){return QI(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield Wl(e.read());if(r)return yield Wl(void 0);yield yield Wl(i)}}finally{e.releaseLock()}})}function F_(n){return St(n?.getReader)}function Ni(n){if(n instanceof It)return n;if(n!=null){if(C_(n))return kH(n);if(Pu(n))return jH(n);if(T_(n))return OH(n);if(E_(n))return JI(n);if(I_(n))return NH(n);if(F_(n))return LH(n)}throw D_(n)}function kH(n){return new It(t=>{let e=n[Eu]();if(St(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jH(n){return new It(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function OH(n){return new It(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,b_)})}function NH(n){return new It(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function JI(n){return new It(t=>{BH(n,t).catch(e=>t.error(e))})}function LH(n){return JI(P_(n))}function BH(n,t){var e,i,r,o;return ZI(this,void 0,void 0,function*(){try{for(e=KI(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function Qr(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function k_(n,t=0){return Qt((e,i)=>{e.subscribe(Xt(i,r=>Qr(i,n,()=>i.next(r),t),()=>Qr(i,n,()=>i.complete(),t),r=>Qr(i,n,()=>i.error(r),t)))})}function j_(n,t=0){return Qt((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function eP(n,t){return Ni(n).pipe(j_(t),k_(t))}function tP(n,t){return Ni(n).pipe(j_(t),k_(t))}function iP(n,t){return new It(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function nP(n,t){return new It(e=>{let i;return Qr(e,t,()=>{i=n[A_](),Qr(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>St(i?.return)&&i.return()})}function O_(n,t){if(!n)throw new Error("Iterable cannot be null");return new It(e=>{Qr(e,t,()=>{let i=n[Symbol.asyncIterator]();Qr(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function rP(n,t){return O_(P_(n),t)}function oP(n,t){if(n!=null){if(C_(n))return eP(n,t);if(Pu(n))return iP(n,t);if(T_(n))return tP(n,t);if(E_(n))return O_(n,t);if(I_(n))return nP(n,t);if(F_(n))return rP(n,t)}throw D_(n)}function Pi(n,t){return t?oP(n,t):Ni(n)}function mt(...n){let t=Bs(n);return Pi(n,t)}function Kr(n,t){let e=St(n)?n:()=>n,i=r=>r.error(e());return new It(t?r=>t.schedule(i,0,r):i)}function ap(n){return!!n&&(n instanceof It||St(n.lift)&&St(n.subscribe))}var ls=Ru(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Qw(n,t){let e=typeof t=="object";return new Promise((i,r)=>{let o=new cs({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{e?i(t.defaultValue):r(new ls)}});n.subscribe(o)})}function sP(n){return n instanceof Date&&!isNaN(n)}function dt(n,t){return Qt((e,i)=>{let r=0;e.subscribe(Xt(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:UH}=Array;function VH(n,t){return UH(t)?n(...t):n(t)}function Fu(n){return dt(t=>VH(n,t))}var{isArray:zH}=Array,{getPrototypeOf:HH,prototype:GH,keys:WH}=Object;function N_(n){if(n.length===1){let t=n[0];if(zH(t))return{args:t,keys:null};if($H(t)){let e=WH(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function $H(n){return n&&typeof n=="object"&&HH(n)===GH}function L_(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function $l(...n){let t=Bs(n),e=R_(n),{args:i,keys:r}=N_(n);if(i.length===0)return Pi([],t);let o=new It(qH(i,t,r?s=>L_(r,s):Nr));return e?o.pipe(Fu(e)):o}function qH(n,t,e=Nr){return i=>{aP(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)aP(t,()=>{let l=Pi(n[c],t),d=!1;l.subscribe(Xt(i,u=>{o[c]=u,d||(d=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function aP(n,t,e){n?Qr(e,n,t):t()}function cP(n,t,e,i,r,o,s,a){let c=[],l=0,d=0,u=!1,h=()=>{u&&!c.length&&!l&&t.complete()},f=_=>l<i?m(_):c.push(_),m=_=>{o&&t.next(_),l++;let g=!1;Ni(e(_,d++)).subscribe(Xt(t,p=>{r?.(p),o?f(p):t.next(p)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let p=c.shift();s?Qr(t,s,()=>m(p)):m(p)}h()}catch(p){t.error(p)}}))};return n.subscribe(Xt(t,f,()=>{u=!0,h()})),()=>{a?.()}}function Rn(n,t,e=1/0){return St(t)?Rn((i,r)=>dt((o,s)=>t(i,o,r,s))(Ni(n(i,r))),e):(typeof t=="number"&&(e=t),Qt((i,r)=>cP(i,r,n,e)))}function Pc(n=1/0){return Rn(Nr,n)}function lP(){return Pc(1)}function Fc(...n){return lP()(Pi(n,Bs(n)))}function B_(n){return new It(t=>{Ni(n()).subscribe(t)})}function ql(...n){let t=R_(n),{args:e,keys:i}=N_(n),r=new It(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let u=!1;Ni(e[d]).subscribe(Xt(o,h=>{u||(u=!0,l--),a[d]=h},()=>c--,void 0,()=>{(!c||!u)&&(l||o.next(i?L_(i,a):a),o.complete())}))}});return t?r.pipe(Fu(t)):r}var XH=["addListener","removeListener"],YH=["addEventListener","removeEventListener"],ZH=["on","off"];function Lo(n,t,e,i){if(St(e)&&(i=e,e=void 0),i)return Lo(n,t,e).pipe(Fu(i));let[r,o]=JH(n)?YH.map(s=>a=>n[s](t,a,e)):QH(n)?XH.map(dP(n,t)):KH(n)?ZH.map(dP(n,t)):[];if(!r&&Pu(n))return Rn(s=>Lo(s,t,e))(Ni(n));if(!r)throw new TypeError("Invalid event target");return new It(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function dP(n,t){return e=>i=>n[e](t,i)}function QH(n){return St(n.addListener)&&St(n.removeListener)}function KH(n){return St(n.on)&&St(n.off)}function JH(n){return St(n.addEventListener)&&St(n.removeEventListener)}function cp(n=0,t,e=qI){let i=-1;return t!=null&&(S_(t)?e=t:i=t),new It(r=>{let o=sP(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ds(...n){let t=Bs(n),e=XI(n,1/0),i=n;return i.length?i.length===1?Ni(i[0]):Pc(e)(Pi(i,t)):pn}function li(n,t){return Qt((e,i)=>{let r=0;e.subscribe(Xt(i,o=>n.call(t,o,r++)&&i.next(o)))})}function uP(n){return Qt((t,e)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let l=r;r=null,e.next(l)}s&&e.complete()},c=()=>{o=null,s&&e.complete()};t.subscribe(Xt(e,l=>{i=!0,r=l,o||Ni(n(l)).subscribe(o=Xt(e,a,c))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}function U_(n,t=sp){return uP(()=>cp(n,t))}function Lr(n){return Qt((t,e)=>{let i=null,r=!1,o;i=t.subscribe(Xt(e,void 0,void 0,s=>{o=Ni(n(s,Lr(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function hP(n,t,e,i,r){return(o,s)=>{let a=e,c=t,l=0;o.subscribe(Xt(s,d=>{let u=l++;c=a?n(c,d,u):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Oa(n,t){return St(t)?Rn(n,t,1):Rn(n,1)}function us(n,t=sp){return Qt((e,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,i.next(l)}};function c(){let l=s+n,d=t.now();if(d<l){r=this.schedule(void 0,l-d),i.add(r);return}a()}e.subscribe(Xt(i,l=>{o=l,s=t.now(),r||(r=t.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function kc(n){return Qt((t,e)=>{let i=!1;t.subscribe(Xt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function xr(n){return n<=0?()=>pn:Qt((t,e)=>{let i=0;t.subscribe(Xt(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function ku(n){return dt(()=>n)}function V_(n,t=Nr){return n=n??e4,Qt((e,i)=>{let r,o=!0;e.subscribe(Xt(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function e4(n,t){return n===t}function z_(n=t4){return Qt((t,e)=>{let i=!1;t.subscribe(Xt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function t4(){return new ls}function Us(n){return Qt((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Vs(n,t){let e=arguments.length>=2;return i=>i.pipe(n?li((r,o)=>n(r,o,i)):Nr,xr(1),e?kc(t):z_(()=>new ls))}function ju(n){return n<=0?()=>pn:Qt((t,e)=>{let i=[];t.subscribe(Xt(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Kw(n,t){let e=arguments.length>=2;return i=>i.pipe(n?li((r,o)=>n(r,o,i)):Nr,ju(1),e?kc(t):z_(()=>new ls))}function Jw(n,t){return Qt(hP(n,t,arguments.length>=2,!0))}function lp(n={}){let{connector:t=()=>new at,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,d=u=!1},m=()=>{let _=s;f(),_?.unsubscribe()};return Qt((_,g)=>{l++,!u&&!d&&h();let p=c=c??t();g.add(()=>{l--,l===0&&!u&&!d&&(a=eM(m,r))}),p.subscribe(g),!s&&l>0&&(s=new cs({next:v=>p.next(v),error:v=>{u=!0,h(),a=eM(f,e,v),p.error(v)},complete:()=>{d=!0,h(),a=eM(f,i),p.complete()}}),Ni(_).subscribe(s))})(o)}}function eM(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new cs({next:()=>{i.unsubscribe(),n()}});return Ni(t(...e)).subscribe(i)}function Na(n,t,e){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n:i=n??1/0,lp({connector:()=>new Gl(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Xl(n){return li((t,e)=>n<=e)}function yo(...n){let t=Bs(n);return Qt((e,i)=>{(t?Fc(n,e,t):Fc(n,e)).subscribe(i)})}function Pn(n,t){return Qt((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(Xt(i,c=>{r?.unsubscribe();let l=0,d=o++;Ni(n(c,d)).subscribe(r=Xt(i,u=>i.next(t?t(c,u,d,l++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function gi(n){return Qt((t,e)=>{Ni(n).subscribe(Xt(e,()=>e.complete(),np)),!e.closed&&t.subscribe(e)})}function Hi(n,t,e){let i=St(n)||t||e?{next:n,error:t,complete:e}:n;return i?Qt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Xt(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Nr}var iF="https://g.co/ng/security#xss",je=class extends Error{constructor(t,e){super(Pb(t,e)),this.code=t}};function Pb(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var nF=Symbol("InputSignalNode#UNSET"),i4=Gt(pe({},Uw),{transformFn:void 0,applyValueToInputSignal(n,t){m_(n,t)}});function rF(n,t){let e=Object.create(i4);e.value=n,e.transformFn=t?.transform;function i(){if(l_(e),e.value===nF)throw new je(-950,!1);return e.value}return i[ss]=e,i}function xp(n){return{toString:n}.toString()}var H_="__parameters__";function n4(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function oF(n,t,e){return xp(()=>{let i=n4(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,d){let u=c.hasOwnProperty(H_)?c[H_]:Object.defineProperty(c,H_,{value:[]})[H_];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),c}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var xo=globalThis;function qi(n){for(let t in n)if(n[t]===qi)return t;throw Error("Could not find renamed property on target object.")}function r4(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function to(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(to).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function pM(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var o4=qi({__forward_ref__:qi});function _e(n){return n.__forward_ref__=_e,n.toString=function(){return to(this())},n}function Br(n){return sF(n)?n():n}function sF(n){return typeof n=="function"&&n.hasOwnProperty(o4)&&n.__forward_ref__===_e}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fb(n){return fP(n,cF)||fP(n,lF)}function aF(n){return Fb(n)!==null}function fP(n,t){return n.hasOwnProperty(t)?n[t]:null}function s4(n){let t=n&&(n[cF]||n[lF]);return t||null}function pP(n){return n&&(n.hasOwnProperty(mP)||n.hasOwnProperty(a4))?n[mP]:null}var cF=qi({\u0275prov:qi}),mP=qi({\u0275inj:qi}),lF=qi({ngInjectableDef:qi}),a4=qi({ngInjectorDef:qi}),Se=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=xe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dF(n){return n&&!!n.\u0275providers}var c4=qi({\u0275cmp:qi}),l4=qi({\u0275dir:qi}),d4=qi({\u0275pipe:qi}),u4=qi({\u0275mod:qi}),nb=qi({\u0275fac:qi}),up=qi({__NG_ELEMENT_ID__:qi}),gP=qi({__NG_ENV_ID__:qi});function kb(n){return typeof n=="string"?n:n==null?"":String(n)}function h4(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():kb(n)}function f4(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new je(-200,n)}function xS(n,t){throw new je(-201,!1)}var di=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(di||{}),mM;function uF(){return mM}function Jr(n){let t=mM;return mM=n,t}function hF(n,t,e){let i=Fb(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&di.Optional)return null;if(t!==void 0)return t;xS(n,"Injector")}var p4={},fp=p4,gM="__NG_DI_FLAG__",rb="ngTempTokenPath",m4="ngTokenPath",g4=/\n/gm,_4="\u0275",_P="__source",Bu;function b4(){return Bu}function jc(n){let t=Bu;return Bu=n,t}function v4(n,t=di.Default){if(Bu===void 0)throw new je(-203,!1);return Bu===null?hF(n,void 0,t):Bu.get(n,t&di.Optional?null:void 0,t)}function de(n,t=di.Default){return(uF()||v4)(Br(n),t)}function q(n,t=di.Default){return de(n,jb(t))}function jb(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _M(n){let t=[];for(let e=0;e<n.length;e++){let i=Br(n[e]);if(Array.isArray(i)){if(i.length===0)throw new je(900,!1);let r,o=di.Default;for(let s=0;s<i.length;s++){let a=i[s],c=y4(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}t.push(de(r,o))}else t.push(de(i))}return t}function fF(n,t){return n[gM]=t,n.prototype[gM]=t,n}function y4(n){return n[gM]}function x4(n,t,e,i){let r=n[rb];throw t[_P]&&r.unshift(t[_P]),n.message=w4(`
`+n.message,r,e,i),n[m4]=r,n[rb]=null,n}function w4(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==_4?n.slice(2):n;let r=to(t);if(Array.isArray(t))r=t.map(to).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):to(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(g4,`
  `)}`}var wp=fF(oF("Optional"),8);var Ob=fF(oF("SkipSelf"),4);function Zl(n,t){let e=n.hasOwnProperty(nb);return e?n[nb]:null}function M4(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function S4(n){return n.flat(Number.POSITIVE_INFINITY)}function wS(n,t){n.forEach(e=>Array.isArray(e)?wS(e,t):t(e))}function pF(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ob(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function R4(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function T4(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function Nb(n,t,e){let i=Mp(n,t);return i>=0?n[i|1]=e:(i=~i,T4(n,i,t,e)),i}function tM(n,t){let e=Mp(n,t);if(e>=0)return n[e|1]}function Mp(n,t){return C4(n,t,1)}function C4(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Vu={},eo=[],zu=new Se(""),mF=new Se("",-1),gF=new Se(""),sb=class{get(t,e=fp){if(e===fp){let i=new Error(`NullInjectorError: No provider for ${to(t)}!`);throw i.name="NullInjectorError",i}return e}},_F=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_F||{}),Gs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gs||{}),Bc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Bc||{});function E4(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function bM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];D4(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function bF(n){return n===3||n===4||n===6}function D4(n){return n.charCodeAt(0)===64}function pp(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?bP(n,e,r,null,t[++i]):bP(n,e,r,null,null))}}return n}function bP(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var vF="ng-template";function A4(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&E4(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(MS(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function MS(n){return n.type===4&&n.value!==vF}function I4(n,t,e){let i=n.type===4&&!e?vF:n.value;return t===i}function P4(n,t,e){let i=4,r=n.attrs,o=r!==null?j4(r):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!hs(i)&&!hs(c))return!1;if(s&&hs(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!I4(n,c,e)||c===""&&t.length===1){if(hs(i))return!1;s=!0}}else if(i&8){if(r===null||!A4(n,r,c,e)){if(hs(i))return!1;s=!0}}else{let l=t[++a],d=F4(c,r,MS(n),e);if(d===-1){if(hs(i))return!1;s=!0;continue}if(l!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),i&2&&l!==u){if(hs(i))return!1;s=!0}}}}return hs(i)||s}function hs(n){return(n&1)===0}function F4(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return O4(t,n)}function yF(n,t,e=!1){for(let i=0;i<t.length;i++)if(P4(n,t[i],e))return!0;return!1}function k4(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function j4(n){for(let t=0;t<n.length;t++){let e=n[t];if(bF(e))return t}return n.length}function O4(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function N4(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function vP(n,t){return n?":not("+t.trim()+")":t}function L4(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!hs(s)&&(t+=vP(o,r),r=""),i=s,o=o||!hs(i);e++}return r!==""&&(t+=vP(o,r)),t}function B4(n){return n.map(L4).join(",")}function U4(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!hs(r))break;r=o}i++}return{attrs:t,classes:e}}function L(n){return xp(()=>{let t=RF(n),e=Gt(pe({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_F.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gs.Emulated,styles:n.styles||eo,_:null,schemas:n.schemas||null,tView:null,id:""});TF(e);let i=n.dependencies;return e.directiveDefs=xP(i,!1),e.pipeDefs=xP(i,!0),e.id=H4(e),e})}function V4(n){return Uc(n)||xF(n)}function z4(n){return n!==null}function it(n){return xp(()=>({type:n.type,bootstrap:n.bootstrap||eo,declarations:n.declarations||eo,imports:n.imports||eo,exports:n.exports||eo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yP(n,t){if(n==null)return Vu;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=Bc.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==Bc.None?[i,a]:i,t[o]=s):e[o]=i}return e}function Ye(n){return xp(()=>{let t=RF(n);return TF(t),t})}function Vo(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Uc(n){return n[c4]||null}function xF(n){return n[l4]||null}function wF(n){return n[d4]||null}function MF(n){let t=Uc(n)||xF(n)||wF(n);return t!==null?t.standalone:!1}function SF(n,t){let e=n[u4]||null;if(!e&&t===!0)throw new Error(`Type ${to(n)} does not have '\u0275mod' property.`);return e}function RF(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Vu,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||eo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yP(n.inputs,t),outputs:yP(n.outputs),debugInfo:null}}function TF(n){n.features?.forEach(t=>t(n))}function xP(n,t){if(!n)return null;let e=t?wF:V4;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(z4)}function H4(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Lb(n){return{\u0275providers:n}}function G4(...n){return{\u0275providers:CF(!0,n),\u0275fromNgModule:!0}}function CF(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return wS(t,s=>{let a=s;vM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&EF(r,o),e}function EF(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];SS(r,o=>{t(o,i)})}}function vM(n,t,e,i){if(n=Br(n),!n)return!1;let r=null,o=pP(n),s=!o&&Uc(n);if(!o&&!s){let c=n.ngModule;if(o=pP(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)vM(l,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{wS(o.imports,d=>{vM(d,t,e,i)&&(l||=[],l.push(d))})}finally{}l!==void 0&&EF(l,t)}if(!a){let l=Zl(r)||(()=>new r);t({provide:r,useFactory:l,deps:eo},r),t({provide:gF,useValue:r,multi:!0},r),t({provide:zu,useValue:()=>de(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;SS(c,d=>{t(d,l)})}}else return!1;return r!==n&&n.providers!==void 0}function SS(n,t){for(let e of n)dF(e)&&(e=e.\u0275providers),Array.isArray(e)?SS(e,t):t(e)}var W4=qi({provide:String,useValue:qi});function DF(n){return n!==null&&typeof n=="object"&&W4 in n}function $4(n){return!!(n&&n.useExisting)}function q4(n){return!!(n&&n.useFactory)}function Hu(n){return typeof n=="function"}function X4(n){return!!n.useClass}var Bb=new Se(""),Q_={},Y4={},iM;function RS(){return iM===void 0&&(iM=new sb),iM}var gr=class{},mp=class extends gr{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xM(t,s=>this.processProvider(s)),this.records.set(mF,Ou(void 0,this)),r.has("environment")&&this.records.set(gr,Ou(void 0,this));let o=this.records.get(Bb);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gF,eo,di.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=bi(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),bi(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=jc(this),i=Jr(void 0),r;try{return t()}finally{jc(e),Jr(i)}}get(t,e=fp,i=di.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(gP))return t[gP](this);i=jb(i);let r,o=jc(this),s=Jr(void 0);try{if(!(i&di.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=e5(t)&&Fb(t);l&&this.injectableDefInScope(l)?c=Ou(yM(t),Q_):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=i&di.Self?RS():this.parent;return e=i&di.Optional&&e===fp?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[rb]=a[rb]||[]).unshift(to(t)),o)throw a;return x4(a,t,"R3InjectorError",this.source)}else throw a}finally{Jr(s),jc(o)}}resolveInjectorInitializers(){let t=bi(null),e=jc(this),i=Jr(void 0),r;try{let o=this.get(zu,eo,di.Self);for(let s of o)s()}finally{jc(e),Jr(i),bi(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(to(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(t){t=Br(t);let e=Hu(t)?t:Br(t&&t.provide),i=Q4(t);if(!Hu(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ou(void 0,Q_,!0),r.factory=()=>_M(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=bi(null);try{return e.value===Q_&&(e.value=Y4,e.value=e.factory()),typeof e.value=="object"&&e.value&&J4(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{bi(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Br(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function yM(n){let t=Fb(n),e=t!==null?t.factory:Zl(n);if(e!==null)return e;if(n instanceof Se)throw new je(204,!1);if(n instanceof Function)return Z4(n);throw new je(204,!1)}function Z4(n){if(n.length>0)throw new je(204,!1);let e=s4(n);return e!==null?()=>e.factory(n):()=>new n}function Q4(n){if(DF(n))return Ou(void 0,n.useValue);{let t=AF(n);return Ou(t,Q_)}}function AF(n,t,e){let i;if(Hu(n)){let r=Br(n);return Zl(r)||yM(r)}else if(DF(n))i=()=>Br(n.useValue);else if(q4(n))i=()=>n.useFactory(..._M(n.deps||[]));else if($4(n))i=()=>de(Br(n.useExisting));else{let r=Br(n&&(n.useClass||n.provide));if(K4(n))i=()=>new r(..._M(n.deps));else return Zl(r)||yM(r)}return i}function Ou(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function K4(n){return!!n.deps}function J4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function e5(n){return typeof n=="function"||typeof n=="object"&&n instanceof Se}function xM(n,t){for(let e of n)Array.isArray(e)?xM(e,t):e&&dF(e)?xM(e.\u0275providers,t):t(e)}function zo(n,t){n instanceof mp&&n.assertNotDestroyed();let e,i=jc(n),r=Jr(void 0);try{return t()}finally{jc(i),Jr(r)}}function IF(){return uF()!==void 0||b4()!=null}function TS(n){if(!IF())throw new je(-203,!1)}function t5(n){let t=xo.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function i5(n){return typeof n=="function"}var Ys=0,Ut=1,Ot=2,Sr=3,fs=4,no=5,Gu=6,ab=7,wr=8,Wu=9,Ws=10,mn=11,gp=12,wP=13,Ju=14,wo=15,Ql=16,Nu=17,La=18,Ub=19,PF=20,Nc=21,K_=22,Bo=23,rr=25,CS=1;var Kl=7,cb=8,$u=9,Mr=10,lb=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(lb||{});function Lc(n){return Array.isArray(n)&&typeof n[CS]=="object"}function za(n){return Array.isArray(n)&&n[CS]===!0}function ES(n){return(n.flags&4)!==0}function Vb(n){return n.componentOffset>-1}function zb(n){return(n.flags&1)===1}function Ba(n){return!!n.template}function wM(n){return(n[Ot]&512)!==0}var MM=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function FF(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function Hn(){return kF}function kF(n){return n.type.prototype.ngOnChanges&&(n.setInput=r5),n5}Hn.ngInherit=!0;function n5(){let n=OF(this),t=n?.current;if(t){let e=n.previous;if(e===Vu)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function r5(n,t,e,i,r){let o=this.declaredInputs[i],s=OF(n)||o5(n,{previous:Vu,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new MM(l&&l.currentValue,e,c===Vu),FF(n,t,r,e)}var jF="__ngSimpleChanges__";function OF(n){return n[jF]||null}function o5(n,t){return n[jF]=t}var MP=null;var zs=function(n,t,e){MP?.(n,t,e)},s5="svg",a5="math";function $s(n){for(;Array.isArray(n);)n=n[Ys];return n}function c5(n){for(;Array.isArray(n);){if(typeof n[CS]=="object")return n;n=n[Ys]}return null}function NF(n,t){return $s(t[n])}function Ho(n,t){return $s(t[n.index])}function DS(n,t){return n.data[t]}function AS(n,t){return n[t]}function Gc(n,t){let e=t[n];return Lc(e)?e:e[Ys]}function l5(n){return(n[Ot]&4)===4}function IS(n){return(n[Ot]&128)===128}function d5(n){return za(n[Sr])}function Vc(n,t){return t==null?null:n[t]}function LF(n){n[Nu]=0}function BF(n){n[Ot]&1024||(n[Ot]|=1024,IS(n)&&Gb(n))}function u5(n,t){for(;n>0;)t=t[Ju],n--;return t}function Hb(n){return!!(n[Ot]&9216||n[Bo]?.dirty)}function SM(n){n[Ws].changeDetectionScheduler?.notify(8),n[Ot]&64&&(n[Ot]|=1024),Hb(n)&&Gb(n)}function Gb(n){n[Ws].changeDetectionScheduler?.notify(0);let t=Jl(n);for(;t!==null&&!(t[Ot]&8192||(t[Ot]|=8192,!IS(t)));)t=Jl(t)}function UF(n,t){if((n[Ot]&256)===256)throw new je(911,!1);n[Nc]===null&&(n[Nc]=[]),n[Nc].push(t)}function h5(n,t){if(n[Nc]===null)return;let e=n[Nc].indexOf(t);e!==-1&&n[Nc].splice(e,1)}function Jl(n){let t=n[Sr];return za(t)?t[Sr]:t}var ui={lFrame:ZF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var VF=!1;function f5(){return ui.lFrame.elementDepthCount}function p5(){ui.lFrame.elementDepthCount++}function m5(){ui.lFrame.elementDepthCount--}function zF(){return ui.bindingsEnabled}function HF(){return ui.skipHydrationRootTNode!==null}function g5(n){return ui.skipHydrationRootTNode===n}function _5(){ui.skipHydrationRootTNode=null}function Nt(){return ui.lFrame.lView}function ln(){return ui.lFrame.tView}function ht(n){return ui.lFrame.contextLView=n,n[wr]}function ft(n){return ui.lFrame.contextLView=null,n}function or(){let n=GF();for(;n!==null&&n.type===64;)n=n.parent;return n}function GF(){return ui.lFrame.currentTNode}function b5(){let n=ui.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function od(n,t){let e=ui.lFrame;e.currentTNode=n,e.isParent=t}function PS(){return ui.lFrame.isParent}function FS(){ui.lFrame.isParent=!1}function v5(){return ui.lFrame.contextLView}function WF(){return VF}function SP(n){VF=n}function sd(){let n=ui.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function y5(n){return ui.lFrame.bindingIndex=n}function ad(){return ui.lFrame.bindingIndex++}function $F(n){let t=ui.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function x5(){return ui.lFrame.inI18n}function w5(n,t){let e=ui.lFrame;e.bindingIndex=e.bindingRootIndex=n,RM(t)}function M5(){return ui.lFrame.currentDirectiveIndex}function RM(n){ui.lFrame.currentDirectiveIndex=n}function kS(n){let t=ui.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function qF(){return ui.lFrame.currentQueryIndex}function jS(n){ui.lFrame.currentQueryIndex=n}function S5(n){let t=n[Ut];return t.type===2?t.declTNode:t.type===1?n[no]:null}function XF(n,t,e){if(e&di.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&di.Host);)if(r=S5(o),r===null||(o=o[Ju],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=ui.lFrame=YF();return i.currentTNode=t,i.lView=n,!0}function OS(n){let t=YF(),e=n[Ut];ui.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function YF(){let n=ui.lFrame,t=n===null?null:n.child;return t===null?ZF(n):t}function ZF(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function QF(){let n=ui.lFrame;return ui.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KF=QF;function NS(){let n=QF();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function R5(n){return(ui.lFrame.contextLView=u5(n,ui.lFrame.contextLView))[wr]}function Wc(){return ui.lFrame.selectedIndex}function ed(n){ui.lFrame.selectedIndex=n}function Wb(){let n=ui.lFrame;return DS(n.tView,n.selectedIndex)}function T5(){return ui.lFrame.currentNamespace}var JF=!0;function $b(){return JF}function qb(n){JF=n}function C5(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=kF(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Xb(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),c&&(n.viewHooks??=[]).push(-e,c),l&&((n.viewHooks??=[]).push(e,l),(n.viewCheckHooks??=[]).push(e,l)),d!=null&&(n.destroyHooks??=[]).push(e,d)}}function J_(n,t,e){ek(n,t,3,e)}function eb(n,t,e,i){(n[Ot]&3)===e&&ek(n,t,e,i)}function nM(n,t){let e=n[Ot];(e&3)===t&&(e&=16383,e+=1,n[Ot]=e)}function ek(n,t,e,i){let r=i!==void 0?n[Nu]&65535:0,o=i??-1,s=t.length-1,a=0;for(let c=r;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],i!=null&&a>=i)break}else t[c]<0&&(n[Nu]+=65536),(a<o||o==-1)&&(E5(n,e,t,c),n[Nu]=(n[Nu]&4294901760)+c+2),c++}function RP(n,t){zs(4,n,t);let e=bi(null);try{t.call(n)}finally{bi(e),zs(5,n,t)}}function E5(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Ot]>>14<n[Nu]>>16&&(n[Ot]&3)===t&&(n[Ot]+=16384,RP(a,o)):RP(a,o)}var Uu=-1,td=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function D5(n){return n instanceof td}function A5(n){return(n.flags&8)!==0}function I5(n){return(n.flags&16)!==0}var rM={},TM=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=jb(i);let r=this.injector.get(t,rM,i);return r!==rM||e===rM?r:this.parentInjector.get(t,e,i)}};function tk(n){return n!==Uu}function db(n){return n&32767}function P5(n){return n>>16}function ub(n,t){let e=P5(n),i=t;for(;e>0;)i=i[Ju],e--;return i}var CM=!0;function hb(n){let t=CM;return CM=n,t}var F5=256,ik=F5-1,nk=5,k5=0,Hs={};function j5(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(up)&&(i=e[up]),i==null&&(i=e[up]=k5++);let r=i&ik,o=1<<r;t.data[n+(r>>nk)]|=o}function fb(n,t){let e=rk(n,t);if(e!==-1)return e;let i=t[Ut];i.firstCreatePass&&(n.injectorIndex=t.length,oM(i.data,n),oM(t,null),oM(i.blueprint,null));let r=LS(n,t),o=n.injectorIndex;if(tk(r)){let s=db(r),a=ub(r,t),c=a[Ut].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=r,o}function oM(n,t){n.push(0,0,0,0,0,0,0,0,t)}function rk(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function LS(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=lk(r),i===null)return Uu;if(e++,r=r[Ju],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Uu}function EM(n,t,e){j5(n,t,e)}function O5(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(bF(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function ok(n,t,e){if(e&di.Optional||n!==void 0)return n;xS(t,"NodeInjector")}function sk(n,t,e,i){if(e&di.Optional&&i===void 0&&(i=null),!(e&(di.Self|di.Host))){let r=n[Wu],o=Jr(void 0);try{return r?r.get(t,i,e&di.Optional):hF(t,i,e&di.Optional)}finally{Jr(o)}}return ok(i,t,e)}function ak(n,t,e,i=di.Default,r){if(n!==null){if(t[Ot]&2048&&!(i&di.Self)){let s=U5(n,t,e,i,Hs);if(s!==Hs)return s}let o=ck(n,t,e,i,Hs);if(o!==Hs)return o}return sk(t,e,i,r)}function ck(n,t,e,i,r){let o=L5(e);if(typeof o=="function"){if(!XF(t,n,i))return i&di.Host?ok(r,e,i):sk(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&di.Optional))xS(e);else return s}finally{KF()}}else if(typeof o=="number"){let s=null,a=rk(n,t),c=Uu,l=i&di.Host?t[wo][no]:null;for((a===-1||i&di.SkipSelf)&&(c=a===-1?LS(n,t):t[a+8],c===Uu||!CP(i,!1)?a=-1:(s=t[Ut],a=db(c),t=ub(c,t)));a!==-1;){let d=t[Ut];if(TP(o,a,d.data)){let u=N5(a,t,e,s,i,l);if(u!==Hs)return u}c=t[a+8],c!==Uu&&CP(i,t[Ut].data[a+8]===l)&&TP(o,a,t)?(s=d,a=db(c),t=ub(c,t)):a=-1}}return r}function N5(n,t,e,i,r,o){let s=t[Ut],a=s.data[n+8],c=i==null?Vb(a)&&CM:i!=s&&(a.type&3)!==0,l=r&di.Host&&o===a,d=tb(a,s,e,c,l);return d!==null?id(t,s,d,a):Hs}function tb(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,u=i?a:a+d,h=r?a+d:l;for(let f=u;f<h;f++){let m=s[f];if(f<c&&e===m||f>=c&&m.type===e)return f}if(r){let f=s[c];if(f&&Ba(f)&&f.type===e)return c}return null}function id(n,t,e,i){let r=n[e],o=t.data;if(D5(r)){let s=r;s.resolving&&f4(h4(o[e]));let a=hb(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Jr(s.injectImpl):null,d=XF(n,i,di.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&C5(e,o[e],t)}finally{l!==null&&Jr(l),hb(a),s.resolving=!1,KF()}}return r}function L5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(up)?n[up]:void 0;return typeof t=="number"?t>=0?t&ik:B5:t}function TP(n,t,e){let i=1<<n;return!!(e[t+(n>>nk)]&i)}function CP(n,t){return!(n&di.Self)&&!(n&di.Host&&t)}var Yl=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return ak(this._tNode,this._lView,t,jb(i),e)}};function B5(){return new Yl(or(),Nt())}function be(n){return xp(()=>{let t=n.prototype.constructor,e=t[nb]||DM(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[nb]||DM(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function DM(n){return sF(n)?()=>{let t=DM(Br(n));return t&&t()}:Zl(n)}function U5(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Ot]&2048&&!(s[Ot]&512);){let a=ck(o,s,e,i|di.Self,Hs);if(a!==Hs)return a;let c=o.parent;if(!c){let l=s[PF];if(l){let d=l.get(e,Hs,i);if(d!==Hs)return d}c=lk(s),s=s[Ju]}o=c}return r}function lk(n){let t=n[Ut],e=t.type;return e===2?t.declTNode:e===1?n[no]:null}function $c(n){return O5(or(),n)}function EP(n,t=null,e=null,i){let r=dk(n,t,e,i);return r.resolveInjectorInitializers(),r}function dk(n,t=null,e=null,i,r=new Set){let o=[e||eo,G4(n)];return i=i||(typeof n=="object"?void 0:to(n)),new mp(o,t||RS(),i||null,r)}var Xi=class n{static{this.THROW_IF_NOT_FOUND=fp}static{this.NULL=new sb}static create(t,e){if(Array.isArray(t))return EP({name:""},e,t,"");{let i=t.name??"";return EP({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=xe({token:n,providedIn:"any",factory:()=>de(mF)})}static{this.__NG_ELEMENT_ID__=-1}};var V5=new Se("");V5.__NG_ELEMENT_ID__=n=>{let t=or();if(t===null)throw new je(204,!1);if(t.type&2)return t.value;if(n&di.Optional)return null;throw new je(204,!1)};var z5="ngOriginalError";function sM(n){return n[z5]}var uk=!0,Yb=(()=>{class n{static{this.__NG_ELEMENT_ID__=H5}static{this.__NG_ENV_ID__=e=>e}}return n})(),AM=class extends Yb{constructor(t){super(),this._lView=t}onDestroy(t){return UF(this._lView,t),()=>h5(this._lView,t)}};function H5(){return new AM(Nt())}var Zs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Sn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}}return n})();var IM=class extends at{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,IF()&&(this.destroyRef=q(Yb,{optional:!0})??void 0,this.pendingTasks=q(Zs,{optional:!0})??void 0)}emit(t){let e=bi(null);try{super.next(t)}finally{bi(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let c=t;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof mi&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},nt=IM;function pb(...n){}function hk(n){let t,e;function i(){n=pb;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function DP(n){return queueMicrotask(()=>n()),()=>{n=pb}}var BS="isAngularZone",mb=BS+"_ID",G5=0,$e=class n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=uk}=t;if(typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,q5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(BS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new je(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,W5,pb,pb);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},W5={};function US(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){hk(()=>{n.callbackScheduled=!1,PM(n),n.isCheckStableRunning=!0,US(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),PM(n)}function q5(n){let t=()=>{$5(n)},e=G5++;n._inner=n._inner.fork({name:"angular",properties:{[BS]:!0,[mb]:e,[mb+e]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(X5(c))return i.invokeTask(o,s,a,c);try{return AP(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),IP(n)}},onInvoke:(i,r,o,s,a,c,l)=>{try{return AP(n),i.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Y5(c)&&t(),IP(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,PM(n),US(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function PM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function AP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function IP(n){n._nesting--,US(n)}var gb=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function X5(n){return fk(n,"__ignore_ng_zone__")}function Y5(n){return fk(n,"__scheduler_tick__")}function fk(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}function Z5(n="zone.js",t){return n==="noop"?new gb:n==="zone.js"?new $e(t):n}var io=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&sM(t);for(;e&&sM(e);)e=sM(e);return e||null}},Q5=new Se("",{providedIn:"root",factory:()=>{let n=q($e),t=q(io);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function PP(n,t){return rF(n,t)}function K5(n){return rF(nF,n)}var pk=(PP.required=K5,PP);function J5(){return eh(or(),Nt())}function eh(n,t){return new et(Ho(n,t))}var et=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=J5}}return n})();function eG(n){return n instanceof et?n.nativeElement:n}function tG(){return this._results[Symbol.iterator]()}var qs=class n{get changes(){return this._changes??=new nt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=tG)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=S4(t);(this._changesDetected=!M4(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function mk(n){return(n.flags&128)===128}var gk=new Map,iG=0;function nG(){return iG++}function rG(n){gk.set(n[Ub],n)}function FM(n){gk.delete(n[Ub])}var FP="__ngContext__";function zc(n,t){Lc(t)?(n[FP]=t[Ub],rG(t)):n[FP]=t}function _k(n){return vk(n[gp])}function bk(n){return vk(n[fs])}function vk(n){for(;n!==null&&!za(n);)n=n[fs];return n}var kM;function yk(n){kM=n}function oG(){if(kM!==void 0)return kM;if(typeof document<"u")return document;throw new je(210,!1)}var Sp=new Se("",{providedIn:"root",factory:()=>sG}),sG="ng",VS=new Se(""),Vr=new Se("",{providedIn:"platform",factory:()=>"unknown"});var Gn=new Se(""),Rp=new Se("",{providedIn:"root",factory:()=>oG().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aG="h",cG="b";var lG=()=>null;function zS(n,t,e=!1){return lG(n,t,e)}var xk=!1,dG=new Se("",{providedIn:"root",factory:()=>xk});var G_;function wk(){if(G_===void 0&&(G_=null,xo.trustedTypes))try{G_=xo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return G_}function Zb(n){return wk()?.createHTML(n)||n}function uG(n){return wk()?.createScriptURL(n)||n}var W_;function hG(){if(W_===void 0&&(W_=null,xo.trustedTypes))try{W_=xo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return W_}function kP(n){return hG()?.createScriptURL(n)||n}var Ua=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iF})`}},jM=class extends Ua{getTypeName(){return"HTML"}},OM=class extends Ua{getTypeName(){return"Style"}},NM=class extends Ua{getTypeName(){return"Script"}},LM=class extends Ua{getTypeName(){return"URL"}},BM=class extends Ua{getTypeName(){return"ResourceURL"}};function Go(n){return n instanceof Ua?n.changingThisBreaksApplicationSecurity:n}function qc(n,t){let e=fG(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${iF})`)}return e===t}function fG(n){return n instanceof Ua&&n.getTypeName()||null}function Mk(n){return new jM(n)}function Sk(n){return new OM(n)}function Rk(n){return new NM(n)}function Tk(n){return new LM(n)}function Ck(n){return new BM(n)}function pG(n){let t=new VM(n);return mG()?new UM(t):t}var UM=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Zb(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},VM=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Zb(t),e}};function mG(){try{return!!new window.DOMParser().parseFromString(Zb(""),"text/html")}catch{return!1}}var gG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qb(n){return n=String(n),n.match(gG)?n:"unsafe:"+n}function Ha(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function Tp(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var Ek=Ha("area,br,col,hr,img,wbr"),Dk=Ha("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ak=Ha("rp,rt"),_G=Tp(Ak,Dk),bG=Tp(Dk,Ha("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vG=Tp(Ak,Ha("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jP=Tp(Ek,bG,vG,_G),Ik=Ha("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yG=Ha("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xG=Ha("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),wG=Tp(Ik,yG,xG),MG=Ha("script,style,template"),zM=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=TG(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=RG(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=OP(t).toLowerCase();if(!jP.hasOwnProperty(e))return this.sanitizedSomething=!0,!MG.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!wG.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;Ik[a]&&(c=Qb(c)),this.buf.push(" ",s,'="',NP(c),'"')}return this.buf.push(">"),!0}endElement(t){let e=OP(t).toLowerCase();jP.hasOwnProperty(e)&&!Ek.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(NP(t))}};function SG(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function RG(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw Pk(t);return t}function TG(n){let t=n.firstChild;if(t&&SG(n,t))throw Pk(t);return t}function OP(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function Pk(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var CG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,EG=/([^\#-~ |!])/g;function NP(n){return n.replace(/&/g,"&amp;").replace(CG,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(EG,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var $_;function Fk(n,t){let e=null;try{$_=$_||pG(n);let i=t?String(t):"";e=$_.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=$_.getInertBodyElement(i)}while(i!==o);let a=new zM().sanitizeChildren(LP(e)||e);return Zb(a)}finally{if(e){let i=LP(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function LP(n){return"content"in n&&DG(n)?n.content:null}function DG(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var sr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sr||{});function AG(n){let t=jk();return t?t.sanitize(sr.URL,n)||"":qc(n,"URL")?Go(n):Qb(kb(n))}function IG(n){let t=jk();if(t)return kP(t.sanitize(sr.RESOURCE_URL,n)||"");if(qc(n,"ResourceURL"))return kP(Go(n));throw new je(904,!1)}function Kb(n){return uG(n[0])}function PG(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?IG:AG}function kk(n,t,e){return PG(t,e)(n)}function jk(){let n=Nt();return n&&n[Ws].sanitizer}var FG=/^>|^->|<!--|-->|--!>|<!-$/g,kG=/(<|>)/g,jG="\u200B$1\u200B";function OG(n){return n.replace(FG,t=>t.replace(kG,jG))}function HS(n){return n.ownerDocument.defaultView}function th(n){return n.ownerDocument}function Ok(n){return n instanceof Function?n():n}function Nk(n){return(n??q(Xi)).get(Vr)==="browser"}var Xs=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xs||{}),NG;function GS(n,t){return NG(n,t)}function Lu(n,t,e,i,r){if(i!=null){let o,s=!1;za(i)?o=i:Lc(i)&&(s=!0,i=i[Ys]);let a=$s(i);n===0&&e!==null?r==null?zk(t,e,a):_b(t,e,a,r||null,!0):n===1&&e!==null?_b(t,e,a,r||null,!0):n===2?QG(t,a,s):n===3&&t.destroyNode(a),o!=null&&JG(t,n,o,e,r)}}function LG(n,t){return n.createText(t)}function BG(n,t,e){n.setValue(t,e)}function UG(n,t){return n.createComment(OG(t))}function Lk(n,t,e){return n.createElement(t,e)}function VG(n,t){Bk(n,t),t[Ys]=null,t[no]=null}function zG(n,t,e,i,r,o){i[Ys]=r,i[no]=t,tv(n,i,e,1,r,o)}function Bk(n,t){t[Ws].changeDetectionScheduler?.notify(9),tv(n,t,t[mn],2,null,null)}function HG(n){let t=n[gp];if(!t)return aM(n[Ut],n);for(;t;){let e=null;if(Lc(t))e=t[gp];else{let i=t[Mr];i&&(e=i)}if(!e){for(;t&&!t[fs]&&t!==n;)Lc(t)&&aM(t[Ut],t),t=t[Sr];t===null&&(t=n),Lc(t)&&aM(t[Ut],t),e=t&&t[fs]}t=e}}function GG(n,t,e,i){let r=Mr+i,o=e.length;i>0&&(e[r-1][fs]=t),i<o-Mr?(t[fs]=e[r],pF(e,Mr+i,t)):(e.push(t),t[fs]=null),t[Sr]=e;let s=t[Ql];s!==null&&e!==s&&Uk(s,t);let a=t[La];a!==null&&a.insertView(n),SM(t),t[Ot]|=128}function Uk(n,t){let e=n[$u],i=t[Sr];if(Lc(i))n[Ot]|=lb.HasTransplantedViews;else{let r=i[Sr][wo];t[wo]!==r&&(n[Ot]|=lb.HasTransplantedViews)}e===null?n[$u]=[t]:e.push(t)}function WS(n,t){let e=n[$u],i=e.indexOf(t);e.splice(i,1)}function _p(n,t){if(n.length<=Mr)return;let e=Mr+t,i=n[e];if(i){let r=i[Ql];r!==null&&r!==n&&WS(r,i),t>0&&(n[e-1][fs]=i[fs]);let o=ob(n,Mr+t);VG(i[Ut],i);let s=o[La];s!==null&&s.detachView(o[Ut]),i[Sr]=null,i[fs]=null,i[Ot]&=-129}return i}function Jb(n,t){if(!(t[Ot]&256)){let e=t[mn];e.destroyNode&&tv(n,t,e,3,null,null),HG(t)}}function aM(n,t){if(t[Ot]&256)return;let e=bi(null);try{t[Ot]&=-129,t[Ot]|=256,t[Bo]&&h_(t[Bo]),$G(n,t),WG(n,t),t[Ut].type===1&&t[mn].destroy();let i=t[Ql];if(i!==null&&za(t[Sr])){i!==t[Sr]&&WS(i,t);let r=t[La];r!==null&&r.detachView(n)}FM(t)}finally{bi(e)}}function WG(n,t){let e=n.cleanup,i=t[ab];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[ab]=null);let r=t[Nc];if(r!==null){t[Nc]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function $G(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof td)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];zs(4,a,c);try{c.call(a)}finally{zs(5,a,c)}}else{zs(4,r,o);try{o.call(r)}finally{zs(5,r,o)}}}}}function Vk(n,t,e){return qG(n,t.parent,e)}function qG(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Ys];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Gs.None||o===Gs.Emulated)return null}return Ho(i,e)}}function _b(n,t,e,i,r){n.insertBefore(t,e,i,r)}function zk(n,t,e){n.appendChild(t,e)}function BP(n,t,e,i,r){i!==null?_b(n,t,e,i,r):zk(n,t,e)}function Hk(n,t){return n.parentNode(t)}function XG(n,t){return n.nextSibling(t)}function Gk(n,t,e){return ZG(n,t,e)}function YG(n,t,e){return n.type&40?Ho(n,e):null}var ZG=YG,UP;function ev(n,t,e,i){let r=Vk(n,i,t),o=t[mn],s=i.parent||t[no],a=Gk(s,i,t);if(r!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)BP(o,r,e[c],a,!1);else BP(o,r,e,a,!1);UP!==void 0&&UP(o,i,t,e,r)}function dp(n,t){if(t!==null){let e=t.type;if(e&3)return Ho(t,n);if(e&4)return HM(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return dp(n,i);{let r=n[t.index];return za(r)?HM(-1,r):$s(r)}}else{if(e&128)return dp(n,t.next);if(e&32)return GS(t,n)()||$s(n[t.index]);{let i=Wk(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Jl(n[wo]);return dp(r,i)}else return dp(n,t.next)}}}return null}function Wk(n,t){if(t!==null){let i=n[wo][no],r=t.projection;return i.projection[r]}return null}function HM(n,t){let e=Mr+n+1;if(e<t.length){let i=t[e],r=i[Ut].firstChild;if(r!==null)return dp(i,r)}return t[Kl]}function QG(n,t,e){n.removeChild(null,t,e)}function $S(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],c=e.type;if(s&&t===0&&(a&&zc($s(a),i),e.flags|=2),(e.flags&32)!==32)if(c&8)$S(n,t,e.child,i,r,o,!1),Lu(t,n,r,a,o);else if(c&32){let l=GS(e,i),d;for(;d=l();)Lu(t,n,r,d,o);Lu(t,n,r,a,o)}else c&16?$k(n,t,i,e,r,o):Lu(t,n,r,a,o);e=s?e.projectionNext:e.next}}function tv(n,t,e,i,r,o){$S(e,i,n.firstChild,t,r,o,!1)}function KG(n,t,e){let i=t[mn],r=Vk(n,e,t),o=e.parent||t[no],s=Gk(o,e,t);$k(i,0,t,e,r,s)}function $k(n,t,e,i,r,o){let s=e[wo],c=s[no].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Lu(t,n,r,d,o)}else{let l=c,d=s[Sr];mk(i)&&(l.flags|=128),$S(n,t,l,d,r,o,!0)}}function JG(n,t,e,i,r){let o=e[Kl],s=$s(e);o!==s&&Lu(t,n,i,o,r);for(let a=Mr;a<e.length;a++){let c=e[a];tv(c[Ut],c,n,t,i,o)}}function eW(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:Xs.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Xs.Important),n.setStyle(e,i,r,o))}}function tW(n,t,e){n.setAttribute(t,"style",e)}function qk(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Xk(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&bM(n,t,i),r!==null&&qk(n,t,r),o!==null&&tW(n,t,o)}var ps={};function k(n=1){Yk(ln(),Nt(),Wc()+n,!1)}function Yk(n,t,e,i){if(!i)if((t[Ot]&3)===3){let o=n.preOrderCheckHooks;o!==null&&J_(t,o,e)}else{let o=n.preOrderHooks;o!==null&&eb(t,o,0,e)}ed(e)}function F(n,t=di.Default){let e=Nt();if(e===null)return de(n,t);let i=or();return ak(i,e,Br(n),t)}function ih(){let n="invalid";throw new Error(n)}function Zk(n,t,e,i,r,o){let s=bi(null);try{let a=null;r&Bc.SignalBased&&(a=t[i][ss]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Bc.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):FF(t,a,i,o)}finally{bi(s)}}function iW(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)ed(~r);else{let o=r,s=e[++i],a=e[++i];w5(s,o);let c=t[o];a(2,c)}}}finally{ed(-1)}}function iv(n,t,e,i,r,o,s,a,c,l,d){let u=t.blueprint.slice();return u[Ys]=r,u[Ot]=i|4|128|8|64,(l!==null||n&&n[Ot]&2048)&&(u[Ot]|=2048),LF(u),u[Sr]=u[Ju]=n,u[wr]=e,u[Ws]=s||n&&n[Ws],u[mn]=a||n&&n[mn],u[Wu]=c||n&&n[Wu]||null,u[no]=o,u[Ub]=nG(),u[Gu]=d,u[PF]=l,u[wo]=t.type==2?n[wo]:u,u}function nh(n,t,e,i,r){let o=n.data[t];if(o===null)o=nW(n,t,e,i,r),x5()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=b5();o.injectorIndex=s===null?-1:s.injectorIndex}return od(o,!0),o}function nW(n,t,e,i,r){let o=GF(),s=PS(),a=s?o:o&&o.parent,c=n.data[t]=lW(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Qk(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Kk(n,t,e,i,r){let o=Wc(),s=i&2;try{ed(-1),s&&t.length>rr&&Yk(n,t,rr,!1),zs(s?2:0,r),e(i,r)}finally{ed(o),zs(s?3:1,r)}}function qS(n,t,e){if(ES(t)){let i=bi(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{bi(i)}}}function XS(n,t,e){zF()&&(mW(n,t,e,Ho(e,t)),(e.flags&64)===64&&tj(n,t,e))}function YS(n,t,e=Ho){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function Jk(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=ZS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function ZS(n,t,e,i,r,o,s,a,c,l,d){let u=rr+i,h=u+r,f=rW(u,h),m=typeof l=="function"?l():l;return f[Ut]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:d}}function rW(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:ps);return e}function oW(n,t,e,i){let o=i.get(dG,xk)||e===Gs.ShadowDom,s=n.selectRootElement(t,o);return sW(s),s}function sW(n){aW(n)}var aW=()=>null;function cW(n,t,e,i){let r=rj(t);r.push(e),n.firstCreatePass&&oj(n).push(i,r.length-1)}function lW(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return HF()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function VP(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,c=Bc.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}n===0?zP(i,e,l,a,c):zP(i,e,l,a)}return i}function zP(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function dW(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],c=null,l=null;for(let d=i;d<r;d++){let u=o[d],h=e?e.get(u):null,f=h?h.inputs:null,m=h?h.outputs:null;c=VP(0,u.inputs,d,c,f),l=VP(1,u.outputs,d,l,m);let _=c!==null&&s!==null&&!MS(t)?TW(c,d,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function uW(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function QS(n,t,e,i,r,o,s,a){let c=Ho(t,e),l=t.inputs,d;!a&&l!=null&&(d=l[i])?(JS(n,e,d,i,r),Vb(t)&&hW(e,t.index)):t.type&3?(i=uW(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(c,i,r)):t.type&12}function hW(n,t){let e=Gc(t,n);e[Ot]&16||(e[Ot]|=64)}function KS(n,t,e,i){if(zF()){let r=i===null?null:{"":-1},o=_W(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ej(n,t,e,s,r,a),r&&bW(e,i,r)}e.mergedAttrs=pp(e.mergedAttrs,e.attrs)}function ej(n,t,e,i,r,o){for(let l=0;l<i.length;l++)EM(fb(e,t),n,i[l].type);yW(e,n.data.length,i.length);for(let l=0;l<i.length;l++){let d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Qk(n,t,i.length,null);for(let l=0;l<i.length;l++){let d=i[l];e.mergedAttrs=pp(e.mergedAttrs,d.hostAttrs),xW(n,e,t,c,d),vW(c,d,r),d.contentQueries!==null&&(e.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(e.flags|=64);let u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}dW(n,e,o)}function fW(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;pW(s)!=a&&s.push(a),s.push(e,i,o)}}function pW(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function mW(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;Vb(e)&&wW(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||fb(e,t),zc(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let c=n.data[a],l=id(t,n,a,e);if(zc(l,t),s!==null&&RW(t,a-r,l,c,e,s),Ba(c)){let d=Gc(e.index,t);d[wr]=id(t,n,a,e)}}}function tj(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=M5();try{ed(o);for(let a=i;a<r;a++){let c=n.data[a],l=t[a];RM(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gW(c,l)}}finally{ed(-1),RM(s)}}function gW(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function _W(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(yF(t,s.selectors,!1))if(i||(i=[]),Ba(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;GM(n,t,c)}else i.unshift(s),GM(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function GM(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function bW(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new je(-301,!1);i.push(t[r],o)}}}function vW(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Ba(t)&&(e[""]=n)}}function yW(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function xW(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=Zl(r.type,!0)),s=new td(o,Ba(r),F);n.blueprint[i]=s,e[i]=s,fW(n,t,i,Qk(n,e,r.hostVars,ps),r)}function wW(n,t,e){let i=Ho(t,n),r=Jk(e),o=n[Ws].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=nv(n,iv(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function MW(n,t,e,i,r,o){let s=Ho(n,t);SW(t[mn],s,o,n.value,e,i,r)}function SW(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?kb(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function RW(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],u=s[a++];Zk(i,e,c,l,d,u)}}function TW(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function ij(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function nj(n,t){let e=n.contentQueries;if(e!==null){let i=bi(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];jS(o),a.contentQueries(2,t[s],s)}}}finally{bi(i)}}}function nv(n,t){return n[gp]?n[wP][fs]=t:n[gp]=t,n[wP]=t,t}function WM(n,t,e){jS(0);let i=bi(null);try{t(n,e)}finally{bi(i)}}function rj(n){return n[ab]??=[]}function oj(n){return n.cleanup??=[]}function sj(n,t,e){return(n===null||Ba(n))&&(e=c5(e[t.index])),e[mn]}function aj(n,t){let e=n[Wu],i=e?e.get(io,null):null;i&&i.handleError(t)}function JS(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],c=e[o++],l=t[s],d=n.data[s];Zk(d,l,i,a,c,r)}}function CW(n,t,e){let i=NF(t,n);BG(n[mn],i,e)}function EW(n,t){let e=Gc(t,n),i=e[Ut];DW(i,e);let r=e[Ys];r!==null&&e[Gu]===null&&(e[Gu]=zS(r,e[Wu])),eR(i,e,e[wr])}function DW(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function eR(n,t,e){OS(t);try{let i=n.viewQuery;i!==null&&WM(1,i,e);let r=n.template;r!==null&&Kk(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[La]?.finishViewCreation(n),n.staticContentQueries&&nj(n,t),n.staticViewQueries&&WM(2,n.viewQuery,e);let o=n.components;o!==null&&AW(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Ot]&=-5,NS()}}function AW(n,t){for(let e=0;e<t.length;e++)EW(n,t[e])}function Cp(n,t,e,i){let r=bi(null);try{let o=t.tView,a=n[Ot]&4096?4096:16,c=iv(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[t.index];c[Ql]=l;let d=n[La];return d!==null&&(c[La]=d.createEmbeddedView(o)),eR(o,c,e),c}finally{bi(r)}}function cj(n,t){let e=Mr+t;if(e<n.length)return n[e]}function qu(n,t){return!t||t.firstChild===null||mk(n)}function Ep(n,t,e,i=!0){let r=t[Ut];if(GG(r,t,n,e),i){let s=HM(e,n),a=t[mn],c=Hk(a,n[Kl]);c!==null&&zG(r,n[no],a,t,c,s)}let o=t[Gu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function lj(n,t){let e=_p(n,t);return e!==void 0&&Jb(e[Ut],e),e}function bb(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push($s(o)),za(o)&&IW(o,i);let s=e.type;if(s&8)bb(n,t,e.child,i);else if(s&32){let a=GS(e,t),c;for(;c=a();)i.push(c)}else if(s&16){let a=Wk(t,e);if(Array.isArray(a))i.push(...a);else{let c=Jl(t[wo]);bb(c[Ut],c,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function IW(n,t){for(let e=Mr;e<n.length;e++){let i=n[e],r=i[Ut].firstChild;r!==null&&bb(i[Ut],i,r,t)}n[Kl]!==n[Ys]&&t.push(n[Kl])}var dj=[];function PW(n){return n[Bo]??FW(n)}function FW(n){let t=dj.pop()??Object.create(jW);return t.lView=n,t}function kW(n){n.lView[Bo]!==n&&(n.lView=null,dj.push(n))}var jW=Gt(pe({},Su),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Gb(n.lView)},consumerOnSignalRead(){this.lView[Bo]=this}});function OW(n){let t=n[Bo]??Object.create(NW);return t.lView=n,t}var NW=Gt(pe({},Su),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=Jl(n.lView);for(;t&&!uj(t[Ut]);)t=Jl(t);t&&BF(t)},consumerOnSignalRead(){this.lView[Bo]=this}});function uj(n){return n.type!==2}var LW=100;function hj(n,t=!0,e=0){let i=n[Ws],r=i.rendererFactory,o=!1;o||r.begin?.();try{BW(n,e)}catch(s){throw t&&aj(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function BW(n,t){let e=WF();try{SP(!0),$M(n,t);let i=0;for(;Hb(n);){if(i===LW)throw new je(103,!1);i++,$M(n,1)}}finally{SP(e)}}function UW(n,t,e,i){let r=t[Ot];if((r&256)===256)return;let o=!1,s=!1;!o&&t[Ws].inlineEffectRunner?.flush(),OS(t);let a=!0,c=null,l=null;o||(uj(n)?(l=PW(t),c=ip(l)):RI()===null?(a=!1,l=OW(t),c=ip(l)):t[Bo]&&(h_(t[Bo]),t[Bo]=null));try{LF(t),y5(n.bindingStartIndex),e!==null&&Kk(n,t,e,2,i);let d=(r&3)===3;if(!o)if(d){let f=n.preOrderCheckHooks;f!==null&&J_(t,f,null)}else{let f=n.preOrderHooks;f!==null&&eb(t,f,0,null),nM(t,0)}if(s||VW(t),fj(t,0),n.contentQueries!==null&&nj(n,t),!o)if(d){let f=n.contentCheckHooks;f!==null&&J_(t,f)}else{let f=n.contentHooks;f!==null&&eb(t,f,1),nM(t,1)}iW(n,t);let u=n.components;u!==null&&mj(t,u,0);let h=n.viewQuery;if(h!==null&&WM(2,h,i),!o)if(d){let f=n.viewCheckHooks;f!==null&&J_(t,f)}else{let f=n.viewHooks;f!==null&&eb(t,f,2),nM(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[K_]){for(let f of t[K_])f();t[K_]=null}o||(t[Ot]&=-73)}catch(d){throw o||Gb(t),d}finally{l!==null&&(d_(l,c),a&&kW(l)),NS()}}function fj(n,t){for(let e=_k(n);e!==null;e=bk(e))for(let i=Mr;i<e.length;i++){let r=e[i];pj(r,t)}}function VW(n){for(let t=_k(n);t!==null;t=bk(t)){if(!(t[Ot]&lb.HasTransplantedViews))continue;let e=t[$u];for(let i=0;i<e.length;i++){let r=e[i];BF(r)}}}function zW(n,t,e){let i=Gc(t,n);pj(i,e)}function pj(n,t){IS(n)&&$M(n,t)}function $M(n,t){let i=n[Ut],r=n[Ot],o=n[Bo],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&u_(o)),s||=!1,o&&(o.dirty=!1),n[Ot]&=-9217,s)UW(i,n,i.template,n[wr]);else if(r&8192){fj(n,1);let a=i.components;a!==null&&mj(n,a,1)}}function mj(n,t,e){for(let i=0;i<t.length;i++)zW(n,t[i],e)}function tR(n,t){let e=WF()?64:1088;for(n[Ws].changeDetectionScheduler?.notify(t);n;){n[Ot]|=e;let i=Jl(n);if(wM(n)&&!i)return n;n=i}return null}var nd=class{get rootNodes(){let t=this._lView,e=t[Ut];return bb(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wr]}set context(t){this._lView[wr]=t}get destroyed(){return(this._lView[Ot]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Sr];if(za(t)){let e=t[cb],i=e?e.indexOf(this):-1;i>-1&&(_p(t,i),ob(e,i))}this._attachedToViewContainer=!1}Jb(this._lView[Ut],this._lView)}onDestroy(t){UF(this._lView,t)}markForCheck(){tR(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ot]&=-129}reattach(){SM(this._lView),this._lView[Ot]|=128}detectChanges(){this._lView[Ot]|=1024,hj(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=wM(this._lView),e=this._lView[Ql];e!==null&&!t&&WS(e,this._lView),Bk(this._lView[Ut],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=t;let e=wM(this._lView),i=this._lView[Ql];i!==null&&!e&&Uk(i,this._lView),SM(this._lView)}},Ur=(()=>{class n{static{this.__NG_ELEMENT_ID__=WW}}return n})(),HW=Ur,GW=class extends HW{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=Cp(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new nd(r)}};function WW(){return rv(or(),Nt())}function rv(n,t){return n.type&4?new GW(t,n,eh(n,t)):null}var Wbe=new RegExp(`^(\\d+)*(${cG}|${aG})*(.*)`);var $W=()=>null;function Xu(n,t){return $W(n,t)}var Yu=class{},iR=new Se("",{providedIn:"root",factory:()=>!1});var gj=new Se(""),_j=new Se(""),qM=class{},vb=class{};function qW(n){let t=Error(`No component factory found for ${to(n)}.`);return t[XW]=n,t}var XW="ngComponent";var XM=class{resolveComponentFactory(t){throw qW(t)}},Uo=class{static{this.NULL=new XM}},Hc=class{},Qs=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>YW()}}return n})();function YW(){let n=Nt(),t=or(),e=Gc(t.index,n);return(Lc(e)?e:n)[mn]}var ZW=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null})}}return n})();function yb(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=pM(r,a);else if(o==2){let c=a,l=t[++s];i=pM(i,c+": "+l+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var xb=class extends Uo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Uc(t);return new Zu(e,this.ngModule)}};function HP(n,t){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:Bc.None;t?e.push({propName:s,templateName:i,isSignal:(a&Bc.SignalBased)!==0}):e.push({propName:s,templateName:i})}return e}function QW(n){let t=n.toLowerCase();return t==="svg"?s5:t==="math"?a5:null}var Zu=class extends vb{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=HP(t.inputs,!0);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return HP(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=B4(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=bi(null);try{r=r||this.ngModule;let s=r instanceof gr?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new TM(t,s):t,c=a.get(Hc,null);if(c===null)throw new je(407,!1);let l=a.get(ZW,null),d=a.get(Yu,null),u={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=i?oW(h,i,this.componentDef.encapsulation,a):Lk(h,f,QW(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let g=null;m!==null&&(g=zS(m,a,!0));let p=ZS(0,null,null,1,0,null,null,null,null,null,null),v=iv(null,p,null,_,null,null,u,h,a,null,g);OS(v);let b,y,C=null;try{let S=this.componentDef,M,A=null;S.findHostDirectiveDefs?(M=[],A=new Map,S.findHostDirectiveDefs(S,M,A),M.push(S)):M=[S];let T=KW(v,m);C=JW(T,m,S,M,v,u,h),y=DS(p,rr),m&&i8(h,S,m,i),e!==void 0&&n8(y,this.ngContentSelectors,e),b=t8(C,S,M,A,v,[r8]),eR(p,v,null)}catch(S){throw C!==null&&FM(C),FM(v),S}finally{NS()}return new YM(this.componentType,b,eh(y,v),v,y)}finally{bi(o)}}},YM=class extends qM{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new nd(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;JS(o[Ut],o,r,t,e),this.previousInputValues.set(t,e);let s=Gc(this._tNode.index,o);tR(s,1)}}get injector(){return new Yl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function KW(n,t){let e=n[Ut],i=rr;return n[i]=t,nh(e,i,2,"#host",null)}function JW(n,t,e,i,r,o,s){let a=r[Ut];e8(i,n,t,s);let c=null;t!==null&&(c=zS(t,r[Wu]));let l=o.rendererFactory.createRenderer(t,e),d=16;e.signals?d=4096:e.onPush&&(d=64);let u=iv(r,Jk(e),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&GM(a,n,i.length-1),nv(r,u),r[n.index]=u}function e8(n,t,e,i){for(let r of n)t.mergedAttrs=pp(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(yb(t,t.mergedAttrs,!0),e!==null&&Xk(i,e,t))}function t8(n,t,e,i,r,o){let s=or(),a=r[Ut],c=Ho(s,r);ej(a,r,s,e,null,i);for(let d=0;d<e.length;d++){let u=s.directiveStart+d,h=id(r,a,u,s);zc(h,r)}tj(a,r,s),c&&zc(c,r);let l=id(r,a,s.directiveStart+s.componentOffset,s);if(n[wr]=r[wr]=l,o!==null)for(let d of o)d(l,t);return qS(a,s,r),l}function i8(n,t,e,i){if(i)bM(n,e,["ng-version","18.2.11"]);else{let{attrs:r,classes:o}=U4(t.selectors[0]);r&&bM(n,e,r),o&&o.length>0&&qk(n,e,o.join(" "))}}function n8(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function r8(){let n=or();Xb(Nt()[Ut],n)}var _r=(()=>{class n{static{this.__NG_ELEMENT_ID__=o8}}return n})();function o8(){let n=or();return vj(n,Nt())}var s8=_r,bj=class extends s8{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return eh(this._hostTNode,this._hostLView)}get injector(){return new Yl(this._hostTNode,this._hostLView)}get parentInjector(){let t=LS(this._hostTNode,this._hostLView);if(tk(t)){let e=ub(t,this._hostLView),i=db(t),r=e[Ut].data[i+8];return new Yl(r,e)}else return new Yl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=GP(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Xu(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,qu(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!i5(t),a;if(s)a=e;else{let m=e||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?t:new Zu(Uc(t)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?l:this.parentInjector).get(gr,null);_&&(o=_)}let d=Uc(c.componentType??{}),u=Xu(this._lContainer,d?.id??null),h=u?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,qu(this._hostTNode,u)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(d5(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=r[Sr],l=new bj(c,c[no],c[Sr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Ep(s,r,o,i),t.attachToViewContainerRef(),pF(cM(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=GP(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=_p(this._lContainer,e);i&&(ob(cM(this._lContainer),e),Jb(i[Ut],i))}detach(t){let e=this._adjustIndex(t,-1),i=_p(this._lContainer,e);return i&&ob(cM(this._lContainer),e)!=null?new nd(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function GP(n){return n[cb]}function cM(n){return n[cb]||(n[cb]=[])}function vj(n,t){let e,i=t[n.index];return za(i)?e=i:(e=ij(i,t,null,n),t[n.index]=e,nv(t,e)),c8(e,t,n,i),new bj(e,n,t)}function a8(n,t){let e=n[mn],i=e.createComment(""),r=Ho(t,n),o=Hk(e,r);return _b(e,o,i,XG(e,r),!1),i}var c8=u8,l8=()=>!1;function d8(n,t,e){return l8(n,t,e)}function u8(n,t,e,i){if(n[Kl])return;let r;e.type&8?r=$s(i):r=a8(t,e),n[Kl]=r}var ZM=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},QM=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)nR(t,e).matches!==null&&this.queries[e].setDirty()}},wb=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=v8(t):this.predicate=t}},KM=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},JM=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,h8(e,o)),this.matchTNodeWithReadOption(t,e,tb(e,t,o,!1,!1))}else i===Ur?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tb(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===et||r===_r||r===Ur&&e.type&4)this.addMatch(e.index,-2);else{let o=tb(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function h8(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function f8(n,t){return n.type&11?eh(n,t):n.type&4?rv(n,t):null}function p8(n,t,e,i){return e===-1?f8(t,n):e===-2?m8(n,t,i):id(n,n[Ut],e,t)}function m8(n,t,e){if(e===et)return eh(t,n);if(e===Ur)return rv(t,n);if(e===_r)return vj(t,n)}function yj(n,t,e,i){let r=t[La].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(p8(t,d,s[c+1],e.metadata.read))}}r.matches=a}return r.matches}function eS(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=yj(n,t,r,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],d=t[-c];for(let u=Mr;u<d.length;u++){let h=d[u];h[Ql]===h[Sr]&&eS(h[Ut],h,l,i)}if(d[$u]!==null){let u=d[$u];for(let h=0;h<u.length;h++){let f=u[h];eS(f[Ut],f,l,i)}}}}}return i}function g8(n,t){return n[La].queries[t].queryList}function xj(n,t,e){let i=new qs((e&4)===4);return cW(n,t,i,i.destroy),(t[La]??=new QM).queries.push(new ZM(i))-1}function _8(n,t,e){let i=ln();return i.firstCreatePass&&(wj(i,new wb(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),xj(i,Nt(),t)}function b8(n,t,e,i){let r=ln();if(r.firstCreatePass){let o=or();wj(r,new wb(t,e,i),o.index),y8(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return xj(r,Nt(),e)}function v8(n){return n.split(",").map(t=>t.trim())}function wj(n,t,e){n.queries===null&&(n.queries=new KM),n.queries.track(new JM(t,e))}function y8(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function nR(n,t){return n.queries.getByIndex(t)}function x8(n,t){let e=n[Ut],i=nR(e,t);return i.crossesNgTemplate?eS(e,n,t,[]):yj(e,n,i,t)}var WP=new Set;function ms(n){WP.has(n)||(WP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ov(n){return typeof n=="function"&&n[ss]!==void 0}function cd(n,t){ms("NgSignals");let e=NI(n),i=e[ss];return t?.equal&&(i.equal=t.equal),e.set=r=>m_(i,r),e.update=r=>LI(i,r),e.asReadonly=w8.bind(e),e}function w8(){let n=this[ss];if(n.readonlyFn===void 0){let t=()=>this();t[ss]=n,n.readonlyFn=t}return n.readonlyFn}function Mj(n){return ov(n)&&typeof n.set=="function"}function M8(n){let t=[],e=new Map;function i(r){let o=e.get(r);if(!o){let s=n(r);e.set(r,o=s.then(C8))}return o}return Mb.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((u,h)=>{a.push(""),s.push(i(u).then(f=>{a[l+h]=f,d.splice(d.indexOf(u),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>E8(o));t.push(c)}),R8(),Promise.all(t).then(()=>{})}var Mb=new Map,S8=new Set;function R8(){let n=Mb;return Mb=new Map,n}function T8(){return Mb.size===0}function C8(n){return typeof n=="string"?n:n.text()}function E8(n){S8.delete(n)}function D8(n){return Object.getPrototypeOf(n.prototype).constructor}function X(n){let t=D8(n.type),e=!0,i=[n];for(;t;){let r;if(Ba(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new je(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=q_(n.inputs),s.inputTransforms=q_(n.inputTransforms),s.declaredInputs=q_(n.declaredInputs),s.outputs=q_(n.outputs);let a=r.hostBindings;a&&k8(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&P8(n,c),l&&F8(n,l),A8(n,r),r4(n.outputs,r.outputs),Ba(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===X&&(e=!1)}}t=Object.getPrototypeOf(t)}I8(i)}function A8(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function I8(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=pp(r.hostAttrs,e=pp(e,r.hostAttrs))}}function q_(n){return n===Vu?{}:n===eo?[]:n}function P8(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function F8(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function k8(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function dn(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];Array.isArray(r)&&r[3]&&(e[i]=r[3])}n.inputTransforms=e}var Va=class{},bp=class{};function Sj(n,t){return new vp(n,t??null,[])}var vp=class extends Va{constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xb(this);let o=SF(t);this._bootstrapComponents=Ok(o.bootstrap),this._r3Injector=dk(t,e,[{provide:Va,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver},...i],to(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Sb=class extends bp{constructor(t){super(),this.moduleType=t}create(t){return new vp(this.moduleType,t,[])}};function j8(n,t,e){return new vp(n,t,e,!1)}var tS=class extends Va{constructor(t){super(),this.componentFactoryResolver=new xb(this),this.instance=null;let e=new mp([...t.providers,{provide:Va,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],t.parent||RS(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function sv(n,t,e=null){return new tS({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function Rj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Dp(n,t,e){return n[t]=e}function O8(n,t){return n[t]}function Mo(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Rb(n,t,e,i){let r=Mo(n,t,e);return Mo(n,t+1,i)||r}function N8(n,t,e,i,r){let o=Rb(n,t,e,i);return Mo(n,t+2,r)||o}function L8(n,t,e,i,r,o){let s=Rb(n,t,e,i);return Rb(n,t+2,r,o)||s}function B8(n){return(n.flags&32)===32}function U8(n,t,e,i,r,o,s,a,c){let l=t.consts,d=nh(t,n,4,s||null,a||null);KS(t,e,d,Vc(l,c)),Xb(t,d);let u=d.tView=ZS(2,d,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}function Tb(n,t,e,i,r,o,s,a,c,l){let d=e+rr,u=t.firstCreatePass?U8(d,t,n,i,r,o,s,a,c):t.data[d];od(u,!1);let h=V8(t,n,u,e);$b()&&ev(t,n,h,u),zc(h,n);let f=ij(h,n,h,u);return n[d]=f,nv(n,f),d8(f,u,n),zb(u)&&XS(t,n,u),c!=null&&YS(n,u,l),u}function Fi(n,t,e,i,r,o,s,a){let c=Nt(),l=ln(),d=Vc(l.consts,o);return Tb(c,l,n,t,e,i,r,d,s,a),Fi}var V8=z8;function z8(n,t,e,i){return qb(!0),t[mn].createComment("")}var Oc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Oc||{}),Tj=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}}return n})(),iS=class n{constructor(){this.ngZone=q($e),this.scheduler=q(Yu),this.errorHandler=q(io,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Oc.EarlyRead,Oc.Write,Oc.MixedReadWrite,Oc.Read]}execute(){this.executing=!0;for(let t of n.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}},nS=class{constructor(t,e,i,r){this.impl=t,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function rR(n,t){!t?.injector&&TS(rR);let e=t?.injector??q(Xi);return Nk(e)?(ms("NgAfterRender"),Cj(n,e,t,!1)):Ej}function Wo(n,t){!t?.injector&&TS(Wo);let e=t?.injector??q(Xi);return Nk(e)?(ms("NgAfterNextRender"),Cj(n,e,t,!0)):Ej}function H8(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Cj(n,t,e,i){let r=t.get(Tj);r.impl??=t.get(iS);let o=e?.phase??Oc.MixedReadWrite,s=e?.manualCleanup!==!0?t.get(Yb):null,a=new nS(r.impl,H8(n,o),i,s);return r.impl.register(a),a}var Ej={destroy(){}};function Li(n,t,e,i){let r=Nt(),o=ad();if(Mo(r,o,t)){let s=ln(),a=Wb();MW(a,r,n,t,e,i)}return Li}function G8(n,t,e,i){return Mo(n,ad(),e)?t+kb(e)+i:ps}function X_(n,t){return n<<17|t<<2}function rd(n){return n>>17&32767}function W8(n){return(n&2)==2}function $8(n,t){return n&131071|t<<17}function rS(n){return n|2}function Qu(n){return(n&131068)>>2}function lM(n,t){return n&-131069|t<<2}function q8(n){return(n&1)===1}function oS(n){return n|1}function X8(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=rd(s),c=Qu(s);n[i]=e;let l=!1,d;if(Array.isArray(e)){let u=e;d=u[1],(d===null||Mp(u,d)>0)&&(l=!0)}else d=e;if(r)if(c!==0){let h=rd(n[a+1]);n[i+1]=X_(h,a),h!==0&&(n[h+1]=lM(n[h+1],i)),n[a+1]=$8(n[a+1],i)}else n[i+1]=X_(a,0),a!==0&&(n[a+1]=lM(n[a+1],i)),a=i;else n[i+1]=X_(c,0),a===0?a=i:n[c+1]=lM(n[c+1],i),c=i;l&&(n[i+1]=rS(n[i+1])),$P(n,d,i,!0),$P(n,d,i,!1),Y8(t,d,n,i,o),s=X_(a,c),o?t.classBindings=s:t.styleBindings=s}function Y8(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Mp(o,t)>=0&&(e[i+1]=oS(e[i+1]))}function $P(n,t,e,i){let r=n[e+1],o=t===null,s=i?rd(r):Qu(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];Z8(c,t)&&(a=!0,n[s+1]=i?oS(l):rS(l)),s=i?rd(l):Qu(l)}a&&(n[e+1]=i?rS(r):oS(r))}function Z8(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Mp(n,t)>=0:!1}var Qn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Dj(n){return n.substring(Qn.key,Qn.keyEnd)}function Q8(n){return n.substring(Qn.value,Qn.valueEnd)}function K8(n){return Pj(n),Aj(n,Ku(n,0,Qn.textEnd))}function Aj(n,t){let e=Qn.textEnd;return e===t?-1:(t=Qn.keyEnd=e$(n,Qn.key=t,e),Ku(n,t,e))}function J8(n){return Pj(n),Ij(n,Ku(n,0,Qn.textEnd))}function Ij(n,t){let e=Qn.textEnd,i=Qn.key=Ku(n,t,e);return e===i?-1:(i=Qn.keyEnd=t$(n,i,e),i=qP(n,i,e,58),i=Qn.value=Ku(n,i,e),i=Qn.valueEnd=i$(n,i,e),qP(n,i,e,59))}function Pj(n){Qn.key=0,Qn.keyEnd=0,Qn.value=0,Qn.valueEnd=0,Qn.textEnd=n.length}function Ku(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function e$(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function t$(n,t,e){let i;for(;t<e&&((i=n.charCodeAt(t))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)t++;return t}function qP(n,t,e,i){return t=Ku(n,t,e),t<e&&t++,t}function i$(n,t,e){let i=-1,r=-1,o=-1,s=t,a=s;for(;s<e;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=XP(n,c,s,e):t===s-4&&o===85&&r===82&&i===76&&c===40?a=s=XP(n,41,s,e):c>32&&(a=s),o=r,r=i,i=c&-33}return a}function XP(n,t,e,i){let r=-1,o=e;for(;o<i;){let s=n.charCodeAt(o++);if(s==t&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function j(n,t,e){let i=Nt(),r=ad();if(Mo(i,r,t)){let o=ln(),s=Wb();QS(o,s,i,n,t,i[mn],e,!1)}return j}function sS(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";JS(n,e,o[s],s,i)}function $o(n,t,e){return Fj(n,t,e,!1),$o}function Wt(n,t){return Fj(n,t,null,!0),Wt}function av(n){kj(Nj,n$,n,!1)}function n$(n,t){for(let e=J8(t);e>=0;e=Ij(t,e))Nj(n,Dj(t),Q8(t))}function qo(n){kj(d$,r$,n,!0)}function r$(n,t){for(let e=K8(t);e>=0;e=Aj(t,e))Nb(n,Dj(t),!0)}function Fj(n,t,e,i){let r=Nt(),o=ln(),s=$F(2);if(o.firstUpdatePass&&Oj(o,n,s,i),t!==ps&&Mo(r,s,t)){let a=o.data[Wc()];Lj(o,a,r,r[mn],n,r[s+1]=h$(t,e),i,s)}}function kj(n,t,e,i){let r=ln(),o=$F(2);r.firstUpdatePass&&Oj(r,null,o,i);let s=Nt();if(e!==ps&&Mo(s,o,e)){let a=r.data[Wc()];if(Bj(a,i)&&!jj(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(e=pM(c,e||"")),sS(r,a,s,e,i)}else u$(r,a,s,s[mn],s[o+1],s[o+1]=l$(n,t,e),i,o)}}function jj(n,t){return t>=n.expandoStartIndex}function Oj(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[Wc()],s=jj(n,e);Bj(o,i)&&t===null&&!s&&(t=!1),t=o$(r,o,t,i),X8(r,o,t,e,s,i)}}function o$(n,t,e,i){let r=kS(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=dM(null,n,t,e,i),e=yp(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=dM(r,n,t,e,i),o===null){let c=s$(n,t,i);c!==void 0&&Array.isArray(c)&&(c=dM(null,n,t,c[1],i),c=yp(c,t.attrs,i),a$(n,t,i,c))}else o=c$(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function s$(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Qu(i)!==0)return n[rd(i)]}function a$(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[rd(r)]=i}function c$(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=yp(i,s,e)}return yp(i,t.attrs,e)}function dM(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=yp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function yp(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nb(n,s,e?!0:t[++o]))}return n===void 0?null:n}function l$(n,t,e){if(e==null||e==="")return eo;let i=[],r=Go(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function Nj(n,t,e){Nb(n,t,Go(e))}function d$(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Nb(n,i,e)}function u$(n,t,e,i,r,o,s,a){r===ps&&(r=eo);let c=0,l=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,m=null,_;d===u?(c+=2,l+=2,h!==f&&(m=u,_=f)):u===null||d!==null&&d<u?(c+=2,m=d):(l+=2,m=u,_=f),m!==null&&Lj(n,t,e,i,m,_,s,a),d=c<r.length?r[c]:null,u=l<o.length?o[l]:null}}function Lj(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let c=n.data,l=c[a+1],d=q8(l)?YP(c,t,e,r,Qu(l),s):void 0;if(!Cb(d)){Cb(o)||W8(l)&&(o=YP(c,null,e,r,a,s));let u=NF(Wc(),e);eW(i,s,u,r,o)}}function YP(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),d=l?c[1]:c,u=d===null,h=e[r+1];h===ps&&(h=u?eo:void 0);let f=u?tM(h,i):d===i?h:void 0;if(l&&!Cb(f)&&(f=tM(c,i)),Cb(f)&&(a=f,s))return a;let m=n[r+1];r=s?rd(m):Qu(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=tM(c,i))}return a}function Cb(n){return n!==void 0}function h$(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=to(Go(n)))),n}function Bj(n,t){return(n.flags&(t?8:16))!==0}var aS=class{destroy(t){}updateValue(t,e){}swap(t,e){let i=Math.min(t,e),r=Math.max(t,e),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(t,e){this.attach(e,this.detach(t))}};function uM(n,t,e,i,r){return n===e&&Object.is(t,i)?1:Object.is(r(n,t),r(e,i))?-1:0}function f$(n,t,e){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;o<=s&&o<=c;){let l=n.at(o),d=t[o],u=uM(o,l,o,d,e);if(u!==0){u<0&&n.updateValue(o,d),o++;continue}let h=n.at(s),f=t[c],m=uM(s,h,c,f,e);if(m!==0){m<0&&n.updateValue(s,f),s--,c--;continue}let _=e(o,l),g=e(s,h),p=e(o,d);if(Object.is(p,g)){let v=e(c,f);Object.is(v,_)?(n.swap(o,s),n.updateValue(s,f),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(i??=new Eb,r??=QP(n,o,s,e),cS(n,i,o,p))n.updateValue(o,d),o++,s++;else if(r.has(p))i.set(_,n.detach(o)),s--;else{let v=n.create(o,t[o]);n.attach(o,v),o++,s++}}for(;o<=c;)ZP(n,i,e,o,t[o]),o++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let d=n.at(o),u=l.value,h=uM(o,d,o,u,e);if(h!==0)h<0&&n.updateValue(o,u),o++,l=c.next();else{i??=new Eb,r??=QP(n,o,s,e);let f=e(o,u);if(cS(n,i,o,f))n.updateValue(o,u),o++,s++,l=c.next();else if(!r.has(f))n.attach(o,n.create(o,u)),o++,s++,l=c.next();else{let m=e(o,d);i.set(m,n.detach(o)),s--}}}for(;!l.done;)ZP(n,i,e,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(c=>{n.destroy(c)})}function cS(n,t,e,i){return t!==void 0&&t.has(i)?(n.attach(e,t.get(i)),t.delete(i),!0):!1}function ZP(n,t,e,i,r){if(cS(n,t,i,e(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function QP(n,t,e,i){let r=new Set;for(let o=t;o<=e;o++)r.add(i(o,n.at(o)));return r}var Eb=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,i]of this.kvMap)if(t(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,e)}}};function gn(n,t){ms("NgControlFlow");let e=Nt(),i=ad(),r=e[i]!==ps?e[i]:-1,o=r!==-1?Db(e,rr+r):void 0,s=0;if(Mo(e,i,n)){let a=bi(null);try{if(o!==void 0&&lj(o,s),n!==-1){let c=rr+n,l=Db(e,c),d=hS(e[Ut],c),u=Xu(l,d.tView.ssrId),h=Cp(e,d,t,{dehydratedView:u});Ep(l,h,s,qu(d,u))}}finally{bi(a)}}else if(o!==void 0){let a=cj(o,s);a!==void 0&&(a[wr]=t)}}var lS=class{constructor(t,e,i){this.lContainer=t,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-Mr}};function br(n,t){return t}var dS=class{constructor(t,e,i){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=i}};function ar(n,t,e,i,r,o,s,a,c,l,d,u,h){ms("NgControlFlow");let f=Nt(),m=ln(),_=c!==void 0,g=Nt(),p=a?s.bind(g[wo][wr]):s,v=new dS(_,p);g[rr+n]=v,Tb(f,m,n+1,t,e,i,r,Vc(m.consts,o)),_&&Tb(f,m,n+2,c,l,d,u,Vc(m.consts,h))}var uS=class extends aS{constructor(t,e,i){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Mr}at(t){return this.getLView(t)[wr].$implicit}attach(t,e){let i=e[Gu];this.needsIndexUpdate||=t!==this.length,Ep(this.lContainer,e,t,qu(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,p$(this.lContainer,t)}create(t,e){let i=Xu(this.lContainer,this.templateTNode.tView.ssrId),r=Cp(this.hostLView,this.templateTNode,new lS(this.lContainer,e,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){Jb(t[Ut],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[wr].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[wr].$index=t}getLView(t){return m$(this.lContainer,t)}};function cr(n){let t=bi(null),e=Wc();try{let i=Nt(),r=i[Ut],o=i[e],s=e+1,a=Db(i,s);if(o.liveCollection===void 0){let l=hS(r,s);o.liveCollection=new uS(a,i,l)}else o.liveCollection.reset();let c=o.liveCollection;if(f$(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=ad(),d=c.length===0;if(Mo(i,l,d)){let u=e+2,h=Db(i,u);if(d){let f=hS(r,u),m=Xu(h,f.tView.ssrId),_=Cp(i,f,void 0,{dehydratedView:m});Ep(h,_,0,qu(f,m))}else lj(h,0)}}}finally{bi(t)}}function Db(n,t){return n[t]}function p$(n,t){return _p(n,t)}function m$(n,t){return cj(n,t)}function hS(n,t){return DS(n,t)}function g$(n,t,e,i,r,o){let s=t.consts,a=Vc(s,r),c=nh(t,n,2,i,a);return KS(t,e,c,Vc(s,o)),c.attrs!==null&&yb(c,c.attrs,!1),c.mergedAttrs!==null&&yb(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function H(n,t,e,i){let r=Nt(),o=ln(),s=rr+n,a=r[mn],c=o.firstCreatePass?g$(s,o,r,t,e,i):o.data[s],l=_$(o,r,c,a,t,n);r[s]=l;let d=zb(c);return od(c,!0),Xk(a,l,c),!B8(c)&&$b()&&ev(o,r,l,c),f5()===0&&zc(l,r),p5(),d&&(XS(o,r,c),qS(o,c,r)),i!==null&&YS(r,c),H}function ee(){let n=or();PS()?FS():(n=n.parent,od(n,!1));let t=n;g5(t)&&_5(),m5();let e=ln();return e.firstCreatePass&&(Xb(e,n),ES(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&A5(t)&&sS(e,t,Nt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&I5(t)&&sS(e,t,Nt(),t.stylesWithoutHost,!1),ee}function fe(n,t,e,i){return H(n,t,e,i),ee(),fe}var _$=(n,t,e,i,r,o)=>(qb(!0),Lk(i,r,T5()));function b$(n,t,e,i,r){let o=t.consts,s=Vc(o,i),a=nh(t,n,8,"ng-container",s);s!==null&&yb(a,s,!0);let c=Vc(o,r);return KS(t,e,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function Uj(n,t,e){let i=Nt(),r=ln(),o=n+rr,s=r.firstCreatePass?b$(o,r,i,t,e):r.data[o];od(s,!0);let a=v$(r,i,s,n);return i[o]=a,$b()&&ev(r,i,a,s),zc(a,i),zb(s)&&(XS(r,i,s),qS(r,s,i)),e!=null&&YS(i,s),Uj}function Vj(){let n=or(),t=ln();return PS()?FS():(n=n.parent,od(n,!1)),t.firstCreatePass&&(Xb(t,n),ES(n)&&t.queries.elementEnd(n)),Vj}function rh(n,t,e){return Uj(n,t,e),Vj(),rh}var v$=(n,t,e,i)=>(qb(!0),UG(t[mn],""));function Yt(){return Nt()}function oR(n,t,e){let i=Nt(),r=ad();if(Mo(i,r,t)){let o=ln(),s=Wb(),a=kS(o.data),c=sj(a,s,i);QS(o,s,i,n,t,c,e,!0)}return oR}var Ab="en-US";var y$=Ab;function x$(n){typeof n=="string"&&(y$=n.toLowerCase().replace(/_/g,"-"))}var w$=(n,t,e)=>{};function Le(n,t,e,i){let r=Nt(),o=ln(),s=or();return aR(o,r,r[mn],s,n,t,i),Le}function sR(n,t){let e=or(),i=Nt(),r=ln(),o=kS(r.data),s=sj(o,e,i);return aR(r,i,s,e,n,t),sR}function M$(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[ab],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function aR(n,t,e,i,r,o,s){let a=zb(i),l=n.firstCreatePass&&oj(n),d=t[wr],u=rj(t),h=!0;if(i.type&3||s){let _=Ho(i,t),g=s?s(_):_,p=u.length,v=s?y=>s($s(y[i.index])):i.index,b=null;if(!s&&a&&(b=M$(n,t,r,i.index)),b!==null){let y=b.__ngLastListenerFn__||b;y.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1}else{o=JP(i,t,d,o),w$(_,r,o);let y=e.listen(g,r,o);u.push(o,y),l&&l.push(r,v,p,p+1)}}else o=JP(i,t,d,o);let f=i.outputs,m;if(h&&f!==null&&(m=f[r])){let _=m.length;if(_)for(let g=0;g<_;g+=2){let p=m[g],v=m[g+1],C=t[p][v].subscribe(o),S=u.length;u.push(o,C),l&&l.push(r,i.index,S,-(S+1))}}}function KP(n,t,e,i){let r=bi(null);try{return zs(6,t,e),e(i)!==!1}catch(o){return aj(n,o),!1}finally{zs(7,t,e),bi(r)}}function JP(n,t,e,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?Gc(n.index,t):t;tR(s,5);let a=KP(t,e,i,o),c=r.__ngNextListenerFn__;for(;c;)a=KP(t,e,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function $t(n=1){return R5(n)}function S$(n,t){let e=null,i=k4(n);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){e=r;continue}if(i===null?yF(n,o,!0):N4(i,o))return r}return e}function ae(n){let t=Nt()[wo][no];if(!t.projection){let e=n?n.length:1,i=t.projection=R4(e,null),r=i.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?S$(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function K(n,t=0,e,i,r,o){let s=Nt(),a=ln(),c=i?n+1:null;c!==null&&Tb(s,a,c,i,r,o,null,e);let l=nh(a,rr+n,16,null,e||null);l.projection===null&&(l.projection=t),FS();let u=!s[Gu]||HF();s[wo][no].projection[l.projection]===null&&c!==null?R$(s,a,c):u&&(l.flags&32)!==32&&KG(a,s,l)}function R$(n,t,e){let i=rr+e,r=t.data[i],o=n[i],s=Xu(o,r.tView.ssrId),a=Cp(n,r,void 0,{dehydratedView:s});Ep(o,a,0,qu(r,s))}function Yi(n,t,e,i){b8(n,t,e,i)}function qt(n,t,e){_8(n,t,e)}function ct(n){let t=Nt(),e=ln(),i=qF();jS(i+1);let r=nR(e,i);if(n.dirty&&l5(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=x8(t,i);n.reset(o,eG),n.notifyOnChanges()}return!0}return!1}function lt(){return g8(Nt(),qF())}function T$(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Pt(n){let t=v5();return AS(t,rr+n)}function Ft(n,t=""){let e=Nt(),i=ln(),r=n+rr,o=i.firstCreatePass?nh(i,r,1,t,null):i.data[r],s=C$(i,e,o,t,n);e[r]=s,$b()&&ev(i,e,s,o),od(o,!1)}var C$=(n,t,e,i,r)=>(qb(!0),LG(t[mn],i));function Xc(n){return Ks("",n,""),Xc}function Ks(n,t,e){let i=Nt(),r=G8(i,n,t,e);return r!==ps&&CW(i,Wc(),r),Ks}function oh(n,t,e){Mj(t)&&(t=t());let i=Nt(),r=ad();if(Mo(i,r,t)){let o=ln(),s=Wb();QS(o,s,i,n,t,i[mn],e,!1)}return oh}function Ap(n,t){let e=Mj(n);return e&&n.set(t),e}function sh(n,t){let e=Nt(),i=ln(),r=or();return aR(i,e,e[mn],r,n,t),sh}function E$(n,t,e){let i=ln();if(i.firstCreatePass){let r=Ba(n);fS(e,i.data,i.blueprint,r,!0),fS(t,i.data,i.blueprint,r,!1)}}function fS(n,t,e,i,r){if(n=Br(n),Array.isArray(n))for(let o=0;o<n.length;o++)fS(n[o],t,e,i,r);else{let o=ln(),s=Nt(),a=or(),c=Hu(n)?n:Br(n.provide),l=AF(n),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(Hu(n)||!n.multi){let f=new td(l,r,F),m=fM(c,t,r?d:d+h,u);m===-1?(EM(fb(a,s),o,c),hM(o,n,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[m]=f,s[m]=f)}else{let f=fM(c,t,d+h,u),m=fM(c,t,d,d+h),_=f>=0&&e[f],g=m>=0&&e[m];if(r&&!g||!r&&!_){EM(fb(a,s),o,c);let p=I$(r?A$:D$,e.length,r,i,l);!r&&g&&(e[m].providerFactory=p),hM(o,n,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),s.push(p)}else{let p=zj(e[r?m:f],l,!r&&i);hM(o,n,f>-1?f:m,p)}!r&&i&&g&&e[m].componentProviders++}}}function hM(n,t,e,i){let r=Hu(t),o=X4(t);if(r||o){let c=(o?Br(t.useClass):t).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let d=l.indexOf(e);d===-1?l.push(e,[i,c]):l[d+1].push(i,c)}else l.push(e,c)}}}function zj(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function fM(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function D$(n,t,e,i){return pS(this.multi,[])}function A$(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=id(e,e[Ut],this.providerFactory.index,i);o=a.slice(0,s),pS(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],pS(r,o);return o}function pS(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function I$(n,t,e,i,r){let o=new td(n,e,F);return o.multi=[],o.index=t,o.componentProviders=0,zj(o,r,i&&!e),o}function ie(n,t=[]){return e=>{e.providersResolver=(i,r)=>E$(i,r?r(n):n,t)}}var P$=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=CF(!1,e.type),r=i.length>0?sv([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(de(gr))})}}return n})();function Ti(n){ms("NgStandalone"),n.getStandaloneInjector=t=>t.get(P$).getOrCreateStandaloneInjector(n)}function J(n,t,e){let i=sd()+n,r=Nt();return r[i]===ps?Dp(r,i,e?t.call(e):t()):O8(r,i)}function bt(n,t,e,i){return Hj(Nt(),sd(),n,t,e,i)}function Wn(n,t,e,i,r){return Gj(Nt(),sd(),n,t,e,i,r)}function Js(n,t,e,i,r,o){return F$(Nt(),sd(),n,t,e,i,r,o)}function ah(n,t,e,i,r,o,s){return k$(Nt(),sd(),n,t,e,i,r,o,s)}function cv(n,t){let e=n[t];return e===ps?void 0:e}function Hj(n,t,e,i,r,o){let s=t+e;return Mo(n,s,r)?Dp(n,s+1,o?i.call(o,r):i(r)):cv(n,s+1)}function Gj(n,t,e,i,r,o,s){let a=t+e;return Rb(n,a,r,o)?Dp(n,a+2,s?i.call(s,r,o):i(r,o)):cv(n,a+2)}function F$(n,t,e,i,r,o,s,a){let c=t+e;return N8(n,c,r,o,s)?Dp(n,c+3,a?i.call(a,r,o,s):i(r,o,s)):cv(n,c+3)}function k$(n,t,e,i,r,o,s,a,c){let l=t+e;return L8(n,l,r,o,s,a)?Dp(n,l+4,c?i.call(c,r,o,s,a):i(r,o,s,a)):cv(n,l+4)}function ki(n,t){let e=ln(),i,r=n+rr;e.firstCreatePass?(i=j$(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=Zl(i.type,!0)),s,a=Jr(F);try{let c=hb(!1),l=o();return hb(c),T$(e,Nt(),r,l),l}finally{Jr(a)}}function j$(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Gi(n,t,e){let i=n+rr,r=Nt(),o=AS(r,i);return $j(r,i)?Hj(r,sd(),t,o.transform,e,o):o.transform(e)}function Wj(n,t,e,i){let r=n+rr,o=Nt(),s=AS(o,r);return $j(o,r)?Gj(o,sd(),t,s.transform,e,i,s):s.transform(e,i)}function $j(n,t){return n[Ut].data[t].pure}function lv(n,t){return rv(n,t)}var Y_=null;function O$(n){Y_!==null&&(n.defaultEncapsulation!==Y_.defaultEncapsulation||n.preserveWhitespaces!==Y_.preserveWhitespaces)||(Y_=n)}var dv=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var cR=new Se(""),Ip=new Se(""),uv=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,lR||(N$(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(de($e),de(hv),de(Ip))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),hv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return lR?.findTestabilityInTree(this,e,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function N$(n){lR=n}var lR;function Yc(n){return!!n&&typeof n.then=="function"}function dR(n){return!!n&&typeof n.subscribe=="function"}var fv=new Se(""),qj=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=q(fv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(Yc(o))e.push(o);else if(dR(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pv=new Se("");function L$(){OI(()=>{throw new je(600,!1)})}function B$(n){return n.isBoundToModule}var U$=10;function V$(n,t,e){try{let i=e();return Yc(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}function Xj(n,t){return Array.isArray(t)?t.reduce(Xj,n):pe(pe({},n),t)}var gs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(Q5),this.afterRenderManager=q(Tj),this.zonelessEnabled=q(iR),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new at,this.afterTick=new at,this.componentTypes=[],this.components=[],this.isStable=q(Zs).hasPendingTasks.pipe(dt(e=>!e)),this._injector=q(gr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof vb;if(!this._injector.get(qj).done){let h=!r&&MF(e),f=!1;throw new je(405,f)}let s;r?s=e:s=this._injector.get(Uo).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=B$(s)?void 0:this._injector.get(Va),c=i||s.selector,l=s.create(Xi.NULL,[],c,a),d=l.location.nativeElement,u=l.injector.get(cR,null);return u?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ib(this.components,l),u?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new je(101,!1);let e=bi(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,bi(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(Hc,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<U$;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)z$(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Hb(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;ib(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(pv,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>ib(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new je(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ib(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function z$(n,t,e,i){if(!e&&!Hb(n))return;hj(n,t,e&&!i?0:1)}var mS=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},mv=(()=>{class n{compileModuleSync(e){return new Sb(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=SF(e),o=Ok(r.declarations).reduce((s,a)=>{let c=Uc(a);return c&&s.push(new Zu(c)),s},[]);return new mS(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H$=new Se("");function G$(n,t,e){let i=new Sb(e);return Promise.resolve(i)}function eF(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var W$=(()=>{class n{constructor(){this.zone=q($e),this.changeDetectionScheduler=q(Yu),this.applicationRef=q(gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $$({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new $e(Gt(pe({},Yj()),{scheduleInRootZone:e})),[{provide:$e,useFactory:n},{provide:zu,multi:!0,useFactory:()=>{let i=q(W$,{optional:!0});return()=>i.initialize()}},{provide:zu,multi:!0,useFactory:()=>{let i=q(q$);return()=>{i.initialize()}}},t===!0?{provide:gj,useValue:!0}:[],{provide:_j,useValue:e??uk}]}function Yj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var q$=(()=>{class n{constructor(){this.subscription=new mi,this.initialized=!1,this.zone=q($e),this.pendingTasks=q(Zs)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var X$=(()=>{class n{constructor(){this.appRef=q(gs),this.taskService=q(Zs),this.ngZone=q($e),this.zonelessEnabled=q(iR),this.disableScheduling=q(gj,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new mi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(mb):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(q(_j,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gb||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?DP:hk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y$(){return typeof $localize<"u"&&$localize.locale||Ab}var gv=new Se("",{providedIn:"root",factory:()=>q(gv,di.Optional|di.SkipSelf)||Y$()});var Ib=new Se("");function Z_(n){return!n.moduleRef}function Z$(n){let t=Z_(n)?n.r3Injector:n.moduleRef.injector,e=t.get($e);return e.run(()=>{Z_(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(io,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),Z_(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Ib);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ib);s.add(o),n.moduleRef.onDestroy(()=>{ib(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return V$(i,e,()=>{let o=t.get(qj);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(gv,Ab);if(x$(s||Ab),Z_(n)){let a=t.get(gs);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Q$(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Q$(n,t){let e=n.injector.get(gs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new je(-403,!1);t.push(n)}var Zj=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){let r=i?.scheduleInRootZone,o=()=>Z5(i?.ngZone,Gt(pe({},Yj({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),s=i?.ignoreChangesOutsideZone,a=[$$({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Yu,useExisting:X$}],c=j8(e.moduleType,this.injector,a);return Z$({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=Xj({},i);return G$(this.injector,r,e).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(Ib,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(de(Xi))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),hp=null,Qj=new Se("");function K$(n){if(hp&&!hp.get(Qj,!1))throw new je(400,!1);L$(),hp=n;let t=n.get(Zj);return t6(n),t}function uR(n,t,e=[]){let i=`Platform: ${t}`,r=new Se(i);return(o=[])=>{let s=Kj();if(!s||s.injector.get(Qj,!1)){let a=[...e,...o,{provide:r,useValue:!0}];n?n(a):K$(J$(a,i))}return e6(r)}}function J$(n=[],t){return Xi.create({name:t,providers:[{provide:Bb,useValue:"platform"},{provide:Ib,useValue:new Set([()=>hp=null])},...n]})}function e6(n){let t=Kj();if(!t)throw new je(401,!1);return t}function Kj(){return hp?.get(Zj)??null}function t6(n){n.get(VS,null)?.forEach(e=>e())}function Jj(){return!1}var Ai=(()=>{class n{static{this.__NG_ELEMENT_ID__=i6}}return n})();function i6(n){return n6(or(),Nt(),(n&16)===16)}function n6(n,t,e){if(Vb(n)&&!e){let i=Gc(n.index,t);return new nd(i,i)}else if(n.type&175){let i=t[wo];return new nd(i,t)}return null}var gS=class{constructor(){}supports(t){return t instanceof Map||Rj(t)}create(){return new _S}},_S=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Rj(t)))throw new je(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new bS(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},bS=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function tF(){return new hR([new gS])}var hR=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:tF})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||tF()),deps:[[n,new Ob,new wp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new je(901,!1)}}return n})();var eO=uR(null,"core",[]),tO=(()=>{class n{constructor(e){}static{this.\u0275fac=function(i){return new(i||n)(de(gs))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();function Mi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ld(n,t=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):t}function ch(n,t){ms("NgSignals");let e=FI(n);return t?.equal&&(e[ss].equal=t.equal),e}function Xo(n){let t=bi(null);try{return n()}finally{bi(t)}}var r6=new Se("",{providedIn:"root",factory:()=>q(o6)}),o6=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new vS})}}return n})(),vS=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=q(Zs),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){let e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},yS=class{constructor(t,e,i,r,o,s){this.scheduler=t,this.effectFn=e,this.creationZone=i,this.injector=o,this.watcher=BI(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(io,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function lh(n,t){ms("NgSignals"),!t?.injector&&TS(lh);let e=t?.injector??q(Xi),i=t?.manualCleanup!==!0?e.get(Yb):null,r=new yS(e.get(r6),n,typeof Zone>"u"?null:Zone.current,i,e,t?.allowSignalWrites??!1),o=e.get(Ai,null,{optional:!0});return!o||!(o._lView[Ot]&8)?r.watcher.notify():(o._lView[K_]??=[]).push(r.watcher.notify),r}function iO(n){let t=Uc(n);if(!t)return null;let e=new Zu(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var sO=null;function ea(){return sO}function aO(n){sO??=n}var _v=class{};var yt=new Se(""),_R=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(c6),providedIn:"platform"})}}return n})(),cO=new Se(""),c6=(()=>{class n extends _R{constructor(){super(),this._doc=q(yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ea().getBaseHref(this._doc)}onPopState(e){let i=ea().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ea().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function bR(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function nO(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function Ga(n){return n&&n[0]!=="?"?"?"+n:n}var Wa=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(vR),providedIn:"root"})}}return n})(),lO=new Se(""),vR=(()=>{class n extends Wa{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??q(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bR(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Ga(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+Ga(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+Ga(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(de(_R),de(lO,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dO=(()=>{class n extends Wa{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=bR(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+Ga(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+Ga(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(de(_R),de(lO,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),Zc=(()=>{class n{constructor(e){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=u6(nO(rO(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ga(i))}normalize(e){return n.stripTrailingSlash(d6(this._basePath,rO(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ga(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ga(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=Ga}static{this.joinWithSlash=bR}static{this.stripTrailingSlash=nO}static{this.\u0275fac=function(i){return new(i||n)(de(Wa))}}static{this.\u0275prov=xe({token:n,factory:()=>l6(),providedIn:"root"})}}return n})();function l6(){return new Zc(de(Wa))}function d6(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function rO(n){return n.replace(/\/index.html$/,"")}function u6(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}function vv(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var uO=(()=>{class n{constructor(e){this._viewContainerRef=e,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=Sj(this.ngComponentOutletNgModule,oO(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(oO(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[i,r]of this._inputsUsed)r?(e.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(e.setInput(i,void 0),this._inputsUsed.delete(i))}static{this.\u0275fac=function(i){return new(i||n)(F(_r))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Hn]})}}return n})();function oO(n){return n.get(Va).injector}var hO=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:Xs.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(hR),F(Qs))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),yv=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)(F(_r))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Hn]})}}return n})();function h6(n,t){return new je(2100,!1)}var fR=class{createSubscription(t,e){return Xo(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){Xo(()=>t.unsubscribe())}},pR=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},f6=new pR,p6=new fR,xv=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Yc(e))return f6;if(dR(e))return p6;throw h6(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(F(Ai,16))}}static{this.\u0275pipe=Vo({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Yo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})(),yR="browser",m6="server";function uh(n){return n===yR}function wv(n){return n===m6}var fO=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>uh(q(Vr))?new mR(q(yt),window):new gR})}}return n})(),mR=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=g6(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function g6(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var gR=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},dh=class{};var Fp=class{},Sv=class{},$a=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var wR=class{encodeKey(t){return pO(t)}encodeValue(t){return pO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function _6(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}var b6=/%(\d[a-f0-9])/gi,v6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pO(n){return encodeURIComponent(n).replace(b6,(t,e)=>v6[e]??t)}function Mv(n){return`${n}`}var ta=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new wR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_6(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Mv):[Mv(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Mv(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Mv(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var MR=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function y6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function mO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function gO(n){return typeof Blob<"u"&&n instanceof Blob}function _O(n){return typeof FormData<"u"&&n instanceof FormData}function x6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Pp=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(y6(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new $a,this.context??=new MR,!this.params)this.params=new ta,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||mO(this.body)||gO(this.body)||_O(this.body)||x6(this.body)?this.body:this.body instanceof ta?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||_O(this.body)?null:gO(this.body)?this.body.type||null:mO(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ta?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,d=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),l)),t.setParams&&(d=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),d)),new n(e,i,s,{params:d,headers:l,context:u,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},Kc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Kc||{}),kp=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new $a,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Rv=class n extends kp{constructor(t={}){super(t),this.type=Kc.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},jp=class n extends kp{constructor(t={}){super(t),this.type=Kc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Qc=class extends kp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},wO=200,w6=204;function xR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Op=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Pp)o=e;else{let c;r.headers instanceof $a?c=r.headers:c=new $a(r.headers);let l;r.params&&(r.params instanceof ta?l=r.params:l=new ta({fromObject:r.params})),o=new Pp(e,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=mt(o).pipe(Oa(c=>this.handler.handle(c)));if(e instanceof Pp||r.observe==="events")return s;let a=s.pipe(li(c=>c instanceof jp));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(dt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(dt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(dt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(dt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ta().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,xR(r,i))}post(e,i,r={}){return this.request("POST",e,xR(r,i))}put(e,i,r={}){return this.request("PUT",e,xR(r,i))}static{this.\u0275fac=function(i){return new(i||n)(de(Fp))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),M6=/^\)\]\}',?\n/,S6="X-Request-URL";function bO(n){if(n.url)return n.url;let t=S6.toLocaleLowerCase();return n.headers.get(t)}var R6=(()=>{class n{constructor(){this.fetchImpl=q(SR,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=q($e)}handle(e){return new It(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(RR,o=>i.error(new Qc({error:o}))),()=>r.abort()})}doRequest(e,i,r){return _i(this,null,function*(){let o=this.createRequestInit(e),s;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,pe({signal:i},o)));T6(f),r.next({type:Kc.Sent}),s=yield f}catch(f){r.error(new Qc({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}));return}let a=new $a(s.headers),c=s.statusText,l=bO(s)??e.urlWithParams,d=s.status,u=null;if(e.reportProgress&&r.next(new Rv({headers:a,status:d,statusText:c,url:l})),s.body){let f=s.headers.get("content-length"),m=[],_=s.body.getReader(),g=0,p,v,b=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>_i(this,null,function*(){for(;;){let{done:C,value:S}=yield _.read();if(C)break;if(m.push(S),g+=S.length,e.reportProgress){v=e.responseType==="text"?(v??"")+(p??=new TextDecoder).decode(S,{stream:!0}):void 0;let M=()=>r.next({type:Kc.DownloadProgress,total:f?+f:void 0,loaded:g,partialText:v});b?b.run(M):M()}}}));let y=this.concatChunks(m,g);try{let C=s.headers.get("Content-Type")??"";u=this.parseBody(e,y,C)}catch(C){r.error(new Qc({error:C,headers:new $a(s.headers),status:s.status,statusText:s.statusText,url:bO(s)??e.urlWithParams}));return}}d===0&&(d=u?wO:0),d>=200&&d<300?(r.next(new jp({body:u,headers:a,status:d,statusText:c,url:l})),r.complete()):r.error(new Qc({error:u,headers:a,status:d,statusText:c,url:l}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(M6,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),SR=class{};function RR(){}function T6(n){n.then(RR,RR)}function MO(n,t){return t(n)}function C6(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function E6(n,t,e){return(i,r)=>zo(e,()=>t(i,o=>n(o,r)))}var D6=new Se(""),TR=new Se(""),A6=new Se(""),SO=new Se("",{providedIn:"root",factory:()=>!0});function I6(){let n=null;return(t,e)=>{n===null&&(n=(q(D6,{optional:!0})??[]).reduceRight(C6,MO));let i=q(Zs);if(q(SO)){let o=i.add();return n(t,e).pipe(Us(()=>i.remove(o)))}else return n(t,e)}}var vO=(()=>{class n extends Fp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=q(Zs),this.contributeToStability=q(SO)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(TR),...this.injector.get(A6,[])]));this.chain=i.reduceRight((r,o)=>E6(r,o,this.injector),MO)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Us(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(de(Sv),de(gr))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();var P6=/^\)\]\}',?\n/;function F6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var yO=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new je(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Pi(i.\u0275loadImpl()):mt(null)).pipe(Pn(()=>new It(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((_,g)=>s.setRequestHeader(_,g.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let _=e.detectContentTypeHeader();_!==null&&s.setRequestHeader("Content-Type",_)}if(e.responseType){let _=e.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=e.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=s.statusText||"OK",g=new $a(s.getAllResponseHeaders()),p=F6(s)||e.url;return c=new Rv({headers:g,status:s.status,statusText:_,url:p}),c},d=()=>{let{headers:_,status:g,statusText:p,url:v}=l(),b=null;g!==w6&&(b=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=b?wO:0);let y=g>=200&&g<300;if(e.responseType==="json"&&typeof b=="string"){let C=b;b=b.replace(P6,"");try{b=b!==""?JSON.parse(b):null}catch(S){b=C,y&&(y=!1,b={error:S,text:b})}}y?(o.next(new jp({body:b,headers:_,status:g,statusText:p,url:v||void 0})),o.complete()):o.error(new Qc({error:b,headers:_,status:g,statusText:p,url:v||void 0}))},u=_=>{let{url:g}=l(),p=new Qc({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});o.error(p)},h=!1,f=_=>{h||(o.next(l()),h=!0);let g={type:Kc.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(g.total=_.total),e.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),o.next(g)},m=_=>{let g={type:Kc.UploadProgress,loaded:_.loaded};_.lengthComputable&&(g.total=_.total),o.next(g)};return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",u),s.addEventListener("abort",u),e.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Kc.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",u),e.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(de(dh))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),RO=new Se(""),k6="XSRF-TOKEN",j6=new Se("",{providedIn:"root",factory:()=>k6}),O6="X-XSRF-TOKEN",N6=new Se("",{providedIn:"root",factory:()=>O6}),Tv=class{},L6=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=vv(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de(Vr),de(j6))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();function B6(n,t){let e=n.url.toLowerCase();if(!q(RO)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=q(Tv).getToken(),r=q(N6);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var TO=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(TO||{});function U6(n,t){return{\u0275kind:n,\u0275providers:t}}function V6(...n){let t=[Op,yO,vO,{provide:Fp,useExisting:vO},{provide:Sv,useFactory:()=>q(R6,{optional:!0})??q(yO)},{provide:TR,useValue:B6,multi:!0},{provide:RO,useValue:!0},{provide:Tv,useClass:L6}];for(let e of n)t.push(...e.\u0275providers);return Lb(t)}var xO=new Se("");function z6(){return U6(TO.LegacyInterceptors,[{provide:xO,useFactory:I6},{provide:TR,useExisting:xO,multi:!0}])}var CO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[V6(z6())]})}}return n})();var DR=class extends _v{constructor(){super(...arguments),this.supportsDOMEvents=!0}},AR=class n extends DR{static makeCurrent(){aO(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=G6();return e==null?null:W6(e)}resetBaseElement(){Np=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return vv(document.cookie,t)}},Np=null;function G6(){return Np=Np||document.querySelector("base"),Np?Np.getAttribute("href"):null}function W6(n){return new URL(n,document.baseURI).pathname}var IR=class{addToWindow(t){xo.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new je(5103,!1);return o},xo.getAllAngularTestabilities=()=>t.getAllTestabilities(),xo.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=xo.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};xo.frameworkStabilizers||(xo.frameworkStabilizers=[]),xo.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?ea().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},$6=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),PR=new Se(""),AO=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new je(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(de(PR),de($e))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),Cv=class{constructor(t){this._doc=t}},CR="ng-app-id",IO=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wv(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${CR}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(CR),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(CR,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de(Sp),de(Rp,8),de(Vr))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),ER={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},kR=/%COMP%/g,PO="%COMP%",q6=`_nghost-${PO}`,X6=`_ngcontent-${PO}`,Y6=!0,Z6=new Se("",{providedIn:"root",factory:()=>Y6});function Q6(n){return X6.replace(kR,n)}function K6(n){return q6.replace(kR,n)}function FO(n,t){return t.map(e=>e.replace(kR,n))}var Ev=(()=>{class n{constructor(e,i,r,o,s,a,c,l=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=wv(a),this.defaultRenderer=new Lp(e,s,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Gs.ShadowDom&&(i=Gt(pe({},i),{encapsulation:Gs.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof Dv?r.applyToHost(e):r instanceof Bp&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(i.encapsulation){case Gs.Emulated:o=new Dv(c,l,i,this.appId,d,s,a,u);break;case Gs.ShadowDom:return new FR(c,l,e,i,s,a,this.nonce,u);default:o=new Bp(c,l,i,d,s,a,u);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(de(AO),de(IO),de(Sp),de(Z6),de(yt),de(Vr),de($e),de(Rp))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),Lp=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(ER[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(EO(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(EO(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new je(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=ER[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=ER[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Xs.DashCase|Xs.Important)?t.style.setProperty(e,i,r&Xs.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Xs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=ea().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function EO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var FR=class extends Lp{constructor(t,e,i,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=FO(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bp=class extends Lp{constructor(t,e,i,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?FO(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Dv=class extends Bp{constructor(t,e,i,r,o,s,a,c){let l=r+"-"+i.id;super(t,e,i,o,s,a,c,l),this.contentAttr=Q6(l),this.hostAttr=K6(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},J6=(()=>{class n extends Cv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),DO=["alt","control","meta","shift"],e9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},i9=(()=>{class n extends Cv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ea().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),DO.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(e,i){let r=e9[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),DO.forEach(s=>{if(s!==r){let a=t9[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();function n9(){AR.makeCurrent()}function r9(){return new io}function o9(){return yk(document),document}var s9=[{provide:Vr,useValue:yR},{provide:VS,useValue:n9,multi:!0},{provide:yt,useFactory:o9,deps:[]}],kO=uR(eO,"browser",s9),a9=new Se(""),c9=[{provide:Ip,useClass:IR,deps:[]},{provide:cR,useClass:uv,deps:[$e,hv,Ip]},{provide:uv,useClass:uv,deps:[$e,hv,Ip]}],l9=[{provide:Bb,useValue:"root"},{provide:io,useFactory:r9,deps:[]},{provide:PR,useClass:J6,multi:!0,deps:[yt,$e,Vr]},{provide:PR,useClass:i9,multi:!0,deps:[yt]},Ev,IO,AO,{provide:Hc,useExisting:Ev},{provide:dh,useClass:$6,deps:[]},[]],Av=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Sp,useValue:e.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(de(a9,12))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[...l9,...c9],imports:[Yo,tO]})}}return n})();var jO=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Up=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=de(d9),r},providedIn:"root"})}}return n})(),d9=(()=>{class n extends Up{constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case sr.NONE:return i;case sr.HTML:return qc(i,"HTML")?Go(i):Fk(this._doc,String(i)).toString();case sr.STYLE:return qc(i,"Style")?Go(i):i;case sr.SCRIPT:if(qc(i,"Script"))return Go(i);throw new je(5200,!1);case sr.URL:return qc(i,"URL")?Go(i):Qb(String(i));case sr.RESOURCE_URL:if(qc(i,"ResourceURL"))return Go(i);throw new je(5201,!1);default:throw new je(5202,!1)}}bypassSecurityTrustHtml(e){return Mk(e)}bypassSecurityTrustStyle(e){return Sk(e)}bypassSecurityTrustScript(e){return Rk(e)}bypassSecurityTrustUrl(e){return Tk(e)}bypassSecurityTrustResourceUrl(e){return Ck(e)}static{this.\u0275fac=function(i){return new(i||n)(de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oi="primary",em=Symbol("RouteTitle"),UR=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function _h(n){return new UR(n)}function u9(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function h9(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ia(n[e],t[e]))return!1;return!0}function ia(n,t){let e=n?VR(n):void 0,i=t?VR(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!$O(n[r],t[r]))return!1;return!0}function VR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $O(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function qO(n){return n.length>0?n[n.length-1]:null}function tl(n){return ap(n)?n:Yc(n)?Pi(Promise.resolve(n)):mt(n)}var f9={exact:YO,subset:ZO},XO={exact:p9,subset:m9,ignored:()=>!0};function OO(n,t,e){return f9[e.paths](n.root,t.root,e.matrixParams)&&XO[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function p9(n,t){return ia(n,t)}function YO(n,t,e){if(!hd(n.segments,t.segments)||!Fv(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!YO(n.children[i],t.children[i],e))return!1;return!0}function m9(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$O(n[e],t[e]))}function ZO(n,t,e){return QO(n,t,t.segments,e)}function QO(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!hd(r,e)||t.hasChildren()||!Fv(r,e,i))}else if(n.segments.length===e.length){if(!hd(n.segments,e)||!Fv(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!ZO(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!hd(n.segments,r)||!Fv(n.segments,r,i)||!n.children[oi]?!1:QO(n.children[oi],t,o,i)}}function Fv(n,t,e){return t.every((i,r)=>XO[e](n[r].parameters,i.parameters))}var Xa=class{constructor(t=new ji([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=_h(this.queryParams),this._queryParamMap}toString(){return b9.serialize(this)}},ji=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kv(this)}},ud=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=_h(this.parameters),this._parameterMap}toString(){return JO(this)}};function g9(n,t){return hd(n,t)&&n.every((e,i)=>ia(e.parameters,t[i].parameters))}function hd(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function _9(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===oi&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==oi&&(e=e.concat(t(r,i)))}),e}var tm=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>new bh,providedIn:"root"})}}return n})(),bh=class{parse(t){let e=new HR(t);return new Xa(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Vp(t.root,!0)}`,i=x9(t.queryParams),r=typeof t.fragment=="string"?`#${v9(t.fragment)}`:"";return`${e}${i}${r}`}},b9=new bh;function kv(n){return n.segments.map(t=>JO(t)).join("/")}function Vp(n,t){if(!n.hasChildren())return kv(n);if(t){let e=n.children[oi]?Vp(n.children[oi],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==oi&&i.push(`${r}:${Vp(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=_9(n,(i,r)=>r===oi?[Vp(n.children[oi],!1)]:[`${r}:${Vp(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[oi]!=null?`${kv(n)}/${e[0]}`:`${kv(n)}/(${e.join("//")})`}}function KO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iv(n){return KO(n).replace(/%3B/gi,";")}function v9(n){return encodeURI(n)}function zR(n){return KO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jv(n){return decodeURIComponent(n)}function NO(n){return jv(n.replace(/\+/g,"%20"))}function JO(n){return`${zR(n.path)}${y9(n.parameters)}`}function y9(n){return Object.entries(n).map(([t,e])=>`;${zR(t)}=${zR(e)}`).join("")}function x9(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Iv(e)}=${Iv(r)}`).join("&"):`${Iv(e)}=${Iv(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var w9=/^[^\/()?;#]+/;function OR(n){let t=n.match(w9);return t?t[0]:""}var M9=/^[^\/()?;=#]+/;function S9(n){let t=n.match(M9);return t?t[0]:""}var R9=/^[^=?&#]+/;function T9(n){let t=n.match(R9);return t?t[0]:""}var C9=/^[^&#]+/;function E9(n){let t=n.match(C9);return t?t[0]:""}var HR=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ji([],{}):new ji([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[oi]=new ji(t,e)),i}parseSegment(){let t=OR(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(t),new ud(jv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=S9(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=OR(this.remaining);r&&(i=r,this.capture(i))}t[jv(e)]=jv(i)}parseQueryParam(t){let e=T9(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=E9(this.remaining);s&&(i=s,this.capture(i))}let r=NO(e),o=NO(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=OR(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new je(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oi);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[oi]:new ji([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new je(4011,!1)}};function eN(n){return n.segments.length>0?new ji([],{[oi]:n}):n}function tN(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=tN(r);if(i===oi&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new ji(n.segments,t);return D9(e)}function D9(n){if(n.numberOfChildren===1&&n.children[oi]){let t=n.children[oi];return new ji(n.segments.concat(t.segments),t.children)}return n}function fd(n){return n instanceof Xa}function A9(n,t,e=null,i=null){let r=iN(n);return nN(r,t,e,i)}function iN(n){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new ji(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=eN(i);return t??r}function nN(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return NR(r,r,r,e,i);let o=I9(t);if(o.toRoot())return NR(r,r,new ji([],{}),e,i);let s=P9(o,r,n),a=s.processChildren?Gp(s.segmentGroup,s.index,o.commands):oN(s.segmentGroup,s.index,o.commands);return NR(r,s.segmentGroup,a,e,i)}function Ov(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qp(n){return typeof n=="object"&&n!=null&&n.outlets}function NR(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===t?s=e:s=rN(n,t,e);let a=eN(tN(s));return new Xa(a,o,r)}function rN(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=rN(o,t,e)}),new ji(n.segments,i)}var Nv=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ov(i[0]))throw new je(4003,!1);let r=i.find(qp);if(r&&r!==qO(i))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function I9(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Nv(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Nv(e,t,i)}var ph=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function P9(n,t,e){if(n.isAbsolute)return new ph(t,!0,0);if(!e)return new ph(t,!1,NaN);if(e.parent===null)return new ph(e,!0,0);let i=Ov(n.commands[0])?0:1,r=e.segments.length-1+i;return F9(e,r,n.numberOfDoubleDots)}function F9(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new je(4005,!1);r=i.segments.length}return new ph(i,!1,r-o)}function k9(n){return qp(n[0])?n[0].outlets:{[oi]:n}}function oN(n,t,e){if(n??=new ji([],{}),n.segments.length===0&&n.hasChildren())return Gp(n,t,e);let i=j9(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ji(n.segments.slice(0,i.pathIndex),{});return o.children[oi]=new ji(n.segments.slice(i.pathIndex),n.children),Gp(o,0,r)}else return i.match&&r.length===0?new ji(n.segments,{}):i.match&&!n.hasChildren()?GR(n,t,e):i.match?Gp(n,0,r):GR(n,t,e)}function Gp(n,t,e){if(e.length===0)return new ji(n.segments,{});{let i=k9(e),r={};if(Object.keys(i).some(o=>o!==oi)&&n.children[oi]&&n.numberOfChildren===1&&n.children[oi].segments.length===0){let o=Gp(n.children[oi],t,e);return new ji(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=oN(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ji(n.segments,r)}}function j9(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(qp(a))break;let c=`${a}`,l=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!BO(c,l,s))return o;i+=2}else{if(!BO(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function GR(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(qp(o)){let c=O9(o.outlets);return new ji(i,c)}if(r===0&&Ov(e[0])){let c=n.segments[t];i.push(new ud(c.path,LO(e[0]))),r++;continue}let s=qp(o)?o.outlets[oi]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&Ov(a)?(i.push(new ud(s,LO(a))),r+=2):(i.push(new ud(s,{})),r++)}return new ji(i,{})}function O9(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=GR(new ji([],{}),0,i))}),t}function LO(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function BO(n,t,e){return n==e.path&&ia(t,e.parameters)}var Wp="imperative",lr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(lr||{}),Zo=class{constructor(t,e){this.id=t,this.url=e}},vh=class extends Zo{constructor(t,e,i="imperative",r=null){super(t,e),this.type=lr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},na=class extends Zo{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=lr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ro=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ro||{}),Lv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Lv||{}),qa=class extends Zo{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=lr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jc=class extends Zo{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=lr.NavigationSkipped}},Xp=class extends Zo{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=lr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bv=class extends Zo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=lr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WR=class extends Zo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=lr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$R=class extends Zo{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=lr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qR=class extends Zo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=lr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XR=class extends Zo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=lr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},YR=class{constructor(t){this.route=t,this.type=lr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ZR=class{constructor(t){this.route=t,this.type=lr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},QR=class{constructor(t){this.snapshot=t,this.type=lr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},KR=class{constructor(t){this.snapshot=t,this.type=lr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JR=class{constructor(t){this.snapshot=t,this.type=lr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eT=class{constructor(t){this.snapshot=t,this.type=lr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uv=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=lr.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Yp=class{},yh=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function N9(n,t){return n.providers&&!n._injector&&(n._injector=sv(n.providers,t,`Route: ${n.path}`)),n._injector??t}function _s(n){return n.outlet||oi}function L9(n,t){let e=n.filter(i=>_s(i)===t);return e.push(...n.filter(i=>_s(i)!==t)),e}function im(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var tT=class{get injector(){return im(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new nm(this.rootInjector),this.attachRef=null}},nm=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new tT(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(de(gr))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vv=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=iT(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=iT(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=nT(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return nT(t,this._root).map(e=>e.value)}};function iT(n,t){if(n===t.value)return t;for(let e of t.children){let i=iT(n,e);if(i)return i}return null}function nT(n,t){if(n===t.value)return[t];for(let e of t.children){let i=nT(n,e);if(i.length)return i.unshift(t),i}return[]}var So=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function fh(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var zv=class extends Vv{constructor(t,e){super(t),this.snapshot=e,hT(this,t)}toString(){return this.snapshot.toString()}};function sN(n){let t=B9(n),e=new Sn([new ud("",{})]),i=new Sn({}),r=new Sn({}),o=new Sn({}),s=new Sn(""),a=new Ya(e,i,o,s,r,oi,n,t.root);return a.snapshot=t.root,new zv(new So(a,[]),t)}function B9(n){let t={},e={},i={},r="",o=new mh([],t,i,r,e,oi,n,null,{});return new Gv("",new So(o,[]))}var Ya=class{constructor(t,e,i,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(dt(l=>l[em]))??mt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dt(t=>_h(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dt(t=>_h(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hv(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:pe(pe({},t.params),n.params),data:pe(pe({},t.data),n.data),resolve:pe(pe(pe(pe({},n.data),t.data),r?.data),n._resolvedData)}:i={params:pe({},n.params),data:pe({},n.data),resolve:pe(pe({},n.data),n._resolvedData??{})},r&&cN(r)&&(i.resolve[em]=r.title),i}var mh=class{get title(){return this.data?.[em]}constructor(t,e,i,r,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_h(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_h(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Gv=class extends Vv{constructor(t,e){super(e),this.url=t,hT(this,e)}toString(){return aN(this._root)}};function hT(n,t){t.value._routerState=n,t.children.forEach(e=>hT(n,e))}function aN(n){let t=n.children.length>0?` { ${n.children.map(aN).join(", ")} } `:"";return`${n.value}${t}`}function LR(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ia(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ia(t.params,e.params)||n.paramsSubject.next(e.params),h9(t.url,e.url)||n.urlSubject.next(e.url),ia(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rT(n,t){let e=ia(n.params,t.params)&&g9(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||rT(n.parent,t.parent))}function cN(n){return typeof n.title=="string"||n.title===null}var fT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oi,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=q(nm),this.location=q(_r),this.changeDetector=q(Ai),this.inputBinder=q(Yv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new oT(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hn]})}}return n})(),oT=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Ya?this.route:t===nm?this.childContexts:this.parent.get(t,e)}},Yv=new Se(""),UO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=$l([i.queryParams,i.params,i.data]).pipe(Pn(([o,s,a],c)=>(a=pe(pe(pe({},o),s),a),c===0?mt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=iO(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();function U9(n,t,e){let i=Zp(n,t._root,e?e._root:void 0);return new zv(i,t)}function Zp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=V9(n,t,e);return new So(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Zp(n,a)),s}}let i=z9(t.value),r=t.children.map(o=>Zp(n,o));return new So(i,r)}}function V9(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Zp(n,i,r);return Zp(n,i)})}function z9(n){return new Ya(new Sn(n.url),new Sn(n.params),new Sn(n.queryParams),new Sn(n.fragment),new Sn(n.data),n.outlet,n.component,n)}var Qp=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},lN="ngNavigationCancelingError";function Wv(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=fd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=dN(!1,Ro.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function dN(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[lN]=!0,e.cancellationCode=t,e}function H9(n){return uN(n)&&fd(n.url)}function uN(n){return!!n&&n[lN]}var G9=(n,t,e,i)=>dt(r=>(new sT(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),sT=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),LR(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=fh(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=fh(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=fh(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=fh(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new eT(o.value.snapshot))}),t.children.length&&this.forwardEvent(new KR(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(LR(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),LR(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},$v=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},gh=class{constructor(t,e){this.component=t,this.route=e}};function W9(n,t,e){let i=n._root,r=t?t._root:null;return zp(i,r,e,[i.value])}function $9(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function wh(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!aF(n)?n:t.get(n):i}function zp(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=fh(t);return n.children.forEach(s=>{q9(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$p(a,e.getContext(s),r)),r}function q9(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=X9(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new $v(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zp(n,t,a?a.children:null,i,r):zp(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new gh(a.outlet.component,s))}else s&&$p(t,a,r),r.canActivateChecks.push(new $v(i)),o.component?zp(n,null,a?a.children:null,i,r):zp(n,null,e,i,r);return r}function X9(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!hd(n.url,t.url);case"pathParamsOrQueryParamsChange":return!hd(n.url,t.url)||!ia(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rT(n,t)||!ia(n.queryParams,t.queryParams);case"paramsChange":default:return!rT(n,t)}}function $p(n,t,e){let i=fh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?$p(s,t.children.getContext(o),e):$p(s,null,e):$p(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new gh(t.outlet.component,r)):e.canDeactivateChecks.push(new gh(null,r)):e.canDeactivateChecks.push(new gh(null,r))}function rm(n){return typeof n=="function"}function Y9(n){return typeof n=="boolean"}function Z9(n){return n&&rm(n.canLoad)}function Q9(n){return n&&rm(n.canActivate)}function K9(n){return n&&rm(n.canActivateChild)}function J9(n){return n&&rm(n.canDeactivate)}function eq(n){return n&&rm(n.canMatch)}function hN(n){return n instanceof ls||n?.name==="EmptyError"}var Pv=Symbol("INITIAL_VALUE");function xh(){return Pn(n=>$l(n.map(t=>t.pipe(xr(1),yo(Pv)))).pipe(dt(t=>{for(let e of t)if(e!==!0){if(e===Pv)return Pv;if(e===!1||tq(e))return e}return!0}),li(t=>t!==Pv),xr(1)))}function tq(n){return fd(n)||n instanceof Qp}function iq(n,t){return Rn(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?mt(Gt(pe({},e),{guardsResult:!0})):nq(s,i,r,n).pipe(Rn(a=>a&&Y9(a)?rq(i,o,n,t):mt(a)),dt(a=>Gt(pe({},e),{guardsResult:a})))})}function nq(n,t,e,i){return Pi(n).pipe(Rn(r=>lq(r.component,r.route,e,t,i)),Vs(r=>r!==!0,!0))}function rq(n,t,e,i){return Pi(t).pipe(Oa(r=>Fc(sq(r.route.parent,i),oq(r.route,i),cq(n,r.path,e),aq(n,r.route,e))),Vs(r=>r!==!0,!0))}function oq(n,t){return n!==null&&t&&t(new JR(n)),mt(!0)}function sq(n,t){return n!==null&&t&&t(new QR(n)),mt(!0)}function aq(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return mt(!0);let r=i.map(o=>B_(()=>{let s=im(t)??e,a=wh(o,s),c=Q9(a)?a.canActivate(t,n):zo(s,()=>a(t,n));return tl(c).pipe(Vs())}));return mt(r).pipe(xh())}function cq(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>$9(s)).filter(s=>s!==null).map(s=>B_(()=>{let a=s.guards.map(c=>{let l=im(s.node)??e,d=wh(c,l),u=K9(d)?d.canActivateChild(i,n):zo(l,()=>d(i,n));return tl(u).pipe(Vs())});return mt(a).pipe(xh())}));return mt(o).pipe(xh())}function lq(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return mt(!0);let s=o.map(a=>{let c=im(t)??r,l=wh(a,c),d=J9(l)?l.canDeactivate(n,t,e,i):zo(c,()=>l(n,t,e,i));return tl(d).pipe(Vs())});return mt(s).pipe(xh())}function dq(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return mt(!0);let o=r.map(s=>{let a=wh(s,n),c=Z9(a)?a.canLoad(t,e):zo(n,()=>a(t,e));return tl(c)});return mt(o).pipe(xh(),fN(i))}function fN(n){return $w(Hi(t=>{if(typeof t!="boolean")throw Wv(n,t)}),dt(t=>t===!0))}function uq(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return mt(!0);let o=r.map(s=>{let a=wh(s,n),c=eq(a)?a.canMatch(t,e):zo(n,()=>a(t,e));return tl(c)});return mt(o).pipe(xh(),fN(i))}var Kp=class{constructor(t){this.segmentGroup=t||null}},Jp=class extends Error{constructor(t){super(),this.urlTree=t}};function hh(n){return Kr(new Kp(n))}function hq(n){return Kr(new je(4e3,!1))}function fq(n){return Kr(dN(!1,Ro.GuardRejected))}var aT=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return mt(i);if(r.numberOfChildren>1||!r.children[oi])return hq(`${t.redirectTo}`);r=r.children[oi]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,params:f,data:m,title:_}=r,g=zo(o,()=>a({params:f,data:m,queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,title:_}));if(g instanceof Xa)throw new Jp(g);e=g}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Jp(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new Xa(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,i,r)}),new ji(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new je(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},cT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pq(n,t,e,i,r){let o=pN(n,t,e);return o.matched?(i=N9(t,i),uq(i,t,e,r).pipe(dt(s=>s===!0?o:pe({},cT)))):mt(o)}function pN(n,t,e){if(t.path==="**")return mq(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?pe({},cT):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||u9)(e,n,t);if(!r)return pe({},cT);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?pe(pe({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function mq(n){return{matched:!0,parameters:n.length>0?qO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function VO(n,t,e,i){return e.length>0&&bq(n,e,i)?{segmentGroup:new ji(t,_q(i,new ji(e,n.children))),slicedSegments:[]}:e.length===0&&vq(n,e,i)?{segmentGroup:new ji(n.segments,gq(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ji(n.segments,n.children),slicedSegments:e}}function gq(n,t,e,i){let r={};for(let o of e)if(Zv(n,t,o)&&!i[_s(o)]){let s=new ji([],{});r[_s(o)]=s}return pe(pe({},i),r)}function _q(n,t){let e={};e[oi]=t;for(let i of n)if(i.path===""&&_s(i)!==oi){let r=new ji([],{});e[_s(i)]=r}return e}function bq(n,t,e){return e.some(i=>Zv(n,t,i)&&_s(i)!==oi)}function vq(n,t,e){return e.some(i=>Zv(n,t,i))}function Zv(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function yq(n,t,e){return t.length===0&&!n.children[e]}var lT=class{};function xq(n,t,e,i,r,o,s="emptyOnly"){return new dT(n,t,e,i,r,s,o).recognize()}var wq=31,dT=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new aT(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new je(4002,`'${t.segmentGroup}'`)}recognize(){let t=VO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(dt(({children:e,rootSnapshot:i})=>{let r=new So(i,e),o=new Gv("",r),s=A9(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new mh([],Object.freeze({}),Object.freeze(pe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,oi,e).pipe(dt(i=>({children:i,rootSnapshot:e})),Lr(i=>{if(i instanceof Jp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Kp?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(dt(s=>s instanceof So?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Pi(o).pipe(Oa(s=>{let a=i.children[s],c=L9(e,s);return this.processSegmentGroup(t,c,a,s,r)}),Jw((s,a)=>(s.push(...a),s)),kc(null),Kw(),Rn(s=>{if(s===null)return hh(i);let a=mN(s);return Mq(a),mt(a)}))}processSegment(t,e,i,r,o,s,a){return Pi(e).pipe(Oa(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,o,s,a).pipe(Lr(l=>{if(l instanceof Kp)return mt(null);throw l}))),Vs(c=>!!c),Lr(c=>{if(hN(c))return yq(i,r,o)?mt(new lT):hh(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,c){return _s(i)!==s&&(s===oi||!Zv(r,o,i))?hh(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,c):hh(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=pN(e,r,o);if(!c)return hh(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wq&&(this.allowRedirects=!1));let f=new mh(o,l,Object.freeze(pe({},this.urlTree.queryParams)),this.urlTree.fragment,zO(r),_s(r),r.component??r._loadedComponent??null,r,HO(r)),m=Hv(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let _=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,f,t);return this.applyRedirects.lineralizeSegments(r,_).pipe(Rn(g=>this.processSegment(t,i,e,g.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=pq(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(Pn(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Pn(({routes:l})=>{let d=i._loadedInjector??t,{parameters:u,consumedSegments:h,remainingSegments:f}=c,m=new mh(h,u,Object.freeze(pe({},this.urlTree.queryParams)),this.urlTree.fragment,zO(i),_s(i),i.component??i._loadedComponent??null,i,HO(i)),_=Hv(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let{segmentGroup:g,slicedSegments:p}=VO(e,h,f,l);if(p.length===0&&g.hasChildren())return this.processChildren(d,l,g,m).pipe(dt(b=>new So(m,b)));if(l.length===0&&p.length===0)return mt(new So(m,[]));let v=_s(i)===o;return this.processSegment(d,l,g,p,v?oi:o,!0,m).pipe(dt(b=>new So(m,b instanceof So?[b]:[])))}))):hh(e)))}getChildConfig(t,e,i){return e.children?mt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?mt({routes:e._loadedRoutes,injector:e._loadedInjector}):dq(t,e,i,this.urlSerializer).pipe(Rn(r=>r?this.configLoader.loadChildren(t,e).pipe(Hi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):fq(e))):mt({routes:[],injector:t})}};function Mq(n){n.sort((t,e)=>t.value.outlet===oi?-1:e.value.outlet===oi?1:t.value.outlet.localeCompare(e.value.outlet))}function Sq(n){let t=n.value.routeConfig;return t&&t.path===""}function mN(n){let t=[],e=new Set;for(let i of n){if(!Sq(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=mN(i.children);t.push(new So(i.value,r))}return t.filter(i=>!e.has(i))}function zO(n){return n.data||{}}function HO(n){return n.resolve||{}}function Rq(n,t,e,i,r,o){return Rn(s=>xq(n,t,e,i,s.extractedUrl,r,o).pipe(dt(({state:a,tree:c})=>Gt(pe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Tq(n,t){return Rn(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return mt(e);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of gN(c))s.add(l);let a=0;return Pi(s).pipe(Oa(c=>o.has(c)?Cq(c,i,n,t):(c.data=Hv(c,c.parent,n).resolve,mt(void 0))),Hi(()=>a++),ju(1),Rn(c=>a===s.size?mt(e):pn))})}function gN(n){let t=n.children.map(e=>gN(e)).flat();return[n,...t]}function Cq(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!cN(r)&&(o[em]=r.title),Eq(o,n,t,i).pipe(dt(s=>(n._resolvedData=s,n.data=Hv(n,n.parent,e).resolve,null)))}function Eq(n,t,e,i){let r=VR(n);if(r.length===0)return mt({});let o={};return Pi(r).pipe(Rn(s=>Dq(n[s],t,e,i).pipe(Vs(),Hi(a=>{if(a instanceof Qp)throw Wv(new bh,a);o[s]=a}))),ju(1),ku(o),Lr(s=>hN(s)?pn:Kr(s)))}function Dq(n,t,e,i){let r=im(t)??i,o=wh(n,r),s=o.resolve?o.resolve(t,e):zo(r,()=>o(t,e));return tl(s)}function BR(n){return Pn(t=>{let e=n(t);return e?Pi(e).pipe(dt(()=>t)):mt(t)})}var _N=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===oi);return i}getResolvedTitleForRoute(e){return e.data[em]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(Aq),providedIn:"root"})}}return n})(),Aq=(()=>{class n extends _N{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(de(jO))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),om=new Se("",{providedIn:"root",factory:()=>({})}),Iq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ti],decls:1,vars:0,template:function(i,r){i&1&&fe(0,"router-outlet")},dependencies:[fT],encapsulation:2})}}return n})();function pT(n){let t=n.children&&n.children.map(pT),e=t?Gt(pe({},n),{children:t}):pe({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==oi&&(e.component=Iq),e}var qv=new Se(""),mT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(mv)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return mt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=tl(e.loadComponent()).pipe(dt(bN),Hi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Us(()=>{this.componentLoaders.delete(e)})),r=new Au(i,()=>new at).pipe(Du());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Pq(i,this.compiler,e,this.onLoadEndListener).pipe(Us(()=>{this.childrenLoaders.delete(i)})),s=new Au(o,()=>new at).pipe(Du());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pq(n,t,e,i){return tl(n.loadChildren()).pipe(dt(bN),Rn(r=>r instanceof bp||Array.isArray(r)?mt(r):Pi(t.compileModuleAsync(r))),dt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(qv,[],{optional:!0,self:!0}).flat()),{routes:s.map(pT),injector:o}}))}function Fq(n){return n&&typeof n=="object"&&"default"in n}function bN(n){return Fq(n)?n.default:n}var gT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(kq),providedIn:"root"})}}return n})(),kq=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vN=new Se(""),yN=new Se("");function jq(n,t,e){let i=n.get(yN),r=n.get(yt);return n.get($e).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),Oq(n))),{onViewTransitionCreated:c}=i;return c&&zo(n,()=>c({transition:a,from:t,to:e})),s})}function Oq(n){return new Promise(t=>{Wo({read:()=>setTimeout(t)},{injector:n})})}var Nq=new Se(""),_T=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=q(mT),this.environmentInjector=q(gr),this.urlSerializer=q(tm),this.rootContexts=q(nm),this.location=q(Zc),this.inputBindingEnabled=q(Yv,{optional:!0})!==null,this.titleStrategy=q(_N),this.options=q(om,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=q(gT),this.createViewTransition=q(vN,{optional:!0}),this.navigationErrorHandler=q(Nq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new YR(r)),i=r=>this.events.next(new ZR(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Gt(pe(pe({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Sn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Wp,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(li(o=>o.id!==0),dt(o=>Gt(pe({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pn(o=>{let s=!1,a=!1;return mt(o).pipe(Pn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ro.SupersededByNewNavigation),pn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Gt(pe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new Jc(c.id,this.urlSerializer.serialize(c.rawUrl),u,Lv.IgnoredSameUrlNavigation)),c.resolve(!1),pn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return mt(c).pipe(Pn(u=>{let h=this.transitions?.getValue();return this.events.next(new vh(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?pn:Promise.resolve(u)}),Rq(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Hi(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Gt(pe({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Bv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:f,restoredState:m,extras:_}=c,g=new vh(u,this.urlSerializer.serialize(h),f,m);this.events.next(g);let p=sN(this.rootComponentType).snapshot;return this.currentTransition=o=Gt(pe({},c),{targetSnapshot:p,urlAfterRedirects:h,extras:Gt(pe({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,mt(o)}else{let u="";return this.events.next(new Jc(c.id,this.urlSerializer.serialize(c.extractedUrl),u,Lv.IgnoredByUrlHandlingStrategy)),c.resolve(!1),pn}}),Hi(c=>{let l=new WR(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),dt(c=>(this.currentTransition=o=Gt(pe({},c),{guards:W9(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),iq(this.environmentInjector,c=>this.events.next(c)),Hi(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Wv(this.urlSerializer,c.guardsResult);let l=new $R(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),li(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ro.GuardRejected),!1)),BR(c=>{if(c.guards.canActivateChecks.length)return mt(c).pipe(Hi(l=>{let d=new qR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Pn(l=>{let d=!1;return mt(l).pipe(Tq(this.paramsInheritanceStrategy,this.environmentInjector),Hi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Ro.NoDataFromResolver)}}))}),Hi(l=>{let d=new XR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),BR(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Hi(h=>{d.component=h}),dt(()=>{})));for(let h of d.children)u.push(...l(h));return u};return $l(l(c.targetSnapshot.root)).pipe(kc(null),xr(1))}),BR(()=>this.afterPreactivation()),Pn(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Pi(d).pipe(dt(()=>o)):mt(o)}),dt(c=>{let l=U9(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Gt(pe({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Hi(()=>{this.events.next(new Yp)}),G9(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),xr(1),Hi({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new na(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),gi(this.transitionAbortSubject.pipe(Hi(c=>{throw c}))),Us(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ro.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Lr(c=>{if(a=!0,uN(c))this.events.next(new qa(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),H9(c)?this.events.next(new yh(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Xp(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=zo(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Qp){let{message:u,cancellationCode:h}=Wv(this.urlSerializer,d);this.events.next(new qa(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new yh(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let u=e.errorHandler(c);o.resolve(!!u)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return pn}))}))}cancelNavigationTransition(e,i,r){let o=new qa(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lq(n){return n!==Wp}var Bq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(Uq),providedIn:"root"})}}return n})(),uT=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Uq=(()=>{class n extends uT{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:()=>q(Vq),providedIn:"root"})}}return n})(),Vq=(()=>{class n extends xN{constructor(){super(...arguments),this.location=q(Zc),this.urlSerializer=q(tm),this.options=q(om,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=q(gT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xa,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=sN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof vh)this.stateMemento=this.createStateMemento();else if(e instanceof Jc)this.rawUrlTree=i.initialUrl;else if(e instanceof Bv){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof Yp?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof qa&&(e.code===Ro.GuardRejected||e.code===Ro.NoDataFromResolver)?this.restoreHistory(i):e instanceof Xp?this.restoreHistory(i,!0):e instanceof na&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof Xa?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=pe(pe({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=pe(pe({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hp||{});function wN(n,t){n.events.pipe(li(e=>e instanceof na||e instanceof qa||e instanceof Xp||e instanceof Jc),dt(e=>e instanceof na||e instanceof Jc?Hp.COMPLETE:(e instanceof qa?e.code===Ro.Redirect||e.code===Ro.SupersededByNewNavigation:!1)?Hp.REDIRECTING:Hp.FAILED),li(e=>e!==Hp.REDIRECTING),xr(1)).subscribe(()=>{t()})}function zq(n){throw n}var Hq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},el=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=q(dv),this.stateManager=q(xN),this.options=q(om,{optional:!0})||{},this.pendingTasks=q(Zs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=q(_T),this.urlSerializer=q(tm),this.location=q(Zc),this.urlHandlingStrategy=q(gT),this._events=new at,this.errorHandler=this.options.errorHandler||zq,this.navigated=!1,this.routeReuseStrategy=q(Bq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=q(qv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!q(Yv,{optional:!0}),this.eventsSubscription=new mi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof qa&&i.code!==Ro.Redirect&&i.code!==Ro.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof na)this.navigated=!0;else if(i instanceof yh){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=pe({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Lq(r.source)},s);this.scheduleNavigation(a,Wp,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}$q(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=pe({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(pT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=pe(pe({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=iN(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),u=this.currentUrlTree.root}return nN(u,e,d,l??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=fd(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Wp,null,i)}navigate(e,i={skipLocationChange:!1}){return Wq(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=pe({},Hq):i===!1?r=pe({},Gq):r=i,fd(e))return OO(this.currentUrlTree,e,r);let o=this.parseUrl(e);return OO(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((u,h)=>{a=u,c=h});let d=this.pendingTasks.add();return wN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wq(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new je(4008,!1)}function $q(n){return!(n instanceof Yp)&&!(n instanceof yh)}var MN=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new at,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(l=>{l instanceof na&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fd(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:kk(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:fd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(F(el),F(Ya),$c("tabindex"),F(Qs),F(et),F(Wa))}}static{this.\u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Le("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Li("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Mi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Mi],replaceUrl:[2,"replaceUrl","replaceUrl",Mi],routerLink:"routerLink"},standalone:!0,features:[dn,Hn]})}}return n})();var Xv=class{};var qq=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(li(e=>e instanceof na),Oa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=sv(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Pi(r).pipe(Pc())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=mt(null);let o=r.pipe(Rn(s=>s===null?mt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Pi([o,s]).pipe(Pc())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(de(el),de(mv),de(gr),de(Xv),de(mT))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SN=new Se(""),Xq=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof na?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Jc&&e.code===Lv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Uv&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uv(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){ih()}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();function Yq(n){return n.routerState.root}function sm(n,t){return{\u0275kind:n,\u0275providers:t}}function Zq(){let n=q(Xi);return t=>{let e=n.get(gs);if(t!==e.components[0])return;let i=n.get(el),r=n.get(RN);n.get(bT)===1&&i.initialNavigation(),n.get(TN,null,di.Optional)?.setUpPreloading(),n.get(SN,null,di.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var RN=new Se("",{factory:()=>new at}),bT=new Se("",{providedIn:"root",factory:()=>1});function Qq(){return sm(2,[{provide:bT,useValue:0},{provide:fv,multi:!0,deps:[Xi],useFactory:t=>{let e=t.get(cO,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(el),o=t.get(RN);wN(r,()=>{i(!0)}),t.get(_T).afterPreactivation=()=>(i(!0),o.closed?mt(void 0):o),r.initialNavigation()}))}}])}function Kq(){return sm(3,[{provide:fv,multi:!0,useFactory:()=>{let t=q(el);return()=>{t.setUpLocationChangeListener()}}},{provide:bT,useValue:2}])}var TN=new Se("");function Jq(n){return sm(0,[{provide:TN,useExisting:qq},{provide:Xv,useExisting:n}])}function eX(){return sm(8,[UO,{provide:Yv,useExisting:UO}])}function tX(n){let t=[{provide:vN,useValue:jq},{provide:yN,useValue:pe({skipNextTransition:!!n?.skipInitialTransition},n)}];return sm(9,t)}var GO=new Se("ROUTER_FORROOT_GUARD"),iX=[Zc,{provide:tm,useClass:bh},el,nm,{provide:Ya,useFactory:Yq,deps:[el]},mT,[]],vT=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[iX,[],{provide:qv,multi:!0,useValue:e},{provide:GO,useFactory:sX,deps:[[el,new wp,new Ob]]},{provide:om,useValue:i||{}},i?.useHash?rX():oX(),nX(),i?.preloadingStrategy?Jq(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?aX(i):[],i?.bindToComponentInputs?eX().\u0275providers:[],i?.enableViewTransitions?tX().\u0275providers:[],cX()]}}static forChild(e){return{ngModule:n,providers:[{provide:qv,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(de(GO,8))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();function nX(){return{provide:SN,useFactory:()=>{let n=q(fO),t=q($e),e=q(om),i=q(_T),r=q(tm);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Xq(r,i,n,t,e)}}}function rX(){return{provide:Wa,useClass:dO}}function oX(){return{provide:Wa,useClass:vR}}function sX(n){return"guarded"}function aX(n){return[n.initialNavigation==="disabled"?Kq().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Qq().\u0275providers:[]]}var WO=new Se("");function cX(){return[{provide:WO,useFactory:Zq},{provide:pv,multi:!0,useExisting:WO}]}var vl={};yH(vl,{ACESFilmicToneMapping:()=>j2,AddEquation:()=>vr,AddOperation:()=>I2,AdditiveAnimationBlendMode:()=>KE,AdditiveBlending:()=>jd,AgXToneMapping:()=>N2,AlphaFormat:()=>H2,AlwaysCompare:()=>oB,AlwaysDepth:()=>S2,AlwaysStencilFunc:()=>jC,AmbientLight:()=>hf,AnimationAction:()=>zy,AnimationClip:()=>_c,AnimationLoader:()=>lE,AnimationMixer:()=>ng,AnimationObjectGroup:()=>ME,AnimationUtils:()=>IJ,ArcCurve:()=>ay,ArrayCamera:()=>ey,ArrowHelper:()=>VE,AttachedBindMode:()=>cC,Audio:()=>Uy,AudioAnalyser:()=>xE,AudioContext:()=>ig,AudioListener:()=>vE,AudioLoader:()=>_E,AxesHelper:()=>zE,BackSide:()=>Wr,BasicDepthPacking:()=>Q2,BasicShadowMap:()=>dX,BatchedMesh:()=>ry,Bone:()=>$d,BooleanKeyframeTrack:()=>mc,Box2:()=>AE,Box3:()=>vn,Box3Helper:()=>rg,BoxGeometry:()=>Zi,BoxHelper:()=>BE,BufferAttribute:()=>fi,BufferGeometry:()=>gt,BufferGeometryLoader:()=>By,ByteType:()=>U2,Cache:()=>sc,Camera:()=>hl,CameraHelper:()=>LE,CanvasTexture:()=>Xd,CapsuleGeometry:()=>fy,CatmullRomCurve3:()=>cy,CineonToneMapping:()=>k2,CircleGeometry:()=>py,ClampToEdgeWrapping:()=>oo,Clock:()=>co,Color:()=>ge,ColorKeyframeTrack:()=>Qm,ColorManagement:()=>Si,CompressedArrayTexture:()=>nE,CompressedCubeTexture:()=>rE,CompressedTexture:()=>af,CompressedTextureLoader:()=>dE,ConeGeometry:()=>my,ConstantAlphaFactor:()=>x2,ConstantColorFactor:()=>v2,CubeCamera:()=>K0,CubeReflectionMapping:()=>lc,CubeRefractionMapping:()=>ul,CubeTexture:()=>Hd,CubeTextureLoader:()=>uE,CubeUVReflectionMapping:()=>mf,CubicBezierCurve:()=>Vm,CubicBezierCurve3:()=>ly,CubicInterpolant:()=>Iy,CullFaceBack:()=>oC,CullFaceFront:()=>a2,CullFaceFrontBack:()=>lX,CullFaceNone:()=>s2,Curve:()=>Io,CurvePath:()=>hy,CustomBlending:()=>Jd,CustomToneMapping:()=>O2,CylinderGeometry:()=>On,Cylindrical:()=>DE,Data3DTexture:()=>jm,DataArrayTexture:()=>Qh,DataTexture:()=>$r,DataTextureLoader:()=>hE,DataUtils:()=>p7,DecrementStencilOp:()=>bX,DecrementWrapStencilOp:()=>yX,DefaultLoadingManager:()=>MB,DepthFormat:()=>Fd,DepthStencilFormat:()=>Rs,DepthTexture:()=>Ts,DetachedBindMode:()=>B2,DirectionalLight:()=>ml,DirectionalLightHelper:()=>NE,DiscreteInterpolant:()=>Py,DisplayP3ColorSpace:()=>qy,DodecahedronGeometry:()=>gy,DoubleSide:()=>Kn,DstAlphaFactor:()=>ff,DstColorFactor:()=>pf,DynamicCopyUsage:()=>jX,DynamicDrawUsage:()=>DX,DynamicReadUsage:()=>PX,EdgesGeometry:()=>_y,EllipseCurve:()=>Es,EqualCompare:()=>tB,EqualDepth:()=>T2,EqualStencilFunc:()=>SX,EquirectangularReflectionMapping:()=>Tm,EquirectangularRefractionMapping:()=>Cm,Euler:()=>ao,EventDispatcher:()=>jn,ExtrudeGeometry:()=>by,FileLoader:()=>tr,Float16BufferAttribute:()=>GC,Float32BufferAttribute:()=>qe,FloatType:()=>yr,Fog:()=>ef,FogExp2:()=>ty,FramebufferTexture:()=>iE,FrontSide:()=>Ms,Frustum:()=>Gd,GLBufferAttribute:()=>CE,GLSL1:()=>NX,GLSL3:()=>OC,GreaterCompare:()=>iB,GreaterDepth:()=>E2,GreaterEqualCompare:()=>rB,GreaterEqualDepth:()=>C2,GreaterEqualStencilFunc:()=>EX,GreaterStencilFunc:()=>TX,GridHelper:()=>Kd,Group:()=>Er,HalfFloatType:()=>$i,HemisphereLight:()=>df,HemisphereLightHelper:()=>jE,IcosahedronGeometry:()=>cf,ImageBitmapLoader:()=>tg,ImageLoader:()=>Qd,ImageUtils:()=>Z0,IncrementStencilOp:()=>_X,IncrementWrapStencilOp:()=>vX,InstancedBufferAttribute:()=>Cs,InstancedBufferGeometry:()=>Ly,InstancedInterleavedBuffer:()=>TE,InstancedMesh:()=>fl,Int16BufferAttribute:()=>zC,Int32BufferAttribute:()=>HC,Int8BufferAttribute:()=>BC,IntType:()=>$E,InterleavedBuffer:()=>hc,InterleavedBufferAttribute:()=>la,Interpolant:()=>pc,InterpolateDiscrete:()=>Vd,InterpolateLinear:()=>zd,InterpolateSmooth:()=>X0,InvertStencilOp:()=>xX,KeepStencilOp:()=>Td,KeyframeTrack:()=>Po,LOD:()=>ny,LatheGeometry:()=>$m,Layers:()=>Kh,LessCompare:()=>eB,LessDepth:()=>R2,LessEqualCompare:()=>eD,LessEqualDepth:()=>Rm,LessEqualStencilFunc:()=>RX,LessStencilFunc:()=>MX,Light:()=>_a,LightProbe:()=>Oy,Line:()=>Qi,Line3:()=>IE,LineBasicMaterial:()=>on,LineCurve:()=>zm,LineCurve3:()=>dy,LineDashedMaterial:()=>Ay,LineLoop:()=>of,LineSegments:()=>Dr,LinearDisplayP3ColorSpace:()=>cg,LinearFilter:()=>_n,LinearInterpolant:()=>Zm,LinearMipMapLinearFilter:()=>pX,LinearMipMapNearestFilter:()=>fX,LinearMipmapLinearFilter:()=>Eo,LinearMipmapNearestFilter:()=>Pd,LinearSRGBColorSpace:()=>Nn,LinearToneMapping:()=>P2,LinearTransfer:()=>Dm,Loader:()=>ir,LoaderUtils:()=>Ds,LoadingManager:()=>Km,LoopOnce:()=>Gy,LoopPingPong:()=>Z2,LoopRepeat:()=>Y2,LuminanceAlphaFormat:()=>$2,LuminanceFormat:()=>W2,MOUSE:()=>Ir,Material:()=>un,MaterialLoader:()=>Ny,MathUtils:()=>st,Matrix3:()=>Kt,Matrix4:()=>Be,MaxEquation:()=>h2,Mesh:()=>Ve,MeshBasicMaterial:()=>tn,MeshDepthMaterial:()=>Wd,MeshDistanceMaterial:()=>Bm,MeshLambertMaterial:()=>Ey,MeshMatcapMaterial:()=>Dy,MeshNormalMaterial:()=>fa,MeshPhongMaterial:()=>lf,MeshPhysicalMaterial:()=>qr,MeshStandardMaterial:()=>Ar,MeshToonMaterial:()=>Cy,MinEquation:()=>u2,MirroredRepeatWrapping:()=>Ld,MixOperation:()=>A2,MultiplyBlending:()=>aC,MultiplyOperation:()=>og,NearestFilter:()=>hi,NearestMipMapLinearFilter:()=>hX,NearestMipMapNearestFilter:()=>uX,NearestMipmapLinearFilter:()=>dl,NearestMipmapNearestFilter:()=>sg,NeutralToneMapping:()=>L2,NeverCompare:()=>J2,NeverDepth:()=>M2,NeverStencilFunc:()=>wX,NoBlending:()=>ei,NoColorSpace:()=>ic,NoToneMapping:()=>ac,NormalAnimationBlendMode:()=>Wy,NormalBlending:()=>ws,NotEqualCompare:()=>nB,NotEqualDepth:()=>D2,NotEqualStencilFunc:()=>CX,NumberKeyframeTrack:()=>pa,Object3D:()=>Rt,ObjectLoader:()=>gE,ObjectSpaceNormalMap:()=>K2,OctahedronGeometry:()=>ua,OneFactor:()=>f2,OneMinusConstantAlphaFactor:()=>w2,OneMinusConstantColorFactor:()=>y2,OneMinusDstAlphaFactor:()=>g2,OneMinusDstColorFactor:()=>_2,OneMinusSrcAlphaFactor:()=>Nd,OneMinusSrcColorFactor:()=>m2,OrthographicCamera:()=>Ao,P3Primaries:()=>Im,PCFShadowMap:()=>WE,PCFSoftShadowMap:()=>c2,PMREMGenerator:()=>Lm,Path:()=>Yd,PerspectiveCamera:()=>en,Plane:()=>ur,PlaneGeometry:()=>ca,PlaneHelper:()=>UE,PointLight:()=>pl,PointLightHelper:()=>kE,Points:()=>sf,PointsMaterial:()=>qd,PolarGridHelper:()=>OE,PolyhedronGeometry:()=>da,PositionalAudio:()=>yE,PropertyBinding:()=>Wi,PropertyMixer:()=>Vy,QuadraticBezierCurve:()=>Hm,QuadraticBezierCurve3:()=>Gm,Quaternion:()=>ti,QuaternionKeyframeTrack:()=>ma,QuaternionLinearInterpolant:()=>Fy,RED_GREEN_RGTC2_Format:()=>FC,RED_RGTC1_Format:()=>X2,REVISION:()=>Hy,RGBADepthPacking:()=>$y,RGBAFormat:()=>so,RGBAIntegerFormat:()=>QE,RGBA_ASTC_10x10_Format:()=>CC,RGBA_ASTC_10x5_Format:()=>SC,RGBA_ASTC_10x6_Format:()=>RC,RGBA_ASTC_10x8_Format:()=>TC,RGBA_ASTC_12x10_Format:()=>EC,RGBA_ASTC_12x12_Format:()=>DC,RGBA_ASTC_4x4_Format:()=>gC,RGBA_ASTC_5x4_Format:()=>_C,RGBA_ASTC_5x5_Format:()=>bC,RGBA_ASTC_6x5_Format:()=>vC,RGBA_ASTC_6x6_Format:()=>yC,RGBA_ASTC_8x5_Format:()=>xC,RGBA_ASTC_8x6_Format:()=>wC,RGBA_ASTC_8x8_Format:()=>MC,RGBA_BPTC_Format:()=>q0,RGBA_ETC2_EAC_Format:()=>mC,RGBA_PVRTC_2BPPV1_Format:()=>hC,RGBA_PVRTC_4BPPV1_Format:()=>uC,RGBA_S3TC_DXT1_Format:()=>G0,RGBA_S3TC_DXT3_Format:()=>W0,RGBA_S3TC_DXT5_Format:()=>$0,RGBFormat:()=>G2,RGB_BPTC_SIGNED_Format:()=>AC,RGB_BPTC_UNSIGNED_Format:()=>IC,RGB_ETC1_Format:()=>fC,RGB_ETC2_Format:()=>pC,RGB_PVRTC_2BPPV1_Format:()=>dC,RGB_PVRTC_4BPPV1_Format:()=>lC,RGB_S3TC_DXT1_Format:()=>H0,RGFormat:()=>q2,RGIntegerFormat:()=>ZE,RawShaderMaterial:()=>Ty,Ray:()=>aa,Raycaster:()=>Xr,Rec709Primaries:()=>Am,RectAreaLight:()=>ky,RedFormat:()=>eu,RedIntegerFormat:()=>YE,ReinhardToneMapping:()=>F2,RenderTarget:()=>Q0,RepeatWrapping:()=>Ko,ReplaceStencilOp:()=>gX,ReverseSubtractEquation:()=>d2,RingGeometry:()=>vy,SIGNED_RED_GREEN_RGTC2_Format:()=>kC,SIGNED_RED_RGTC1_Format:()=>PC,SRGBColorSpace:()=>kn,SRGBTransfer:()=>Ji,Scene:()=>tf,ShaderChunk:()=>si,ShaderLib:()=>xs,ShaderMaterial:()=>kt,ShadowMaterial:()=>Ry,Shape:()=>cc,ShapeGeometry:()=>yy,ShapePath:()=>HE,ShapeUtils:()=>sa,ShortType:()=>V2,Skeleton:()=>rf,SkeletonHelper:()=>FE,SkinnedMesh:()=>nf,Source:()=>rc,Sphere:()=>En,SphereGeometry:()=>fc,Spherical:()=>gl,SphericalHarmonics3:()=>jy,SplineCurve:()=>Wm,SpotLight:()=>uf,SpotLightHelper:()=>PE,Sprite:()=>iy,SpriteMaterial:()=>Um,SrcAlphaFactor:()=>Od,SrcAlphaSaturateFactor:()=>b2,SrcColorFactor:()=>p2,StaticCopyUsage:()=>kX,StaticDrawUsage:()=>Pm,StaticReadUsage:()=>IX,StereoCamera:()=>bE,StreamCopyUsage:()=>OX,StreamDrawUsage:()=>AX,StreamReadUsage:()=>FX,StringKeyframeTrack:()=>gc,SubtractEquation:()=>l2,SubtractiveBlending:()=>sC,TOUCH:()=>As,TangentSpaceNormalMap:()=>bl,TetrahedronGeometry:()=>xy,Texture:()=>yn,TextureLoader:()=>Jm,TorusGeometry:()=>ha,TorusKnotGeometry:()=>wy,Triangle:()=>oc,TriangleFanDrawMode:()=>gf,TriangleStripDrawMode:()=>ag,TrianglesDrawMode:()=>JE,TubeGeometry:()=>My,UVMapping:()=>Y0,Uint16BufferAttribute:()=>Om,Uint32BufferAttribute:()=>Nm,Uint8BufferAttribute:()=>UC,Uint8ClampedBufferAttribute:()=>VC,Uniform:()=>SE,UniformsGroup:()=>RE,UniformsLib:()=>Ze,UniformsUtils:()=>Bi,UnsignedByteType:()=>dc,UnsignedInt248Type:()=>Ss,UnsignedInt5999Type:()=>z2,UnsignedIntType:()=>Ud,UnsignedShort4444Type:()=>qE,UnsignedShort5551Type:()=>XE,UnsignedShortType:()=>Bd,VSMShadowMap:()=>ra,Vector2:()=>z,Vector3:()=>R,Vector4:()=>yi,VectorKeyframeTrack:()=>ga,VideoTexture:()=>tE,WebGL3DRenderTarget:()=>LC,WebGLArrayRenderTarget:()=>NC,WebGLCoordinateSystem:()=>oa,WebGLCubeRenderTarget:()=>J0,WebGLMultipleRenderTargets:()=>GE,WebGLRenderTarget:()=>ai,WebGLRenderer:()=>uc,WebGLUtils:()=>gB,WebGPUCoordinateSystem:()=>Fm,WireframeGeometry:()=>Sy,WrapAroundEnding:()=>Em,ZeroCurvatureEnding:()=>Dd,ZeroFactor:()=>_l,ZeroSlopeEnding:()=>Ad,ZeroStencilOp:()=>mX,createCanvasElement:()=>aB});var Hy="165",Ir={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},As={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s2=0,oC=1,a2=2,lX=3,dX=0,WE=1,c2=2,ra=3,Ms=0,Wr=1,Kn=2,ei=0,ws=1,jd=2,sC=3,aC=4,Jd=5,vr=100,l2=101,d2=102,u2=103,h2=104,_l=200,f2=201,p2=202,m2=203,Od=204,Nd=205,ff=206,g2=207,pf=208,_2=209,b2=210,v2=211,y2=212,x2=213,w2=214,M2=0,S2=1,R2=2,Rm=3,T2=4,C2=5,E2=6,D2=7,og=0,A2=1,I2=2,ac=0,P2=1,F2=2,k2=3,j2=4,O2=5,N2=6,L2=7,cC="attached",B2="detached",Y0=300,lc=301,ul=302,Tm=303,Cm=304,mf=306,Ko=1e3,oo=1001,Ld=1002,hi=1003,sg=1004,uX=1004,dl=1005,hX=1005,_n=1006,Pd=1007,fX=1007,Eo=1008,pX=1008,dc=1009,U2=1010,V2=1011,Bd=1012,$E=1013,Ud=1014,yr=1015,$i=1016,qE=1017,XE=1018,Ss=1020,z2=35902,H2=1021,G2=1022,so=1023,W2=1024,$2=1025,Fd=1026,Rs=1027,eu=1028,YE=1029,q2=1030,ZE=1031,QE=1033,H0=33776,G0=33777,W0=33778,$0=33779,lC=35840,dC=35841,uC=35842,hC=35843,fC=36196,pC=37492,mC=37496,gC=37808,_C=37809,bC=37810,vC=37811,yC=37812,xC=37813,wC=37814,MC=37815,SC=37816,RC=37817,TC=37818,CC=37819,EC=37820,DC=37821,q0=36492,AC=36494,IC=36495,X2=36283,PC=36284,FC=36285,kC=36286,Gy=2200,Y2=2201,Z2=2202,Vd=2300,zd=2301,X0=2302,Dd=2400,Ad=2401,Em=2402,Wy=2500,KE=2501,JE=0,ag=1,gf=2,Q2=3200,$y=3201,bl=0,K2=1,ic="",kn="srgb",Nn="srgb-linear",qy="display-p3",cg="display-p3-linear",Dm="linear",Ji="srgb",Am="rec709",Im="p3",mX=0,Td=7680,gX=7681,_X=7682,bX=7683,vX=34055,yX=34056,xX=5386,wX=512,MX=513,SX=514,RX=515,TX=516,CX=517,EX=518,jC=519,J2=512,eB=513,tB=514,eD=515,iB=516,nB=517,rB=518,oB=519,Pm=35044,DX=35048,AX=35040,IX=35045,PX=35049,FX=35041,kX=35046,jX=35050,OX=35042,NX="100",OC="300 es",oa=2e3,Fm=2001,jn=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},Rr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],EN=1234567,kd=Math.PI/180,Zh=180/Math.PI;function Do(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Rr[n&255]+Rr[n>>8&255]+Rr[n>>16&255]+Rr[n>>24&255]+"-"+Rr[t&255]+Rr[t>>8&255]+"-"+Rr[t>>16&15|64]+Rr[t>>24&255]+"-"+Rr[e&63|128]+Rr[e>>8&255]+"-"+Rr[e>>16&255]+Rr[e>>24&255]+Rr[i&255]+Rr[i>>8&255]+Rr[i>>16&255]+Rr[i>>24&255]).toLowerCase()}function Cn(n,t,e){return Math.max(t,Math.min(e,n))}function tD(n,t){return(n%t+t)%t}function LX(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function BX(n,t,e){return n!==t?(e-n)/(t-n):0}function xm(n,t,e){return(1-e)*n+e*t}function UX(n,t,e,i){return xm(n,t,1-Math.exp(-e*i))}function VX(n,t=1){return t-Math.abs(tD(n,t*2)-t)}function zX(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function HX(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function GX(n,t){return n+Math.floor(Math.random()*(t-n+1))}function WX(n,t){return n+Math.random()*(t-n)}function $X(n){return n*(.5-Math.random())}function qX(n){n!==void 0&&(EN=n);let t=EN+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function XX(n){return n*kd}function YX(n){return n*Zh}function ZX(n){return(n&n-1)===0&&n!==0}function QX(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function KX(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function JX(n,t,e,i,r){let o=Math.cos,s=Math.sin,a=o(e/2),c=s(e/2),l=o((t+i)/2),d=s((t+i)/2),u=o((t-i)/2),h=s((t-i)/2),f=o((i-t)/2),m=s((i-t)/2);switch(r){case"XYX":n.set(a*d,c*u,c*h,a*l);break;case"YZY":n.set(c*h,a*d,c*u,a*l);break;case"ZXZ":n.set(c*u,c*h,a*d,a*l);break;case"XZX":n.set(a*d,c*m,c*f,a*l);break;case"YXY":n.set(c*f,a*d,c*m,a*l);break;case"ZYZ":n.set(c*m,c*f,a*d,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Gr(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Jt(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var st={DEG2RAD:kd,RAD2DEG:Zh,generateUUID:Do,clamp:Cn,euclideanModulo:tD,mapLinear:LX,inverseLerp:BX,lerp:xm,damp:UX,pingpong:VX,smoothstep:zX,smootherstep:HX,randInt:GX,randFloat:WX,randFloatSpread:$X,seededRandom:qX,degToRad:XX,radToDeg:YX,isPowerOfTwo:ZX,ceilPowerOfTwo:QX,floorPowerOfTwo:KX,setQuaternionFromProperEuler:JX,normalize:Jt,denormalize:Gr},z=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Cn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Kt=class n{constructor(t,e,i,r,o,s,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,c,l)}set(t,e,i,r,o,s,a,c,l){let d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=o,d[5]=c,d[6]=i,d[7]=s,d[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[3],c=i[6],l=i[1],d=i[4],u=i[7],h=i[2],f=i[5],m=i[8],_=r[0],g=r[3],p=r[6],v=r[1],b=r[4],y=r[7],C=r[2],S=r[5],M=r[8];return o[0]=s*_+a*v+c*C,o[3]=s*g+a*b+c*S,o[6]=s*p+a*y+c*M,o[1]=l*_+d*v+u*C,o[4]=l*g+d*b+u*S,o[7]=l*p+d*y+u*M,o[2]=h*_+f*v+m*C,o[5]=h*g+f*b+m*S,o[8]=h*p+f*y+m*M,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8];return e*s*d-e*a*l-i*o*d+i*a*c+r*o*l-r*s*c}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8],u=d*s-a*l,h=a*c-d*o,f=l*o-s*c,m=e*u+i*h+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let _=1/m;return t[0]=u*_,t[1]=(r*l-d*i)*_,t[2]=(a*i-r*s)*_,t[3]=h*_,t[4]=(d*e-r*c)*_,t[5]=(r*o-a*e)*_,t[6]=f*_,t[7]=(i*c-l*e)*_,t[8]=(s*e-i*o)*_,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(i*c,i*l,-i*(c*s+l*a)+s+t,-r*l,r*c,-r*(-l*s+c*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(yT.makeScale(t,e)),this}rotate(t){return this.premultiply(yT.makeRotation(-t)),this}translate(t,e){return this.premultiply(yT.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},yT=new Kt;function sB(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}var e7={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wh(n,t){return new e7[n](t)}function km(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function aB(){let n=km("canvas");return n.style.display="block",n}var DN={};function iD(n){n in DN||(DN[n]=!0,console.warn(n))}function t7(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}var AN=new Kt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),IN=new Kt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qv={[Nn]:{transfer:Dm,primaries:Am,toReference:n=>n,fromReference:n=>n},[kn]:{transfer:Ji,primaries:Am,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[cg]:{transfer:Dm,primaries:Im,toReference:n=>n.applyMatrix3(IN),fromReference:n=>n.applyMatrix3(AN)},[qy]:{transfer:Ji,primaries:Im,toReference:n=>n.convertSRGBToLinear().applyMatrix3(IN),fromReference:n=>n.applyMatrix3(AN).convertLinearToSRGB()}},i7=new Set([Nn,cg]),Si={enabled:!0,_workingColorSpace:Nn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!i7.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,t,e){if(this.enabled===!1||t===e||!t||!e)return n;let i=Qv[t].toReference,r=Qv[e].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,t){return this.convert(n,this._workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this._workingColorSpace)},getPrimaries:function(n){return Qv[n].primaries},getTransfer:function(n){return n===ic?Dm:Qv[n].transfer}};function Xh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function xT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Mh,Z0=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Mh===void 0&&(Mh=km("canvas")),Mh.width=t.width,Mh.height=t.height;let i=Mh.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Mh}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=km("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Xh(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Xh(e[i]/255)*255):e[i]=Xh(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},n7=0,rc=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n7++}),this.uuid=Do(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(wT(r[s].image)):o.push(wT(r[s]))}else o=wT(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function wT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Z0.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var r7=0,yn=(()=>{class n extends jn{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=oo,o=oo,s=_n,a=Eo,c=so,l=dc,d=n.DEFAULT_ANISOTROPY,u=ic){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:r7++}),this.uuid=Do(),this.name="",this.source=new rc(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=l,this.offset=new z(0,0),this.repeat=new z(1,1),this.center=new z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Y0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ko:e.x=e.x-Math.floor(e.x);break;case oo:e.x=e.x<0?0:1;break;case Ld:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ko:e.y=e.y-Math.floor(e.y);break;case oo:e.y=e.y<0?0:1;break;case Ld:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=Y0,n.DEFAULT_ANISOTROPY=1,n})(),yi=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,c=t.elements,l=c[0],d=c[4],u=c[8],h=c[1],f=c[5],m=c[9],_=c[2],g=c[6],p=c[10];if(Math.abs(d-h)<.01&&Math.abs(u-_)<.01&&Math.abs(m-g)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+_)<.1&&Math.abs(m+g)<.1&&Math.abs(l+f+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let b=(l+1)/2,y=(f+1)/2,C=(p+1)/2,S=(d+h)/4,M=(u+_)/4,A=(m+g)/4;return b>y&&b>C?b<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(b),r=S/i,o=M/i):y>C?y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),i=S/r,o=A/r):C<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(C),i=M/o,r=A/o),this.set(i,r,o,e),this}let v=Math.sqrt((g-m)*(g-m)+(u-_)*(u-_)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(g-m)/v,this.y=(u-_)/v,this.z=(h-d)/v,this.w=Math.acos((l+f+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Q0=class extends jn{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new yi(0,0,t,e),this.scissorTest=!1,this.viewport=new yi(0,0,t,e);let r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_n,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new yn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new rc(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ai=class extends Q0{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},Qh=class extends yn{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=hi,this.minFilter=hi,this.wrapR=oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}},NC=class extends ai{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Qh(null,t,e,i),this.texture.isRenderTargetTexture=!0}},jm=class extends yn{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=hi,this.minFilter=hi,this.wrapR=oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},LC=class extends ai{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new jm(null,t,e,i),this.texture.isRenderTargetTexture=!0}},ti=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,a){let c=i[r+0],l=i[r+1],d=i[r+2],u=i[r+3],h=o[s+0],f=o[s+1],m=o[s+2],_=o[s+3];if(a===0){t[e+0]=c,t[e+1]=l,t[e+2]=d,t[e+3]=u;return}if(a===1){t[e+0]=h,t[e+1]=f,t[e+2]=m,t[e+3]=_;return}if(u!==_||c!==h||l!==f||d!==m){let g=1-a,p=c*h+l*f+d*m+u*_,v=p>=0?1:-1,b=1-p*p;if(b>Number.EPSILON){let C=Math.sqrt(b),S=Math.atan2(C,p*v);g=Math.sin(g*S)/C,a=Math.sin(a*S)/C}let y=a*v;if(c=c*g+h*y,l=l*g+f*y,d=d*g+m*y,u=u*g+_*y,g===1-a){let C=1/Math.sqrt(c*c+l*l+d*d+u*u);c*=C,l*=C,d*=C,u*=C}}t[e]=c,t[e+1]=l,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,r,o,s){let a=i[r],c=i[r+1],l=i[r+2],d=i[r+3],u=o[s],h=o[s+1],f=o[s+2],m=o[s+3];return t[e]=a*m+d*u+c*f-l*h,t[e+1]=c*m+d*h+l*u-a*f,t[e+2]=l*m+d*f+a*h-c*u,t[e+3]=d*m-a*u-c*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,c=Math.sin,l=a(i/2),d=a(r/2),u=a(o/2),h=c(i/2),f=c(r/2),m=c(o/2);switch(s){case"XYZ":this._x=h*d*u+l*f*m,this._y=l*f*u-h*d*m,this._z=l*d*m+h*f*u,this._w=l*d*u-h*f*m;break;case"YXZ":this._x=h*d*u+l*f*m,this._y=l*f*u-h*d*m,this._z=l*d*m-h*f*u,this._w=l*d*u+h*f*m;break;case"ZXY":this._x=h*d*u-l*f*m,this._y=l*f*u+h*d*m,this._z=l*d*m+h*f*u,this._w=l*d*u-h*f*m;break;case"ZYX":this._x=h*d*u-l*f*m,this._y=l*f*u+h*d*m,this._z=l*d*m-h*f*u,this._w=l*d*u+h*f*m;break;case"YZX":this._x=h*d*u+l*f*m,this._y=l*f*u+h*d*m,this._z=l*d*m-h*f*u,this._w=l*d*u-h*f*m;break;case"XZY":this._x=h*d*u-l*f*m,this._y=l*f*u-h*d*m,this._z=l*d*m+h*f*u,this._w=l*d*u+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],u=e[10],h=i+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-c)*f,this._y=(o-l)*f,this._z=(s-r)*f}else if(i>a&&i>u){let f=2*Math.sqrt(1+i-a-u);this._w=(d-c)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+l)/f}else if(a>u){let f=2*Math.sqrt(1+a-i-u);this._w=(o-l)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(c+d)/f}else{let f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(o+l)/f,this._y=(c+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Cn(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,a=e._x,c=e._y,l=e._z,d=e._w;return this._x=i*d+s*a+r*l-o*c,this._y=r*d+s*c+o*a-i*l,this._z=o*d+s*l+i*c-r*a,this._w=s*d-i*a-r*c-o*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let f=1-e;return this._w=f*s+e*this._w,this._x=f*i+e*this._x,this._y=f*r+e*this._y,this._z=f*o+e*this._z,this.normalize(),this}let l=Math.sqrt(c),d=Math.atan2(l,a),u=Math.sin((1-e)*d)/l,h=Math.sin(e*d)/l;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},R=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(PN.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(PN.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,c=t.w,l=2*(s*r-a*i),d=2*(a*e-o*r),u=2*(o*i-s*e);return this.x=e+c*l+s*u-a*d,this.y=i+c*d+a*l-o*u,this.z=r+c*u+o*d-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,a=e.y,c=e.z;return this.x=r*c-o*a,this.y=o*s-i*c,this.z=i*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return MT.copy(this).projectOnVector(t),this.sub(MT)}reflect(t){return this.sub(MT.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Cn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},MT=new R,PN=new ti,vn=class{constructor(t=new R(1/0,1/0,1/0),e=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(bs.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(bs.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=bs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,bs):bs.fromBufferAttribute(o,s),bs.applyMatrix4(t.matrixWorld),this.expandByPoint(bs);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Kv.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Kv.copy(i.boundingBox)),Kv.applyMatrix4(t.matrixWorld),this.union(Kv)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,bs),bs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(am),Jv.subVectors(this.max,am),Sh.subVectors(t.a,am),Rh.subVectors(t.b,am),Th.subVectors(t.c,am),il.subVectors(Rh,Sh),nl.subVectors(Th,Rh),pd.subVectors(Sh,Th);let e=[0,-il.z,il.y,0,-nl.z,nl.y,0,-pd.z,pd.y,il.z,0,-il.x,nl.z,0,-nl.x,pd.z,0,-pd.x,-il.y,il.x,0,-nl.y,nl.x,0,-pd.y,pd.x,0];return!ST(e,Sh,Rh,Th,Jv)||(e=[1,0,0,0,1,0,0,0,1],!ST(e,Sh,Rh,Th,Jv))?!1:(e0.crossVectors(il,nl),e=[e0.x,e0.y,e0.z],ST(e,Sh,Rh,Th,Jv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,bs).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(bs).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Za[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Za[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Za[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Za[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Za[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Za[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Za[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Za[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Za),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Za=[new R,new R,new R,new R,new R,new R,new R,new R],bs=new R,Kv=new vn,Sh=new R,Rh=new R,Th=new R,il=new R,nl=new R,pd=new R,am=new R,Jv=new R,e0=new R,md=new R;function ST(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){md.fromArray(n,o);let a=r.x*Math.abs(md.x)+r.y*Math.abs(md.y)+r.z*Math.abs(md.z),c=t.dot(md),l=e.dot(md),d=i.dot(md);if(Math.max(-Math.max(c,l,d),Math.min(c,l,d))>a)return!1}return!0}var o7=new vn,cm=new R,RT=new R,En=class{constructor(t=new R,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):o7.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;cm.subVectors(t,this.center);let e=cm.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(cm,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(RT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(cm.copy(t.center).add(RT)),this.expandByPoint(cm.copy(t.center).sub(RT))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Qa=new R,TT=new R,t0=new R,rl=new R,CT=new R,i0=new R,ET=new R,aa=class{constructor(t=new R,e=new R(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Qa)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Qa.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Qa.copy(this.origin).addScaledVector(this.direction,e),Qa.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){TT.copy(t).add(e).multiplyScalar(.5),t0.copy(e).sub(t).normalize(),rl.copy(this.origin).sub(TT);let o=t.distanceTo(e)*.5,s=-this.direction.dot(t0),a=rl.dot(this.direction),c=-rl.dot(t0),l=rl.lengthSq(),d=Math.abs(1-s*s),u,h,f,m;if(d>0)if(u=s*c-a,h=s*a-c,m=o*d,u>=0)if(h>=-m)if(h<=m){let _=1/d;u*=_,h*=_,f=u*(u+s*h+2*a)+h*(s*u+h+2*c)+l}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h<=-m?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l):h<=m?(u=0,h=Math.min(Math.max(-o,-c),o),f=h*(h+2*c)+l):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(TT).addScaledVector(t0,h),f}intersectSphere(t,e){Qa.subVectors(t.center,this.origin);let i=Qa.dot(this.direction),r=Qa.dot(Qa)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,c=i+s;return c<0?null:a<0?this.at(c,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,a,c,l=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(i=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),d>=0?(o=(t.min.y-h.y)*d,s=(t.max.y-h.y)*d):(o=(t.max.y-h.y)*d,s=(t.min.y-h.y)*d),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(t.min.z-h.z)*u,c=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,c=(t.min.z-h.z)*u),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Qa)!==null}intersectTriangle(t,e,i,r,o){CT.subVectors(e,t),i0.subVectors(i,t),ET.crossVectors(CT,i0);let s=this.direction.dot(ET),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;rl.subVectors(this.origin,t);let c=a*this.direction.dot(i0.crossVectors(rl,i0));if(c<0)return null;let l=a*this.direction.dot(CT.cross(rl));if(l<0||c+l>s)return null;let d=-a*rl.dot(ET);return d<0?null:this.at(d/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Be=class n{constructor(t,e,i,r,o,s,a,c,l,d,u,h,f,m,_,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,c,l,d,u,h,f,m,_,g)}set(t,e,i,r,o,s,a,c,l,d,u,h,f,m,_,g){let p=this.elements;return p[0]=t,p[4]=e,p[8]=i,p[12]=r,p[1]=o,p[5]=s,p[9]=a,p[13]=c,p[2]=l,p[6]=d,p[10]=u,p[14]=h,p[3]=f,p[7]=m,p[11]=_,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/Ch.setFromMatrixColumn(t,0).length(),o=1/Ch.setFromMatrixColumn(t,1).length(),s=1/Ch.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(t.order==="XYZ"){let h=s*d,f=s*u,m=a*d,_=a*u;e[0]=c*d,e[4]=-c*u,e[8]=l,e[1]=f+m*l,e[5]=h-_*l,e[9]=-a*c,e[2]=_-h*l,e[6]=m+f*l,e[10]=s*c}else if(t.order==="YXZ"){let h=c*d,f=c*u,m=l*d,_=l*u;e[0]=h+_*a,e[4]=m*a-f,e[8]=s*l,e[1]=s*u,e[5]=s*d,e[9]=-a,e[2]=f*a-m,e[6]=_+h*a,e[10]=s*c}else if(t.order==="ZXY"){let h=c*d,f=c*u,m=l*d,_=l*u;e[0]=h-_*a,e[4]=-s*u,e[8]=m+f*a,e[1]=f+m*a,e[5]=s*d,e[9]=_-h*a,e[2]=-s*l,e[6]=a,e[10]=s*c}else if(t.order==="ZYX"){let h=s*d,f=s*u,m=a*d,_=a*u;e[0]=c*d,e[4]=m*l-f,e[8]=h*l+_,e[1]=c*u,e[5]=_*l+h,e[9]=f*l-m,e[2]=-l,e[6]=a*c,e[10]=s*c}else if(t.order==="YZX"){let h=s*c,f=s*l,m=a*c,_=a*l;e[0]=c*d,e[4]=_-h*u,e[8]=m*u+f,e[1]=u,e[5]=s*d,e[9]=-a*d,e[2]=-l*d,e[6]=f*u+m,e[10]=h-_*u}else if(t.order==="XZY"){let h=s*c,f=s*l,m=a*c,_=a*l;e[0]=c*d,e[4]=-u,e[8]=l*d,e[1]=h*u+_,e[5]=s*d,e[9]=f*u-m,e[2]=m*u-f,e[6]=a*d,e[10]=_*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(s7,t,a7)}lookAt(t,e,i){let r=this.elements;return To.subVectors(t,e),To.lengthSq()===0&&(To.z=1),To.normalize(),ol.crossVectors(i,To),ol.lengthSq()===0&&(Math.abs(i.z)===1?To.x+=1e-4:To.z+=1e-4,To.normalize(),ol.crossVectors(i,To)),ol.normalize(),n0.crossVectors(To,ol),r[0]=ol.x,r[4]=n0.x,r[8]=To.x,r[1]=ol.y,r[5]=n0.y,r[9]=To.y,r[2]=ol.z,r[6]=n0.z,r[10]=To.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[4],c=i[8],l=i[12],d=i[1],u=i[5],h=i[9],f=i[13],m=i[2],_=i[6],g=i[10],p=i[14],v=i[3],b=i[7],y=i[11],C=i[15],S=r[0],M=r[4],A=r[8],T=r[12],x=r[1],I=r[5],V=r[9],W=r[13],te=r[2],ne=r[6],B=r[10],G=r[14],U=r[3],se=r[7],Ce=r[11],Ie=r[15];return o[0]=s*S+a*x+c*te+l*U,o[4]=s*M+a*I+c*ne+l*se,o[8]=s*A+a*V+c*B+l*Ce,o[12]=s*T+a*W+c*G+l*Ie,o[1]=d*S+u*x+h*te+f*U,o[5]=d*M+u*I+h*ne+f*se,o[9]=d*A+u*V+h*B+f*Ce,o[13]=d*T+u*W+h*G+f*Ie,o[2]=m*S+_*x+g*te+p*U,o[6]=m*M+_*I+g*ne+p*se,o[10]=m*A+_*V+g*B+p*Ce,o[14]=m*T+_*W+g*G+p*Ie,o[3]=v*S+b*x+y*te+C*U,o[7]=v*M+b*I+y*ne+C*se,o[11]=v*A+b*V+y*B+C*Ce,o[15]=v*T+b*W+y*G+C*Ie,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],c=t[9],l=t[13],d=t[2],u=t[6],h=t[10],f=t[14],m=t[3],_=t[7],g=t[11],p=t[15];return m*(+o*c*u-r*l*u-o*a*h+i*l*h+r*a*f-i*c*f)+_*(+e*c*f-e*l*h+o*s*h-r*s*f+r*l*d-o*c*d)+g*(+e*l*u-e*a*f-o*s*u+i*s*f+o*a*d-i*l*d)+p*(-r*a*d-e*c*u+e*a*h+r*s*u-i*s*h+i*c*d)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8],u=t[9],h=t[10],f=t[11],m=t[12],_=t[13],g=t[14],p=t[15],v=u*g*l-_*h*l+_*c*f-a*g*f-u*c*p+a*h*p,b=m*h*l-d*g*l-m*c*f+s*g*f+d*c*p-s*h*p,y=d*_*l-m*u*l+m*a*f-s*_*f-d*a*p+s*u*p,C=m*u*c-d*_*c-m*a*h+s*_*h+d*a*g-s*u*g,S=e*v+i*b+r*y+o*C;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/S;return t[0]=v*M,t[1]=(_*h*o-u*g*o-_*r*f+i*g*f+u*r*p-i*h*p)*M,t[2]=(a*g*o-_*c*o+_*r*l-i*g*l-a*r*p+i*c*p)*M,t[3]=(u*c*o-a*h*o-u*r*l+i*h*l+a*r*f-i*c*f)*M,t[4]=b*M,t[5]=(d*g*o-m*h*o+m*r*f-e*g*f-d*r*p+e*h*p)*M,t[6]=(m*c*o-s*g*o-m*r*l+e*g*l+s*r*p-e*c*p)*M,t[7]=(s*h*o-d*c*o+d*r*l-e*h*l-s*r*f+e*c*f)*M,t[8]=y*M,t[9]=(m*u*o-d*_*o-m*i*f+e*_*f+d*i*p-e*u*p)*M,t[10]=(s*_*o-m*a*o+m*i*l-e*_*l-s*i*p+e*a*p)*M,t[11]=(d*a*o-s*u*o-d*i*l+e*u*l+s*i*f-e*a*f)*M,t[12]=C*M,t[13]=(d*_*r-m*u*r+m*i*h-e*_*h-d*i*g+e*u*g)*M,t[14]=(m*a*r-s*_*r-m*i*c+e*_*c+s*i*g-e*a*g)*M,t[15]=(s*u*r-d*a*r+d*i*c-e*u*c-s*i*h+e*a*h)*M,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,a=t.y,c=t.z,l=o*s,d=o*a;return this.set(l*s+i,l*a-r*c,l*c+r*a,0,l*a+r*c,d*a+i,d*c-r*s,0,l*c-r*a,d*c+r*s,o*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,a=e._z,c=e._w,l=o+o,d=s+s,u=a+a,h=o*l,f=o*d,m=o*u,_=s*d,g=s*u,p=a*u,v=c*l,b=c*d,y=c*u,C=i.x,S=i.y,M=i.z;return r[0]=(1-(_+p))*C,r[1]=(f+y)*C,r[2]=(m-b)*C,r[3]=0,r[4]=(f-y)*S,r[5]=(1-(h+p))*S,r[6]=(g+v)*S,r[7]=0,r[8]=(m+b)*M,r[9]=(g-v)*M,r[10]=(1-(h+_))*M,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,o=Ch.set(r[0],r[1],r[2]).length(),s=Ch.set(r[4],r[5],r[6]).length(),a=Ch.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],vs.copy(this);let l=1/o,d=1/s,u=1/a;return vs.elements[0]*=l,vs.elements[1]*=l,vs.elements[2]*=l,vs.elements[4]*=d,vs.elements[5]*=d,vs.elements[6]*=d,vs.elements[8]*=u,vs.elements[9]*=u,vs.elements[10]*=u,e.setFromRotationMatrix(vs),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,r,o,s,a=oa){let c=this.elements,l=2*o/(e-t),d=2*o/(i-r),u=(e+t)/(e-t),h=(i+r)/(i-r),f,m;if(a===oa)f=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===Fm)f=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=u,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=m,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,i,r,o,s,a=oa){let c=this.elements,l=1/(e-t),d=1/(i-r),u=1/(s-o),h=(e+t)*l,f=(i+r)*d,m,_;if(a===oa)m=(s+o)*u,_=-2*u;else if(a===Fm)m=o*u,_=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=_,c[14]=-m,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Ch=new R,vs=new Be,s7=new R(0,0,0),a7=new R(1,1,1),ol=new R,n0=new R,To=new R,FN=new Be,kN=new ti,ao=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],c=o[8],l=o[1],d=o[5],u=o[9],h=o[2],f=o[6],m=o[10];switch(i){case"XYZ":this._y=Math.asin(Cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,m),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Cn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Cn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(c,m));break;case"XZY":this._z=Math.asin(-Cn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return FN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FN,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return kN.setFromEuler(this),this.setFromQuaternion(kN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Kh=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},c7=0,jN=new R,Eh=new ti,Ka=new Be,r0=new R,lm=new R,l7=new R,d7=new ti,ON=new R(1,0,0),NN=new R(0,1,0),LN=new R(0,0,1),BN={type:"added"},u7={type:"removed"},Dh={type:"childadded",child:null},DT={type:"childremoved",child:null},Rt=(()=>{class n extends jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:c7++}),this.uuid=Do(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new R,i=new ao,r=new ti,o=new R(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Be},normalMatrix:{value:new Kt}}),this.matrix=new Be,this.matrixWorld=new Be,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Kh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Eh.setFromAxisAngle(e,i),this.quaternion.multiply(Eh),this}rotateOnWorldAxis(e,i){return Eh.setFromAxisAngle(e,i),this.quaternion.premultiply(Eh),this}rotateX(e){return this.rotateOnAxis(ON,e)}rotateY(e){return this.rotateOnAxis(NN,e)}rotateZ(e){return this.rotateOnAxis(LN,e)}translateOnAxis(e,i){return jN.copy(e).applyQuaternion(this.quaternion),this.position.add(jN.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(ON,e)}translateY(e){return this.translateOnAxis(NN,e)}translateZ(e){return this.translateOnAxis(LN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ka.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?r0.copy(e):r0.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),lm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ka.lookAt(lm,r0,this.up):Ka.lookAt(r0,lm,this.up),this.quaternion.setFromRotationMatrix(Ka),o&&(Ka.extractRotation(o.matrixWorld),Eh.setFromRotationMatrix(Ka),this.quaternion.premultiply(Eh.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(BN),Dh.child=e,this.dispatchEvent(Dh),Dh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(u7),DT.child=e,this.dispatchEvent(DT),DT.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ka.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ka.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ka),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(BN),Dh.child=e,this.dispatchEvent(Dh),Dh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lm,e,l7),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lm,d7,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++){let s=i[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++){let c=o[s];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let d=0,u=l.length;d<u;d++){let h=l[d];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,d=this.material.length;l<d;l++)c.push(s(e.materials,this.material[l]));o.material=c}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];o.animations.push(s(e.animations,l))}}if(i){let c=a(e.geometries),l=a(e.materials),d=a(e.textures),u=a(e.images),h=a(e.shapes),f=a(e.skeletons),m=a(e.animations),_=a(e.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),_.length>0&&(r.nodes=_)}return r.object=o,r;function a(c){let l=[];for(let d in c){let u=c[d];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new R(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),ys=new R,Ja=new R,AT=new R,ec=new R,Ah=new R,Ih=new R,UN=new R,IT=new R,PT=new R,FT=new R,oc=class n{constructor(t=new R,e=new R,i=new R){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),ys.subVectors(t,e),r.cross(ys);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){ys.subVectors(r,e),Ja.subVectors(i,e),AT.subVectors(t,e);let s=ys.dot(ys),a=ys.dot(Ja),c=ys.dot(AT),l=Ja.dot(Ja),d=Ja.dot(AT),u=s*l-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,f=(l*c-a*d)*h,m=(s*d-a*c)*h;return o.set(1-f-m,m,f)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,ec)===null?!1:ec.x>=0&&ec.y>=0&&ec.x+ec.y<=1}static getInterpolation(t,e,i,r,o,s,a,c){return this.getBarycoord(t,e,i,r,ec)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,ec.x),c.addScaledVector(s,ec.y),c.addScaledVector(a,ec.z),c)}static isFrontFacing(t,e,i,r){return ys.subVectors(i,e),Ja.subVectors(t,e),ys.cross(Ja).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ys.subVectors(this.c,this.b),Ja.subVectors(this.a,this.b),ys.cross(Ja).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,a;Ah.subVectors(r,i),Ih.subVectors(o,i),IT.subVectors(t,i);let c=Ah.dot(IT),l=Ih.dot(IT);if(c<=0&&l<=0)return e.copy(i);PT.subVectors(t,r);let d=Ah.dot(PT),u=Ih.dot(PT);if(d>=0&&u<=d)return e.copy(r);let h=c*u-d*l;if(h<=0&&c>=0&&d<=0)return s=c/(c-d),e.copy(i).addScaledVector(Ah,s);FT.subVectors(t,o);let f=Ah.dot(FT),m=Ih.dot(FT);if(m>=0&&f<=m)return e.copy(o);let _=f*l-c*m;if(_<=0&&l>=0&&m<=0)return a=l/(l-m),e.copy(i).addScaledVector(Ih,a);let g=d*m-f*u;if(g<=0&&u-d>=0&&f-m>=0)return UN.subVectors(o,r),a=(u-d)/(u-d+(f-m)),e.copy(r).addScaledVector(UN,a);let p=1/(g+_+h);return s=_*p,a=h*p,e.copy(i).addScaledVector(Ah,s).addScaledVector(Ih,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},cB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sl={h:0,s:0,l:0},o0={h:0,s:0,l:0};function kT(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var ge=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=kn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Si.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Si.workingColorSpace){return this.r=t,this.g=e,this.b=i,Si.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Si.workingColorSpace){if(t=tD(t,1),e=Cn(e,0,1),i=Cn(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=kT(s,o,t+1/3),this.g=kT(s,o,t),this.b=kT(s,o,t-1/3)}return Si.toWorkingColorSpace(this,r),this}setStyle(t,e=kn){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=kn){let i=cB[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Xh(t.r),this.g=Xh(t.g),this.b=Xh(t.b),this}copyLinearToSRGB(t){return this.r=xT(t.r),this.g=xT(t.g),this.b=xT(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=kn){return Si.fromWorkingColorSpace(Tr.copy(this),t),Math.round(Cn(Tr.r*255,0,255))*65536+Math.round(Cn(Tr.g*255,0,255))*256+Math.round(Cn(Tr.b*255,0,255))}getHexString(t=kn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Si.workingColorSpace){Si.fromWorkingColorSpace(Tr.copy(this),e);let i=Tr.r,r=Tr.g,o=Tr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),c,l,d=(a+s)/2;if(a===s)c=0,l=0;else{let u=s-a;switch(l=d<=.5?u/(s+a):u/(2-s-a),s){case i:c=(r-o)/u+(r<o?6:0);break;case r:c=(o-i)/u+2;break;case o:c=(i-r)/u+4;break}c/=6}return t.h=c,t.s=l,t.l=d,t}getRGB(t,e=Si.workingColorSpace){return Si.fromWorkingColorSpace(Tr.copy(this),e),t.r=Tr.r,t.g=Tr.g,t.b=Tr.b,t}getStyle(t=kn){Si.fromWorkingColorSpace(Tr.copy(this),t);let e=Tr.r,i=Tr.g,r=Tr.b;return t!==kn?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(sl),this.setHSL(sl.h+t,sl.s+e,sl.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(sl),t.getHSL(o0);let i=xm(sl.h,o0.h,e),r=xm(sl.s,o0.s,e),o=xm(sl.l,o0.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Tr=new ge;ge.NAMES=cB;var h7=0,un=class extends jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:h7++}),this.uuid=Do(),this.name="",this.type="Material",this.blending=ws,this.side=Ms,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Od,this.blendDst=Nd,this.blendEquation=vr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ge(0,0,0),this.blendAlpha=0,this.depthFunc=Rm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Td,this.stencilZFail=Td,this.stencilZPass=Td,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ws&&(i.blending=this.blending),this.side!==Ms&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Od&&(i.blendSrc=this.blendSrc),this.blendDst!==Nd&&(i.blendDst=this.blendDst),this.blendEquation!==vr&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Rm&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==jC&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Td&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Td&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Td&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},tn=class extends un{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},nc=f7();function f7(){let n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){let l=c-127;l<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):l<-14?(i[c]=1024>>-l-14,i[c|256]=1024>>-l-14|32768,r[c]=-l-1,r[c|256]=-l-1):l<=15?(i[c]=l+15<<10,i[c|256]=l+15<<10|32768,r[c]=13,r[c|256]=13):l<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,d=0;for(;!(l&8388608);)l<<=1,d-=8388608;l&=-8388609,d+=947912704,o[c]=l|d}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function ro(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Cn(n,-65504,65504),nc.floatView[0]=n;let t=nc.uint32View[0],e=t>>23&511;return nc.baseTable[e]+((t&8388607)>>nc.shiftTable[e])}function vm(n){let t=n>>10;return nc.uint32View[0]=nc.mantissaTable[nc.offsetTable[t]+(n&1023)]+nc.exponentTable[t],nc.floatView[0]}var p7={toHalfFloat:ro,fromHalfFloat:vm},$n=new R,s0=new z,fi=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Pm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=yr,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return iD("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)s0.fromBufferAttribute(this,e),s0.applyMatrix3(t),this.setXY(e,s0.x,s0.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)$n.fromBufferAttribute(this,e),$n.applyMatrix3(t),this.setXYZ(e,$n.x,$n.y,$n.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)$n.fromBufferAttribute(this,e),$n.applyMatrix4(t),this.setXYZ(e,$n.x,$n.y,$n.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)$n.fromBufferAttribute(this,e),$n.applyNormalMatrix(t),this.setXYZ(e,$n.x,$n.y,$n.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)$n.fromBufferAttribute(this,e),$n.transformDirection(t),this.setXYZ(e,$n.x,$n.y,$n.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Gr(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Jt(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Gr(e,this.array)),e}setX(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Gr(e,this.array)),e}setY(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Gr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Gr(e,this.array)),e}setW(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array),o=Jt(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Pm&&(t.usage=this.usage),t}},BC=class extends fi{constructor(t,e,i){super(new Int8Array(t),e,i)}},UC=class extends fi{constructor(t,e,i){super(new Uint8Array(t),e,i)}},VC=class extends fi{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}},zC=class extends fi{constructor(t,e,i){super(new Int16Array(t),e,i)}},Om=class extends fi{constructor(t,e,i){super(new Uint16Array(t),e,i)}},HC=class extends fi{constructor(t,e,i){super(new Int32Array(t),e,i)}},Nm=class extends fi{constructor(t,e,i){super(new Uint32Array(t),e,i)}},GC=class extends fi{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=vm(this.array[t*this.itemSize]);return this.normalized&&(e=Gr(e,this.array)),e}setX(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize]=ro(e),this}getY(t){let e=vm(this.array[t*this.itemSize+1]);return this.normalized&&(e=Gr(e,this.array)),e}setY(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+1]=ro(e),this}getZ(t){let e=vm(this.array[t*this.itemSize+2]);return this.normalized&&(e=Gr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+2]=ro(e),this}getW(t){let e=vm(this.array[t*this.itemSize+3]);return this.normalized&&(e=Gr(e,this.array)),e}setW(t,e){return this.normalized&&(e=Jt(e,this.array)),this.array[t*this.itemSize+3]=ro(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array)),this.array[t+0]=ro(e),this.array[t+1]=ro(i),this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array)),this.array[t+0]=ro(e),this.array[t+1]=ro(i),this.array[t+2]=ro(r),this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array),o=Jt(o,this.array)),this.array[t+0]=ro(e),this.array[t+1]=ro(i),this.array[t+2]=ro(r),this.array[t+3]=ro(o),this}},qe=class extends fi{constructor(t,e,i){super(new Float32Array(t),e,i)}},m7=0,Qo=new Be,jT=new Rt,Ph=new R,Co=new vn,dm=new vn,dr=new R,gt=class n extends jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:m7++}),this.uuid=Do(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(sB(t)?Nm:Om)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Kt().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qo.makeRotationFromQuaternion(t),this.applyMatrix4(Qo),this}rotateX(t){return Qo.makeRotationX(t),this.applyMatrix4(Qo),this}rotateY(t){return Qo.makeRotationY(t),this.applyMatrix4(Qo),this}rotateZ(t){return Qo.makeRotationZ(t),this.applyMatrix4(Qo),this}translate(t,e,i){return Qo.makeTranslation(t,e,i),this.applyMatrix4(Qo),this}scale(t,e,i){return Qo.makeScale(t,e,i),this.applyMatrix4(Qo),this}lookAt(t){return jT.lookAt(t),jT.updateMatrix(),this.applyMatrix4(jT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ph).negate(),this.translate(Ph.x,Ph.y,Ph.z),this}setFromPoints(t){let e=[];for(let i=0,r=t.length;i<r;i++){let o=t[i];e.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new qe(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];Co.setFromBufferAttribute(o),this.morphTargetsRelative?(dr.addVectors(this.boundingBox.min,Co.min),this.boundingBox.expandByPoint(dr),dr.addVectors(this.boundingBox.max,Co.max),this.boundingBox.expandByPoint(dr)):(this.boundingBox.expandByPoint(Co.min),this.boundingBox.expandByPoint(Co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new En);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new R,1/0);return}if(t){let i=this.boundingSphere.center;if(Co.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];dm.setFromBufferAttribute(a),this.morphTargetsRelative?(dr.addVectors(Co.min,dm.min),Co.expandByPoint(dr),dr.addVectors(Co.max,dm.max),Co.expandByPoint(dr)):(Co.expandByPoint(dm.min),Co.expandByPoint(dm.max))}Co.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)dr.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(dr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],c=this.morphTargetsRelative;for(let l=0,d=a.count;l<d;l++)dr.fromBufferAttribute(a,l),c&&(Ph.fromBufferAttribute(t,l),dr.add(Ph)),r=Math.max(r,i.distanceToSquared(dr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let A=0;A<i.count;A++)a[A]=new R,c[A]=new R;let l=new R,d=new R,u=new R,h=new z,f=new z,m=new z,_=new R,g=new R;function p(A,T,x){l.fromBufferAttribute(i,A),d.fromBufferAttribute(i,T),u.fromBufferAttribute(i,x),h.fromBufferAttribute(o,A),f.fromBufferAttribute(o,T),m.fromBufferAttribute(o,x),d.sub(l),u.sub(l),f.sub(h),m.sub(h);let I=1/(f.x*m.y-m.x*f.y);isFinite(I)&&(_.copy(d).multiplyScalar(m.y).addScaledVector(u,-f.y).multiplyScalar(I),g.copy(u).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(I),a[A].add(_),a[T].add(_),a[x].add(_),c[A].add(g),c[T].add(g),c[x].add(g))}let v=this.groups;v.length===0&&(v=[{start:0,count:t.count}]);for(let A=0,T=v.length;A<T;++A){let x=v[A],I=x.start,V=x.count;for(let W=I,te=I+V;W<te;W+=3)p(t.getX(W+0),t.getX(W+1),t.getX(W+2))}let b=new R,y=new R,C=new R,S=new R;function M(A){C.fromBufferAttribute(r,A),S.copy(C);let T=a[A];b.copy(T),b.sub(C.multiplyScalar(C.dot(T))).normalize(),y.crossVectors(S,T);let I=y.dot(c[A])<0?-1:1;s.setXYZW(A,b.x,b.y,b.z,I)}for(let A=0,T=v.length;A<T;++A){let x=v[A],I=x.start,V=x.count;for(let W=I,te=I+V;W<te;W+=3)M(t.getX(W+0)),M(t.getX(W+1)),M(t.getX(W+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new R,o=new R,s=new R,a=new R,c=new R,l=new R,d=new R,u=new R;if(t)for(let h=0,f=t.count;h<f;h+=3){let m=t.getX(h+0),_=t.getX(h+1),g=t.getX(h+2);r.fromBufferAttribute(e,m),o.fromBufferAttribute(e,_),s.fromBufferAttribute(e,g),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(i,m),c.fromBufferAttribute(i,_),l.fromBufferAttribute(i,g),a.add(d),c.add(d),l.add(d),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(_,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),o.fromBufferAttribute(e,h+1),s.fromBufferAttribute(e,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)dr.fromBufferAttribute(t,e),dr.normalize(),t.setXYZ(e,dr.x,dr.y,dr.z)}toNonIndexed(){function t(a,c){let l=a.array,d=a.itemSize,u=a.normalized,h=new l.constructor(c.length*d),f=0,m=0;for(let _=0,g=c.length;_<g;_++){a.isInterleavedBufferAttribute?f=c[_]*a.data.stride+a.offset:f=c[_]*d;for(let p=0;p<d;p++)h[m++]=l[f++]}return new fi(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=t(c,i);e.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let d=0,u=l.length;d<u;d++){let h=l[d],f=t(h,i);c.push(f)}e.morphAttributes[a]=c}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(t[l]=c[l]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let c in i){let l=i[c];t.data.attributes[c]=l.toJSON(t.data)}let r={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u];d.push(f.toJSON(t.data))}d.length>0&&(r[c]=d,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let r=t.attributes;for(let l in r){let d=r[l];this.setAttribute(l,d.clone(e))}let o=t.morphAttributes;for(let l in o){let d=[],u=o[l];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(e));this.morphAttributes[l]=d}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let l=0,d=s.length;l<d;l++){let u=s[l];this.addGroup(u.start,u.count,u.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},VN=new Be,gd=new aa,a0=new En,zN=new R,Fh=new R,kh=new R,jh=new R,OT=new R,c0=new R,l0=new z,d0=new z,u0=new z,HN=new R,GN=new R,WN=new R,h0=new R,f0=new R,Ve=class extends Rt{constructor(t=new gt,e=new tn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){c0.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let d=a[c],u=o[c];d!==0&&(OT.fromBufferAttribute(u,t),s?c0.addScaledVector(OT,d):c0.addScaledVector(OT.sub(e),d))}e.add(c0)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),a0.copy(i.boundingSphere),a0.applyMatrix4(o),gd.copy(t.ray).recast(t.near),!(a0.containsPoint(gd.origin)===!1&&(gd.intersectSphere(a0,zN)===null||gd.origin.distanceToSquared(zN)>(t.far-t.near)**2))&&(VN.copy(o).invert(),gd.copy(t.ray).applyMatrix4(VN),!(i.boundingBox!==null&&gd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,gd)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,_=h.length;m<_;m++){let g=h[m],p=s[g.materialIndex],v=Math.max(g.start,f.start),b=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let y=v,C=b;y<C;y+=3){let S=a.getX(y),M=a.getX(y+1),A=a.getX(y+2);r=p0(this,p,t,i,l,d,u,S,M,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{let m=Math.max(0,f.start),_=Math.min(a.count,f.start+f.count);for(let g=m,p=_;g<p;g+=3){let v=a.getX(g),b=a.getX(g+1),y=a.getX(g+2);r=p0(this,s,t,i,l,d,u,v,b,y),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let m=0,_=h.length;m<_;m++){let g=h[m],p=s[g.materialIndex],v=Math.max(g.start,f.start),b=Math.min(c.count,Math.min(g.start+g.count,f.start+f.count));for(let y=v,C=b;y<C;y+=3){let S=y,M=y+1,A=y+2;r=p0(this,p,t,i,l,d,u,S,M,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,e.push(r))}}else{let m=Math.max(0,f.start),_=Math.min(c.count,f.start+f.count);for(let g=m,p=_;g<p;g+=3){let v=g,b=g+1,y=g+2;r=p0(this,s,t,i,l,d,u,v,b,y),r&&(r.faceIndex=Math.floor(g/3),e.push(r))}}}};function g7(n,t,e,i,r,o,s,a){let c;if(t.side===Wr?c=i.intersectTriangle(s,o,r,!0,a):c=i.intersectTriangle(r,o,s,t.side===Ms,a),c===null)return null;f0.copy(a),f0.applyMatrix4(n.matrixWorld);let l=e.ray.origin.distanceTo(f0);return l<e.near||l>e.far?null:{distance:l,point:f0.clone(),object:n}}function p0(n,t,e,i,r,o,s,a,c,l){n.getVertexPosition(a,Fh),n.getVertexPosition(c,kh),n.getVertexPosition(l,jh);let d=g7(n,t,e,i,Fh,kh,jh,h0);if(d){r&&(l0.fromBufferAttribute(r,a),d0.fromBufferAttribute(r,c),u0.fromBufferAttribute(r,l),d.uv=oc.getInterpolation(h0,Fh,kh,jh,l0,d0,u0,new z)),o&&(l0.fromBufferAttribute(o,a),d0.fromBufferAttribute(o,c),u0.fromBufferAttribute(o,l),d.uv1=oc.getInterpolation(h0,Fh,kh,jh,l0,d0,u0,new z)),s&&(HN.fromBufferAttribute(s,a),GN.fromBufferAttribute(s,c),WN.fromBufferAttribute(s,l),d.normal=oc.getInterpolation(h0,Fh,kh,jh,HN,GN,WN,new R),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));let u={a,b:c,c:l,normal:new R,materialIndex:0};oc.getNormal(Fh,kh,jh,u.normal),d.face=u}return d}var Zi=class n extends gt{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],d=[],u=[],h=0,f=0;m("z","y","x",-1,-1,i,e,t,s,o,0),m("z","y","x",1,-1,i,e,-t,s,o,1),m("x","z","y",1,1,t,i,e,r,s,2),m("x","z","y",1,-1,t,i,-e,r,s,3),m("x","y","z",1,-1,t,e,i,r,o,4),m("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(c),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(u,2));function m(_,g,p,v,b,y,C,S,M,A,T){let x=y/M,I=C/A,V=y/2,W=C/2,te=S/2,ne=M+1,B=A+1,G=0,U=0,se=new R;for(let Ce=0;Ce<B;Ce++){let Ie=Ce*I-W;for(let Qe=0;Qe<ne;Qe++){let vt=Qe*x-V;se[_]=vt*v,se[g]=Ie*b,se[p]=te,l.push(se.x,se.y,se.z),se[_]=0,se[g]=0,se[p]=S>0?1:-1,d.push(se.x,se.y,se.z),u.push(Qe/M),u.push(1-Ce/A),G+=1}}for(let Ce=0;Ce<A;Ce++)for(let Ie=0;Ie<M;Ie++){let Qe=h+Ie+ne*Ce,vt=h+Ie+ne*(Ce+1),Q=h+(Ie+1)+ne*(Ce+1),Ee=h+(Ie+1)+ne*Ce;c.push(Qe,vt,Ee),c.push(vt,Q,Ee),U+=6}a.addGroup(f,U,T),f+=U,h+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Jh(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function Hr(n){let t={};for(let e=0;e<n.length;e++){let i=Jh(n[e]);for(let r in i)t[r]=i[r]}return t}function _7(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function lB(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Si.workingColorSpace}var Bi={clone:Jh,merge:Hr},b7=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,v7=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,kt=class extends un{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=b7,this.fragmentShader=v7,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Jh(t.uniforms),this.uniformsGroups=_7(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},hl=class extends Rt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Be,this.projectionMatrix=new Be,this.projectionMatrixInverse=new Be,this.coordinateSystem=oa}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},al=new R,$N=new z,qN=new z,en=class extends hl{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Zh*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(kd*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Zh*2*Math.atan(Math.tan(kd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){al.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(al.x,al.y).multiplyScalar(-t/al.z),al.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(al.x,al.y).multiplyScalar(-t/al.z)}getViewSize(t,e){return this.getViewBounds(t,$N,qN),e.subVectors(qN,$N)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(kd*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,e-=s.offsetY*i/l,r*=s.width/c,i*=s.height/l}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Oh=-90,Nh=1,K0=class extends Rt{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new en(Oh,Nh,t,e);r.layers=this.layers,this.add(r);let o=new en(Oh,Nh,t,e);o.layers=this.layers,this.add(o);let s=new en(Oh,Nh,t,e);s.layers=this.layers,this.add(s);let a=new en(Oh,Nh,t,e);a.layers=this.layers,this.add(a);let c=new en(Oh,Nh,t,e);c.layers=this.layers,this.add(c);let l=new en(Oh,Nh,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,a,c]=e;for(let l of e)this.remove(l);if(t===oa)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===Fm)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let l of e)this.add(l),l.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,d]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;let _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,c),t.setRenderTarget(i,4,r),t.render(e,l),i.texture.generateMipmaps=_,t.setRenderTarget(i,5,r),t.render(e,d),t.setRenderTarget(u,h,f),t.xr.enabled=m,i.texture.needsPMREMUpdate=!0}},Hd=class extends yn{constructor(t,e,i,r,o,s,a,c,l,d){t=t!==void 0?t:[],e=e!==void 0?e:lc,super(t,e,i,r,o,s,a,c,l,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},J0=class extends ai{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Hd(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:_n}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zi(5,5,5),o=new kt({name:"CubemapFromEquirect",uniforms:Jh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Wr,blending:ei});o.uniforms.tEquirect.value=e;let s=new Ve(r,o),a=e.minFilter;return e.minFilter===Eo&&(e.minFilter=_n),new K0(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,r){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},NT=new R,y7=new R,x7=new Kt,ur=class{constructor(t=new R(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=NT.subVectors(i,e).cross(y7.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(NT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||x7.getNormalMatrix(t),r=this.coplanarPoint(NT).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},_d=new En,m0=new R,Gd=class{constructor(t=new ur,e=new ur,i=new ur,r=new ur,o=new ur,s=new ur){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=oa){let i=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],c=r[3],l=r[4],d=r[5],u=r[6],h=r[7],f=r[8],m=r[9],_=r[10],g=r[11],p=r[12],v=r[13],b=r[14],y=r[15];if(i[0].setComponents(c-o,h-l,g-f,y-p).normalize(),i[1].setComponents(c+o,h+l,g+f,y+p).normalize(),i[2].setComponents(c+s,h+d,g+m,y+v).normalize(),i[3].setComponents(c-s,h-d,g-m,y-v).normalize(),i[4].setComponents(c-a,h-u,g-_,y-b).normalize(),e===oa)i[5].setComponents(c+a,h+u,g+_,y+b).normalize();else if(e===Fm)i[5].setComponents(a,u,_,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),_d.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),_d.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(_d)}intersectsSprite(t){return _d.center.set(0,0,0),_d.radius=.7071067811865476,_d.applyMatrix4(t.matrixWorld),this.intersectsSphere(_d)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(m0.x=r.normal.x>0?t.max.x:t.min.x,m0.y=r.normal.y>0?t.max.y:t.min.y,m0.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(m0)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function dB(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function w7(n){let t=new WeakMap;function e(a,c){let l=a.array,d=a.usage,u=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,d),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:u}}function i(a,c,l){let d=c.array,u=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),u.count===-1&&h.length===0&&n.bufferSubData(l,0,d),h.length!==0){for(let f=0,m=h.length;f<m;f++){let _=h[f];n.bufferSubData(l,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}c.clearUpdateRanges()}u.count!==-1&&(n.bufferSubData(l,u.offset*d.BYTES_PER_ELEMENT,d,u.offset,u.count),u.count=-1),c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=t.get(a);c&&(n.deleteBuffer(c.buffer),t.delete(a))}function s(a,c){if(a.isGLBufferAttribute){let d=t.get(a);(!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);let l=t.get(a);if(l===void 0)t.set(a,e(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:o,update:s}}var ca=class n extends gt{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(i),c=Math.floor(r),l=a+1,d=c+1,u=t/a,h=e/c,f=[],m=[],_=[],g=[];for(let p=0;p<d;p++){let v=p*h-s;for(let b=0;b<l;b++){let y=b*u-o;m.push(y,-v,0),_.push(0,0,1),g.push(b/a),g.push(1-p/c)}}for(let p=0;p<c;p++)for(let v=0;v<a;v++){let b=v+l*p,y=v+l*(p+1),C=v+1+l*(p+1),S=v+1+l*p;f.push(b,y,S),f.push(y,C,S)}this.setIndex(f),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(_,3)),this.setAttribute("uv",new qe(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},M7=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,S7=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,R7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,T7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C7=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,E7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,D7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,A7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,I7=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,P7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,F7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,k7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,j7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,O7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,N7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,L7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,B7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,U7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,V7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,z7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,H7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,G7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,W7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,$7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,q7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,X7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Y7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Z7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Q7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,K7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,J7="gl_FragColor = linearToOutputTexel( gl_FragColor );",eY=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uY=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hY=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fY=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_Y=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,xY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wY=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,MY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,SY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,RY=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TY=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CY=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EY=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,DY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,AY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,PY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jY=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,OY=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LY=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,BY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$Y=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,qY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,XY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,YY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ZY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,QY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nZ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,oZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sZ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cZ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,dZ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_Z=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,wZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,RZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,AZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,PZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,FZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$Z=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,QZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KZ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,si={alphahash_fragment:M7,alphahash_pars_fragment:S7,alphamap_fragment:R7,alphamap_pars_fragment:T7,alphatest_fragment:C7,alphatest_pars_fragment:E7,aomap_fragment:D7,aomap_pars_fragment:A7,batching_pars_vertex:I7,batching_vertex:P7,begin_vertex:F7,beginnormal_vertex:k7,bsdfs:j7,iridescence_fragment:O7,bumpmap_pars_fragment:N7,clipping_planes_fragment:L7,clipping_planes_pars_fragment:B7,clipping_planes_pars_vertex:U7,clipping_planes_vertex:V7,color_fragment:z7,color_pars_fragment:H7,color_pars_vertex:G7,color_vertex:W7,common:$7,cube_uv_reflection_fragment:q7,defaultnormal_vertex:X7,displacementmap_pars_vertex:Y7,displacementmap_vertex:Z7,emissivemap_fragment:Q7,emissivemap_pars_fragment:K7,colorspace_fragment:J7,colorspace_pars_fragment:eY,envmap_fragment:tY,envmap_common_pars_fragment:iY,envmap_pars_fragment:nY,envmap_pars_vertex:rY,envmap_physical_pars_fragment:mY,envmap_vertex:oY,fog_vertex:sY,fog_pars_vertex:aY,fog_fragment:cY,fog_pars_fragment:lY,gradientmap_pars_fragment:dY,lightmap_pars_fragment:uY,lights_lambert_fragment:hY,lights_lambert_pars_fragment:fY,lights_pars_begin:pY,lights_toon_fragment:gY,lights_toon_pars_fragment:_Y,lights_phong_fragment:bY,lights_phong_pars_fragment:vY,lights_physical_fragment:yY,lights_physical_pars_fragment:xY,lights_fragment_begin:wY,lights_fragment_maps:MY,lights_fragment_end:SY,logdepthbuf_fragment:RY,logdepthbuf_pars_fragment:TY,logdepthbuf_pars_vertex:CY,logdepthbuf_vertex:EY,map_fragment:DY,map_pars_fragment:AY,map_particle_fragment:IY,map_particle_pars_fragment:PY,metalnessmap_fragment:FY,metalnessmap_pars_fragment:kY,morphinstance_vertex:jY,morphcolor_vertex:OY,morphnormal_vertex:NY,morphtarget_pars_vertex:LY,morphtarget_vertex:BY,normal_fragment_begin:UY,normal_fragment_maps:VY,normal_pars_fragment:zY,normal_pars_vertex:HY,normal_vertex:GY,normalmap_pars_fragment:WY,clearcoat_normal_fragment_begin:$Y,clearcoat_normal_fragment_maps:qY,clearcoat_pars_fragment:XY,iridescence_pars_fragment:YY,opaque_fragment:ZY,packing:QY,premultiplied_alpha_fragment:KY,project_vertex:JY,dithering_fragment:eZ,dithering_pars_fragment:tZ,roughnessmap_fragment:iZ,roughnessmap_pars_fragment:nZ,shadowmap_pars_fragment:rZ,shadowmap_pars_vertex:oZ,shadowmap_vertex:sZ,shadowmask_pars_fragment:aZ,skinbase_vertex:cZ,skinning_pars_vertex:lZ,skinning_vertex:dZ,skinnormal_vertex:uZ,specularmap_fragment:hZ,specularmap_pars_fragment:fZ,tonemapping_fragment:pZ,tonemapping_pars_fragment:mZ,transmission_fragment:gZ,transmission_pars_fragment:_Z,uv_pars_fragment:bZ,uv_pars_vertex:vZ,uv_vertex:yZ,worldpos_vertex:xZ,background_vert:wZ,background_frag:MZ,backgroundCube_vert:SZ,backgroundCube_frag:RZ,cube_vert:TZ,cube_frag:CZ,depth_vert:EZ,depth_frag:DZ,distanceRGBA_vert:AZ,distanceRGBA_frag:IZ,equirect_vert:PZ,equirect_frag:FZ,linedashed_vert:kZ,linedashed_frag:jZ,meshbasic_vert:OZ,meshbasic_frag:NZ,meshlambert_vert:LZ,meshlambert_frag:BZ,meshmatcap_vert:UZ,meshmatcap_frag:VZ,meshnormal_vert:zZ,meshnormal_frag:HZ,meshphong_vert:GZ,meshphong_frag:WZ,meshphysical_vert:$Z,meshphysical_frag:qZ,meshtoon_vert:XZ,meshtoon_frag:YZ,points_vert:ZZ,points_frag:QZ,shadow_vert:KZ,shadow_frag:JZ,sprite_vert:eQ,sprite_frag:tQ},Ze={common:{diffuse:{value:new ge(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kt}},envmap:{envMap:{value:null},envMapRotation:{value:new Kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kt},normalScale:{value:new z(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0},uvTransform:{value:new Kt}},sprite:{diffuse:{value:new ge(16777215)},opacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}}},xs={basic:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:si.meshbasic_vert,fragmentShader:si.meshbasic_frag},lambert:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new ge(0)}}]),vertexShader:si.meshlambert_vert,fragmentShader:si.meshlambert_frag},phong:{uniforms:Hr([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new ge(0)},specular:{value:new ge(1118481)},shininess:{value:30}}]),vertexShader:si.meshphong_vert,fragmentShader:si.meshphong_frag},standard:{uniforms:Hr([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:si.meshphysical_vert,fragmentShader:si.meshphysical_frag},toon:{uniforms:Hr([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new ge(0)}}]),vertexShader:si.meshtoon_vert,fragmentShader:si.meshtoon_frag},matcap:{uniforms:Hr([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:si.meshmatcap_vert,fragmentShader:si.meshmatcap_frag},points:{uniforms:Hr([Ze.points,Ze.fog]),vertexShader:si.points_vert,fragmentShader:si.points_frag},dashed:{uniforms:Hr([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:si.linedashed_vert,fragmentShader:si.linedashed_frag},depth:{uniforms:Hr([Ze.common,Ze.displacementmap]),vertexShader:si.depth_vert,fragmentShader:si.depth_frag},normal:{uniforms:Hr([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:si.meshnormal_vert,fragmentShader:si.meshnormal_frag},sprite:{uniforms:Hr([Ze.sprite,Ze.fog]),vertexShader:si.sprite_vert,fragmentShader:si.sprite_frag},background:{uniforms:{uvTransform:{value:new Kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:si.background_vert,fragmentShader:si.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kt}},vertexShader:si.backgroundCube_vert,fragmentShader:si.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:si.cube_vert,fragmentShader:si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:si.equirect_vert,fragmentShader:si.equirect_frag},distanceRGBA:{uniforms:Hr([Ze.common,Ze.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:si.distanceRGBA_vert,fragmentShader:si.distanceRGBA_frag},shadow:{uniforms:Hr([Ze.lights,Ze.fog,{color:{value:new ge(0)},opacity:{value:1}}]),vertexShader:si.shadow_vert,fragmentShader:si.shadow_frag}};xs.physical={uniforms:Hr([xs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kt},clearcoatNormalScale:{value:new z(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kt},sheen:{value:0},sheenColor:{value:new ge(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kt},transmissionSamplerSize:{value:new z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kt},attenuationDistance:{value:0},attenuationColor:{value:new ge(0)},specularColor:{value:new ge(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kt},anisotropyVector:{value:new z},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kt}}]),vertexShader:si.meshphysical_vert,fragmentShader:si.meshphysical_frag};var g0={r:0,b:0,g:0},bd=new ao,iQ=new Be;function nQ(n,t,e,i,r,o,s){let a=new ge(0),c=o===!0?0:1,l,d,u=null,h=0,f=null;function m(v){let b=v.isScene===!0?v.background:null;return b&&b.isTexture&&(b=(v.backgroundBlurriness>0?e:t).get(b)),b}function _(v){let b=!1,y=m(v);y===null?p(a,c):y&&y.isColor&&(p(y,1),b=!0);let C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,s):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(v,b){let y=m(b);y&&(y.isCubeTexture||y.mapping===mf)?(d===void 0&&(d=new Ve(new Zi(1,1,1),new kt({name:"BackgroundCubeMaterial",uniforms:Jh(xs.backgroundCube.uniforms),vertexShader:xs.backgroundCube.vertexShader,fragmentShader:xs.backgroundCube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,S,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),bd.copy(b.backgroundRotation),bd.x*=-1,bd.y*=-1,bd.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(bd.y*=-1,bd.z*=-1),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(iQ.makeRotationFromEuler(bd)),d.material.toneMapped=Si.getTransfer(y.colorSpace)!==Ji,(u!==y||h!==y.version||f!==n.toneMapping)&&(d.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),d.layers.enableAll(),v.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Ve(new ca(2,2),new kt({name:"BackgroundMaterial",uniforms:Jh(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:Ms,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,l.material.toneMapped=Si.getTransfer(y.colorSpace)!==Ji,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}function p(v,b){v.getRGB(g0,lB(n)),i.buffers.color.setClear(g0.r,g0.g,g0.b,b,s)}return{getClearColor:function(){return a},setClearColor:function(v,b=1){a.set(v),c=b,p(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,p(a,c)},render:_,addToRenderList:g}}function rQ(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),o=r,s=!1;function a(x,I,V,W,te){let ne=!1,B=u(W,V,I);o!==B&&(o=B,l(o.object)),ne=f(x,W,V,te),ne&&m(x,W,V,te),te!==null&&t.update(te,n.ELEMENT_ARRAY_BUFFER),(ne||s)&&(s=!1,y(x,I,V,W),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(te).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function d(x){return n.deleteVertexArray(x)}function u(x,I,V){let W=V.wireframe===!0,te=i[x.id];te===void 0&&(te={},i[x.id]=te);let ne=te[I.id];ne===void 0&&(ne={},te[I.id]=ne);let B=ne[W];return B===void 0&&(B=h(c()),ne[W]=B),B}function h(x){let I=[],V=[],W=[];for(let te=0;te<e;te++)I[te]=0,V[te]=0,W[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:V,attributeDivisors:W,object:x,attributes:{},index:null}}function f(x,I,V,W){let te=o.attributes,ne=I.attributes,B=0,G=V.getAttributes();for(let U in G)if(G[U].location>=0){let Ce=te[U],Ie=ne[U];if(Ie===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(Ie=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(Ie=x.instanceColor)),Ce===void 0||Ce.attribute!==Ie||Ie&&Ce.data!==Ie.data)return!0;B++}return o.attributesNum!==B||o.index!==W}function m(x,I,V,W){let te={},ne=I.attributes,B=0,G=V.getAttributes();for(let U in G)if(G[U].location>=0){let Ce=ne[U];Ce===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(Ce=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(Ce=x.instanceColor));let Ie={};Ie.attribute=Ce,Ce&&Ce.data&&(Ie.data=Ce.data),te[U]=Ie,B++}o.attributes=te,o.attributesNum=B,o.index=W}function _(){let x=o.newAttributes;for(let I=0,V=x.length;I<V;I++)x[I]=0}function g(x){p(x,0)}function p(x,I){let V=o.newAttributes,W=o.enabledAttributes,te=o.attributeDivisors;V[x]=1,W[x]===0&&(n.enableVertexAttribArray(x),W[x]=1),te[x]!==I&&(n.vertexAttribDivisor(x,I),te[x]=I)}function v(){let x=o.newAttributes,I=o.enabledAttributes;for(let V=0,W=I.length;V<W;V++)I[V]!==x[V]&&(n.disableVertexAttribArray(V),I[V]=0)}function b(x,I,V,W,te,ne,B){B===!0?n.vertexAttribIPointer(x,I,V,te,ne):n.vertexAttribPointer(x,I,V,W,te,ne)}function y(x,I,V,W){_();let te=W.attributes,ne=V.getAttributes(),B=I.defaultAttributeValues;for(let G in ne){let U=ne[G];if(U.location>=0){let se=te[G];if(se===void 0&&(G==="instanceMatrix"&&x.instanceMatrix&&(se=x.instanceMatrix),G==="instanceColor"&&x.instanceColor&&(se=x.instanceColor)),se!==void 0){let Ce=se.normalized,Ie=se.itemSize,Qe=t.get(se);if(Qe===void 0)continue;let vt=Qe.buffer,Q=Qe.type,Ee=Qe.bytesPerElement,We=Q===n.INT||Q===n.UNSIGNED_INT||se.gpuType===$E;if(se.isInterleavedBufferAttribute){let N=se.data,we=N.stride,Ne=se.offset;if(N.isInstancedInterleavedBuffer){for(let Ue=0;Ue<U.locationSize;Ue++)p(U.location+Ue,N.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=N.meshPerAttribute*N.count)}else for(let Ue=0;Ue<U.locationSize;Ue++)g(U.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,vt);for(let Ue=0;Ue<U.locationSize;Ue++)b(U.location+Ue,Ie/U.locationSize,Q,Ce,we*Ee,(Ne+Ie/U.locationSize*Ue)*Ee,We)}else{if(se.isInstancedBufferAttribute){for(let N=0;N<U.locationSize;N++)p(U.location+N,se.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let N=0;N<U.locationSize;N++)g(U.location+N);n.bindBuffer(n.ARRAY_BUFFER,vt);for(let N=0;N<U.locationSize;N++)b(U.location+N,Ie/U.locationSize,Q,Ce,Ie*Ee,Ie/U.locationSize*N*Ee,We)}}else if(B!==void 0){let Ce=B[G];if(Ce!==void 0)switch(Ce.length){case 2:n.vertexAttrib2fv(U.location,Ce);break;case 3:n.vertexAttrib3fv(U.location,Ce);break;case 4:n.vertexAttrib4fv(U.location,Ce);break;default:n.vertexAttrib1fv(U.location,Ce)}}}}v()}function C(){A();for(let x in i){let I=i[x];for(let V in I){let W=I[V];for(let te in W)d(W[te].object),delete W[te];delete I[V]}delete i[x]}}function S(x){if(i[x.id]===void 0)return;let I=i[x.id];for(let V in I){let W=I[V];for(let te in W)d(W[te].object),delete W[te];delete I[V]}delete i[x.id]}function M(x){for(let I in i){let V=i[I];if(V[x.id]===void 0)continue;let W=V[x.id];for(let te in W)d(W[te].object),delete W[te];delete V[x.id]}}function A(){T(),s=!0,o!==r&&(o=r,l(o.object))}function T(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:A,resetDefaultState:T,dispose:C,releaseStatesOfGeometry:S,releaseStatesOfProgram:M,initAttributes:_,enableAttribute:g,disableUnusedAttributes:v}}function oQ(n,t,e){let i;function r(l){i=l}function o(l,d){n.drawArrays(i,l,d),e.update(d,i,1)}function s(l,d,u){u!==0&&(n.drawArraysInstanced(i,l,d,u),e.update(d,i,u))}function a(l,d,u){if(u===0)return;let h=t.get("WEBGL_multi_draw");if(h===null)for(let f=0;f<u;f++)this.render(l[f],d[f]);else{h.multiDrawArraysWEBGL(i,l,0,d,0,u);let f=0;for(let m=0;m<u;m++)f+=d[m];e.update(f,i,1)}}function c(l,d,u,h){if(u===0)return;let f=t.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<l.length;m++)s(l[m],d[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,d,0,h,0,u);let m=0;for(let _=0;_<u;_++)m+=d[_];for(let _=0;_<h.length;_++)e.update(m,i,h[_])}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function sQ(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let S=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(S){return!(S!==so&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(S){let M=S===$i&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(S!==dc&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==yr&&!M)}function c(S){if(S==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=e.precision!==void 0?e.precision:"highp",d=c(l);d!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);let u=e.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),p=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:_,maxAttributes:g,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:y,maxSamples:C}}function aQ(n){let t=this,e=null,i=0,r=!1,o=!1,s=new ur,a=new Kt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||i!==0||r;return r=h,i=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){e=d(u,h,0)},this.setState=function(u,h,f){let m=u.clippingPlanes,_=u.clipIntersection,g=u.clipShadows,p=n.get(u);if(!r||m===null||m.length===0||o&&!g)o?d(null):l();else{let v=o?0:i,b=v*4,y=p.clippingState||null;c.value=y,y=d(m,h,b,f);for(let C=0;C!==b;++C)y[C]=e[C];p.clippingState=y,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=v}};function l(){c.value!==e&&(c.value=e,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(u,h,f,m){let _=u!==null?u.length:0,g=null;if(_!==0){if(g=c.value,m!==!0||g===null){let p=f+_*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(g===null||g.length<p)&&(g=new Float32Array(p));for(let b=0,y=f;b!==_;++b,y+=4)s.copy(u[b]).applyMatrix4(v,a),s.normal.toArray(g,y),g[y+3]=s.constant}c.value=g,c.needsUpdate=!0}return t.numPlanes=_,t.numIntersection=0,g}}function cQ(n){let t=new WeakMap;function e(s,a){return a===Tm?s.mapping=lc:a===Cm&&(s.mapping=ul),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Tm||a===Cm)if(t.has(s)){let c=t.get(s).texture;return e(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new J0(c.height);return l.fromEquirectangularTexture(n,s),t.set(s,l),s.addEventListener("dispose",r),e(l.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=t.get(a);c!==void 0&&(t.delete(a),c.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var Ao=class extends hl{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,a=r+e,c=r-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},$h=4,XN=[.125,.215,.35,.446,.526,.582],Ed=20,LT=new Ao,YN=new ge,BT=null,UT=0,VT=0,zT=!1,Cd=(1+Math.sqrt(5))/2,Lh=1/Cd,ZN=[new R(-Cd,Lh,0),new R(Cd,Lh,0),new R(-Lh,0,Cd),new R(Lh,0,Cd),new R(0,Cd,-Lh),new R(0,Cd,Lh),new R(-1,1,-1),new R(1,1,-1),new R(-1,1,1),new R(1,1,1)],Lm=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){BT=this._renderer.getRenderTarget(),UT=this._renderer.getActiveCubeFace(),VT=this._renderer.getActiveMipmapLevel(),zT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=JN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=KN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(BT,UT,VT),this._renderer.xr.enabled=zT,t.scissorTest=!1,_0(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===lc||t.mapping===ul?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),BT=this._renderer.getRenderTarget(),UT=this._renderer.getActiveCubeFace(),VT=this._renderer.getActiveMipmapLevel(),zT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:_n,minFilter:_n,generateMipmaps:!1,type:$i,format:so,colorSpace:Nn,depthBuffer:!1},r=QN(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QN(t,e,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lQ(o)),this._blurMaterial=dQ(o,t,e)}return r}_compileMaterial(t){let e=new Ve(this._lodPlanes[0],t);this._renderer.compile(e,LT)}_sceneToCubeUV(t,e,i,r){let a=new en(90,1,e,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(YN),d.toneMapping=ac,d.autoClear=!1;let f=new tn({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),m=new Ve(new Zi,f),_=!1,g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,_=!0):(f.color.copy(YN),_=!0);for(let p=0;p<6;p++){let v=p%3;v===0?(a.up.set(0,c[p],0),a.lookAt(l[p],0,0)):v===1?(a.up.set(0,0,c[p]),a.lookAt(0,l[p],0)):(a.up.set(0,c[p],0),a.lookAt(0,0,l[p]));let b=this._cubeSize;_0(r,v*b,p>2?b:0,b,b),d.setRenderTarget(r),_&&d.render(m,a),d.render(t,a)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=h,d.autoClear=u,t.background=g}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===lc||t.mapping===ul;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=JN()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=KN());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Ve(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;let c=this._cubeSize;_0(e,0,0,3*c,2*c),i.setRenderTarget(e),i.render(s,LT)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=ZN[(r-o-1)%ZN.length];this._blur(t,o-1,o,s,a)}e.autoClear=i}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new Ve(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*Ed-1),_=o/m,g=isFinite(o)?1+Math.floor(d*_):Ed;g>Ed&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ed}`);let p=[],v=0;for(let M=0;M<Ed;++M){let A=M/_,T=Math.exp(-A*A/2);p.push(T),M===0?v+=T:M<g&&(v+=2*T)}for(let M=0;M<p.length;M++)p[M]=p[M]/v;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:b}=this;h.dTheta.value=m,h.mipInt.value=b-i;let y=this._sizeLods[r],C=3*y*(r>b-$h?r-b+$h:0),S=4*(this._cubeSize-y);_0(e,C,S,3*y,2*y),c.setRenderTarget(e),c.render(u,LT)}};function lQ(n){let t=[],e=[],i=[],r=n,o=n-$h+1+XN.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let c=1/a;s>n-$h?c=XN[s-n+$h-1]:s===0&&(c=0),i.push(c);let l=1/(a-2),d=-l,u=1+l,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,m=6,_=3,g=2,p=1,v=new Float32Array(_*m*f),b=new Float32Array(g*m*f),y=new Float32Array(p*m*f);for(let S=0;S<f;S++){let M=S%3*2/3-1,A=S>2?0:-1,T=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];v.set(T,_*m*S),b.set(h,g*m*S);let x=[S,S,S,S,S,S];y.set(x,p*m*S)}let C=new gt;C.setAttribute("position",new fi(v,_)),C.setAttribute("uv",new fi(b,g)),C.setAttribute("faceIndex",new fi(y,p)),t.push(C),r>$h&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function QN(n,t,e){let i=new ai(n,t,e);return i.texture.mapping=mf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _0(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function dQ(n,t,e){let i=new Float32Array(Ed),r=new R(0,1,0);return new kt({name:"SphericalGaussianBlur",defines:{n:Ed,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:nD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ei,depthTest:!1,depthWrite:!1})}function KN(){return new kt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ei,depthTest:!1,depthWrite:!1})}function JN(){return new kt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ei,depthTest:!1,depthWrite:!1})}function nD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uQ(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===Tm||c===Cm,d=c===lc||c===ul;if(l||d){let u=t.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return e===null&&(e=new Lm(n)),u=l?e.fromEquirectangular(a,u):e.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),u.texture;if(u!==void 0)return u.texture;{let f=a.image;return l&&f&&f.height>0||d&&f&&r(f)?(e===null&&(e=new Lm(n)),u=l?e.fromEquirectangular(a):e.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let c=0,l=6;for(let d=0;d<l;d++)a[d]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=t.get(c);l!==void 0&&(t.delete(c),l.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function hQ(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&iD("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function fQ(n,t,e,i){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&t.remove(h.index);for(let m in h.attributes)t.remove(h.attributes[m]);for(let m in h.morphAttributes){let _=h.morphAttributes[m];for(let g=0,p=_.length;g<p;g++)t.remove(_[g])}h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(t.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,e.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,e.memory.geometries++),h}function c(u){let h=u.attributes;for(let m in h)t.update(h[m],n.ARRAY_BUFFER);let f=u.morphAttributes;for(let m in f){let _=f[m];for(let g=0,p=_.length;g<p;g++)t.update(_[g],n.ARRAY_BUFFER)}}function l(u){let h=[],f=u.index,m=u.attributes.position,_=0;if(f!==null){let v=f.array;_=f.version;for(let b=0,y=v.length;b<y;b+=3){let C=v[b+0],S=v[b+1],M=v[b+2];h.push(C,S,S,M,M,C)}}else if(m!==void 0){let v=m.array;_=m.version;for(let b=0,y=v.length/3-1;b<y;b+=3){let C=b+0,S=b+1,M=b+2;h.push(C,S,S,M,M,C)}}else return;let g=new(sB(h)?Nm:Om)(h,1);g.version=_;let p=o.get(u);p&&t.remove(p),o.set(u,g)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&l(u)}else l(u);return o.get(u)}return{get:a,update:c,getWireframeAttribute:d}}function pQ(n,t,e){let i;function r(h){i=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,f){n.drawElements(i,f,o,h*s),e.update(f,i,1)}function l(h,f,m){m!==0&&(n.drawElementsInstanced(i,f,o,h*s,m),e.update(f,i,m))}function d(h,f,m){if(m===0)return;let _=t.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<m;g++)this.render(h[g]/s,f[g]);else{_.multiDrawElementsWEBGL(i,f,0,o,h,0,m);let g=0;for(let p=0;p<m;p++)g+=f[p];e.update(g,i,1)}}function u(h,f,m,_){if(m===0)return;let g=t.get("WEBGL_multi_draw");if(g===null)for(let p=0;p<h.length;p++)l(h[p]/s,f[p],_[p]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,o,h,0,_,0,m);let p=0;for(let v=0;v<m;v++)p+=f[v];for(let v=0;v<_.length;v++)e.update(p,i,_[v])}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function mQ(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=a*(o/3);break;case n.LINES:e.lines+=a*(o/2);break;case n.LINE_STRIP:e.lines+=a*(o-1);break;case n.LINE_LOOP:e.lines+=a*o;break;case n.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function gQ(n,t,e){let i=new WeakMap,r=new yi;function o(s,a,c){let l=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=i.get(a);if(h===void 0||h.count!==u){let x=function(){A.dispose(),i.delete(a),a.removeEventListener("dispose",x)};var f=x;h!==void 0&&h.texture.dispose();let m=a.morphAttributes.position!==void 0,_=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,p=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],b=a.morphAttributes.color||[],y=0;m===!0&&(y=1),_===!0&&(y=2),g===!0&&(y=3);let C=a.attributes.position.count*y,S=1;C>t.maxTextureSize&&(S=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);let M=new Float32Array(C*S*4*u),A=new Qh(M,C,S,u);A.type=yr,A.needsUpdate=!0;let T=y*4;for(let I=0;I<u;I++){let V=p[I],W=v[I],te=b[I],ne=C*S*4*I;for(let B=0;B<V.count;B++){let G=B*T;m===!0&&(r.fromBufferAttribute(V,B),M[ne+G+0]=r.x,M[ne+G+1]=r.y,M[ne+G+2]=r.z,M[ne+G+3]=0),_===!0&&(r.fromBufferAttribute(W,B),M[ne+G+4]=r.x,M[ne+G+5]=r.y,M[ne+G+6]=r.z,M[ne+G+7]=0),g===!0&&(r.fromBufferAttribute(te,B),M[ne+G+8]=r.x,M[ne+G+9]=r.y,M[ne+G+10]=r.z,M[ne+G+11]=te.itemSize===4?r.w:1)}}h={count:u,texture:A,size:new z(C,S)},i.set(a,h),a.addEventListener("dispose",x)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let m=0;for(let g=0;g<l.length;g++)m+=l[g];let _=a.morphTargetsRelative?1:1-m;c.getUniforms().setValue(n,"morphTargetBaseInfluence",_),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,e),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function _Q(n,t,e,i){let r=new WeakMap;function o(c){let l=i.render.frame,d=c.geometry,u=t.get(c,d);if(r.get(u)!==l&&(t.update(u),r.set(u,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(e.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return u}function s(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),e.remove(l.instanceMatrix),l.instanceColor!==null&&e.remove(l.instanceColor)}return{update:o,dispose:s}}var Ts=class extends yn{constructor(t,e,i,r,o,s,a,c,l,d=Fd){if(d!==Fd&&d!==Rs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Fd&&(i=Ud),i===void 0&&d===Rs&&(i=Ss),super(null,r,o,s,a,c,d,i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:hi,this.minFilter=c!==void 0?c:hi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},uB=new yn,hB=new Ts(1,1);hB.compareFunction=eD;var fB=new Qh,pB=new jm,mB=new Hd,eL=[],tL=[],iL=new Float32Array(16),nL=new Float32Array(9),rL=new Float32Array(4);function _f(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=eL[r];if(o===void 0&&(o=new Float32Array(r),eL[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,n[s].toArray(o,a)}return o}function Jn(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function er(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Xy(n,t){let e=tL[t];e===void 0&&(e=new Int32Array(t),tL[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function bQ(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function vQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2fv(this.addr,t),er(e,t)}}function yQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Jn(e,t))return;n.uniform3fv(this.addr,t),er(e,t)}}function xQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4fv(this.addr,t),er(e,t)}}function wQ(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),er(e,t)}else{if(Jn(e,i))return;rL.set(i),n.uniformMatrix2fv(this.addr,!1,rL),er(e,i)}}function MQ(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),er(e,t)}else{if(Jn(e,i))return;nL.set(i),n.uniformMatrix3fv(this.addr,!1,nL),er(e,i)}}function SQ(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),er(e,t)}else{if(Jn(e,i))return;iL.set(i),n.uniformMatrix4fv(this.addr,!1,iL),er(e,i)}}function RQ(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function TQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2iv(this.addr,t),er(e,t)}}function CQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Jn(e,t))return;n.uniform3iv(this.addr,t),er(e,t)}}function EQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4iv(this.addr,t),er(e,t)}}function DQ(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function AQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2uiv(this.addr,t),er(e,t)}}function IQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Jn(e,t))return;n.uniform3uiv(this.addr,t),er(e,t)}}function PQ(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4uiv(this.addr,t),er(e,t)}}function FQ(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o=this.type===n.SAMPLER_2D_SHADOW?hB:uB;e.setTexture2D(t||o,r)}function kQ(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||pB,r)}function jQ(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||mB,r)}function OQ(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||fB,r)}function NQ(n){switch(n){case 5126:return bQ;case 35664:return vQ;case 35665:return yQ;case 35666:return xQ;case 35674:return wQ;case 35675:return MQ;case 35676:return SQ;case 5124:case 35670:return RQ;case 35667:case 35671:return TQ;case 35668:case 35672:return CQ;case 35669:case 35673:return EQ;case 5125:return DQ;case 36294:return AQ;case 36295:return IQ;case 36296:return PQ;case 35678:case 36198:case 36298:case 36306:case 35682:return FQ;case 35679:case 36299:case 36307:return kQ;case 35680:case 36300:case 36308:case 36293:return jQ;case 36289:case 36303:case 36311:case 36292:return OQ}}function LQ(n,t){n.uniform1fv(this.addr,t)}function BQ(n,t){let e=_f(t,this.size,2);n.uniform2fv(this.addr,e)}function UQ(n,t){let e=_f(t,this.size,3);n.uniform3fv(this.addr,e)}function VQ(n,t){let e=_f(t,this.size,4);n.uniform4fv(this.addr,e)}function zQ(n,t){let e=_f(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function HQ(n,t){let e=_f(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function GQ(n,t){let e=_f(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function WQ(n,t){n.uniform1iv(this.addr,t)}function $Q(n,t){n.uniform2iv(this.addr,t)}function qQ(n,t){n.uniform3iv(this.addr,t)}function XQ(n,t){n.uniform4iv(this.addr,t)}function YQ(n,t){n.uniform1uiv(this.addr,t)}function ZQ(n,t){n.uniform2uiv(this.addr,t)}function QQ(n,t){n.uniform3uiv(this.addr,t)}function KQ(n,t){n.uniform4uiv(this.addr,t)}function JQ(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);Jn(i,o)||(n.uniform1iv(this.addr,o),er(i,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||uB,o[s])}function eK(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);Jn(i,o)||(n.uniform1iv(this.addr,o),er(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||pB,o[s])}function tK(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);Jn(i,o)||(n.uniform1iv(this.addr,o),er(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||mB,o[s])}function iK(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);Jn(i,o)||(n.uniform1iv(this.addr,o),er(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||fB,o[s])}function nK(n){switch(n){case 5126:return LQ;case 35664:return BQ;case 35665:return UQ;case 35666:return VQ;case 35674:return zQ;case 35675:return HQ;case 35676:return GQ;case 5124:case 35670:return WQ;case 35667:case 35671:return $Q;case 35668:case 35672:return qQ;case 35669:case 35673:return XQ;case 5125:return YQ;case 36294:return ZQ;case 36295:return QQ;case 36296:return KQ;case 35678:case 36198:case 36298:case 36306:case 35682:return JQ;case 35679:case 36299:case 36307:return eK;case 35680:case 36300:case 36308:case 36293:return tK;case 36289:case 36303:case 36311:case 36292:return iK}}var WC=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=NQ(e.type)}},$C=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=nK(e.type)}},qC=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],i)}}},HT=/(\w+)(\])?(\[|\.)?/g;function oL(n,t){n.seq.push(t),n.map[t.id]=t}function rK(n,t,e){let i=n.name,r=i.length;for(HT.lastIndex=0;;){let o=HT.exec(i),s=HT.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===r){oL(e,l===void 0?new WC(a,n,t):new $C(a,n,t));break}else{let u=e.map[a];u===void 0&&(u=new qC(a),oL(e,u)),e=u}}}var Yh=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=t.getActiveUniform(e,r),s=t.getUniformLocation(e,o.name);rK(o,s,this)}}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],c=i[a.id];c.needsUpdate!==!1&&a.setValue(t,c.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function sL(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var oK=37297,sK=0;function aK(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}function cK(n){let t=Si.getPrimaries(Si.workingColorSpace),e=Si.getPrimaries(n),i;switch(t===e?i="":t===Im&&e===Am?i="LinearDisplayP3ToLinearSRGB":t===Am&&e===Im&&(i="LinearSRGBToLinearDisplayP3"),n){case Nn:case cg:return[i,"LinearTransferOETF"];case kn:case qy:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function aL(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+aK(n.getShaderSource(t),s)}else return r}function lK(n,t){let e=cK(t);return`vec4 ${n}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function dK(n,t){let e;switch(t){case P2:e="Linear";break;case F2:e="Reinhard";break;case k2:e="OptimizedCineon";break;case j2:e="ACESFilmic";break;case N2:e="AgX";break;case L2:e="Neutral";break;case O2:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function uK(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ym).join(`
`)}function hK(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function fK(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:a}}return e}function ym(n){return n!==""}function cL(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function lL(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var pK=/^[ \t]*#include +<([\w\d./]+)>/gm;function XC(n){return n.replace(pK,gK)}var mK=new Map;function gK(n,t){let e=si[t];if(e===void 0){let i=mK.get(t);if(i!==void 0)e=si[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return XC(e)}var _K=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dL(n){return n.replace(_K,bK)}function bK(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function uL(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function vK(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===WE?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===c2?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ra&&(t="SHADOWMAP_TYPE_VSM"),t}function yK(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case lc:case ul:t="ENVMAP_TYPE_CUBE";break;case mf:t="ENVMAP_TYPE_CUBE_UV";break}return t}function xK(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ul:t="ENVMAP_MODE_REFRACTION";break}return t}function wK(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case og:t="ENVMAP_BLENDING_MULTIPLY";break;case A2:t="ENVMAP_BLENDING_MIX";break;case I2:t="ENVMAP_BLENDING_ADD";break}return t}function MK(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function SK(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,c=vK(e),l=yK(e),d=xK(e),u=wK(e),h=MK(e),f=uK(e),m=hK(o),_=r.createProgram(),g,p,v=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(g=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m].filter(ym).join(`
`),g.length>0&&(g+=`
`),p=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m].filter(ym).join(`
`),p.length>0&&(p+=`
`)):(g=[uL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ym).join(`
`),p=[uL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+l:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==ac?"#define TONE_MAPPING":"",e.toneMapping!==ac?si.tonemapping_pars_fragment:"",e.toneMapping!==ac?dK("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",si.colorspace_pars_fragment,lK("linearToOutputTexel",e.outputColorSpace),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(ym).join(`
`)),s=XC(s),s=cL(s,e),s=lL(s,e),a=XC(a),a=cL(a,e),a=lL(a,e),s=dL(s),a=dL(a),e.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",e.glslVersion===OC?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===OC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let b=v+g+s,y=v+p+a,C=sL(r,r.VERTEX_SHADER,b),S=sL(r,r.FRAGMENT_SHADER,y);r.attachShader(_,C),r.attachShader(_,S),e.index0AttributeName!==void 0?r.bindAttribLocation(_,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function M(I){if(n.debug.checkShaderErrors){let V=r.getProgramInfoLog(_).trim(),W=r.getShaderInfoLog(C).trim(),te=r.getShaderInfoLog(S).trim(),ne=!0,B=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,C,S);else{let G=aL(r,C,"vertex"),U=aL(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+V+`
`+G+`
`+U)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(W===""||te==="")&&(B=!1);B&&(I.diagnostics={runnable:ne,programLog:V,vertexShader:{log:W,prefix:g},fragmentShader:{log:te,prefix:p}})}r.deleteShader(C),r.deleteShader(S),A=new Yh(r,_),T=fK(r,_)}let A;this.getUniforms=function(){return A===void 0&&M(this),A};let T;this.getAttributes=function(){return T===void 0&&M(this),T};let x=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(_,oK)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=sK++,this.cacheKey=t,this.usedTimes=1,this.program=_,this.vertexShader=C,this.fragmentShader=S,this}var RK=0,YC=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new ZC(t),e.set(t,i)),i}},ZC=class{constructor(t){this.id=RK++,this.code=t,this.usedTimes=0}};function TK(n,t,e,i,r,o,s){let a=new Kh,c=new YC,l=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(T){return l.add(T),T===0?"uv":`uv${T}`}function g(T,x,I,V,W){let te=V.fog,ne=W.geometry,B=T.isMeshStandardMaterial?V.environment:null,G=(T.isMeshStandardMaterial?e:t).get(T.envMap||B),U=G&&G.mapping===mf?G.image.height:null,se=m[T.type];T.precision!==null&&(f=r.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));let Ce=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Ie=Ce!==void 0?Ce.length:0,Qe=0;ne.morphAttributes.position!==void 0&&(Qe=1),ne.morphAttributes.normal!==void 0&&(Qe=2),ne.morphAttributes.color!==void 0&&(Qe=3);let vt,Q,Ee,We;if(se){let Di=xs[se];vt=Di.vertexShader,Q=Di.fragmentShader}else vt=T.vertexShader,Q=T.fragmentShader,c.update(T),Ee=c.getVertexShaderID(T),We=c.getFragmentShaderID(T);let N=n.getRenderTarget(),we=W.isInstancedMesh===!0,Ne=W.isBatchedMesh===!0,Ue=!!T.map,O=!!T.matcap,ye=!!G,Te=!!T.aoMap,Pe=!!T.lightMap,Ae=!!T.bumpMap,ke=!!T.normalMap,Ke=!!T.displacementMap,Xe=!!T.emissiveMap,Tt=!!T.metalnessMap,P=!!T.roughnessMap,E=T.anisotropy>0,re=T.clearcoat>0,Re=T.dispersion>0,Me=T.iridescence>0,De=T.sheen>0,pt=T.transmission>0,Ge=E&&!!T.anisotropyMap,ze=re&&!!T.clearcoatMap,Ct=re&&!!T.clearcoatNormalMap,Oe=re&&!!T.clearcoatRoughnessMap,rt=Me&&!!T.iridescenceMap,ci=Me&&!!T.iridescenceThicknessMap,At=De&&!!T.sheenColorMap,Je=De&&!!T.sheenRoughnessMap,Vt=!!T.specularMap,zt=!!T.specularColorMap,Vi=!!T.specularIntensityMap,w=pt&&!!T.transmissionMap,ce=pt&&!!T.thicknessMap,Z=!!T.gradientMap,he=!!T.alphaMap,Fe=T.alphaTest>0,wt=!!T.alphaHash,Ht=!!T.extensions,xn=ac;T.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(xn=n.toneMapping);let Un={shaderID:se,shaderType:T.type,shaderName:T.name,vertexShader:vt,fragmentShader:Q,defines:T.defines,customVertexShaderID:Ee,customFragmentShaderID:We,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:f,batching:Ne,batchingColor:Ne&&W._colorsTexture!==null,instancing:we,instancingColor:we&&W.instanceColor!==null,instancingMorph:we&&W.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:N===null?n.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Nn,alphaToCoverage:!!T.alphaToCoverage,map:Ue,matcap:O,envMap:ye,envMapMode:ye&&G.mapping,envMapCubeUVHeight:U,aoMap:Te,lightMap:Pe,bumpMap:Ae,normalMap:ke,displacementMap:h&&Ke,emissiveMap:Xe,normalMapObjectSpace:ke&&T.normalMapType===K2,normalMapTangentSpace:ke&&T.normalMapType===bl,metalnessMap:Tt,roughnessMap:P,anisotropy:E,anisotropyMap:Ge,clearcoat:re,clearcoatMap:ze,clearcoatNormalMap:Ct,clearcoatRoughnessMap:Oe,dispersion:Re,iridescence:Me,iridescenceMap:rt,iridescenceThicknessMap:ci,sheen:De,sheenColorMap:At,sheenRoughnessMap:Je,specularMap:Vt,specularColorMap:zt,specularIntensityMap:Vi,transmission:pt,transmissionMap:w,thicknessMap:ce,gradientMap:Z,opaque:T.transparent===!1&&T.blending===ws&&T.alphaToCoverage===!1,alphaMap:he,alphaTest:Fe,alphaHash:wt,combine:T.combine,mapUv:Ue&&_(T.map.channel),aoMapUv:Te&&_(T.aoMap.channel),lightMapUv:Pe&&_(T.lightMap.channel),bumpMapUv:Ae&&_(T.bumpMap.channel),normalMapUv:ke&&_(T.normalMap.channel),displacementMapUv:Ke&&_(T.displacementMap.channel),emissiveMapUv:Xe&&_(T.emissiveMap.channel),metalnessMapUv:Tt&&_(T.metalnessMap.channel),roughnessMapUv:P&&_(T.roughnessMap.channel),anisotropyMapUv:Ge&&_(T.anisotropyMap.channel),clearcoatMapUv:ze&&_(T.clearcoatMap.channel),clearcoatNormalMapUv:Ct&&_(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&_(T.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&_(T.iridescenceMap.channel),iridescenceThicknessMapUv:ci&&_(T.iridescenceThicknessMap.channel),sheenColorMapUv:At&&_(T.sheenColorMap.channel),sheenRoughnessMapUv:Je&&_(T.sheenRoughnessMap.channel),specularMapUv:Vt&&_(T.specularMap.channel),specularColorMapUv:zt&&_(T.specularColorMap.channel),specularIntensityMapUv:Vi&&_(T.specularIntensityMap.channel),transmissionMapUv:w&&_(T.transmissionMap.channel),thicknessMapUv:ce&&_(T.thicknessMap.channel),alphaMapUv:he&&_(T.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(ke||E),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!ne.attributes.uv&&(Ue||he),fog:!!te,useFog:T.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:W.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Qe,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:xn,decodeVideoTexture:Ue&&T.map.isVideoTexture===!0&&Si.getTransfer(T.map.colorSpace)===Ji,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Kn,flipSided:T.side===Wr,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:Ht&&T.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Ht&&T.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Un.vertexUv1s=l.has(1),Un.vertexUv2s=l.has(2),Un.vertexUv3s=l.has(3),l.clear(),Un}function p(T){let x=[];if(T.shaderID?x.push(T.shaderID):(x.push(T.customVertexShaderID),x.push(T.customFragmentShaderID)),T.defines!==void 0)for(let I in T.defines)x.push(I),x.push(T.defines[I]);return T.isRawShaderMaterial===!1&&(v(x,T),b(x,T),x.push(n.outputColorSpace)),x.push(T.customProgramCacheKey),x.join()}function v(T,x){T.push(x.precision),T.push(x.outputColorSpace),T.push(x.envMapMode),T.push(x.envMapCubeUVHeight),T.push(x.mapUv),T.push(x.alphaMapUv),T.push(x.lightMapUv),T.push(x.aoMapUv),T.push(x.bumpMapUv),T.push(x.normalMapUv),T.push(x.displacementMapUv),T.push(x.emissiveMapUv),T.push(x.metalnessMapUv),T.push(x.roughnessMapUv),T.push(x.anisotropyMapUv),T.push(x.clearcoatMapUv),T.push(x.clearcoatNormalMapUv),T.push(x.clearcoatRoughnessMapUv),T.push(x.iridescenceMapUv),T.push(x.iridescenceThicknessMapUv),T.push(x.sheenColorMapUv),T.push(x.sheenRoughnessMapUv),T.push(x.specularMapUv),T.push(x.specularColorMapUv),T.push(x.specularIntensityMapUv),T.push(x.transmissionMapUv),T.push(x.thicknessMapUv),T.push(x.combine),T.push(x.fogExp2),T.push(x.sizeAttenuation),T.push(x.morphTargetsCount),T.push(x.morphAttributeCount),T.push(x.numDirLights),T.push(x.numPointLights),T.push(x.numSpotLights),T.push(x.numSpotLightMaps),T.push(x.numHemiLights),T.push(x.numRectAreaLights),T.push(x.numDirLightShadows),T.push(x.numPointLightShadows),T.push(x.numSpotLightShadows),T.push(x.numSpotLightShadowsWithMaps),T.push(x.numLightProbes),T.push(x.shadowMapType),T.push(x.toneMapping),T.push(x.numClippingPlanes),T.push(x.numClipIntersection),T.push(x.depthPacking)}function b(T,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),T.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.skinning&&a.enable(4),x.morphTargets&&a.enable(5),x.morphNormals&&a.enable(6),x.morphColors&&a.enable(7),x.premultipliedAlpha&&a.enable(8),x.shadowMapEnabled&&a.enable(9),x.doubleSided&&a.enable(10),x.flipSided&&a.enable(11),x.useDepthPacking&&a.enable(12),x.dithering&&a.enable(13),x.transmission&&a.enable(14),x.sheen&&a.enable(15),x.opaque&&a.enable(16),x.pointsUvs&&a.enable(17),x.decodeVideoTexture&&a.enable(18),x.alphaToCoverage&&a.enable(19),T.push(a.mask)}function y(T){let x=m[T.type],I;if(x){let V=xs[x];I=Bi.clone(V.uniforms)}else I=T.uniforms;return I}function C(T,x){let I;for(let V=0,W=d.length;V<W;V++){let te=d[V];if(te.cacheKey===x){I=te,++I.usedTimes;break}}return I===void 0&&(I=new SK(n,x,T,o),d.push(I)),I}function S(T){if(--T.usedTimes===0){let x=d.indexOf(T);d[x]=d[d.length-1],d.pop(),T.destroy()}}function M(T){c.remove(T)}function A(){c.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:y,acquireProgram:C,releaseProgram:S,releaseShaderCache:M,programs:d,dispose:A}}function CK(){let n=new WeakMap;function t(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function e(o){n.delete(o)}function i(o,s,a){n.get(o)[s]=a}function r(){n=new WeakMap}return{get:t,remove:e,update:i,dispose:r}}function EK(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function hL(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function fL(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(u,h,f,m,_,g){let p=n[t];return p===void 0?(p={id:u.id,object:u,geometry:h,material:f,groupOrder:m,renderOrder:u.renderOrder,z:_,group:g},n[t]=p):(p.id=u.id,p.object=u,p.geometry=h,p.material=f,p.groupOrder=m,p.renderOrder=u.renderOrder,p.z=_,p.group=g),t++,p}function a(u,h,f,m,_,g){let p=s(u,h,f,m,_,g);f.transmission>0?i.push(p):f.transparent===!0?r.push(p):e.push(p)}function c(u,h,f,m,_,g){let p=s(u,h,f,m,_,g);f.transmission>0?i.unshift(p):f.transparent===!0?r.unshift(p):e.unshift(p)}function l(u,h){e.length>1&&e.sort(u||EK),i.length>1&&i.sort(h||hL),r.length>1&&r.sort(h||hL)}function d(){for(let u=t,h=n.length;u<h;u++){let f=n[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:a,unshift:c,finish:d,sort:l}}function DK(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new fL,n.set(i,[s])):r>=o.length?(s=new fL,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function AK(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new R,color:new ge};break;case"SpotLight":e={position:new R,direction:new R,color:new ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new R,color:new ge,distance:0,decay:0};break;case"HemisphereLight":e={direction:new R,skyColor:new ge,groundColor:new ge};break;case"RectAreaLight":e={color:new ge,position:new R,halfWidth:new R,halfHeight:new R};break}return n[t.id]=e,e}}}function IK(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var PK=0;function FK(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function kK(n){let t=new AK,e=IK(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new R);let r=new R,o=new Be,s=new Be;function a(l){let d=0,u=0,h=0;for(let T=0;T<9;T++)i.probe[T].set(0,0,0);let f=0,m=0,_=0,g=0,p=0,v=0,b=0,y=0,C=0,S=0,M=0;l.sort(FK);for(let T=0,x=l.length;T<x;T++){let I=l[T],V=I.color,W=I.intensity,te=I.distance,ne=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=V.r*W,u+=V.g*W,h+=V.b*W;else if(I.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector(I.sh.coefficients[B],W);M++}else if(I.isDirectionalLight){let B=t.get(I);if(B.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){let G=I.shadow,U=e.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,i.directionalShadow[f]=U,i.directionalShadowMap[f]=ne,i.directionalShadowMatrix[f]=I.shadow.matrix,v++}i.directional[f]=B,f++}else if(I.isSpotLight){let B=t.get(I);B.position.setFromMatrixPosition(I.matrixWorld),B.color.copy(V).multiplyScalar(W),B.distance=te,B.coneCos=Math.cos(I.angle),B.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),B.decay=I.decay,i.spot[_]=B;let G=I.shadow;if(I.map&&(i.spotLightMap[C]=I.map,C++,G.updateMatrices(I),I.castShadow&&S++),i.spotLightMatrix[_]=G.matrix,I.castShadow){let U=e.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,i.spotShadow[_]=U,i.spotShadowMap[_]=ne,y++}_++}else if(I.isRectAreaLight){let B=t.get(I);B.color.copy(V).multiplyScalar(W),B.halfWidth.set(I.width*.5,0,0),B.halfHeight.set(0,I.height*.5,0),i.rectArea[g]=B,g++}else if(I.isPointLight){let B=t.get(I);if(B.color.copy(I.color).multiplyScalar(I.intensity),B.distance=I.distance,B.decay=I.decay,I.castShadow){let G=I.shadow,U=e.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,U.shadowCameraNear=G.camera.near,U.shadowCameraFar=G.camera.far,i.pointShadow[m]=U,i.pointShadowMap[m]=ne,i.pointShadowMatrix[m]=I.shadow.matrix,b++}i.point[m]=B,m++}else if(I.isHemisphereLight){let B=t.get(I);B.skyColor.copy(I.color).multiplyScalar(W),B.groundColor.copy(I.groundColor).multiplyScalar(W),i.hemi[p]=B,p++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ze.LTC_FLOAT_1,i.rectAreaLTC2=Ze.LTC_FLOAT_2):(i.rectAreaLTC1=Ze.LTC_HALF_1,i.rectAreaLTC2=Ze.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=u,i.ambient[2]=h;let A=i.hash;(A.directionalLength!==f||A.pointLength!==m||A.spotLength!==_||A.rectAreaLength!==g||A.hemiLength!==p||A.numDirectionalShadows!==v||A.numPointShadows!==b||A.numSpotShadows!==y||A.numSpotMaps!==C||A.numLightProbes!==M)&&(i.directional.length=f,i.spot.length=_,i.rectArea.length=g,i.point.length=m,i.hemi.length=p,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=y+C-S,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=M,A.directionalLength=f,A.pointLength=m,A.spotLength=_,A.rectAreaLength=g,A.hemiLength=p,A.numDirectionalShadows=v,A.numPointShadows=b,A.numSpotShadows=y,A.numSpotMaps=C,A.numLightProbes=M,i.version=PK++)}function c(l,d){let u=0,h=0,f=0,m=0,_=0,g=d.matrixWorldInverse;for(let p=0,v=l.length;p<v;p++){let b=l[p];if(b.isDirectionalLight){let y=i.directional[u];y.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),u++}else if(b.isSpotLight){let y=i.spot[f];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(g),y.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),f++}else if(b.isRectAreaLight){let y=i.rectArea[m];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(g),s.identity(),o.copy(b.matrixWorld),o.premultiply(g),s.extractRotation(o),y.halfWidth.set(b.width*.5,0,0),y.halfHeight.set(0,b.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),m++}else if(b.isPointLight){let y=i.point[h];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(g),h++}else if(b.isHemisphereLight){let y=i.hemi[_];y.direction.setFromMatrixPosition(b.matrixWorld),y.direction.transformDirection(g),_++}}}return{setup:a,setupView:c,state:i}}function pL(n){let t=new kK(n),e=[],i=[];function r(d){l.camera=d,e.length=0,i.length=0}function o(d){e.push(d)}function s(d){i.push(d)}function a(){t.setup(e)}function c(d){t.setupView(e,d)}let l={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function jK(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new pL(n),t.set(r,[a])):o>=s.length?(a=new pL(n),s.push(a)):a=s[o],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var Wd=class extends un{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Q2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},Bm=class extends un{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},OK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,NK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function LK(n,t,e){let i=new Gd,r=new z,o=new z,s=new yi,a=new Wd({depthPacking:$y}),c=new Bm,l={},d=e.maxTextureSize,u={[Ms]:Wr,[Wr]:Ms,[Kn]:Kn},h=new kt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z},radius:{value:4}},vertexShader:OK,fragmentShader:NK}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new gt;m.setAttribute("position",new fi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let _=new Ve(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=WE;let p=this.type;this.render=function(S,M,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;let T=n.getRenderTarget(),x=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),V=n.state;V.setBlending(ei),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);let W=p!==ra&&this.type===ra,te=p===ra&&this.type!==ra;for(let ne=0,B=S.length;ne<B;ne++){let G=S[ne],U=G.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);let se=U.getFrameExtents();if(r.multiply(se),o.copy(U.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/se.x),r.x=o.x*se.x,U.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/se.y),r.y=o.y*se.y,U.mapSize.y=o.y)),U.map===null||W===!0||te===!0){let Ie=this.type!==ra?{minFilter:hi,magFilter:hi}:{};U.map!==null&&U.map.dispose(),U.map=new ai(r.x,r.y,Ie),U.map.texture.name=G.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();let Ce=U.getViewportCount();for(let Ie=0;Ie<Ce;Ie++){let Qe=U.getViewport(Ie);s.set(o.x*Qe.x,o.y*Qe.y,o.x*Qe.z,o.y*Qe.w),V.viewport(s),U.updateMatrices(G,Ie),i=U.getFrustum(),y(M,A,U.camera,G,this.type)}U.isPointLightShadow!==!0&&this.type===ra&&v(U,A),U.needsUpdate=!1}p=this.type,g.needsUpdate=!1,n.setRenderTarget(T,x,I)};function v(S,M){let A=t.update(_);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new ai(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(M,null,A,h,_,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(M,null,A,f,_,null)}function b(S,M,A,T){let x=null,I=A.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(I!==void 0)x=I;else if(x=A.isPointLight===!0?c:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){let V=x.uuid,W=M.uuid,te=l[V];te===void 0&&(te={},l[V]=te);let ne=te[W];ne===void 0&&(ne=x.clone(),te[W]=ne,M.addEventListener("dispose",C)),x=ne}if(x.visible=M.visible,x.wireframe=M.wireframe,T===ra?x.side=M.shadowSide!==null?M.shadowSide:M.side:x.side=M.shadowSide!==null?M.shadowSide:u[M.side],x.alphaMap=M.alphaMap,x.alphaTest=M.alphaTest,x.map=M.map,x.clipShadows=M.clipShadows,x.clippingPlanes=M.clippingPlanes,x.clipIntersection=M.clipIntersection,x.displacementMap=M.displacementMap,x.displacementScale=M.displacementScale,x.displacementBias=M.displacementBias,x.wireframeLinewidth=M.wireframeLinewidth,x.linewidth=M.linewidth,A.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let V=n.properties.get(x);V.light=A}return x}function y(S,M,A,T,x){if(S.visible===!1)return;if(S.layers.test(M.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&x===ra)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,S.matrixWorld);let W=t.update(S),te=S.material;if(Array.isArray(te)){let ne=W.groups;for(let B=0,G=ne.length;B<G;B++){let U=ne[B],se=te[U.materialIndex];if(se&&se.visible){let Ce=b(S,se,T,x);S.onBeforeShadow(n,S,M,A,W,Ce,U),n.renderBufferDirect(A,null,W,Ce,S,U),S.onAfterShadow(n,S,M,A,W,Ce,U)}}}else if(te.visible){let ne=b(S,te,T,x);S.onBeforeShadow(n,S,M,A,W,ne,null),n.renderBufferDirect(A,null,W,ne,S,null),S.onAfterShadow(n,S,M,A,W,ne,null)}}let V=S.children;for(let W=0,te=V.length;W<te;W++)y(V[W],M,A,T,x)}function C(S){S.target.removeEventListener("dispose",C);for(let A in l){let T=l[A],x=S.target.uuid;x in T&&(T[x].dispose(),delete T[x])}}}function BK(n){function t(){let w=!1,ce=new yi,Z=null,he=new yi(0,0,0,0);return{setMask:function(Fe){Z!==Fe&&!w&&(n.colorMask(Fe,Fe,Fe,Fe),Z=Fe)},setLocked:function(Fe){w=Fe},setClear:function(Fe,wt,Ht,xn,Un){Un===!0&&(Fe*=xn,wt*=xn,Ht*=xn),ce.set(Fe,wt,Ht,xn),he.equals(ce)===!1&&(n.clearColor(Fe,wt,Ht,xn),he.copy(ce))},reset:function(){w=!1,Z=null,he.set(-1,0,0,0)}}}function e(){let w=!1,ce=null,Z=null,he=null;return{setTest:function(Fe){Fe?We(n.DEPTH_TEST):N(n.DEPTH_TEST)},setMask:function(Fe){ce!==Fe&&!w&&(n.depthMask(Fe),ce=Fe)},setFunc:function(Fe){if(Z!==Fe){switch(Fe){case M2:n.depthFunc(n.NEVER);break;case S2:n.depthFunc(n.ALWAYS);break;case R2:n.depthFunc(n.LESS);break;case Rm:n.depthFunc(n.LEQUAL);break;case T2:n.depthFunc(n.EQUAL);break;case C2:n.depthFunc(n.GEQUAL);break;case E2:n.depthFunc(n.GREATER);break;case D2:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Z=Fe}},setLocked:function(Fe){w=Fe},setClear:function(Fe){he!==Fe&&(n.clearDepth(Fe),he=Fe)},reset:function(){w=!1,ce=null,Z=null,he=null}}}function i(){let w=!1,ce=null,Z=null,he=null,Fe=null,wt=null,Ht=null,xn=null,Un=null;return{setTest:function(Di){w||(Di?We(n.STENCIL_TEST):N(n.STENCIL_TEST))},setMask:function(Di){ce!==Di&&!w&&(n.stencilMask(Di),ce=Di)},setFunc:function(Di,Vn,zn){(Z!==Di||he!==Vn||Fe!==zn)&&(n.stencilFunc(Di,Vn,zn),Z=Di,he=Vn,Fe=zn)},setOp:function(Di,Vn,zn){(wt!==Di||Ht!==Vn||xn!==zn)&&(n.stencilOp(Di,Vn,zn),wt=Di,Ht=Vn,xn=zn)},setLocked:function(Di){w=Di},setClear:function(Di){Un!==Di&&(n.clearStencil(Di),Un=Di)},reset:function(){w=!1,ce=null,Z=null,he=null,Fe=null,wt=null,Ht=null,xn=null,Un=null}}}let r=new t,o=new e,s=new i,a=new WeakMap,c=new WeakMap,l={},d={},u=new WeakMap,h=[],f=null,m=!1,_=null,g=null,p=null,v=null,b=null,y=null,C=null,S=new ge(0,0,0),M=0,A=!1,T=null,x=null,I=null,V=null,W=null,te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ne=!1,B=0,G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(G)[1]),ne=B>=1):G.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),ne=B>=2);let U=null,se={},Ce=n.getParameter(n.SCISSOR_BOX),Ie=n.getParameter(n.VIEWPORT),Qe=new yi().fromArray(Ce),vt=new yi().fromArray(Ie);function Q(w,ce,Z,he){let Fe=new Uint8Array(4),wt=n.createTexture();n.bindTexture(w,wt),n.texParameteri(w,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(w,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ht=0;Ht<Z;Ht++)w===n.TEXTURE_3D||w===n.TEXTURE_2D_ARRAY?n.texImage3D(ce,0,n.RGBA,1,1,he,0,n.RGBA,n.UNSIGNED_BYTE,Fe):n.texImage2D(ce+Ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Fe);return wt}let Ee={};Ee[n.TEXTURE_2D]=Q(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=Q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[n.TEXTURE_2D_ARRAY]=Q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=Q(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),We(n.DEPTH_TEST),o.setFunc(Rm),Ae(!1),ke(oC),We(n.CULL_FACE),Te(ei);function We(w){l[w]!==!0&&(n.enable(w),l[w]=!0)}function N(w){l[w]!==!1&&(n.disable(w),l[w]=!1)}function we(w,ce){return d[w]!==ce?(n.bindFramebuffer(w,ce),d[w]=ce,w===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ce),w===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ce),!0):!1}function Ne(w,ce){let Z=h,he=!1;if(w){Z=u.get(ce),Z===void 0&&(Z=[],u.set(ce,Z));let Fe=w.textures;if(Z.length!==Fe.length||Z[0]!==n.COLOR_ATTACHMENT0){for(let wt=0,Ht=Fe.length;wt<Ht;wt++)Z[wt]=n.COLOR_ATTACHMENT0+wt;Z.length=Fe.length,he=!0}}else Z[0]!==n.BACK&&(Z[0]=n.BACK,he=!0);he&&n.drawBuffers(Z)}function Ue(w){return f!==w?(n.useProgram(w),f=w,!0):!1}let O={[vr]:n.FUNC_ADD,[l2]:n.FUNC_SUBTRACT,[d2]:n.FUNC_REVERSE_SUBTRACT};O[u2]=n.MIN,O[h2]=n.MAX;let ye={[_l]:n.ZERO,[f2]:n.ONE,[p2]:n.SRC_COLOR,[Od]:n.SRC_ALPHA,[b2]:n.SRC_ALPHA_SATURATE,[pf]:n.DST_COLOR,[ff]:n.DST_ALPHA,[m2]:n.ONE_MINUS_SRC_COLOR,[Nd]:n.ONE_MINUS_SRC_ALPHA,[_2]:n.ONE_MINUS_DST_COLOR,[g2]:n.ONE_MINUS_DST_ALPHA,[v2]:n.CONSTANT_COLOR,[y2]:n.ONE_MINUS_CONSTANT_COLOR,[x2]:n.CONSTANT_ALPHA,[w2]:n.ONE_MINUS_CONSTANT_ALPHA};function Te(w,ce,Z,he,Fe,wt,Ht,xn,Un,Di){if(w===ei){m===!0&&(N(n.BLEND),m=!1);return}if(m===!1&&(We(n.BLEND),m=!0),w!==Jd){if(w!==_||Di!==A){if((g!==vr||b!==vr)&&(n.blendEquation(n.FUNC_ADD),g=vr,b=vr),Di)switch(w){case ws:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case jd:n.blendFunc(n.ONE,n.ONE);break;case sC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case aC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",w);break}else switch(w){case ws:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case jd:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case sC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case aC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",w);break}p=null,v=null,y=null,C=null,S.set(0,0,0),M=0,_=w,A=Di}return}Fe=Fe||ce,wt=wt||Z,Ht=Ht||he,(ce!==g||Fe!==b)&&(n.blendEquationSeparate(O[ce],O[Fe]),g=ce,b=Fe),(Z!==p||he!==v||wt!==y||Ht!==C)&&(n.blendFuncSeparate(ye[Z],ye[he],ye[wt],ye[Ht]),p=Z,v=he,y=wt,C=Ht),(xn.equals(S)===!1||Un!==M)&&(n.blendColor(xn.r,xn.g,xn.b,Un),S.copy(xn),M=Un),_=w,A=!1}function Pe(w,ce){w.side===Kn?N(n.CULL_FACE):We(n.CULL_FACE);let Z=w.side===Wr;ce&&(Z=!Z),Ae(Z),w.blending===ws&&w.transparent===!1?Te(ei):Te(w.blending,w.blendEquation,w.blendSrc,w.blendDst,w.blendEquationAlpha,w.blendSrcAlpha,w.blendDstAlpha,w.blendColor,w.blendAlpha,w.premultipliedAlpha),o.setFunc(w.depthFunc),o.setTest(w.depthTest),o.setMask(w.depthWrite),r.setMask(w.colorWrite);let he=w.stencilWrite;s.setTest(he),he&&(s.setMask(w.stencilWriteMask),s.setFunc(w.stencilFunc,w.stencilRef,w.stencilFuncMask),s.setOp(w.stencilFail,w.stencilZFail,w.stencilZPass)),Xe(w.polygonOffset,w.polygonOffsetFactor,w.polygonOffsetUnits),w.alphaToCoverage===!0?We(n.SAMPLE_ALPHA_TO_COVERAGE):N(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(w){T!==w&&(w?n.frontFace(n.CW):n.frontFace(n.CCW),T=w)}function ke(w){w!==s2?(We(n.CULL_FACE),w!==x&&(w===oC?n.cullFace(n.BACK):w===a2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):N(n.CULL_FACE),x=w}function Ke(w){w!==I&&(ne&&n.lineWidth(w),I=w)}function Xe(w,ce,Z){w?(We(n.POLYGON_OFFSET_FILL),(V!==ce||W!==Z)&&(n.polygonOffset(ce,Z),V=ce,W=Z)):N(n.POLYGON_OFFSET_FILL)}function Tt(w){w?We(n.SCISSOR_TEST):N(n.SCISSOR_TEST)}function P(w){w===void 0&&(w=n.TEXTURE0+te-1),U!==w&&(n.activeTexture(w),U=w)}function E(w,ce,Z){Z===void 0&&(U===null?Z=n.TEXTURE0+te-1:Z=U);let he=se[Z];he===void 0&&(he={type:void 0,texture:void 0},se[Z]=he),(he.type!==w||he.texture!==ce)&&(U!==Z&&(n.activeTexture(Z),U=Z),n.bindTexture(w,ce||Ee[w]),he.type=w,he.texture=ce)}function re(){let w=se[U];w!==void 0&&w.type!==void 0&&(n.bindTexture(w.type,null),w.type=void 0,w.texture=void 0)}function Re(){try{n.compressedTexImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function De(){try{n.texSubImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function pt(){try{n.texSubImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Ct(){try{n.texStorage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Oe(){try{n.texStorage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function rt(){try{n.texImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function ci(){try{n.texImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function At(w){Qe.equals(w)===!1&&(n.scissor(w.x,w.y,w.z,w.w),Qe.copy(w))}function Je(w){vt.equals(w)===!1&&(n.viewport(w.x,w.y,w.z,w.w),vt.copy(w))}function Vt(w,ce){let Z=c.get(ce);Z===void 0&&(Z=new WeakMap,c.set(ce,Z));let he=Z.get(w);he===void 0&&(he=n.getUniformBlockIndex(ce,w.name),Z.set(w,he))}function zt(w,ce){let he=c.get(ce).get(w);a.get(ce)!==he&&(n.uniformBlockBinding(ce,he,w.__bindingPointIndex),a.set(ce,he))}function Vi(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},U=null,se={},d={},u=new WeakMap,h=[],f=null,m=!1,_=null,g=null,p=null,v=null,b=null,y=null,C=null,S=new ge(0,0,0),M=0,A=!1,T=null,x=null,I=null,V=null,W=null,Qe.set(0,0,n.canvas.width,n.canvas.height),vt.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),s.reset()}return{buffers:{color:r,depth:o,stencil:s},enable:We,disable:N,bindFramebuffer:we,drawBuffers:Ne,useProgram:Ue,setBlending:Te,setMaterial:Pe,setFlipSided:Ae,setCullFace:ke,setLineWidth:Ke,setPolygonOffset:Xe,setScissorTest:Tt,activeTexture:P,bindTexture:E,unbindTexture:re,compressedTexImage2D:Re,compressedTexImage3D:Me,texImage2D:rt,texImage3D:ci,updateUBOMapping:Vt,uniformBlockBinding:zt,texStorage2D:Ct,texStorage3D:Oe,texSubImage2D:De,texSubImage3D:pt,compressedTexSubImage2D:Ge,compressedTexSubImage3D:ze,scissor:At,viewport:Je,reset:Vi}}function UK(n,t,e,i,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new z,d=new WeakMap,u,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(P,E){return f?new OffscreenCanvas(P,E):km("canvas")}function _(P,E,re){let Re=1,Me=Tt(P);if((Me.width>re||Me.height>re)&&(Re=re/Math.max(Me.width,Me.height)),Re<1)if(typeof HTMLImageElement<"u"&&P instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&P instanceof ImageBitmap||typeof VideoFrame<"u"&&P instanceof VideoFrame){let De=Math.floor(Re*Me.width),pt=Math.floor(Re*Me.height);u===void 0&&(u=m(De,pt));let Ge=E?m(De,pt):u;return Ge.width=De,Ge.height=pt,Ge.getContext("2d").drawImage(P,0,0,De,pt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+De+"x"+pt+")."),Ge}else return"data"in P&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),P;return P}function g(P){return P.generateMipmaps&&P.minFilter!==hi&&P.minFilter!==_n}function p(P){n.generateMipmap(P)}function v(P,E,re,Re,Me=!1){if(P!==null){if(n[P]!==void 0)return n[P];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+P+"'")}let De=E;if(E===n.RED&&(re===n.FLOAT&&(De=n.R32F),re===n.HALF_FLOAT&&(De=n.R16F),re===n.UNSIGNED_BYTE&&(De=n.R8)),E===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(De=n.R8UI),re===n.UNSIGNED_SHORT&&(De=n.R16UI),re===n.UNSIGNED_INT&&(De=n.R32UI),re===n.BYTE&&(De=n.R8I),re===n.SHORT&&(De=n.R16I),re===n.INT&&(De=n.R32I)),E===n.RG&&(re===n.FLOAT&&(De=n.RG32F),re===n.HALF_FLOAT&&(De=n.RG16F),re===n.UNSIGNED_BYTE&&(De=n.RG8)),E===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(De=n.RG8UI),re===n.UNSIGNED_SHORT&&(De=n.RG16UI),re===n.UNSIGNED_INT&&(De=n.RG32UI),re===n.BYTE&&(De=n.RG8I),re===n.SHORT&&(De=n.RG16I),re===n.INT&&(De=n.RG32I)),E===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(De=n.RGB9_E5),E===n.RGBA){let pt=Me?Dm:Si.getTransfer(Re);re===n.FLOAT&&(De=n.RGBA32F),re===n.HALF_FLOAT&&(De=n.RGBA16F),re===n.UNSIGNED_BYTE&&(De=pt===Ji?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(De=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(De=n.RGB5_A1)}return(De===n.R16F||De===n.R32F||De===n.RG16F||De===n.RG32F||De===n.RGBA16F||De===n.RGBA32F)&&t.get("EXT_color_buffer_float"),De}function b(P,E){let re;return P?E===null||E===Ud||E===Ss?re=n.DEPTH24_STENCIL8:E===yr?re=n.DEPTH32F_STENCIL8:E===Bd&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):E===null||E===Ud||E===Ss?re=n.DEPTH_COMPONENT24:E===yr?re=n.DEPTH_COMPONENT32F:E===Bd&&(re=n.DEPTH_COMPONENT16),re}function y(P,E){return g(P)===!0||P.isFramebufferTexture&&P.minFilter!==hi&&P.minFilter!==_n?Math.log2(Math.max(E.width,E.height))+1:P.mipmaps!==void 0&&P.mipmaps.length>0?P.mipmaps.length:P.isCompressedTexture&&Array.isArray(P.image)?E.mipmaps.length:1}function C(P){let E=P.target;E.removeEventListener("dispose",C),M(E),E.isVideoTexture&&d.delete(E)}function S(P){let E=P.target;E.removeEventListener("dispose",S),T(E)}function M(P){let E=i.get(P);if(E.__webglInit===void 0)return;let re=P.source,Re=h.get(re);if(Re){let Me=Re[E.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&A(P),Object.keys(Re).length===0&&h.delete(re)}i.remove(P)}function A(P){let E=i.get(P);n.deleteTexture(E.__webglTexture);let re=P.source,Re=h.get(re);delete Re[E.__cacheKey],s.memory.textures--}function T(P){let E=i.get(P);if(P.depthTexture&&P.depthTexture.dispose(),P.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(E.__webglFramebuffer[Re]))for(let Me=0;Me<E.__webglFramebuffer[Re].length;Me++)n.deleteFramebuffer(E.__webglFramebuffer[Re][Me]);else n.deleteFramebuffer(E.__webglFramebuffer[Re]);E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer[Re])}else{if(Array.isArray(E.__webglFramebuffer))for(let Re=0;Re<E.__webglFramebuffer.length;Re++)n.deleteFramebuffer(E.__webglFramebuffer[Re]);else n.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&n.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let Re=0;Re<E.__webglColorRenderbuffer.length;Re++)E.__webglColorRenderbuffer[Re]&&n.deleteRenderbuffer(E.__webglColorRenderbuffer[Re]);E.__webglDepthRenderbuffer&&n.deleteRenderbuffer(E.__webglDepthRenderbuffer)}let re=P.textures;for(let Re=0,Me=re.length;Re<Me;Re++){let De=i.get(re[Re]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),s.memory.textures--),i.remove(re[Re])}i.remove(P)}let x=0;function I(){x=0}function V(){let P=x;return P>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+P+" texture units while this GPU supports only "+r.maxTextures),x+=1,P}function W(P){let E=[];return E.push(P.wrapS),E.push(P.wrapT),E.push(P.wrapR||0),E.push(P.magFilter),E.push(P.minFilter),E.push(P.anisotropy),E.push(P.internalFormat),E.push(P.format),E.push(P.type),E.push(P.generateMipmaps),E.push(P.premultiplyAlpha),E.push(P.flipY),E.push(P.unpackAlignment),E.push(P.colorSpace),E.join()}function te(P,E){let re=i.get(P);if(P.isVideoTexture&&Ke(P),P.isRenderTargetTexture===!1&&P.version>0&&re.__version!==P.version){let Re=P.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{vt(re,P,E);return}}e.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+E)}function ne(P,E){let re=i.get(P);if(P.version>0&&re.__version!==P.version){vt(re,P,E);return}e.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+E)}function B(P,E){let re=i.get(P);if(P.version>0&&re.__version!==P.version){vt(re,P,E);return}e.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+E)}function G(P,E){let re=i.get(P);if(P.version>0&&re.__version!==P.version){Q(re,P,E);return}e.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+E)}let U={[Ko]:n.REPEAT,[oo]:n.CLAMP_TO_EDGE,[Ld]:n.MIRRORED_REPEAT},se={[hi]:n.NEAREST,[sg]:n.NEAREST_MIPMAP_NEAREST,[dl]:n.NEAREST_MIPMAP_LINEAR,[_n]:n.LINEAR,[Pd]:n.LINEAR_MIPMAP_NEAREST,[Eo]:n.LINEAR_MIPMAP_LINEAR},Ce={[J2]:n.NEVER,[oB]:n.ALWAYS,[eB]:n.LESS,[eD]:n.LEQUAL,[tB]:n.EQUAL,[rB]:n.GEQUAL,[iB]:n.GREATER,[nB]:n.NOTEQUAL};function Ie(P,E){if(E.type===yr&&t.has("OES_texture_float_linear")===!1&&(E.magFilter===_n||E.magFilter===Pd||E.magFilter===dl||E.magFilter===Eo||E.minFilter===_n||E.minFilter===Pd||E.minFilter===dl||E.minFilter===Eo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(P,n.TEXTURE_WRAP_S,U[E.wrapS]),n.texParameteri(P,n.TEXTURE_WRAP_T,U[E.wrapT]),(P===n.TEXTURE_3D||P===n.TEXTURE_2D_ARRAY)&&n.texParameteri(P,n.TEXTURE_WRAP_R,U[E.wrapR]),n.texParameteri(P,n.TEXTURE_MAG_FILTER,se[E.magFilter]),n.texParameteri(P,n.TEXTURE_MIN_FILTER,se[E.minFilter]),E.compareFunction&&(n.texParameteri(P,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(P,n.TEXTURE_COMPARE_FUNC,Ce[E.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(E.magFilter===hi||E.minFilter!==dl&&E.minFilter!==Eo||E.type===yr&&t.has("OES_texture_float_linear")===!1)return;if(E.anisotropy>1||i.get(E).__currentAnisotropy){let re=t.get("EXT_texture_filter_anisotropic");n.texParameterf(P,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy}}}function Qe(P,E){let re=!1;P.__webglInit===void 0&&(P.__webglInit=!0,E.addEventListener("dispose",C));let Re=E.source,Me=h.get(Re);Me===void 0&&(Me={},h.set(Re,Me));let De=W(E);if(De!==P.__cacheKey){Me[De]===void 0&&(Me[De]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,re=!0),Me[De].usedTimes++;let pt=Me[P.__cacheKey];pt!==void 0&&(Me[P.__cacheKey].usedTimes--,pt.usedTimes===0&&A(E)),P.__cacheKey=De,P.__webglTexture=Me[De].texture}return re}function vt(P,E,re){let Re=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(Re=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(Re=n.TEXTURE_3D);let Me=Qe(P,E),De=E.source;e.bindTexture(Re,P.__webglTexture,n.TEXTURE0+re);let pt=i.get(De);if(De.version!==pt.__version||Me===!0){e.activeTexture(n.TEXTURE0+re);let Ge=Si.getPrimaries(Si.workingColorSpace),ze=E.colorSpace===ic?null:Si.getPrimaries(E.colorSpace),Ct=E.colorSpace===ic||Ge===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let Oe=_(E.image,!1,r.maxTextureSize);Oe=Xe(E,Oe);let rt=o.convert(E.format,E.colorSpace),ci=o.convert(E.type),At=v(E.internalFormat,rt,ci,E.colorSpace,E.isVideoTexture);Ie(Re,E);let Je,Vt=E.mipmaps,zt=E.isVideoTexture!==!0,Vi=pt.__version===void 0||Me===!0,w=De.dataReady,ce=y(E,Oe);if(E.isDepthTexture)At=b(E.format===Rs,E.type),Vi&&(zt?e.texStorage2D(n.TEXTURE_2D,1,At,Oe.width,Oe.height):e.texImage2D(n.TEXTURE_2D,0,At,Oe.width,Oe.height,0,rt,ci,null));else if(E.isDataTexture)if(Vt.length>0){zt&&Vi&&e.texStorage2D(n.TEXTURE_2D,ce,At,Vt[0].width,Vt[0].height);for(let Z=0,he=Vt.length;Z<he;Z++)Je=Vt[Z],zt?w&&e.texSubImage2D(n.TEXTURE_2D,Z,0,0,Je.width,Je.height,rt,ci,Je.data):e.texImage2D(n.TEXTURE_2D,Z,At,Je.width,Je.height,0,rt,ci,Je.data);E.generateMipmaps=!1}else zt?(Vi&&e.texStorage2D(n.TEXTURE_2D,ce,At,Oe.width,Oe.height),w&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,rt,ci,Oe.data)):e.texImage2D(n.TEXTURE_2D,0,At,Oe.width,Oe.height,0,rt,ci,Oe.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){zt&&Vi&&e.texStorage3D(n.TEXTURE_2D_ARRAY,ce,At,Vt[0].width,Vt[0].height,Oe.depth);for(let Z=0,he=Vt.length;Z<he;Z++)if(Je=Vt[Z],E.format!==so)if(rt!==null)if(zt){if(w)if(E.layerUpdates.size>0){for(let Fe of E.layerUpdates){let wt=Je.width*Je.height;e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Z,0,0,Fe,Je.width,Je.height,1,rt,Je.data.slice(wt*Fe,wt*(Fe+1)),0,0)}E.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Z,0,0,0,Je.width,Je.height,Oe.depth,rt,Je.data,0,0)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Z,At,Je.width,Je.height,Oe.depth,0,Je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else zt?w&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Z,0,0,0,Je.width,Je.height,Oe.depth,rt,ci,Je.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Z,At,Je.width,Je.height,Oe.depth,0,rt,ci,Je.data)}else{zt&&Vi&&e.texStorage2D(n.TEXTURE_2D,ce,At,Vt[0].width,Vt[0].height);for(let Z=0,he=Vt.length;Z<he;Z++)Je=Vt[Z],E.format!==so?rt!==null?zt?w&&e.compressedTexSubImage2D(n.TEXTURE_2D,Z,0,0,Je.width,Je.height,rt,Je.data):e.compressedTexImage2D(n.TEXTURE_2D,Z,At,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?w&&e.texSubImage2D(n.TEXTURE_2D,Z,0,0,Je.width,Je.height,rt,ci,Je.data):e.texImage2D(n.TEXTURE_2D,Z,At,Je.width,Je.height,0,rt,ci,Je.data)}else if(E.isDataArrayTexture)if(zt){if(Vi&&e.texStorage3D(n.TEXTURE_2D_ARRAY,ce,At,Oe.width,Oe.height,Oe.depth),w)if(E.layerUpdates.size>0){let Z;switch(ci){case n.UNSIGNED_BYTE:switch(rt){case n.ALPHA:Z=1;break;case n.LUMINANCE:Z=1;break;case n.LUMINANCE_ALPHA:Z=2;break;case n.RGB:Z=3;break;case n.RGBA:Z=4;break;default:throw new Error(`Unknown texel size for format ${rt}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:Z=1;break;default:throw new Error(`Unknown texel size for type ${ci}.`)}let he=Oe.width*Oe.height*Z;for(let Fe of E.layerUpdates)e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Fe,Oe.width,Oe.height,1,rt,ci,Oe.data.slice(he*Fe,he*(Fe+1)));E.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,rt,ci,Oe.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,At,Oe.width,Oe.height,Oe.depth,0,rt,ci,Oe.data);else if(E.isData3DTexture)zt?(Vi&&e.texStorage3D(n.TEXTURE_3D,ce,At,Oe.width,Oe.height,Oe.depth),w&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,rt,ci,Oe.data)):e.texImage3D(n.TEXTURE_3D,0,At,Oe.width,Oe.height,Oe.depth,0,rt,ci,Oe.data);else if(E.isFramebufferTexture){if(Vi)if(zt)e.texStorage2D(n.TEXTURE_2D,ce,At,Oe.width,Oe.height);else{let Z=Oe.width,he=Oe.height;for(let Fe=0;Fe<ce;Fe++)e.texImage2D(n.TEXTURE_2D,Fe,At,Z,he,0,rt,ci,null),Z>>=1,he>>=1}}else if(Vt.length>0){if(zt&&Vi){let Z=Tt(Vt[0]);e.texStorage2D(n.TEXTURE_2D,ce,At,Z.width,Z.height)}for(let Z=0,he=Vt.length;Z<he;Z++)Je=Vt[Z],zt?w&&e.texSubImage2D(n.TEXTURE_2D,Z,0,0,rt,ci,Je):e.texImage2D(n.TEXTURE_2D,Z,At,rt,ci,Je);E.generateMipmaps=!1}else if(zt){if(Vi){let Z=Tt(Oe);e.texStorage2D(n.TEXTURE_2D,ce,At,Z.width,Z.height)}w&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,rt,ci,Oe)}else e.texImage2D(n.TEXTURE_2D,0,At,rt,ci,Oe);g(E)&&p(Re),pt.__version=De.version,E.onUpdate&&E.onUpdate(E)}P.__version=E.version}function Q(P,E,re){if(E.image.length!==6)return;let Re=Qe(P,E),Me=E.source;e.bindTexture(n.TEXTURE_CUBE_MAP,P.__webglTexture,n.TEXTURE0+re);let De=i.get(Me);if(Me.version!==De.__version||Re===!0){e.activeTexture(n.TEXTURE0+re);let pt=Si.getPrimaries(Si.workingColorSpace),Ge=E.colorSpace===ic?null:Si.getPrimaries(E.colorSpace),ze=E.colorSpace===ic||pt===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);let Ct=E.isCompressedTexture||E.image[0].isCompressedTexture,Oe=E.image[0]&&E.image[0].isDataTexture,rt=[];for(let he=0;he<6;he++)!Ct&&!Oe?rt[he]=_(E.image[he],!0,r.maxCubemapSize):rt[he]=Oe?E.image[he].image:E.image[he],rt[he]=Xe(E,rt[he]);let ci=rt[0],At=o.convert(E.format,E.colorSpace),Je=o.convert(E.type),Vt=v(E.internalFormat,At,Je,E.colorSpace),zt=E.isVideoTexture!==!0,Vi=De.__version===void 0||Re===!0,w=Me.dataReady,ce=y(E,ci);Ie(n.TEXTURE_CUBE_MAP,E);let Z;if(Ct){zt&&Vi&&e.texStorage2D(n.TEXTURE_CUBE_MAP,ce,Vt,ci.width,ci.height);for(let he=0;he<6;he++){Z=rt[he].mipmaps;for(let Fe=0;Fe<Z.length;Fe++){let wt=Z[Fe];E.format!==so?At!==null?zt?w&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe,0,0,wt.width,wt.height,At,wt.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe,Vt,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):zt?w&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe,0,0,wt.width,wt.height,At,Je,wt.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe,Vt,wt.width,wt.height,0,At,Je,wt.data)}}}else{if(Z=E.mipmaps,zt&&Vi){Z.length>0&&ce++;let he=Tt(rt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,ce,Vt,he.width,he.height)}for(let he=0;he<6;he++)if(Oe){zt?w&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,rt[he].width,rt[he].height,At,Je,rt[he].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Vt,rt[he].width,rt[he].height,0,At,Je,rt[he].data);for(let Fe=0;Fe<Z.length;Fe++){let Ht=Z[Fe].image[he].image;zt?w&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe+1,0,0,Ht.width,Ht.height,At,Je,Ht.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe+1,Vt,Ht.width,Ht.height,0,At,Je,Ht.data)}}else{zt?w&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,At,Je,rt[he]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Vt,At,Je,rt[he]);for(let Fe=0;Fe<Z.length;Fe++){let wt=Z[Fe];zt?w&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe+1,0,0,At,Je,wt.image[he]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Fe+1,Vt,At,Je,wt.image[he])}}}g(E)&&p(n.TEXTURE_CUBE_MAP),De.__version=Me.version,E.onUpdate&&E.onUpdate(E)}P.__version=E.version}function Ee(P,E,re,Re,Me,De){let pt=o.convert(re.format,re.colorSpace),Ge=o.convert(re.type),ze=v(re.internalFormat,pt,Ge,re.colorSpace);if(!i.get(E).__hasExternalTextures){let Oe=Math.max(1,E.width>>De),rt=Math.max(1,E.height>>De);Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?e.texImage3D(Me,De,ze,Oe,rt,E.depth,0,pt,Ge,null):e.texImage2D(Me,De,ze,Oe,rt,0,pt,Ge,null)}e.bindFramebuffer(n.FRAMEBUFFER,P),ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Re,Me,i.get(re).__webglTexture,0,Ae(E)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Re,Me,i.get(re).__webglTexture,De),e.bindFramebuffer(n.FRAMEBUFFER,null)}function We(P,E,re){if(n.bindRenderbuffer(n.RENDERBUFFER,P),E.depthBuffer){let Re=E.depthTexture,Me=Re&&Re.isDepthTexture?Re.type:null,De=b(E.stencilBuffer,Me),pt=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=Ae(E);ke(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,De,E.width,E.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,De,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,De,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,P)}else{let Re=E.textures;for(let Me=0;Me<Re.length;Me++){let De=Re[Me],pt=o.convert(De.format,De.colorSpace),Ge=o.convert(De.type),ze=v(De.internalFormat,pt,Ge,De.colorSpace),Ct=Ae(E);re&&ke(E)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ze,E.width,E.height):ke(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ct,ze,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,ze,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function N(P,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,P),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),te(E.depthTexture,0);let Re=i.get(E.depthTexture).__webglTexture,Me=Ae(E);if(E.depthTexture.format===Fd)ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(E.depthTexture.format===Rs)ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function we(P){let E=i.get(P),re=P.isWebGLCubeRenderTarget===!0;if(P.depthTexture&&!E.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");N(E.__webglFramebuffer,P)}else if(re){E.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)e.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[Re]),E.__webglDepthbuffer[Re]=n.createRenderbuffer(),We(E.__webglDepthbuffer[Re],P,!1)}else e.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),We(E.__webglDepthbuffer,P,!1);e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ne(P,E,re){let Re=i.get(P);E!==void 0&&Ee(Re.__webglFramebuffer,P,P.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&we(P)}function Ue(P){let E=P.texture,re=i.get(P),Re=i.get(E);P.addEventListener("dispose",S);let Me=P.textures,De=P.isWebGLCubeRenderTarget===!0,pt=Me.length>1;if(pt||(Re.__webglTexture===void 0&&(Re.__webglTexture=n.createTexture()),Re.__version=E.version,s.memory.textures++),De){re.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(E.mipmaps&&E.mipmaps.length>0){re.__webglFramebuffer[Ge]=[];for(let ze=0;ze<E.mipmaps.length;ze++)re.__webglFramebuffer[Ge][ze]=n.createFramebuffer()}else re.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){re.__webglFramebuffer=[];for(let Ge=0;Ge<E.mipmaps.length;Ge++)re.__webglFramebuffer[Ge]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(pt)for(let Ge=0,ze=Me.length;Ge<ze;Ge++){let Ct=i.get(Me[Ge]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=n.createTexture(),s.memory.textures++)}if(P.samples>0&&ke(P)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Me.length;Ge++){let ze=Me[Ge];re.__webglColorRenderbuffer[Ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Ge]);let Ct=o.convert(ze.format,ze.colorSpace),Oe=o.convert(ze.type),rt=v(ze.internalFormat,Ct,Oe,ze.colorSpace,P.isXRRenderTarget===!0),ci=Ae(P);n.renderbufferStorageMultisample(n.RENDERBUFFER,ci,rt,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,re.__webglColorRenderbuffer[Ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),P.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),We(re.__webglDepthRenderbuffer,P,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){e.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture),Ie(n.TEXTURE_CUBE_MAP,E);for(let Ge=0;Ge<6;Ge++)if(E.mipmaps&&E.mipmaps.length>0)for(let ze=0;ze<E.mipmaps.length;ze++)Ee(re.__webglFramebuffer[Ge][ze],P,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ze);else Ee(re.__webglFramebuffer[Ge],P,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);g(E)&&p(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(pt){for(let Ge=0,ze=Me.length;Ge<ze;Ge++){let Ct=Me[Ge],Oe=i.get(Ct);e.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),Ie(n.TEXTURE_2D,Ct),Ee(re.__webglFramebuffer,P,Ct,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,0),g(Ct)&&p(n.TEXTURE_2D)}e.unbindTexture()}else{let Ge=n.TEXTURE_2D;if((P.isWebGL3DRenderTarget||P.isWebGLArrayRenderTarget)&&(Ge=P.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Ge,Re.__webglTexture),Ie(Ge,E),E.mipmaps&&E.mipmaps.length>0)for(let ze=0;ze<E.mipmaps.length;ze++)Ee(re.__webglFramebuffer[ze],P,E,n.COLOR_ATTACHMENT0,Ge,ze);else Ee(re.__webglFramebuffer,P,E,n.COLOR_ATTACHMENT0,Ge,0);g(E)&&p(Ge),e.unbindTexture()}P.depthBuffer&&we(P)}function O(P){let E=P.textures;for(let re=0,Re=E.length;re<Re;re++){let Me=E[re];if(g(Me)){let De=P.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,pt=i.get(Me).__webglTexture;e.bindTexture(De,pt),p(De),e.unbindTexture()}}}let ye=[],Te=[];function Pe(P){if(P.samples>0){if(ke(P)===!1){let E=P.textures,re=P.width,Re=P.height,Me=n.COLOR_BUFFER_BIT,De=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=i.get(P),Ge=E.length>1;if(Ge)for(let ze=0;ze<E.length;ze++)e.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let ze=0;ze<E.length;ze++){if(P.resolveDepthBuffer&&(P.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),P.stencilBuffer&&P.resolveStencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),Ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,pt.__webglColorRenderbuffer[ze]);let Ct=i.get(E[ze]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ct,0)}n.blitFramebuffer(0,0,re,Re,0,0,re,Re,Me,n.NEAREST),c===!0&&(ye.length=0,Te.length=0,ye.push(n.COLOR_ATTACHMENT0+ze),P.depthBuffer&&P.resolveDepthBuffer===!1&&(ye.push(De),Te.push(De),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Te)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ye))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ge)for(let ze=0;ze<E.length;ze++){e.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,pt.__webglColorRenderbuffer[ze]);let Ct=i.get(E[ze]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,Ct,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if(P.depthBuffer&&P.resolveDepthBuffer===!1&&c){let E=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[E])}}}function Ae(P){return Math.min(r.maxSamples,P.samples)}function ke(P){let E=i.get(P);return P.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&E.__useRenderToTexture!==!1}function Ke(P){let E=s.render.frame;d.get(P)!==E&&(d.set(P,E),P.update())}function Xe(P,E){let re=P.colorSpace,Re=P.format,Me=P.type;return P.isCompressedTexture===!0||P.isVideoTexture===!0||re!==Nn&&re!==ic&&(Si.getTransfer(re)===Ji?(Re!==so||Me!==dc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),E}function Tt(P){return typeof HTMLImageElement<"u"&&P instanceof HTMLImageElement?(l.width=P.naturalWidth||P.width,l.height=P.naturalHeight||P.height):typeof VideoFrame<"u"&&P instanceof VideoFrame?(l.width=P.displayWidth,l.height=P.displayHeight):(l.width=P.width,l.height=P.height),l}this.allocateTextureUnit=V,this.resetTextureUnits=I,this.setTexture2D=te,this.setTexture2DArray=ne,this.setTexture3D=B,this.setTextureCube=G,this.rebindTextures=Ne,this.setupRenderTarget=Ue,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=ke}function gB(n,t){function e(i,r=ic){let o,s=Si.getTransfer(r);if(i===dc)return n.UNSIGNED_BYTE;if(i===qE)return n.UNSIGNED_SHORT_4_4_4_4;if(i===XE)return n.UNSIGNED_SHORT_5_5_5_1;if(i===z2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===U2)return n.BYTE;if(i===V2)return n.SHORT;if(i===Bd)return n.UNSIGNED_SHORT;if(i===$E)return n.INT;if(i===Ud)return n.UNSIGNED_INT;if(i===yr)return n.FLOAT;if(i===$i)return n.HALF_FLOAT;if(i===H2)return n.ALPHA;if(i===G2)return n.RGB;if(i===so)return n.RGBA;if(i===W2)return n.LUMINANCE;if(i===$2)return n.LUMINANCE_ALPHA;if(i===Fd)return n.DEPTH_COMPONENT;if(i===Rs)return n.DEPTH_STENCIL;if(i===eu)return n.RED;if(i===YE)return n.RED_INTEGER;if(i===q2)return n.RG;if(i===ZE)return n.RG_INTEGER;if(i===QE)return n.RGBA_INTEGER;if(i===H0||i===G0||i===W0||i===$0)if(s===Ji)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===H0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===G0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===W0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===$0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===H0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===G0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===W0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===$0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===lC||i===dC||i===uC||i===hC)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===lC)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===dC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===uC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===hC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===fC||i===pC||i===mC)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===fC||i===pC)return s===Ji?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===mC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===gC||i===_C||i===bC||i===vC||i===yC||i===xC||i===wC||i===MC||i===SC||i===RC||i===TC||i===CC||i===EC||i===DC)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===gC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===_C)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===bC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===vC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===yC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===xC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===wC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===MC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===SC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===RC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===TC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===CC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===EC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===DC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===q0||i===AC||i===IC)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===q0)return s===Ji?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===AC)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===IC)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===X2||i===PC||i===FC||i===kC)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===q0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===PC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===FC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===kC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ss?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var ey=class extends en{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},Er=class extends Rt{constructor(){super(),this.isGroup=!0,this.type="Group"}},VK={type:"move"},wm=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Er,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Er,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Er,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let _ of t.hand.values()){let g=e.getJointPose(_,i),p=this._getHandJoint(l,_);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}let d=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,m=.005;l.inputState.pinching&&h>f+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&h<=f-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(VK)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Er;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},zK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,HK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,QC=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new yn,o=t.properties.get(r);o.__webglTexture=e.texture,(e.depthNear!=i.depthNear||e.depthFar!=i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new kt({vertexShader:zK,fragmentShader:HK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ve(new ca(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}},KC=class extends jn{constructor(t,e){super();let i=this,r=null,o=1,s=null,a="local-floor",c=1,l=null,d=null,u=null,h=null,f=null,m=null,_=new QC,g=e.getContextAttributes(),p=null,v=null,b=[],y=[],C=new z,S=null,M=new en;M.layers.enable(1),M.viewport=new yi;let A=new en;A.layers.enable(2),A.viewport=new yi;let T=[M,A],x=new ey;x.layers.enable(1),x.layers.enable(2);let I=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let Ee=b[Q];return Ee===void 0&&(Ee=new wm,b[Q]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(Q){let Ee=b[Q];return Ee===void 0&&(Ee=new wm,b[Q]=Ee),Ee.getGripSpace()},this.getHand=function(Q){let Ee=b[Q];return Ee===void 0&&(Ee=new wm,b[Q]=Ee),Ee.getHandSpace()};function W(Q){let Ee=y.indexOf(Q.inputSource);if(Ee===-1)return;let We=b[Ee];We!==void 0&&(We.update(Q.inputSource,Q.frame,l||s),We.dispatchEvent({type:Q.type,data:Q.inputSource}))}function te(){r.removeEventListener("select",W),r.removeEventListener("selectstart",W),r.removeEventListener("selectend",W),r.removeEventListener("squeeze",W),r.removeEventListener("squeezestart",W),r.removeEventListener("squeezeend",W),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",ne);for(let Q=0;Q<b.length;Q++){let Ee=y[Q];Ee!==null&&(y[Q]=null,b[Q].disconnect(Ee))}I=null,V=null,_.reset(),t.setRenderTarget(p),f=null,h=null,u=null,r=null,v=null,vt.stop(),i.isPresenting=!1,t.setPixelRatio(S),t.setSize(C.width,C.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){o=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(Q){l=Q},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(Q){return _i(this,null,function*(){if(r=Q,r!==null){if(p=t.getRenderTarget(),r.addEventListener("select",W),r.addEventListener("selectstart",W),r.addEventListener("selectend",W),r.addEventListener("squeeze",W),r.addEventListener("squeezestart",W),r.addEventListener("squeezeend",W),r.addEventListener("end",te),r.addEventListener("inputsourceschange",ne),g.xrCompatible!==!0&&(yield e.makeXRCompatible()),S=t.getPixelRatio(),t.getSize(C),r.renderState.layers===void 0){let Ee={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,e,Ee),r.updateRenderState({baseLayer:f}),t.setPixelRatio(1),t.setSize(f.framebufferWidth,f.framebufferHeight,!1),v=new ai(f.framebufferWidth,f.framebufferHeight,{format:so,type:dc,colorSpace:t.outputColorSpace,stencilBuffer:g.stencil})}else{let Ee=null,We=null,N=null;g.depth&&(N=g.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ee=g.stencil?Rs:Fd,We=g.stencil?Ss:Ud);let we={colorFormat:e.RGBA8,depthFormat:N,scaleFactor:o};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(we),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),v=new ai(h.textureWidth,h.textureHeight,{format:so,type:dc,depthTexture:new Ts(h.textureWidth,h.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:g.stencil,colorSpace:t.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),vt.setContext(r),vt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(Q){for(let Ee=0;Ee<Q.removed.length;Ee++){let We=Q.removed[Ee],N=y.indexOf(We);N>=0&&(y[N]=null,b[N].disconnect(We))}for(let Ee=0;Ee<Q.added.length;Ee++){let We=Q.added[Ee],N=y.indexOf(We);if(N===-1){for(let Ne=0;Ne<b.length;Ne++)if(Ne>=y.length){y.push(We),N=Ne;break}else if(y[Ne]===null){y[Ne]=We,N=Ne;break}if(N===-1)break}let we=b[N];we&&we.connect(We)}}let B=new R,G=new R;function U(Q,Ee,We){B.setFromMatrixPosition(Ee.matrixWorld),G.setFromMatrixPosition(We.matrixWorld);let N=B.distanceTo(G),we=Ee.projectionMatrix.elements,Ne=We.projectionMatrix.elements,Ue=we[14]/(we[10]-1),O=we[14]/(we[10]+1),ye=(we[9]+1)/we[5],Te=(we[9]-1)/we[5],Pe=(we[8]-1)/we[0],Ae=(Ne[8]+1)/Ne[0],ke=Ue*Pe,Ke=Ue*Ae,Xe=N/(-Pe+Ae),Tt=Xe*-Pe;Ee.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Tt),Q.translateZ(Xe),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();let P=Ue+Xe,E=O+Xe,re=ke-Tt,Re=Ke+(N-Tt),Me=ye*O/E*P,De=Te*O/E*P;Q.projectionMatrix.makePerspective(re,Re,Me,De,P,E),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function se(Q,Ee){Ee===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(Ee.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;_.texture!==null&&(Q.near=_.depthNear,Q.far=_.depthFar),x.near=A.near=M.near=Q.near,x.far=A.far=M.far=Q.far,(I!==x.near||V!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),I=x.near,V=x.far,M.near=I,M.far=V,A.near=I,A.far=V,M.updateProjectionMatrix(),A.updateProjectionMatrix(),Q.updateProjectionMatrix());let Ee=Q.parent,We=x.cameras;se(x,Ee);for(let N=0;N<We.length;N++)se(We[N],Ee);We.length===2?U(x,M,A):x.projectionMatrix.copy(M.projectionMatrix),Ce(Q,x,Ee)};function Ce(Q,Ee,We){We===null?Q.matrix.copy(Ee.matrixWorld):(Q.matrix.copy(We.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(Ee.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(Ee.projectionMatrix),Q.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Zh*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(Q){c=Q,h!==null&&(h.fixedFoveation=Q),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Q)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(x)};let Ie=null;function Qe(Q,Ee){if(d=Ee.getViewerPose(l||s),m=Ee,d!==null){let We=d.views;f!==null&&(t.setRenderTargetFramebuffer(v,f.framebuffer),t.setRenderTarget(v));let N=!1;We.length!==x.cameras.length&&(x.cameras.length=0,N=!0);for(let Ne=0;Ne<We.length;Ne++){let Ue=We[Ne],O=null;if(f!==null)O=f.getViewport(Ue);else{let Te=u.getViewSubImage(h,Ue);O=Te.viewport,Ne===0&&(t.setRenderTargetTextures(v,Te.colorTexture,h.ignoreDepthValues?void 0:Te.depthStencilTexture),t.setRenderTarget(v))}let ye=T[Ne];ye===void 0&&(ye=new en,ye.layers.enable(Ne),ye.viewport=new yi,T[Ne]=ye),ye.matrix.fromArray(Ue.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(Ue.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(O.x,O.y,O.width,O.height),Ne===0&&(x.matrix.copy(ye.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),N===!0&&x.cameras.push(ye)}let we=r.enabledFeatures;if(we&&we.includes("depth-sensing")){let Ne=u.getDepthInformation(We[0]);Ne&&Ne.isValid&&Ne.texture&&_.init(t,Ne,r.renderState)}}for(let We=0;We<b.length;We++){let N=y[We],we=b[We];N!==null&&we!==void 0&&we.update(N,Ee,l||s)}Ie&&Ie(Q,Ee),Ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ee}),m=null}let vt=new dB;vt.setAnimationLoop(Qe),this.setAnimationLoop=function(Q){Ie=Q},this.dispose=function(){}}},vd=new ao,GK=new Be;function WK(n,t){function e(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function i(g,p){p.color.getRGB(g.fogColor.value,lB(n)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function r(g,p,v,b,y){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),u(g,p)):p.isMeshPhongMaterial?(o(g,p),d(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&f(g,p,y)):p.isMeshMatcapMaterial?(o(g,p),m(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),_(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(s(g,p),p.isLineDashedMaterial&&a(g,p)):p.isPointsMaterial?c(g,p,v,b):p.isSpriteMaterial?l(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,e(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,e(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,e(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===Wr&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,e(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===Wr&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,e(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,e(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,e(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);let v=t.get(p),b=v.envMap,y=v.envMapRotation;b&&(g.envMap.value=b,vd.copy(y),vd.x*=-1,vd.y*=-1,vd.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(vd.y*=-1,vd.z*=-1),g.envMapRotation.value.setFromMatrix4(GK.makeRotationFromEuler(vd)),g.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity,e(p.lightMap,g.lightMapTransform)),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,e(p.aoMap,g.aoMapTransform))}function s(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,e(p.map,g.mapTransform))}function a(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function c(g,p,v,b){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*v,g.scale.value=b*.5,p.map&&(g.map.value=p.map,e(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,e(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function l(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,e(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,e(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function d(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function u(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,e(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,e(p.roughnessMap,g.roughnessMapTransform)),p.envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function f(g,p,v){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,e(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,e(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,e(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,e(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,e(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Wr&&g.clearcoatNormalScale.value.negate())),p.dispersion>0&&(g.dispersion.value=p.dispersion),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,e(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,e(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,e(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,e(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,e(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,e(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,e(p.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,p){p.matcap&&(g.matcap.value=p.matcap)}function _(g,p){let v=t.get(p).light;g.referencePosition.value.setFromMatrixPosition(v.matrixWorld),g.nearDistance.value=v.shadow.camera.near,g.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function $K(n,t,e,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(v,b){let y=b.program;i.uniformBlockBinding(v,y)}function l(v,b){let y=r[v.id];y===void 0&&(m(v),y=d(v),r[v.id]=y,v.addEventListener("dispose",g));let C=b.program;i.updateUBOMapping(v,C);let S=t.render.frame;o[v.id]!==S&&(h(v),o[v.id]=S)}function d(v){let b=u();v.__bindingPointIndex=b;let y=n.createBuffer(),C=v.__size,S=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,C,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,y),y}function u(){for(let v=0;v<a;v++)if(s.indexOf(v)===-1)return s.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){let b=r[v.id],y=v.uniforms,C=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let S=0,M=y.length;S<M;S++){let A=Array.isArray(y[S])?y[S]:[y[S]];for(let T=0,x=A.length;T<x;T++){let I=A[T];if(f(I,S,T,C)===!0){let V=I.__offset,W=Array.isArray(I.value)?I.value:[I.value],te=0;for(let ne=0;ne<W.length;ne++){let B=W[ne],G=_(B);typeof B=="number"||typeof B=="boolean"?(I.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,V+te,I.__data)):B.isMatrix3?(I.__data[0]=B.elements[0],I.__data[1]=B.elements[1],I.__data[2]=B.elements[2],I.__data[3]=0,I.__data[4]=B.elements[3],I.__data[5]=B.elements[4],I.__data[6]=B.elements[5],I.__data[7]=0,I.__data[8]=B.elements[6],I.__data[9]=B.elements[7],I.__data[10]=B.elements[8],I.__data[11]=0):(B.toArray(I.__data,te),te+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(v,b,y,C){let S=v.value,M=b+"_"+y;if(C[M]===void 0)return typeof S=="number"||typeof S=="boolean"?C[M]=S:C[M]=S.clone(),!0;{let A=C[M];if(typeof S=="number"||typeof S=="boolean"){if(A!==S)return C[M]=S,!0}else if(A.equals(S)===!1)return A.copy(S),!0}return!1}function m(v){let b=v.uniforms,y=0,C=16;for(let M=0,A=b.length;M<A;M++){let T=Array.isArray(b[M])?b[M]:[b[M]];for(let x=0,I=T.length;x<I;x++){let V=T[x],W=Array.isArray(V.value)?V.value:[V.value];for(let te=0,ne=W.length;te<ne;te++){let B=W[te],G=_(B),U=y%C;U!==0&&C-U<G.boundary&&(y+=C-U),V.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=y,y+=G.storage}}}let S=y%C;return S>0&&(y+=C-S),v.__size=y,v.__cache={},this}function _(v){let b={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function g(v){let b=v.target;b.removeEventListener("dispose",g);let y=s.indexOf(b.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete o[b.id]}function p(){for(let v in r)n.deleteBuffer(r[v]);s=[],r={},o={}}return{bind:c,update:l,dispose:p}}var uc=class{constructor(t={}){let{canvas:e=aB(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=t;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=s;let f=new Uint32Array(4),m=new Int32Array(4),_=null,g=null,p=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kn,this.toneMapping=ac,this.toneMappingExposure=1;let b=this,y=!1,C=0,S=0,M=null,A=-1,T=null,x=new yi,I=new yi,V=null,W=new ge(0),te=0,ne=e.width,B=e.height,G=1,U=null,se=null,Ce=new yi(0,0,ne,B),Ie=new yi(0,0,ne,B),Qe=!1,vt=new Gd,Q=!1,Ee=!1,We=new Be,N=new R,we={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Ne=!1;function Ue(){return M===null?G:1}let O=i;function ye(D,$){return e.getContext(D,$)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Hy}`),e.addEventListener("webglcontextlost",ce,!1),e.addEventListener("webglcontextrestored",Z,!1),e.addEventListener("webglcontextcreationerror",he,!1),O===null){let $="webgl2";if(O=ye($,D),O===null)throw ye($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Te,Pe,Ae,ke,Ke,Xe,Tt,P,E,re,Re,Me,De,pt,Ge,ze,Ct,Oe,rt,ci,At,Je,Vt,zt;function Vi(){Te=new hQ(O),Te.init(),Je=new gB(O,Te),Pe=new sQ(O,Te,t,Je),Ae=new BK(O),ke=new mQ(O),Ke=new CK,Xe=new UK(O,Te,Ae,Ke,Pe,Je,ke),Tt=new cQ(b),P=new uQ(b),E=new w7(O),Vt=new rQ(O,E),re=new fQ(O,E,ke,Vt),Re=new _Q(O,re,E,ke),rt=new gQ(O,Pe,Xe),ze=new aQ(Ke),Me=new TK(b,Tt,P,Te,Pe,Vt,ze),De=new WK(b,Ke),pt=new DK,Ge=new jK(Te),Oe=new nQ(b,Tt,P,Ae,Re,h,c),Ct=new LK(b,Re,Pe),zt=new $K(O,ke,Pe,Ae),ci=new oQ(O,Te,ke),At=new pQ(O,Te,ke),ke.programs=Me.programs,b.capabilities=Pe,b.extensions=Te,b.properties=Ke,b.renderLists=pt,b.shadowMap=Ct,b.state=Ae,b.info=ke}Vi();let w=new KC(b,O);this.xr=w,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){let D=Te.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=Te.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(D){D!==void 0&&(G=D,this.setSize(ne,B,!1))},this.getSize=function(D){return D.set(ne,B)},this.setSize=function(D,$,oe=!0){if(w.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=D,B=$,e.width=Math.floor(D*G),e.height=Math.floor($*G),oe===!0&&(e.style.width=D+"px",e.style.height=$+"px"),this.setViewport(0,0,D,$)},this.getDrawingBufferSize=function(D){return D.set(ne*G,B*G).floor()},this.setDrawingBufferSize=function(D,$,oe){ne=D,B=$,G=oe,e.width=Math.floor(D*oe),e.height=Math.floor($*oe),this.setViewport(0,0,D,$)},this.getCurrentViewport=function(D){return D.copy(x)},this.getViewport=function(D){return D.copy(Ce)},this.setViewport=function(D,$,oe,le){D.isVector4?Ce.set(D.x,D.y,D.z,D.w):Ce.set(D,$,oe,le),Ae.viewport(x.copy(Ce).multiplyScalar(G).round())},this.getScissor=function(D){return D.copy(Ie)},this.setScissor=function(D,$,oe,le){D.isVector4?Ie.set(D.x,D.y,D.z,D.w):Ie.set(D,$,oe,le),Ae.scissor(I.copy(Ie).multiplyScalar(G).round())},this.getScissorTest=function(){return Qe},this.setScissorTest=function(D){Ae.setScissorTest(Qe=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){se=D},this.getClearColor=function(D){return D.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(D=!0,$=!0,oe=!0){let le=0;if(D){let Y=!1;if(M!==null){let He=M.texture.format;Y=He===QE||He===ZE||He===YE}if(Y){let He=M.texture.type,ot=He===dc||He===Ud||He===Bd||He===Ss||He===qE||He===XE,ut=Oe.getClearColor(),_t=Oe.getClearAlpha(),jt=ut.r,Lt=ut.g,Et=ut.b;ot?(f[0]=jt,f[1]=Lt,f[2]=Et,f[3]=_t,O.clearBufferuiv(O.COLOR,0,f)):(m[0]=jt,m[1]=Lt,m[2]=Et,m[3]=_t,O.clearBufferiv(O.COLOR,0,m))}else le|=O.COLOR_BUFFER_BIT}$&&(le|=O.DEPTH_BUFFER_BIT),oe&&(le|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ce,!1),e.removeEventListener("webglcontextrestored",Z,!1),e.removeEventListener("webglcontextcreationerror",he,!1),pt.dispose(),Ge.dispose(),Ke.dispose(),Tt.dispose(),P.dispose(),Re.dispose(),Vt.dispose(),zt.dispose(),Me.dispose(),w.dispose(),w.removeEventListener("sessionstart",Vn),w.removeEventListener("sessionend",zn),_o.stop()};function ce(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Z(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let D=ke.autoReset,$=Ct.enabled,oe=Ct.autoUpdate,le=Ct.needsUpdate,Y=Ct.type;Vi(),ke.autoReset=D,Ct.enabled=$,Ct.autoUpdate=oe,Ct.needsUpdate=le,Ct.type=Y}function he(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Fe(D){let $=D.target;$.removeEventListener("dispose",Fe),wt($)}function wt(D){Ht(D),Ke.remove(D)}function Ht(D){let $=Ke.get(D).programs;$!==void 0&&($.forEach(function(oe){Me.releaseProgram(oe)}),D.isShaderMaterial&&Me.releaseShaderCache(D))}this.renderBufferDirect=function(D,$,oe,le,Y,He){$===null&&($=we);let ot=Y.isMesh&&Y.matrixWorld.determinant()<0,ut=gH(D,$,oe,le,Y);Ae.setMaterial(le,ot);let _t=oe.index,jt=1;if(le.wireframe===!0){if(_t=re.getWireframeAttribute(oe),_t===void 0)return;jt=2}let Lt=oe.drawRange,Et=oe.attributes.position,Ii=Lt.start*jt,wn=(Lt.start+Lt.count)*jt;He!==null&&(Ii=Math.max(Ii,He.start*jt),wn=Math.min(wn,(He.start+He.count)*jt)),_t!==null?(Ii=Math.max(Ii,0),wn=Math.min(wn,_t.count)):Et!=null&&(Ii=Math.max(Ii,0),wn=Math.min(wn,Et.count));let Mn=wn-Ii;if(Mn<0||Mn===1/0)return;Vt.setup(Y,le,ut,oe,_t);let vo,Oi=ci;if(_t!==null&&(vo=E.get(_t),Oi=At,Oi.setIndex(vo)),Y.isMesh)le.wireframe===!0?(Ae.setLineWidth(le.wireframeLinewidth*Ue()),Oi.setMode(O.LINES)):Oi.setMode(O.TRIANGLES);else if(Y.isLine){let Mt=le.linewidth;Mt===void 0&&(Mt=1),Ae.setLineWidth(Mt*Ue()),Y.isLineSegments?Oi.setMode(O.LINES):Y.isLineLoop?Oi.setMode(O.LINE_LOOP):Oi.setMode(O.LINE_STRIP)}else Y.isPoints?Oi.setMode(O.POINTS):Y.isSprite&&Oi.setMode(O.TRIANGLES);if(Y.isBatchedMesh)Y._multiDrawInstances!==null?Oi.renderMultiDrawInstances(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount,Y._multiDrawInstances):Oi.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else if(Y.isInstancedMesh)Oi.renderInstances(Ii,Mn,Y.count);else if(oe.isInstancedBufferGeometry){let Mt=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,Or=Math.min(oe.instanceCount,Mt);Oi.renderInstances(Ii,Mn,Or)}else Oi.render(Ii,Mn)};function xn(D,$,oe){D.transparent===!0&&D.side===Kn&&D.forceSinglePass===!1?(D.side=Wr,D.needsUpdate=!0,o_(D,$,oe),D.side=Ms,D.needsUpdate=!0,o_(D,$,oe),D.side=Kn):o_(D,$,oe)}this.compile=function(D,$,oe=null){oe===null&&(oe=D),g=Ge.get(oe),g.init($),v.push(g),oe.traverseVisible(function(Y){Y.isLight&&Y.layers.test($.layers)&&(g.pushLight(Y),Y.castShadow&&g.pushShadow(Y))}),D!==oe&&D.traverseVisible(function(Y){Y.isLight&&Y.layers.test($.layers)&&(g.pushLight(Y),Y.castShadow&&g.pushShadow(Y))}),g.setupLights();let le=new Set;return D.traverse(function(Y){let He=Y.material;if(He)if(Array.isArray(He))for(let ot=0;ot<He.length;ot++){let ut=He[ot];xn(ut,oe,Y),le.add(ut)}else xn(He,oe,Y),le.add(He)}),v.pop(),g=null,le},this.compileAsync=function(D,$,oe=null){let le=this.compile(D,$,oe);return new Promise(Y=>{function He(){if(le.forEach(function(ot){Ke.get(ot).currentProgram.isReady()&&le.delete(ot)}),le.size===0){Y(D);return}setTimeout(He,10)}Te.get("KHR_parallel_shader_compile")!==null?He():setTimeout(He,10)})};let Un=null;function Di(D){Un&&Un(D)}function Vn(){_o.stop()}function zn(){_o.start()}let _o=new dB;_o.setAnimationLoop(Di),typeof self<"u"&&_o.setContext(self),this.setAnimationLoop=function(D){Un=D,w.setAnimationLoop(D),D===null?_o.stop():_o.start()},w.addEventListener("sessionstart",Vn),w.addEventListener("sessionend",zn),this.render=function(D,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),w.enabled===!0&&w.isPresenting===!0&&(w.cameraAutoUpdate===!0&&w.updateCamera($),$=w.getCamera()),D.isScene===!0&&D.onBeforeRender(b,D,$,M),g=Ge.get(D,v.length),g.init($),v.push(g),We.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),vt.setFromProjectionMatrix(We),Ee=this.localClippingEnabled,Q=ze.init(this.clippingPlanes,Ee),_=pt.get(D,p.length),_.init(),p.push(_),w.enabled===!0&&w.isPresenting===!0){let He=b.xr.getDepthSensingMesh();He!==null&&bo(He,$,-1/0,b.sortObjects)}bo(D,$,0,b.sortObjects),_.finish(),b.sortObjects===!0&&_.sort(U,se),Ne=w.enabled===!1||w.isPresenting===!1||w.hasDepthSensing()===!1,Ne&&Oe.addToRenderList(_,D),this.info.render.frame++,Q===!0&&ze.beginShadows();let oe=g.state.shadowsArray;Ct.render(oe,D,$),Q===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();let le=_.opaque,Y=_.transmissive;if(g.setupLights(),$.isArrayCamera){let He=$.cameras;if(Y.length>0)for(let ot=0,ut=He.length;ot<ut;ot++){let _t=He[ot];Ll(le,Y,D,_t)}Ne&&Oe.render(D);for(let ot=0,ut=He.length;ot<ut;ot++){let _t=He[ot];Ac(_,D,_t,_t.viewport)}}else Y.length>0&&Ll(le,Y,D,$),Ne&&Oe.render(D),Ac(_,D,$);M!==null&&(Xe.updateMultisampleRenderTarget(M),Xe.updateRenderTargetMipmap(M)),D.isScene===!0&&D.onAfterRender(b,D,$),Vt.resetDefaultState(),A=-1,T=null,v.pop(),v.length>0?(g=v[v.length-1],Q===!0&&ze.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,p.pop(),p.length>0?_=p[p.length-1]:_=null};function bo(D,$,oe,le){if(D.visible===!1)return;if(D.layers.test($.layers)){if(D.isGroup)oe=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update($);else if(D.isLight)g.pushLight(D),D.castShadow&&g.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||vt.intersectsSprite(D)){le&&N.setFromMatrixPosition(D.matrixWorld).applyMatrix4(We);let ot=Re.update(D),ut=D.material;ut.visible&&_.push(D,ot,ut,oe,N.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||vt.intersectsObject(D))){let ot=Re.update(D),ut=D.material;if(le&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),N.copy(D.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),N.copy(ot.boundingSphere.center)),N.applyMatrix4(D.matrixWorld).applyMatrix4(We)),Array.isArray(ut)){let _t=ot.groups;for(let jt=0,Lt=_t.length;jt<Lt;jt++){let Et=_t[jt],Ii=ut[Et.materialIndex];Ii&&Ii.visible&&_.push(D,ot,Ii,oe,N.z,Et)}}else ut.visible&&_.push(D,ot,ut,oe,N.z,null)}}let He=D.children;for(let ot=0,ut=He.length;ot<ut;ot++)bo(He[ot],$,oe,le)}function Ac(D,$,oe,le){let Y=D.opaque,He=D.transmissive,ot=D.transparent;g.setupLightsView(oe),Q===!0&&ze.setGlobalState(b.clippingPlanes,oe),le&&Ae.viewport(x.copy(le)),Y.length>0&&Bl(Y,$,oe),He.length>0&&Bl(He,$,oe),ot.length>0&&Bl(ot,$,oe),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Ll(D,$,oe,le){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[le.id]===void 0&&(g.state.transmissionRenderTarget[le.id]=new ai(1,1,{generateMipmaps:!0,type:Te.has("EXT_color_buffer_half_float")||Te.has("EXT_color_buffer_float")?$i:dc,minFilter:Eo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Si.workingColorSpace}));let He=g.state.transmissionRenderTarget[le.id],ot=le.viewport||x;He.setSize(ot.z,ot.w);let ut=b.getRenderTarget();b.setRenderTarget(He),b.getClearColor(W),te=b.getClearAlpha(),te<1&&b.setClearColor(16777215,.5),Ne?Oe.render(oe):b.clear();let _t=b.toneMapping;b.toneMapping=ac;let jt=le.viewport;if(le.viewport!==void 0&&(le.viewport=void 0),g.setupLightsView(le),Q===!0&&ze.setGlobalState(b.clippingPlanes,le),Bl(D,oe,le),Xe.updateMultisampleRenderTarget(He),Xe.updateRenderTargetMipmap(He),Te.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let Et=0,Ii=$.length;Et<Ii;Et++){let wn=$[Et],Mn=wn.object,vo=wn.geometry,Oi=wn.material,Mt=wn.group;if(Oi.side===Kn&&Mn.layers.test(le.layers)){let Or=Oi.side;Oi.side=Wr,Oi.needsUpdate=!0,yI(Mn,oe,le,vo,Oi,Mt),Oi.side=Or,Oi.needsUpdate=!0,Lt=!0}}Lt===!0&&(Xe.updateMultisampleRenderTarget(He),Xe.updateRenderTargetMipmap(He))}b.setRenderTarget(ut),b.setClearColor(W,te),jt!==void 0&&(le.viewport=jt),b.toneMapping=_t}function Bl(D,$,oe){let le=$.isScene===!0?$.overrideMaterial:null;for(let Y=0,He=D.length;Y<He;Y++){let ot=D[Y],ut=ot.object,_t=ot.geometry,jt=le===null?ot.material:le,Lt=ot.group;ut.layers.test(oe.layers)&&yI(ut,$,oe,_t,jt,Lt)}}function yI(D,$,oe,le,Y,He){D.onBeforeRender(b,$,oe,le,Y,He),D.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),Y.onBeforeRender(b,$,oe,le,D,He),Y.transparent===!0&&Y.side===Kn&&Y.forceSinglePass===!1?(Y.side=Wr,Y.needsUpdate=!0,b.renderBufferDirect(oe,$,le,Y,D,He),Y.side=Ms,Y.needsUpdate=!0,b.renderBufferDirect(oe,$,le,Y,D,He),Y.side=Kn):b.renderBufferDirect(oe,$,le,Y,D,He),D.onAfterRender(b,$,oe,le,Y,He)}function o_(D,$,oe){$.isScene!==!0&&($=we);let le=Ke.get(D),Y=g.state.lights,He=g.state.shadowsArray,ot=Y.state.version,ut=Me.getParameters(D,Y.state,He,$,oe),_t=Me.getProgramCacheKey(ut),jt=le.programs;le.environment=D.isMeshStandardMaterial?$.environment:null,le.fog=$.fog,le.envMap=(D.isMeshStandardMaterial?P:Tt).get(D.envMap||le.environment),le.envMapRotation=le.environment!==null&&D.envMap===null?$.environmentRotation:D.envMapRotation,jt===void 0&&(D.addEventListener("dispose",Fe),jt=new Map,le.programs=jt);let Lt=jt.get(_t);if(Lt!==void 0){if(le.currentProgram===Lt&&le.lightsStateVersion===ot)return wI(D,ut),Lt}else ut.uniforms=Me.getUniforms(D),D.onBuild(oe,ut,b),D.onBeforeCompile(ut,b),Lt=Me.acquireProgram(ut,_t),jt.set(_t,Lt),le.uniforms=ut.uniforms;let Et=le.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Et.clippingPlanes=ze.uniform),wI(D,ut),le.needsLights=bH(D),le.lightsStateVersion=ot,le.needsLights&&(Et.ambientLightColor.value=Y.state.ambient,Et.lightProbe.value=Y.state.probe,Et.directionalLights.value=Y.state.directional,Et.directionalLightShadows.value=Y.state.directionalShadow,Et.spotLights.value=Y.state.spot,Et.spotLightShadows.value=Y.state.spotShadow,Et.rectAreaLights.value=Y.state.rectArea,Et.ltc_1.value=Y.state.rectAreaLTC1,Et.ltc_2.value=Y.state.rectAreaLTC2,Et.pointLights.value=Y.state.point,Et.pointLightShadows.value=Y.state.pointShadow,Et.hemisphereLights.value=Y.state.hemi,Et.directionalShadowMap.value=Y.state.directionalShadowMap,Et.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,Et.spotShadowMap.value=Y.state.spotShadowMap,Et.spotLightMatrix.value=Y.state.spotLightMatrix,Et.spotLightMap.value=Y.state.spotLightMap,Et.pointShadowMap.value=Y.state.pointShadowMap,Et.pointShadowMatrix.value=Y.state.pointShadowMatrix),le.currentProgram=Lt,le.uniformsList=null,Lt}function xI(D){if(D.uniformsList===null){let $=D.currentProgram.getUniforms();D.uniformsList=Yh.seqWithValue($.seq,D.uniforms)}return D.uniformsList}function wI(D,$){let oe=Ke.get(D);oe.outputColorSpace=$.outputColorSpace,oe.batching=$.batching,oe.batchingColor=$.batchingColor,oe.instancing=$.instancing,oe.instancingColor=$.instancingColor,oe.instancingMorph=$.instancingMorph,oe.skinning=$.skinning,oe.morphTargets=$.morphTargets,oe.morphNormals=$.morphNormals,oe.morphColors=$.morphColors,oe.morphTargetsCount=$.morphTargetsCount,oe.numClippingPlanes=$.numClippingPlanes,oe.numIntersection=$.numClipIntersection,oe.vertexAlphas=$.vertexAlphas,oe.vertexTangents=$.vertexTangents,oe.toneMapping=$.toneMapping}function gH(D,$,oe,le,Y){$.isScene!==!0&&($=we),Xe.resetTextureUnits();let He=$.fog,ot=le.isMeshStandardMaterial?$.environment:null,ut=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Nn,_t=(le.isMeshStandardMaterial?P:Tt).get(le.envMap||ot),jt=le.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,Lt=!!oe.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),Et=!!oe.morphAttributes.position,Ii=!!oe.morphAttributes.normal,wn=!!oe.morphAttributes.color,Mn=ac;le.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Mn=b.toneMapping);let vo=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Oi=vo!==void 0?vo.length:0,Mt=Ke.get(le),Or=g.state.lights;if(Q===!0&&(Ee===!0||D!==T)){let No=D===T&&le.id===A;ze.setState(le,D,No)}let zi=!1;le.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==Or.state.version||Mt.outputColorSpace!==ut||Y.isBatchedMesh&&Mt.batching===!1||!Y.isBatchedMesh&&Mt.batching===!0||Y.isBatchedMesh&&Mt.batchingColor===!0&&Y.colorTexture===null||Y.isBatchedMesh&&Mt.batchingColor===!1&&Y.colorTexture!==null||Y.isInstancedMesh&&Mt.instancing===!1||!Y.isInstancedMesh&&Mt.instancing===!0||Y.isSkinnedMesh&&Mt.skinning===!1||!Y.isSkinnedMesh&&Mt.skinning===!0||Y.isInstancedMesh&&Mt.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&Mt.instancingColor===!1&&Y.instanceColor!==null||Y.isInstancedMesh&&Mt.instancingMorph===!0&&Y.morphTexture===null||Y.isInstancedMesh&&Mt.instancingMorph===!1&&Y.morphTexture!==null||Mt.envMap!==_t||le.fog===!0&&Mt.fog!==He||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==ze.numPlanes||Mt.numIntersection!==ze.numIntersection)||Mt.vertexAlphas!==jt||Mt.vertexTangents!==Lt||Mt.morphTargets!==Et||Mt.morphNormals!==Ii||Mt.morphColors!==wn||Mt.toneMapping!==Mn||Mt.morphTargetsCount!==Oi)&&(zi=!0):(zi=!0,Mt.__version=le.version);let ja=Mt.currentProgram;zi===!0&&(ja=o_(le,$,Y));let s_=!1,Ul=!1,Fw=!1,nr=ja.getUniforms(),Ic=Mt.uniforms;if(Ae.useProgram(ja.program)&&(s_=!0,Ul=!0,Fw=!0),le.id!==A&&(A=le.id,Ul=!0),s_||T!==D){nr.setValue(O,"projectionMatrix",D.projectionMatrix),nr.setValue(O,"viewMatrix",D.matrixWorldInverse);let No=nr.map.cameraPosition;No!==void 0&&No.setValue(O,N.setFromMatrixPosition(D.matrixWorld)),Pe.logarithmicDepthBuffer&&nr.setValue(O,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&nr.setValue(O,"isOrthographic",D.isOrthographicCamera===!0),T!==D&&(T=D,Ul=!0,Fw=!0)}if(Y.isSkinnedMesh){nr.setOptional(O,Y,"bindMatrix"),nr.setOptional(O,Y,"bindMatrixInverse");let No=Y.skeleton;No&&(No.boneTexture===null&&No.computeBoneTexture(),nr.setValue(O,"boneTexture",No.boneTexture,Xe))}Y.isBatchedMesh&&(nr.setOptional(O,Y,"batchingTexture"),nr.setValue(O,"batchingTexture",Y._matricesTexture,Xe),nr.setOptional(O,Y,"batchingColorTexture"),Y._colorsTexture!==null&&nr.setValue(O,"batchingColorTexture",Y._colorsTexture,Xe));let kw=oe.morphAttributes;if((kw.position!==void 0||kw.normal!==void 0||kw.color!==void 0)&&rt.update(Y,oe,ja),(Ul||Mt.receiveShadow!==Y.receiveShadow)&&(Mt.receiveShadow=Y.receiveShadow,nr.setValue(O,"receiveShadow",Y.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(Ic.envMap.value=_t,Ic.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),le.isMeshStandardMaterial&&le.envMap===null&&$.environment!==null&&(Ic.envMapIntensity.value=$.environmentIntensity),Ul&&(nr.setValue(O,"toneMappingExposure",b.toneMappingExposure),Mt.needsLights&&_H(Ic,Fw),He&&le.fog===!0&&De.refreshFogUniforms(Ic,He),De.refreshMaterialUniforms(Ic,le,G,B,g.state.transmissionRenderTarget[D.id]),Yh.upload(O,xI(Mt),Ic,Xe)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(Yh.upload(O,xI(Mt),Ic,Xe),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&nr.setValue(O,"center",Y.center),nr.setValue(O,"modelViewMatrix",Y.modelViewMatrix),nr.setValue(O,"normalMatrix",Y.normalMatrix),nr.setValue(O,"modelMatrix",Y.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){let No=le.uniformsGroups;for(let jw=0,vH=No.length;jw<vH;jw++){let MI=No[jw];zt.update(MI,ja),zt.bind(MI,ja)}}return ja}function _H(D,$){D.ambientLightColor.needsUpdate=$,D.lightProbe.needsUpdate=$,D.directionalLights.needsUpdate=$,D.directionalLightShadows.needsUpdate=$,D.pointLights.needsUpdate=$,D.pointLightShadows.needsUpdate=$,D.spotLights.needsUpdate=$,D.spotLightShadows.needsUpdate=$,D.rectAreaLights.needsUpdate=$,D.hemisphereLights.needsUpdate=$}function bH(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(D,$,oe){Ke.get(D.texture).__webglTexture=$,Ke.get(D.depthTexture).__webglTexture=oe;let le=Ke.get(D);le.__hasExternalTextures=!0,le.__autoAllocateDepthBuffer=oe===void 0,le.__autoAllocateDepthBuffer||Te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,$){let oe=Ke.get(D);oe.__webglFramebuffer=$,oe.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(D,$=0,oe=0){M=D,C=$,S=oe;let le=!0,Y=null,He=!1,ot=!1;if(D){let _t=Ke.get(D);_t.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(O.FRAMEBUFFER,null),le=!1):_t.__webglFramebuffer===void 0?Xe.setupRenderTarget(D):_t.__hasExternalTextures&&Xe.rebindTextures(D,Ke.get(D.texture).__webglTexture,Ke.get(D.depthTexture).__webglTexture);let jt=D.texture;(jt.isData3DTexture||jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(ot=!0);let Lt=Ke.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(Lt[$])?Y=Lt[$][oe]:Y=Lt[$],He=!0):D.samples>0&&Xe.useMultisampledRTT(D)===!1?Y=Ke.get(D).__webglMultisampledFramebuffer:Array.isArray(Lt)?Y=Lt[oe]:Y=Lt,x.copy(D.viewport),I.copy(D.scissor),V=D.scissorTest}else x.copy(Ce).multiplyScalar(G).floor(),I.copy(Ie).multiplyScalar(G).floor(),V=Qe;if(Ae.bindFramebuffer(O.FRAMEBUFFER,Y)&&le&&Ae.drawBuffers(D,Y),Ae.viewport(x),Ae.scissor(I),Ae.setScissorTest(V),He){let _t=Ke.get(D.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+$,_t.__webglTexture,oe)}else if(ot){let _t=Ke.get(D.texture),jt=$||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,_t.__webglTexture,oe||0,jt)}A=-1},this.readRenderTargetPixels=function(D,$,oe,le,Y,He,ot){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=Ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ot!==void 0&&(ut=ut[ot]),ut){Ae.bindFramebuffer(O.FRAMEBUFFER,ut);try{let _t=D.texture,jt=_t.format,Lt=_t.type;if(!Pe.textureFormatReadable(jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=D.width-le&&oe>=0&&oe<=D.height-Y&&O.readPixels($,oe,le,Y,Je.convert(jt),Je.convert(Lt),He)}finally{let _t=M!==null?Ke.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(O.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=function(D,$,oe,le,Y,He,ot){return _i(this,null,function*(){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ut=Ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ot!==void 0&&(ut=ut[ot]),ut){Ae.bindFramebuffer(O.FRAMEBUFFER,ut);try{let _t=D.texture,jt=_t.format,Lt=_t.type;if(!Pe.textureFormatReadable(jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if($>=0&&$<=D.width-le&&oe>=0&&oe<=D.height-Y){let Et=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,Et),O.bufferData(O.PIXEL_PACK_BUFFER,He.byteLength,O.STREAM_READ),O.readPixels($,oe,le,Y,Je.convert(jt),Je.convert(Lt),0),O.flush();let Ii=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);yield t7(O,Ii,4);try{O.bindBuffer(O.PIXEL_PACK_BUFFER,Et),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,He)}finally{O.deleteBuffer(Et),O.deleteSync(Ii)}return He}}finally{let _t=M!==null?Ke.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(O.FRAMEBUFFER,_t)}}})},this.copyFramebufferToTexture=function(D,$=null,oe=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$=arguments[0]||null,D=arguments[1]);let le=Math.pow(2,-oe),Y=Math.floor(D.image.width*le),He=Math.floor(D.image.height*le),ot=$!==null?$.x:0,ut=$!==null?$.y:0;Xe.setTexture2D(D,0),O.copyTexSubImage2D(O.TEXTURE_2D,oe,0,0,ot,ut,Y,He),Ae.unbindTexture()},this.copyTextureToTexture=function(D,$,oe=null,le=null,Y=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),le=arguments[0]||null,D=arguments[1],$=arguments[2],Y=arguments[3]||0,oe=null);let He,ot,ut,_t,jt,Lt;oe!==null?(He=oe.max.x-oe.min.x,ot=oe.max.y-oe.min.y,ut=oe.min.x,_t=oe.min.y):(He=D.image.width,ot=D.image.height,ut=0,_t=0),le!==null?(jt=le.x,Lt=le.y):(jt=0,Lt=0);let Et=Je.convert($.format),Ii=Je.convert($.type);Xe.setTexture2D($,0),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,$.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,$.unpackAlignment);let wn=O.getParameter(O.UNPACK_ROW_LENGTH),Mn=O.getParameter(O.UNPACK_IMAGE_HEIGHT),vo=O.getParameter(O.UNPACK_SKIP_PIXELS),Oi=O.getParameter(O.UNPACK_SKIP_ROWS),Mt=O.getParameter(O.UNPACK_SKIP_IMAGES),Or=D.isCompressedTexture?D.mipmaps[Y]:D.image;O.pixelStorei(O.UNPACK_ROW_LENGTH,Or.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Or.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,ut),O.pixelStorei(O.UNPACK_SKIP_ROWS,_t),D.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,Y,jt,Lt,He,ot,Et,Ii,Or.data):D.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,Y,jt,Lt,Or.width,Or.height,Et,Or.data):O.texSubImage2D(O.TEXTURE_2D,Y,jt,Lt,Et,Ii,Or),O.pixelStorei(O.UNPACK_ROW_LENGTH,wn),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Mn),O.pixelStorei(O.UNPACK_SKIP_PIXELS,vo),O.pixelStorei(O.UNPACK_SKIP_ROWS,Oi),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Mt),Y===0&&$.generateMipmaps&&O.generateMipmap(O.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(D,$,oe=null,le=null,Y=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),oe=arguments[0]||null,le=arguments[1]||null,D=arguments[2],$=arguments[3],Y=arguments[4]||0);let He,ot,ut,_t,jt,Lt,Et,Ii,wn,Mn=D.isCompressedTexture?D.mipmaps[Y]:D.image;oe!==null?(He=oe.max.x-oe.min.x,ot=oe.max.y-oe.min.y,ut=oe.max.z-oe.min.z,_t=oe.min.x,jt=oe.min.y,Lt=oe.min.z):(He=Mn.width,ot=Mn.height,ut=Mn.depth,_t=0,jt=0,Lt=0),le!==null?(Et=le.x,Ii=le.y,wn=le.z):(Et=0,Ii=0,wn=0);let vo=Je.convert($.format),Oi=Je.convert($.type),Mt;if($.isData3DTexture)Xe.setTexture3D($,0),Mt=O.TEXTURE_3D;else if($.isDataArrayTexture||$.isCompressedArrayTexture)Xe.setTexture2DArray($,0),Mt=O.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,$.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,$.unpackAlignment);let Or=O.getParameter(O.UNPACK_ROW_LENGTH),zi=O.getParameter(O.UNPACK_IMAGE_HEIGHT),ja=O.getParameter(O.UNPACK_SKIP_PIXELS),s_=O.getParameter(O.UNPACK_SKIP_ROWS),Ul=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,Mn.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Mn.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,_t),O.pixelStorei(O.UNPACK_SKIP_ROWS,jt),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Lt),D.isDataTexture||D.isData3DTexture?O.texSubImage3D(Mt,Y,Et,Ii,wn,He,ot,ut,vo,Oi,Mn.data):$.isCompressedArrayTexture?O.compressedTexSubImage3D(Mt,Y,Et,Ii,wn,He,ot,ut,vo,Mn.data):O.texSubImage3D(Mt,Y,Et,Ii,wn,He,ot,ut,vo,Oi,Mn),O.pixelStorei(O.UNPACK_ROW_LENGTH,Or),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,zi),O.pixelStorei(O.UNPACK_SKIP_PIXELS,ja),O.pixelStorei(O.UNPACK_SKIP_ROWS,s_),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Ul),Y===0&&$.generateMipmaps&&O.generateMipmap(Mt),Ae.unbindTexture()},this.initRenderTarget=function(D){Ke.get(D).__webglFramebuffer===void 0&&Xe.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?Xe.setTextureCube(D,0):D.isData3DTexture?Xe.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Xe.setTexture2DArray(D,0):Xe.setTexture2D(D,0),Ae.unbindTexture()},this.resetState=function(){C=0,S=0,M=null,Ae.reset(),Vt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=t===qy?"display-p3":"srgb",e.unpackColorSpace=Si.workingColorSpace===cg?"display-p3":"srgb"}},ty=class n{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new ge(t),this.density=e}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}},ef=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new ge(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},tf=class extends Rt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ao,this.environmentIntensity=1,this.environmentRotation=new ao,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},hc=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Pm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Do()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return iD("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Do()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Do()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},zr=new R,la=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)zr.fromBufferAttribute(this,e),zr.applyMatrix4(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)zr.fromBufferAttribute(this,e),zr.applyNormalMatrix(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)zr.fromBufferAttribute(this,e),zr.transformDirection(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Gr(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Jt(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Jt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Gr(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Gr(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Gr(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Gr(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jt(e,this.array),i=Jt(i,this.array),r=Jt(r,this.array),o=Jt(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return new fi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Um=class extends un{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ge(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},Bh,um=new R,Uh=new R,Vh=new R,zh=new z,hm=new z,_B=new Be,b0=new R,fm=new R,v0=new R,mL=new z,GT=new z,gL=new z,iy=class extends Rt{constructor(t=new Um){if(super(),this.isSprite=!0,this.type="Sprite",Bh===void 0){Bh=new gt;let e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new hc(e,5);Bh.setIndex([0,1,2,0,2,3]),Bh.setAttribute("position",new la(i,3,0,!1)),Bh.setAttribute("uv",new la(i,2,3,!1))}this.geometry=Bh,this.material=t,this.center=new z(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Uh.setFromMatrixScale(this.matrixWorld),_B.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Vh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Uh.multiplyScalar(-Vh.z);let i=this.material.rotation,r,o;i!==0&&(o=Math.cos(i),r=Math.sin(i));let s=this.center;y0(b0.set(-.5,-.5,0),Vh,s,Uh,r,o),y0(fm.set(.5,-.5,0),Vh,s,Uh,r,o),y0(v0.set(.5,.5,0),Vh,s,Uh,r,o),mL.set(0,0),GT.set(1,0),gL.set(1,1);let a=t.ray.intersectTriangle(b0,fm,v0,!1,um);if(a===null&&(y0(fm.set(-.5,.5,0),Vh,s,Uh,r,o),GT.set(0,1),a=t.ray.intersectTriangle(b0,v0,fm,!1,um),a===null))return;let c=t.ray.origin.distanceTo(um);c<t.near||c>t.far||e.push({distance:c,point:um.clone(),uv:oc.getInterpolation(um,b0,fm,v0,mL,GT,gL,new z),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}};function y0(n,t,e,i,r,o){zh.subVectors(n,e).addScalar(.5).multiply(i),r!==void 0?(hm.x=o*zh.x-r*zh.y,hm.y=r*zh.x+o*zh.y):hm.copy(zh),n.copy(t),n.x+=hm.x,n.y+=hm.y,n.applyMatrix4(_B)}var x0=new R,_L=new R,ny=class extends Rt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);let e=t.levels;for(let i=0,r=e.length;i<r;i++){let o=e[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);let r=this.levels,o;for(o=0;o<r.length&&!(e<r[o].distance);o++);return r.splice(o,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){let e=this.levels;if(e.length>0){let i,r;for(i=1,r=e.length;i<r;i++){let o=e[i].distance;if(e[i].object.visible&&(o-=o*e[i].hysteresis),t<o)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){x0.setFromMatrixPosition(this.matrixWorld);let r=t.ray.origin.distanceTo(x0);this.getObjectForDistance(r).raycast(t,e)}}update(t){let e=this.levels;if(e.length>1){x0.setFromMatrixPosition(t.matrixWorld),_L.setFromMatrixPosition(this.matrixWorld);let i=x0.distanceTo(_L)/t.zoom;e[0].object.visible=!0;let r,o;for(r=1,o=e.length;r<o;r++){let s=e[r].distance;if(e[r].object.visible&&(s-=s*e[r].hysteresis),i>=s)e[r-1].object.visible=!1,e[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)e[r].object.visible=!1}}toJSON(t){let e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];let i=this.levels;for(let r=0,o=i.length;r<o;r++){let s=i[r];e.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return e}},bL=new R,vL=new yi,yL=new yi,qK=new R,xL=new Be,w0=new R,WT=new En,wL=new Be,$T=new aa,nf=class extends Ve{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=cC,this.bindMatrix=new Be,this.bindMatrixInverse=new Be,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new vn),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,w0),this.boundingBox.expandByPoint(w0)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new En),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,w0),this.boundingSphere.expandByPoint(w0)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),WT.copy(this.boundingSphere),WT.applyMatrix4(r),t.ray.intersectsSphere(WT)!==!1&&(wL.copy(r).invert(),$T.copy(t.ray).applyMatrix4(wL),!(this.boundingBox!==null&&$T.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,$T)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new yi,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===cC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===B2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;vL.fromBufferAttribute(r.attributes.skinIndex,t),yL.fromBufferAttribute(r.attributes.skinWeight,t),bL.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){let s=yL.getComponent(o);if(s!==0){let a=vL.getComponent(o);xL.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(qK.copy(bL).applyMatrix4(xL),s)}}return e.applyMatrix4(this.bindMatrixInverse)}},$d=class extends Rt{constructor(){super(),this.isBone=!0,this.type="Bone"}},$r=class extends yn{constructor(t=null,e=1,i=1,r,o,s,a,c,l=hi,d=hi,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ML=new Be,XK=new Be,rf=class n{constructor(t=[],e=[]){this.uuid=Do(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Be)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new Be;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=t.length;o<s;o++){let a=t[o]?t[o].matrixWorld:XK;ML.multiplyMatrices(a,e[o]),ML.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new $r(e,t,t,so,yr);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let o=t.bones[i],s=e[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new $d),this.bones.push(s),this.boneInverses.push(new Be().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,o=e.length;r<o;r++){let s=e[r];t.bones.push(s.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Cs=class extends fi{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Hh=new Be,SL=new Be,M0=[],RL=new vn,YK=new Be,pm=new Ve,mm=new En,fl=class extends Ve{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Cs(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,YK)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new vn),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Hh),RL.copy(t.boundingBox).applyMatrix4(Hh),this.boundingBox.union(RL)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new En),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Hh),mm.copy(t.boundingSphere).applyMatrix4(Hh),this.boundingSphere.union(mm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=t*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(pm.geometry=this.geometry,pm.material=this.material,pm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mm.copy(this.boundingSphere),mm.applyMatrix4(i),t.ray.intersectsSphere(mm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Hh),SL.multiplyMatrices(i,Hh),pm.matrixWorld=SL,pm.raycast(t,M0);for(let s=0,a=M0.length;s<a;s++){let c=M0[s];c.instanceId=o,c.object=this,e.push(c)}M0.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Cs(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new $r(new Float32Array(r*this.count),r,this.count,eu,yr));let o=this.morphTexture.source.data.data,s=0;for(let l=0;l<i.length;l++)s+=i[l];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*t;o[c]=a,o.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};function ZK(n,t){return n.z-t.z}function QK(n,t){return t.z-n.z}var JC=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e){let i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});let o=i[this.index];r.push(o),this.index++,o.start=t.start,o.count=t.count,o.z=e}reset(){this.list.length=0,this.index=0}},Gh="batchId",cl=new Be,qT=new Be,KK=new Be,JK=new ge(1,1,1),TL=new Be,XT=new Gd,S0=new vn,yd=new En,gm=new R,CL=new R,eJ=new R,YT=new JC,Cr=new Ve,R0=[];function tJ(n,t,e=0){let i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){let r=n.count;for(let o=0;o<r;o++)for(let s=0;s<i;s++)t.setComponent(o+e,s,n.getComponent(o,s))}else t.array.set(n.array,e*i);t.needsUpdate=!0}var ry=class extends Ve{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,e,i=e*2,r){super(new gt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let t=Math.sqrt(this._maxGeometryCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4),i=new $r(e,t,t,so,yr);this._matricesTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxGeometryCount);t=Math.ceil(t);let e=new Float32Array(t*t*4).fill(1),i=new $r(e,t,t,so,yr);i.colorSpace=Si.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){let e=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(let a in t.attributes){let c=t.getAttribute(a),{array:l,itemSize:d,normalized:u}=c,h=new l.constructor(i*d),f=new fi(h,d,u);e.setAttribute(a,f)}if(t.getIndex()!==null){let a=i>65536?new Uint32Array(o):new Uint16Array(o);e.setIndex(new fi(a,1))}let s=r>65536?new Uint32Array(i):new Uint16Array(i);e.setAttribute(Gh,new fi(s,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(Gh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Gh}"`);let e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(let i in e.attributes){if(i===Gh)continue;if(!t.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);let r=t.getAttribute(i),o=e.getAttribute(i);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let t=this._geometryCount,e=this.boundingBox,i=this._active;e.makeEmpty();for(let r=0;r<t;r++)i[r]!==!1&&(this.getMatrixAt(r,cl),this.getBoundingBoxAt(r,S0).applyMatrix4(cl),e.union(S0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new En);let t=this._geometryCount,e=this.boundingSphere,i=this._active;e.makeEmpty();for(let r=0;r<t;r++)i[r]!==!1&&(this.getMatrixAt(r,cl),this.getBoundingSphereAt(r,yd).applyMatrix4(cl),e.union(yd))}addGeometry(t,e=-1,i=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");let r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1},o=null,s=this._reservedRanges,a=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),e===-1?r.vertexCount=t.getAttribute("position").count:r.vertexCount=e,o===null?r.vertexStart=0:r.vertexStart=o.vertexStart+o.vertexCount;let l=t.getIndex(),d=l!==null;if(d&&(i===-1?r.indexCount=l.count:r.indexCount=i,o===null?r.indexStart=0:r.indexStart=o.indexStart+o.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u=this._visibility,h=this._active,f=this._matricesTexture,m=this._matricesTexture.image.data,_=this._colorsTexture;u.push(!0),h.push(!0);let g=this._geometryCount;this._geometryCount++,KK.toArray(m,g*16),f.needsUpdate=!0,_!==null&&(JK.toArray(_.image.data,g*4),_.needsUpdate=!0),s.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new vn,sphereInitialized:!1,sphere:new En});let p=this.geometry.getAttribute(Gh);for(let v=0;v<r.vertexCount;v++)p.setX(r.vertexStart+v,g);return p.needsUpdate=!0,this.setGeometryAt(g,t),g}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);let i=this.geometry,r=i.getIndex()!==null,o=i.getIndex(),s=e.getIndex(),a=this._reservedRanges[t];if(r&&s.count>a.indexCount||e.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");let c=a.vertexStart,l=a.vertexCount;for(let f in i.attributes){if(f===Gh)continue;let m=e.getAttribute(f),_=i.getAttribute(f);tJ(m,_,c);let g=m.itemSize;for(let p=m.count,v=l;p<v;p++){let b=c+p;for(let y=0;y<g;y++)_.setComponent(b,y,0)}_.needsUpdate=!0,_.addUpdateRange(c*g,l*g)}if(r){let f=a.indexStart;for(let m=0;m<s.count;m++)o.setX(f+m,c+s.getX(m));for(let m=s.count,_=a.indexCount;m<_;m++)o.setX(f+m,c);o.needsUpdate=!0,o.addUpdateRange(f,a.indexCount)}let d=this._bounds[t];e.boundingBox!==null?(d.box.copy(e.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,e.boundingSphere!==null?(d.sphere.copy(e.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;let u=this._drawRanges[t],h=e.getAttribute("position");return u.count=r?s.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){let e=this._active;return t>=e.length||e[t]===!1?this:(e[t]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(t){return this._multiDrawInstances===null?null:this._multiDrawInstances[t]}setInstanceCountAt(t,e){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[t]=e,t}getBoundingBoxAt(t,e){if(this._active[t]===!1)return null;let r=this._bounds[t],o=r.box,s=this.geometry;if(r.boxInitialized===!1){o.makeEmpty();let a=s.index,c=s.attributes.position,l=this._drawRanges[t];for(let d=l.start,u=l.start+l.count;d<u;d++){let h=d;a&&(h=a.getX(h)),o.expandByPoint(gm.fromBufferAttribute(c,h))}r.boxInitialized=!0}return e.copy(o),e}getBoundingSphereAt(t,e){if(this._active[t]===!1)return null;let r=this._bounds[t],o=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(t,S0),S0.getCenter(o.center);let a=s.index,c=s.attributes.position,l=this._drawRanges[t],d=0;for(let u=l.start,h=l.start+l.count;u<h;u++){let f=u;a&&(f=a.getX(f)),gm.fromBufferAttribute(c,f),d=Math.max(d,o.center.distanceToSquared(gm))}o.radius=Math.sqrt(d),r.sphereInitialized=!0}return e.copy(o),e}setMatrixAt(t,e){let i=this._active,r=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return t>=s||i[t]===!1?this:(e.toArray(o,t*16),r.needsUpdate=!0,this)}getMatrixAt(t,e){let i=this._active,r=this._matricesTexture.image.data,o=this._geometryCount;return t>=o||i[t]===!1?null:e.fromArray(r,t*16)}setColorAt(t,e){this._colorsTexture===null&&this._initColorsTexture();let i=this._active,r=this._colorsTexture,o=this._colorsTexture.image.data,s=this._geometryCount;return t>=s||i[t]===!1?this:(e.toArray(o,t*4),r.needsUpdate=!0,this)}getColorAt(t,e){let i=this._active,r=this._colorsTexture.image.data,o=this._geometryCount;return t>=o||i[t]===!1?null:e.fromArray(r,t*4)}setVisibleAt(t,e){let i=this._visibility,r=this._active,o=this._geometryCount;return t>=o||r[t]===!1||i[t]===e?this:(i[t]=e,this._visibilityChanged=!0,this)}getVisibleAt(t){let e=this._visibility,i=this._active,r=this._geometryCount;return t>=r||i[t]===!1?!1:e[t]}raycast(t,e){let i=this._visibility,r=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,c=this.geometry;Cr.material=this.material,Cr.geometry.index=c.index,Cr.geometry.attributes=c.attributes,Cr.geometry.boundingBox===null&&(Cr.geometry.boundingBox=new vn),Cr.geometry.boundingSphere===null&&(Cr.geometry.boundingSphere=new En);for(let l=0;l<s;l++){if(!i[l]||!r[l])continue;let d=o[l];Cr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Cr.matrixWorld).premultiply(a),this.getBoundingBoxAt(l,Cr.geometry.boundingBox),this.getBoundingSphereAt(l,Cr.geometry.boundingSphere),Cr.raycast(t,R0);for(let u=0,h=R0.length;u<h;u++){let f=R0[u];f.object=this,f.batchId=l,e.push(f)}R0.length=0}Cr.material=null,Cr.geometry.index=null,Cr.geometry.attributes={},Cr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(e=>pe({},e)),this._reservedRanges=t._reservedRanges.map(e=>pe({},e)),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,e,i,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._active,l=this._visibility,d=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled;f&&(TL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),XT.setFromProjectionMatrix(TL,t.coordinateSystem));let m=0;if(this.sortObjects){qT.copy(this.matrixWorld).invert(),gm.setFromMatrixPosition(i.matrixWorld).applyMatrix4(qT),CL.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(qT);for(let p=0,v=l.length;p<v;p++)if(l[p]&&c[p]){this.getMatrixAt(p,cl),this.getBoundingSphereAt(p,yd).applyMatrix4(cl);let b=!1;if(f&&(b=!XT.intersectsSphere(yd)),!b){let y=eJ.subVectors(yd.center,gm).dot(CL);YT.push(h[p],y)}}let _=YT.list,g=this.customSort;g===null?_.sort(o.transparent?QK:ZK):g.call(this,_,i);for(let p=0,v=_.length;p<v;p++){let b=_[p];d[m]=b.start*a,u[m]=b.count,m++}YT.reset()}else for(let _=0,g=l.length;_<g;_++)if(l[_]&&c[_]){let p=!1;if(f&&(this.getMatrixAt(_,cl),this.getBoundingSphereAt(_,yd).applyMatrix4(cl),p=!XT.intersectsSphere(yd)),!p){let v=h[_];d[m]=v.start*a,u[m]=v.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(t,e,i,r,o,s){this.onBeforeRender(t,null,r,o,s)}},on=class extends un{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ge(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},oy=new R,sy=new R,EL=new Be,_m=new aa,T0=new En,ZT=new R,DL=new R,Qi=class extends Rt{constructor(t=new gt,e=new on){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)oy.fromBufferAttribute(e,r-1),sy.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=oy.distanceTo(sy);t.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),T0.copy(i.boundingSphere),T0.applyMatrix4(r),T0.radius+=o,t.ray.intersectsSphere(T0)===!1)return;EL.copy(r).invert(),_m.copy(t.ray).applyMatrix4(EL);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){let f=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let _=f,g=m-1;_<g;_+=l){let p=d.getX(_),v=d.getX(_+1),b=C0(this,t,_m,c,p,v);b&&e.push(b)}if(this.isLineLoop){let _=d.getX(m-1),g=d.getX(f),p=C0(this,t,_m,c,_,g);p&&e.push(p)}}else{let f=Math.max(0,s.start),m=Math.min(h.count,s.start+s.count);for(let _=f,g=m-1;_<g;_+=l){let p=C0(this,t,_m,c,_,_+1);p&&e.push(p)}if(this.isLineLoop){let _=C0(this,t,_m,c,m-1,f);_&&e.push(_)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function C0(n,t,e,i,r,o){let s=n.geometry.attributes.position;if(oy.fromBufferAttribute(s,r),sy.fromBufferAttribute(s,o),e.distanceSqToSegment(oy,sy,ZT,DL)>i)return;ZT.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(ZT);if(!(c<t.near||c>t.far))return{distance:c,point:DL.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}var AL=new R,IL=new R,Dr=class extends Qi{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)AL.fromBufferAttribute(e,r),IL.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+AL.distanceTo(IL);t.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},of=class extends Qi{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},qd=class extends un{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},PL=new Be,eE=new aa,E0=new En,D0=new R,sf=class extends Rt{constructor(t=new gt,e=new qd){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),E0.copy(i.boundingSphere),E0.applyMatrix4(r),E0.radius+=o,t.ray.intersectsSphere(E0)===!1)return;PL.copy(r).invert(),eE.copy(t.ray).applyMatrix4(PL);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,u=i.attributes.position;if(l!==null){let h=Math.max(0,s.start),f=Math.min(l.count,s.start+s.count);for(let m=h,_=f;m<_;m++){let g=l.getX(m);D0.fromBufferAttribute(u,g),FL(D0,g,c,r,t,e,this)}}else{let h=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let m=h,_=f;m<_;m++)D0.fromBufferAttribute(u,m),FL(D0,m,c,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function FL(n,t,e,i,r,o,s){let a=eE.distanceSqToPoint(n);if(a<e){let c=new R;eE.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:t,face:null,object:s})}}var tE=class extends yn{constructor(t,e,i,r,o,s,a,c,l){super(t,e,i,r,o,s,a,c,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:_n,this.magFilter=o!==void 0?o:_n,this.generateMipmaps=!1;let d=this;function u(){d.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},iE=class extends yn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=hi,this.minFilter=hi,this.generateMipmaps=!1,this.needsUpdate=!0}},af=class extends yn{constructor(t,e,i,r,o,s,a,c,l,d,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}},nE=class extends af{constructor(t,e,i,r,o,s){super(t,e,i,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=oo,this.layerUpdates=new Set}addLayerUpdates(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}},rE=class extends af{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,lc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}},Xd=class extends yn{constructor(t,e,i,r,o,s,a,c,l){super(t,e,i,r,o,s,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Io=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],i,r=this.getPoint(0),o=0;e.push(0);for(let s=1;s<=t;s++)i=this.getPoint(s/t),o+=i.distanceTo(r),e.push(o),r=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let i=this.getLengths(),r=0,o=i.length,s;e?s=e:s=t*i[o-1];let a=0,c=o-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-s,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(o-1);let d=i[r],h=i[r+1]-d,f=(s-d)/h;return(r+f)/(o-1)}getTangent(t,e){let r=t-1e-4,o=t+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),c=e||(s.isVector2?new z:new R);return c.copy(a).sub(s).normalize(),c}getTangentAt(t,e){let i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){let i=new R,r=[],o=[],s=[],a=new R,c=new Be;for(let f=0;f<=t;f++){let m=f/t;r[f]=this.getTangentAt(m,new R)}o[0]=new R,s[0]=new R;let l=Number.MAX_VALUE,d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=l&&(l=d,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=t;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Cn(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(c.makeRotationAxis(a,m))}s[f].crossVectors(r[f],o[f])}if(e===!0){let f=Math.acos(Cn(o[0].dot(o[t]),-1,1));f/=t,r[0].dot(a.crossVectors(o[0],o[t]))>0&&(f=-f);for(let m=1;m<=t;m++)o[m].applyMatrix4(c.makeRotationAxis(r[m],f*m)),s[m].crossVectors(r[m],o[m])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},Es=class extends Io{constructor(t=0,e=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(t,e=new z){let i=e,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+t*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=c-this.aX,f=l-this.aY;c=h*d-f*u+this.aX,l=h*u+f*d+this.aY}return i.set(c,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},ay=class extends Es{constructor(t,e,i,r,o,s){super(t,e,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function rD(){let n=0,t=0,e=0,i=0;function r(o,s,a,c){n=o,t=a,e=-3*o+3*s-2*a-c,i=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,l){r(s,a,l*(a-o),l*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,l,d,u){let h=(s-o)/l-(a-o)/(l+d)+(a-s)/d,f=(a-s)/d-(c-s)/(d+u)+(c-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+t*o+e*s+i*a}}}var A0=new R,QT=new rD,KT=new rD,JT=new rD,cy=class extends Io{constructor(t=[],e=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=r}getPoint(t,e=new R){let i=e,r=this.points,o=r.length,s=(o-(this.closed?0:1))*t,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let l,d;this.closed||a>0?l=r[(a-1)%o]:(A0.subVectors(r[0],r[1]).add(r[0]),l=A0);let u=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?d=r[(a+2)%o]:(A0.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=A0),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(l.distanceToSquared(u),f),_=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);_<1e-4&&(_=1),m<1e-4&&(m=_),g<1e-4&&(g=_),QT.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,m,_,g),KT.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,m,_,g),JT.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,m,_,g)}else this.curveType==="catmullrom"&&(QT.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),KT.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),JT.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return i.set(QT.calc(c),KT.calc(c),JT.calc(c)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let r=t.points[e];this.points.push(new R().fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function kL(n,t,e,i,r){let o=(i-t)*.5,s=(r-e)*.5,a=n*n,c=n*a;return(2*e-2*i+o+s)*c+(-3*e+3*i-2*o-s)*a+o*n+e}function iJ(n,t){let e=1-n;return e*e*t}function nJ(n,t){return 2*(1-n)*n*t}function rJ(n,t){return n*n*t}function Mm(n,t,e,i){return iJ(n,t)+nJ(n,e)+rJ(n,i)}function oJ(n,t){let e=1-n;return e*e*e*t}function sJ(n,t){let e=1-n;return 3*e*e*n*t}function aJ(n,t){return 3*(1-n)*n*n*t}function cJ(n,t){return n*n*n*t}function Sm(n,t,e,i,r){return oJ(n,t)+sJ(n,e)+aJ(n,i)+cJ(n,r)}var Vm=class extends Io{constructor(t=new z,e=new z,i=new z,r=new z){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new z){let i=e,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Sm(t,r.x,o.x,s.x,a.x),Sm(t,r.y,o.y,s.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},ly=class extends Io{constructor(t=new R,e=new R,i=new R,r=new R){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new R){let i=e,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Sm(t,r.x,o.x,s.x,a.x),Sm(t,r.y,o.y,s.y,a.y),Sm(t,r.z,o.z,s.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},zm=class extends Io{constructor(t=new z,e=new z){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new z){let i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new z){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},dy=class extends Io{constructor(t=new R,e=new R){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new R){let i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new R){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Hm=class extends Io{constructor(t=new z,e=new z,i=new z){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new z){let i=e,r=this.v0,o=this.v1,s=this.v2;return i.set(Mm(t,r.x,o.x,s.x),Mm(t,r.y,o.y,s.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Gm=class extends Io{constructor(t=new R,e=new R,i=new R){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new R){let i=e,r=this.v0,o=this.v1,s=this.v2;return i.set(Mm(t,r.x,o.x,s.x),Mm(t,r.y,o.y,s.y),Mm(t,r.z,o.z,s.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Wm=class extends Io{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new z){let i=e,r=this.points,o=(r.length-1)*t,s=Math.floor(o),a=o-s,c=r[s===0?s:s-1],l=r[s],d=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return i.set(kL(a,c.x,l.x,d.x,u.x),kL(a,c.y,l.y,d.y,u.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let r=t.points[e];this.points.push(r.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let r=t.points[e];this.points.push(new z().fromArray(r))}return this}},uy=Object.freeze({__proto__:null,ArcCurve:ay,CatmullRomCurve3:cy,CubicBezierCurve:Vm,CubicBezierCurve3:ly,EllipseCurve:Es,LineCurve:zm,LineCurve3:dy,QuadraticBezierCurve:Hm,QuadraticBezierCurve3:Gm,SplineCurve:Wm}),hy=class extends Io{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){let i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new uy[i](e,t))}return this}getPoint(t,e){let i=t*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],c=a.getLength(),l=c===0?0:1-s/c;return a.getPointAt(l,e)}o++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?t*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,c=s.getPoints(a);for(let l=0;l<c.length;l++){let d=c[l];i&&i.equals(d)||(e.push(d),i=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){let r=this.curves[e];t.curves.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let r=t.curves[e];this.curves.push(new uy[r.type]().fromJSON(r))}return this}},Yd=class extends hy{constructor(t){super(),this.type="Path",this.currentPoint=new z,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let i=new zm(this.currentPoint.clone(),new z(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,r){let o=new Hm(this.currentPoint.clone(),new z(t,e),new z(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(t,e,i,r,o,s){let a=new Vm(this.currentPoint.clone(),new z(t,e),new z(i,r),new z(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),i=new Wm(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,r,o,s){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+a,e+c,i,r,o,s),this}absarc(t,e,i,r,o,s){return this.absellipse(t,e,i,i,r,o,s),this}ellipse(t,e,i,r,o,s,a,c){let l=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+l,e+d,i,r,o,s,a,c),this}absellipse(t,e,i,r,o,s,a,c){let l=new Es(t,e,i,r,o,s,a,c);if(this.curves.length>0){let u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);let d=l.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},$m=class n extends gt{constructor(t=[new z(0,-.5),new z(.5,0),new z(0,.5)],e=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e),r=Cn(r,0,Math.PI*2);let o=[],s=[],a=[],c=[],l=[],d=1/e,u=new R,h=new z,f=new R,m=new R,_=new R,g=0,p=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:g=t[v+1].x-t[v].x,p=t[v+1].y-t[v].y,f.x=p*1,f.y=-g,f.z=p*0,_.copy(f),f.normalize(),c.push(f.x,f.y,f.z);break;case t.length-1:c.push(_.x,_.y,_.z);break;default:g=t[v+1].x-t[v].x,p=t[v+1].y-t[v].y,f.x=p*1,f.y=-g,f.z=p*0,m.copy(f),f.x+=_.x,f.y+=_.y,f.z+=_.z,f.normalize(),c.push(f.x,f.y,f.z),_.copy(m)}for(let v=0;v<=e;v++){let b=i+v*d*r,y=Math.sin(b),C=Math.cos(b);for(let S=0;S<=t.length-1;S++){u.x=t[S].x*y,u.y=t[S].y,u.z=t[S].x*C,s.push(u.x,u.y,u.z),h.x=v/e,h.y=S/(t.length-1),a.push(h.x,h.y);let M=c[3*S+0]*y,A=c[3*S+1],T=c[3*S+0]*C;l.push(M,A,T)}}for(let v=0;v<e;v++)for(let b=0;b<t.length-1;b++){let y=b+v*t.length,C=y,S=y+t.length,M=y+t.length+1,A=y+1;o.push(C,S,A),o.push(M,A,S)}this.setIndex(o),this.setAttribute("position",new qe(s,3)),this.setAttribute("uv",new qe(a,2)),this.setAttribute("normal",new qe(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.points,t.segments,t.phiStart,t.phiLength)}},fy=class n extends $m{constructor(t=1,e=1,i=4,r=8){let o=new Yd;o.absarc(0,-e/2,t,Math.PI*1.5,0),o.absarc(0,e/2,t,0,Math.PI*.5),super(o.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:i,radialSegments:r}}static fromJSON(t){return new n(t.radius,t.length,t.capSegments,t.radialSegments)}},py=class n extends gt{constructor(t=1,e=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},e=Math.max(3,e);let o=[],s=[],a=[],c=[],l=new R,d=new z;s.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){let f=i+u/e*r;l.x=t*Math.cos(f),l.y=t*Math.sin(f),s.push(l.x,l.y,l.z),a.push(0,0,1),d.x=(s[h]/t+1)/2,d.y=(s[h+1]/t+1)/2,c.push(d.x,d.y)}for(let u=1;u<=e;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.segments,t.thetaStart,t.thetaLength)}},On=class n extends gt{constructor(t=1,e=1,i=1,r=32,o=1,s=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};let l=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],m=0,_=[],g=i/2,p=0;v(),s===!1&&(t>0&&b(!0),e>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2));function v(){let y=new R,C=new R,S=0,M=(e-t)/i;for(let A=0;A<=o;A++){let T=[],x=A/o,I=x*(e-t)+t;for(let V=0;V<=r;V++){let W=V/r,te=W*c+a,ne=Math.sin(te),B=Math.cos(te);C.x=I*ne,C.y=-x*i+g,C.z=I*B,u.push(C.x,C.y,C.z),y.set(ne,M,B).normalize(),h.push(y.x,y.y,y.z),f.push(W,1-x),T.push(m++)}_.push(T)}for(let A=0;A<r;A++)for(let T=0;T<o;T++){let x=_[T][A],I=_[T+1][A],V=_[T+1][A+1],W=_[T][A+1];d.push(x,I,W),d.push(I,V,W),S+=6}l.addGroup(p,S,0),p+=S}function b(y){let C=m,S=new z,M=new R,A=0,T=y===!0?t:e,x=y===!0?1:-1;for(let V=1;V<=r;V++)u.push(0,g*x,0),h.push(0,x,0),f.push(.5,.5),m++;let I=m;for(let V=0;V<=r;V++){let te=V/r*c+a,ne=Math.cos(te),B=Math.sin(te);M.x=T*B,M.y=g*x,M.z=T*ne,u.push(M.x,M.y,M.z),h.push(0,x,0),S.x=ne*.5+.5,S.y=B*.5*x+.5,f.push(S.x,S.y),m++}for(let V=0;V<r;V++){let W=C+V,te=I+V;y===!0?d.push(te,te+1,W):d.push(te+1,te,W),A+=3}l.addGroup(p,A,y===!0?1:2),p+=A}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},my=class n extends On{constructor(t=1,e=1,i=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,t,e,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(t){return new n(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},da=class n extends gt{constructor(t=[],e=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r};let o=[],s=[];a(r),l(i),d(),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(o.slice(),3)),this.setAttribute("uv",new qe(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let b=new R,y=new R,C=new R;for(let S=0;S<e.length;S+=3)f(e[S+0],b),f(e[S+1],y),f(e[S+2],C),c(b,y,C,v)}function c(v,b,y,C){let S=C+1,M=[];for(let A=0;A<=S;A++){M[A]=[];let T=v.clone().lerp(y,A/S),x=b.clone().lerp(y,A/S),I=S-A;for(let V=0;V<=I;V++)V===0&&A===S?M[A][V]=T:M[A][V]=T.clone().lerp(x,V/I)}for(let A=0;A<S;A++)for(let T=0;T<2*(S-A)-1;T++){let x=Math.floor(T/2);T%2===0?(h(M[A][x+1]),h(M[A+1][x]),h(M[A][x])):(h(M[A][x+1]),h(M[A+1][x+1]),h(M[A+1][x]))}}function l(v){let b=new R;for(let y=0;y<o.length;y+=3)b.x=o[y+0],b.y=o[y+1],b.z=o[y+2],b.normalize().multiplyScalar(v),o[y+0]=b.x,o[y+1]=b.y,o[y+2]=b.z}function d(){let v=new R;for(let b=0;b<o.length;b+=3){v.x=o[b+0],v.y=o[b+1],v.z=o[b+2];let y=g(v)/2/Math.PI+.5,C=p(v)/Math.PI+.5;s.push(y,1-C)}m(),u()}function u(){for(let v=0;v<s.length;v+=6){let b=s[v+0],y=s[v+2],C=s[v+4],S=Math.max(b,y,C),M=Math.min(b,y,C);S>.9&&M<.1&&(b<.2&&(s[v+0]+=1),y<.2&&(s[v+2]+=1),C<.2&&(s[v+4]+=1))}}function h(v){o.push(v.x,v.y,v.z)}function f(v,b){let y=v*3;b.x=t[y+0],b.y=t[y+1],b.z=t[y+2]}function m(){let v=new R,b=new R,y=new R,C=new R,S=new z,M=new z,A=new z;for(let T=0,x=0;T<o.length;T+=9,x+=6){v.set(o[T+0],o[T+1],o[T+2]),b.set(o[T+3],o[T+4],o[T+5]),y.set(o[T+6],o[T+7],o[T+8]),S.set(s[x+0],s[x+1]),M.set(s[x+2],s[x+3]),A.set(s[x+4],s[x+5]),C.copy(v).add(b).add(y).divideScalar(3);let I=g(C);_(S,x+0,v,I),_(M,x+2,b,I),_(A,x+4,y,I)}}function _(v,b,y,C){C<0&&v.x===1&&(s[b]=v.x-1),y.x===0&&y.z===0&&(s[b]=C/2/Math.PI+.5)}function g(v){return Math.atan2(v.z,-v.x)}function p(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.vertices,t.indices,t.radius,t.details)}},gy=class n extends da{constructor(t=1,e=0){let i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},I0=new R,P0=new R,eC=new R,F0=new oc,_y=class extends gt{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){let r=Math.pow(10,4),o=Math.cos(kd*e),s=t.getIndex(),a=t.getAttribute("position"),c=s?s.count:a.count,l=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let m=0;m<c;m+=3){s?(l[0]=s.getX(m),l[1]=s.getX(m+1),l[2]=s.getX(m+2)):(l[0]=m,l[1]=m+1,l[2]=m+2);let{a:_,b:g,c:p}=F0;if(_.fromBufferAttribute(a,l[0]),g.fromBufferAttribute(a,l[1]),p.fromBufferAttribute(a,l[2]),F0.getNormal(eC),u[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let v=0;v<3;v++){let b=(v+1)%3,y=u[v],C=u[b],S=F0[d[v]],M=F0[d[b]],A=`${y}_${C}`,T=`${C}_${y}`;T in h&&h[T]?(eC.dot(h[T].normal)<=o&&(f.push(S.x,S.y,S.z),f.push(M.x,M.y,M.z)),h[T]=null):A in h||(h[A]={index0:l[v],index1:l[b],normal:eC.clone()})}}for(let m in h)if(h[m]){let{index0:_,index1:g}=h[m];I0.fromBufferAttribute(a,_),P0.fromBufferAttribute(a,g),f.push(I0.x,I0.y,I0.z),f.push(P0.x,P0.y,P0.z)}this.setAttribute("position",new qe(f,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}},cc=class extends Yd{constructor(t){super(t),this.uuid=Do(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let r=t.holes[e];this.holes.push(r.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){let r=this.holes[e];t.holes.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let r=t.holes[e];this.holes.push(new Yd().fromJSON(r))}return this}},lJ={triangulate:function(n,t,e=2){let i=t&&t.length,r=i?t[0]*e:n.length,o=bB(n,0,r,e,!0),s=[];if(!o||o.next===o.prev)return s;let a,c,l,d,u,h,f;if(i&&(o=pJ(n,t,o,e)),n.length>80*e){a=l=n[0],c=d=n[1];for(let m=e;m<r;m+=e)u=n[m],h=n[m+1],u<a&&(a=u),h<c&&(c=h),u>l&&(l=u),h>d&&(d=h);f=Math.max(l-a,d-c),f=f!==0?32767/f:0}return qm(o,s,e,a,c,f,0),s}};function bB(n,t,e,i,r){let o,s;if(r===RJ(n,t,e,i)>0)for(o=t;o<e;o+=i)s=jL(o,n[o],n[o+1],s);else for(o=e-i;o>=t;o-=i)s=jL(o,n[o],n[o+1],s);return s&&Yy(s,s.next)&&(Ym(s),s=s.next),s}function Zd(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Yy(e,e.next)||bn(e.prev,e,e.next)===0)){if(Ym(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function qm(n,t,e,i,r,o,s){if(!n)return;!s&&o&&vJ(n,i,r,o);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,o?uJ(n,i,r,o):dJ(n)){t.push(c.i/e|0),t.push(n.i/e|0),t.push(l.i/e|0),Ym(n),n=l.next,a=l.next;continue}if(n=l,n===a){s?s===1?(n=hJ(Zd(n),t,e),qm(n,t,e,i,r,o,2)):s===2&&fJ(n,t,e,i,r,o):qm(Zd(n),t,e,i,r,o,1);break}}}function dJ(n){let t=n.prev,e=n,i=n.next;if(bn(t,e,i)>=0)return!1;let r=t.x,o=e.x,s=i.x,a=t.y,c=e.y,l=i.y,d=r<o?r<s?r:s:o<s?o:s,u=a<c?a<l?a:l:c<l?c:l,h=r>o?r>s?r:s:o>s?o:s,f=a>c?a>l?a:l:c>l?c:l,m=i.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=f&&qh(r,a,o,c,s,l,m.x,m.y)&&bn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function uJ(n,t,e,i){let r=n.prev,o=n,s=n.next;if(bn(r,o,s)>=0)return!1;let a=r.x,c=o.x,l=s.x,d=r.y,u=o.y,h=s.y,f=a<c?a<l?a:l:c<l?c:l,m=d<u?d<h?d:h:u<h?u:h,_=a>c?a>l?a:l:c>l?c:l,g=d>u?d>h?d:h:u>h?u:h,p=oE(f,m,t,e,i),v=oE(_,g,t,e,i),b=n.prevZ,y=n.nextZ;for(;b&&b.z>=p&&y&&y.z<=v;){if(b.x>=f&&b.x<=_&&b.y>=m&&b.y<=g&&b!==r&&b!==s&&qh(a,d,c,u,l,h,b.x,b.y)&&bn(b.prev,b,b.next)>=0||(b=b.prevZ,y.x>=f&&y.x<=_&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&qh(a,d,c,u,l,h,y.x,y.y)&&bn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;b&&b.z>=p;){if(b.x>=f&&b.x<=_&&b.y>=m&&b.y<=g&&b!==r&&b!==s&&qh(a,d,c,u,l,h,b.x,b.y)&&bn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=_&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&qh(a,d,c,u,l,h,y.x,y.y)&&bn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function hJ(n,t,e){let i=n;do{let r=i.prev,o=i.next.next;!Yy(r,o)&&vB(r,i,i.next,o)&&Xm(r,o)&&Xm(o,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(o.i/e|0),Ym(i),Ym(i.next),i=n=o),i=i.next}while(i!==n);return Zd(i)}function fJ(n,t,e,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&wJ(s,a)){let c=yB(s,a);s=Zd(s,s.next),c=Zd(c,c.next),qm(s,t,e,i,r,o,0),qm(c,t,e,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function pJ(n,t,e,i){let r=[],o,s,a,c,l;for(o=0,s=t.length;o<s;o++)a=t[o]*i,c=o<s-1?t[o+1]*i:n.length,l=bB(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(xJ(l));for(r.sort(mJ),o=0;o<r.length;o++)e=gJ(r[o],e);return e}function mJ(n,t){return n.x-t.x}function gJ(n,t){let e=_J(n,t);if(!e)return t;let i=yB(e,n);return Zd(i,i.next),Zd(e,e.next)}function _J(n,t){let e=t,i=-1/0,r,o=n.x,s=n.y;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){let h=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=o&&h>i&&(i=h,r=e.x<e.next.x?e:e.next,h===o))return r}e=e.next}while(e!==t);if(!r)return null;let a=r,c=r.x,l=r.y,d=1/0,u;e=r;do o>=e.x&&e.x>=c&&o!==e.x&&qh(s<l?o:i,s,c,l,s<l?i:o,s,e.x,e.y)&&(u=Math.abs(s-e.y)/(o-e.x),Xm(e,n)&&(u<d||u===d&&(e.x>r.x||e.x===r.x&&bJ(r,e)))&&(r=e,d=u)),e=e.next;while(e!==a);return r}function bJ(n,t){return bn(n.prev,n,t.prev)<0&&bn(t.next,n,n.next)<0}function vJ(n,t,e,i){let r=n;do r.z===0&&(r.z=oE(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,yJ(r)}function yJ(n){let t,e,i,r,o,s,a,c,l=1;do{for(e=n,n=null,o=null,s=0;e;){for(s++,i=e,a=0,t=0;t<l&&(a++,i=i.nextZ,!!i);t++);for(c=l;a>0||c>0&&i;)a!==0&&(c===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;e=i}o.nextZ=null,l*=2}while(s>1);return n}function oE(n,t,e,i,r){return n=(n-e)*r|0,t=(t-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function xJ(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function qh(n,t,e,i,r,o,s,a){return(r-s)*(t-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(e-s)*(t-a)&&(e-s)*(o-a)>=(r-s)*(i-a)}function wJ(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!MJ(n,t)&&(Xm(n,t)&&Xm(t,n)&&SJ(n,t)&&(bn(n.prev,n,t.prev)||bn(n,t.prev,t))||Yy(n,t)&&bn(n.prev,n,n.next)>0&&bn(t.prev,t,t.next)>0)}function bn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Yy(n,t){return n.x===t.x&&n.y===t.y}function vB(n,t,e,i){let r=j0(bn(n,t,e)),o=j0(bn(n,t,i)),s=j0(bn(e,i,n)),a=j0(bn(e,i,t));return!!(r!==o&&s!==a||r===0&&k0(n,e,t)||o===0&&k0(n,i,t)||s===0&&k0(e,n,i)||a===0&&k0(e,t,i))}function k0(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function j0(n){return n>0?1:n<0?-1:0}function MJ(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&vB(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Xm(n,t){return bn(n.prev,n,n.next)<0?bn(n,t,n.next)>=0&&bn(n,n.prev,t)>=0:bn(n,t,n.prev)<0||bn(n,n.next,t)<0}function SJ(n,t){let e=n,i=!1,r=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&r<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function yB(n,t){let e=new sE(n.i,n.x,n.y),i=new sE(t.i,t.x,t.y),r=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function jL(n,t,e,i){let r=new sE(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ym(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function sE(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RJ(n,t,e,i){let r=0;for(let o=t,s=e-i;o<e;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var sa=class n{static area(t){let e=t.length,i=0;for(let r=e-1,o=0;o<e;r=o++)i+=t[r].x*t[o].y-t[o].x*t[r].y;return i*.5}static isClockWise(t){return n.area(t)<0}static triangulateShape(t,e){let i=[],r=[],o=[];OL(t),NL(i,t);let s=t.length;e.forEach(OL);for(let c=0;c<e.length;c++)r.push(s),s+=e[c].length,NL(i,e[c]);let a=lJ.triangulate(i,r);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}};function OL(n){let t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function NL(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}var by=class n extends gt{constructor(t=new cc([new z(.5,.5),new z(-.5,.5),new z(-.5,-.5),new z(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];let i=this,r=[],o=[];for(let a=0,c=t.length;a<c;a++){let l=t[a];s(l)}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(o,2)),this.computeVertexNormals();function s(a){let c=[],l=e.curveSegments!==void 0?e.curveSegments:12,d=e.steps!==void 0?e.steps:1,u=e.depth!==void 0?e.depth:1,h=e.bevelEnabled!==void 0?e.bevelEnabled:!0,f=e.bevelThickness!==void 0?e.bevelThickness:.2,m=e.bevelSize!==void 0?e.bevelSize:f-.1,_=e.bevelOffset!==void 0?e.bevelOffset:0,g=e.bevelSegments!==void 0?e.bevelSegments:3,p=e.extrudePath,v=e.UVGenerator!==void 0?e.UVGenerator:TJ,b,y=!1,C,S,M,A;p&&(b=p.getSpacedPoints(d),y=!0,h=!1,C=p.computeFrenetFrames(d,!1),S=new R,M=new R,A=new R),h||(g=0,f=0,m=0,_=0);let T=a.extractPoints(l),x=T.shape,I=T.holes;if(!sa.isClockWise(x)){x=x.reverse();for(let ye=0,Te=I.length;ye<Te;ye++){let Pe=I[ye];sa.isClockWise(Pe)&&(I[ye]=Pe.reverse())}}let W=sa.triangulateShape(x,I),te=x;for(let ye=0,Te=I.length;ye<Te;ye++){let Pe=I[ye];x=x.concat(Pe)}function ne(ye,Te,Pe){return Te||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(Te,Pe)}let B=x.length,G=W.length;function U(ye,Te,Pe){let Ae,ke,Ke,Xe=ye.x-Te.x,Tt=ye.y-Te.y,P=Pe.x-ye.x,E=Pe.y-ye.y,re=Xe*Xe+Tt*Tt,Re=Xe*E-Tt*P;if(Math.abs(Re)>Number.EPSILON){let Me=Math.sqrt(re),De=Math.sqrt(P*P+E*E),pt=Te.x-Tt/Me,Ge=Te.y+Xe/Me,ze=Pe.x-E/De,Ct=Pe.y+P/De,Oe=((ze-pt)*E-(Ct-Ge)*P)/(Xe*E-Tt*P);Ae=pt+Xe*Oe-ye.x,ke=Ge+Tt*Oe-ye.y;let rt=Ae*Ae+ke*ke;if(rt<=2)return new z(Ae,ke);Ke=Math.sqrt(rt/2)}else{let Me=!1;Xe>Number.EPSILON?P>Number.EPSILON&&(Me=!0):Xe<-Number.EPSILON?P<-Number.EPSILON&&(Me=!0):Math.sign(Tt)===Math.sign(E)&&(Me=!0),Me?(Ae=-Tt,ke=Xe,Ke=Math.sqrt(re)):(Ae=Xe,ke=Tt,Ke=Math.sqrt(re/2))}return new z(Ae/Ke,ke/Ke)}let se=[];for(let ye=0,Te=te.length,Pe=Te-1,Ae=ye+1;ye<Te;ye++,Pe++,Ae++)Pe===Te&&(Pe=0),Ae===Te&&(Ae=0),se[ye]=U(te[ye],te[Pe],te[Ae]);let Ce=[],Ie,Qe=se.concat();for(let ye=0,Te=I.length;ye<Te;ye++){let Pe=I[ye];Ie=[];for(let Ae=0,ke=Pe.length,Ke=ke-1,Xe=Ae+1;Ae<ke;Ae++,Ke++,Xe++)Ke===ke&&(Ke=0),Xe===ke&&(Xe=0),Ie[Ae]=U(Pe[Ae],Pe[Ke],Pe[Xe]);Ce.push(Ie),Qe=Qe.concat(Ie)}for(let ye=0;ye<g;ye++){let Te=ye/g,Pe=f*Math.cos(Te*Math.PI/2),Ae=m*Math.sin(Te*Math.PI/2)+_;for(let ke=0,Ke=te.length;ke<Ke;ke++){let Xe=ne(te[ke],se[ke],Ae);N(Xe.x,Xe.y,-Pe)}for(let ke=0,Ke=I.length;ke<Ke;ke++){let Xe=I[ke];Ie=Ce[ke];for(let Tt=0,P=Xe.length;Tt<P;Tt++){let E=ne(Xe[Tt],Ie[Tt],Ae);N(E.x,E.y,-Pe)}}}let vt=m+_;for(let ye=0;ye<B;ye++){let Te=h?ne(x[ye],Qe[ye],vt):x[ye];y?(M.copy(C.normals[0]).multiplyScalar(Te.x),S.copy(C.binormals[0]).multiplyScalar(Te.y),A.copy(b[0]).add(M).add(S),N(A.x,A.y,A.z)):N(Te.x,Te.y,0)}for(let ye=1;ye<=d;ye++)for(let Te=0;Te<B;Te++){let Pe=h?ne(x[Te],Qe[Te],vt):x[Te];y?(M.copy(C.normals[ye]).multiplyScalar(Pe.x),S.copy(C.binormals[ye]).multiplyScalar(Pe.y),A.copy(b[ye]).add(M).add(S),N(A.x,A.y,A.z)):N(Pe.x,Pe.y,u/d*ye)}for(let ye=g-1;ye>=0;ye--){let Te=ye/g,Pe=f*Math.cos(Te*Math.PI/2),Ae=m*Math.sin(Te*Math.PI/2)+_;for(let ke=0,Ke=te.length;ke<Ke;ke++){let Xe=ne(te[ke],se[ke],Ae);N(Xe.x,Xe.y,u+Pe)}for(let ke=0,Ke=I.length;ke<Ke;ke++){let Xe=I[ke];Ie=Ce[ke];for(let Tt=0,P=Xe.length;Tt<P;Tt++){let E=ne(Xe[Tt],Ie[Tt],Ae);y?N(E.x,E.y+b[d-1].y,b[d-1].x+Pe):N(E.x,E.y,u+Pe)}}}Q(),Ee();function Q(){let ye=r.length/3;if(h){let Te=0,Pe=B*Te;for(let Ae=0;Ae<G;Ae++){let ke=W[Ae];we(ke[2]+Pe,ke[1]+Pe,ke[0]+Pe)}Te=d+g*2,Pe=B*Te;for(let Ae=0;Ae<G;Ae++){let ke=W[Ae];we(ke[0]+Pe,ke[1]+Pe,ke[2]+Pe)}}else{for(let Te=0;Te<G;Te++){let Pe=W[Te];we(Pe[2],Pe[1],Pe[0])}for(let Te=0;Te<G;Te++){let Pe=W[Te];we(Pe[0]+B*d,Pe[1]+B*d,Pe[2]+B*d)}}i.addGroup(ye,r.length/3-ye,0)}function Ee(){let ye=r.length/3,Te=0;We(te,Te),Te+=te.length;for(let Pe=0,Ae=I.length;Pe<Ae;Pe++){let ke=I[Pe];We(ke,Te),Te+=ke.length}i.addGroup(ye,r.length/3-ye,1)}function We(ye,Te){let Pe=ye.length;for(;--Pe>=0;){let Ae=Pe,ke=Pe-1;ke<0&&(ke=ye.length-1);for(let Ke=0,Xe=d+g*2;Ke<Xe;Ke++){let Tt=B*Ke,P=B*(Ke+1),E=Te+Ae+Tt,re=Te+ke+Tt,Re=Te+ke+P,Me=Te+Ae+P;Ne(E,re,Re,Me)}}}function N(ye,Te,Pe){c.push(ye),c.push(Te),c.push(Pe)}function we(ye,Te,Pe){Ue(ye),Ue(Te),Ue(Pe);let Ae=r.length/3,ke=v.generateTopUV(i,r,Ae-3,Ae-2,Ae-1);O(ke[0]),O(ke[1]),O(ke[2])}function Ne(ye,Te,Pe,Ae){Ue(ye),Ue(Te),Ue(Ae),Ue(Te),Ue(Pe),Ue(Ae);let ke=r.length/3,Ke=v.generateSideWallUV(i,r,ke-6,ke-3,ke-2,ke-1);O(Ke[0]),O(Ke[1]),O(Ke[3]),O(Ke[1]),O(Ke[2]),O(Ke[3])}function Ue(ye){r.push(c[ye*3+0]),r.push(c[ye*3+1]),r.push(c[ye*3+2])}function O(ye){o.push(ye.x),o.push(ye.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return CJ(e,i,t)}static fromJSON(t,e){let i=[];for(let o=0,s=t.shapes.length;o<s;o++){let a=e[t.shapes[o]];i.push(a)}let r=t.options.extrudePath;return r!==void 0&&(t.options.extrudePath=new uy[r.type]().fromJSON(r)),new n(i,t.options)}},TJ={generateTopUV:function(n,t,e,i,r){let o=t[e*3],s=t[e*3+1],a=t[i*3],c=t[i*3+1],l=t[r*3],d=t[r*3+1];return[new z(o,s),new z(a,c),new z(l,d)]},generateSideWallUV:function(n,t,e,i,r,o){let s=t[e*3],a=t[e*3+1],c=t[e*3+2],l=t[i*3],d=t[i*3+1],u=t[i*3+2],h=t[r*3],f=t[r*3+1],m=t[r*3+2],_=t[o*3],g=t[o*3+1],p=t[o*3+2];return Math.abs(a-d)<Math.abs(s-l)?[new z(s,1-c),new z(l,1-u),new z(h,1-m),new z(_,1-p)]:[new z(a,1-c),new z(d,1-u),new z(f,1-m),new z(g,1-p)]}};function CJ(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let o=n[i];e.shapes.push(o.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}var cf=class n extends da{constructor(t=1,e=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},ua=class n extends da{constructor(t=1,e=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},vy=class n extends gt{constructor(t=.5,e=1,i=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);let a=[],c=[],l=[],d=[],u=t,h=(e-t)/r,f=new R,m=new z;for(let _=0;_<=r;_++){for(let g=0;g<=i;g++){let p=o+g/i*s;f.x=u*Math.cos(p),f.y=u*Math.sin(p),c.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(f.x/e+1)/2,m.y=(f.y/e+1)/2,d.push(m.x,m.y)}u+=h}for(let _=0;_<r;_++){let g=_*(i+1);for(let p=0;p<i;p++){let v=p+g,b=v,y=v+i+1,C=v+i+2,S=v+1;a.push(b,y,S),a.push(y,C,S)}}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}},yy=class n extends gt{constructor(t=new cc([new z(0,.5),new z(-.5,-.5),new z(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};let i=[],r=[],o=[],s=[],a=0,c=0;if(Array.isArray(t)===!1)l(t);else for(let d=0;d<t.length;d++)l(t[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(i),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(o,3)),this.setAttribute("uv",new qe(s,2));function l(d){let u=r.length/3,h=d.extractPoints(e),f=h.shape,m=h.holes;sa.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,p=m.length;g<p;g++){let v=m[g];sa.isClockWise(v)===!0&&(m[g]=v.reverse())}let _=sa.triangulateShape(f,m);for(let g=0,p=m.length;g<p;g++){let v=m[g];f=f.concat(v)}for(let g=0,p=f.length;g<p;g++){let v=f[g];r.push(v.x,v.y,0),o.push(0,0,1),s.push(v.x,v.y)}for(let g=0,p=_.length;g<p;g++){let v=_[g],b=v[0]+u,y=v[1]+u,C=v[2]+u;i.push(b,y,C),c+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON(),e=this.parameters.shapes;return EJ(e,t)}static fromJSON(t,e){let i=[];for(let r=0,o=t.shapes.length;r<o;r++){let s=e[t.shapes[r]];i.push(s)}return new n(i,t.curveSegments)}};function EJ(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){let r=n[e];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t}var fc=class n extends gt{constructor(t=1,e=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));let c=Math.min(s+a,Math.PI),l=0,d=[],u=new R,h=new R,f=[],m=[],_=[],g=[];for(let p=0;p<=i;p++){let v=[],b=p/i,y=0;p===0&&s===0?y=.5/e:p===i&&c===Math.PI&&(y=-.5/e);for(let C=0;C<=e;C++){let S=C/e;u.x=-t*Math.cos(r+S*o)*Math.sin(s+b*a),u.y=t*Math.cos(s+b*a),u.z=t*Math.sin(r+S*o)*Math.sin(s+b*a),m.push(u.x,u.y,u.z),h.copy(u).normalize(),_.push(h.x,h.y,h.z),g.push(S+y,1-b),v.push(l++)}d.push(v)}for(let p=0;p<i;p++)for(let v=0;v<e;v++){let b=d[p][v+1],y=d[p][v],C=d[p+1][v],S=d[p+1][v+1];(p!==0||s>0)&&f.push(b,y,S),(p!==i-1||c<Math.PI)&&f.push(y,C,S)}this.setIndex(f),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(_,3)),this.setAttribute("uv",new qe(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},xy=class n extends da{constructor(t=1,e=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},ha=class n extends gt{constructor(t=1,e=.4,i=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);let s=[],a=[],c=[],l=[],d=new R,u=new R,h=new R;for(let f=0;f<=i;f++)for(let m=0;m<=r;m++){let _=m/r*o,g=f/i*Math.PI*2;u.x=(t+e*Math.cos(g))*Math.cos(_),u.y=(t+e*Math.cos(g))*Math.sin(_),u.z=e*Math.sin(g),a.push(u.x,u.y,u.z),d.x=t*Math.cos(_),d.y=t*Math.sin(_),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(m/r),l.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=r;m++){let _=(r+1)*f+m-1,g=(r+1)*(f-1)+m-1,p=(r+1)*(f-1)+m,v=(r+1)*f+m;s.push(_,g,v),s.push(g,p,v)}this.setIndex(s),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}},wy=class n extends gt{constructor(t=1,e=.4,i=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],c=[],l=[],d=[],u=new R,h=new R,f=new R,m=new R,_=new R,g=new R,p=new R;for(let b=0;b<=i;++b){let y=b/i*o*Math.PI*2;v(y,o,s,t,f),v(y+.01,o,s,t,m),g.subVectors(m,f),p.addVectors(m,f),_.crossVectors(g,p),p.crossVectors(_,g),_.normalize(),p.normalize();for(let C=0;C<=r;++C){let S=C/r*Math.PI*2,M=-e*Math.cos(S),A=e*Math.sin(S);u.x=f.x+(M*p.x+A*_.x),u.y=f.y+(M*p.y+A*_.y),u.z=f.z+(M*p.z+A*_.z),c.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),l.push(h.x,h.y,h.z),d.push(b/i),d.push(C/r)}}for(let b=1;b<=i;b++)for(let y=1;y<=r;y++){let C=(r+1)*(b-1)+(y-1),S=(r+1)*b+(y-1),M=(r+1)*b+y,A=(r+1)*(b-1)+y;a.push(C,S,A),a.push(S,M,A)}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(d,2));function v(b,y,C,S,M){let A=Math.cos(b),T=Math.sin(b),x=C/y*b,I=Math.cos(x);M.x=S*(2+I)*.5*A,M.y=S*(2+I)*T*.5,M.z=S*Math.sin(x)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}},My=class n extends gt{constructor(t=new Gm(new R(-1,-1,0),new R(-1,1,0),new R(1,1,0)),e=64,i=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:o};let s=t.computeFrenetFrames(e,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new R,c=new R,l=new z,d=new R,u=[],h=[],f=[],m=[];_(),this.setIndex(m),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2));function _(){for(let b=0;b<e;b++)g(b);g(o===!1?e:0),v(),p()}function g(b){d=t.getPointAt(b/e,d);let y=s.normals[b],C=s.binormals[b];for(let S=0;S<=r;S++){let M=S/r*Math.PI*2,A=Math.sin(M),T=-Math.cos(M);c.x=T*y.x+A*C.x,c.y=T*y.y+A*C.y,c.z=T*y.z+A*C.z,c.normalize(),h.push(c.x,c.y,c.z),a.x=d.x+i*c.x,a.y=d.y+i*c.y,a.z=d.z+i*c.z,u.push(a.x,a.y,a.z)}}function p(){for(let b=1;b<=e;b++)for(let y=1;y<=r;y++){let C=(r+1)*(b-1)+(y-1),S=(r+1)*b+(y-1),M=(r+1)*b+y,A=(r+1)*(b-1)+y;m.push(C,S,A),m.push(S,M,A)}}function v(){for(let b=0;b<=e;b++)for(let y=0;y<=r;y++)l.x=b/e,l.y=y/r,f.push(l.x,l.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new n(new uy[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}},Sy=class extends gt{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){let e=[],i=new Set,r=new R,o=new R;if(t.index!==null){let s=t.attributes.position,a=t.index,c=t.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,d=c.length;l<d;++l){let u=c[l],h=u.start,f=u.count;for(let m=h,_=h+f;m<_;m+=3)for(let g=0;g<3;g++){let p=a.getX(m+g),v=a.getX(m+(g+1)%3);r.fromBufferAttribute(s,p),o.fromBufferAttribute(s,v),LL(r,o,i)===!0&&(e.push(r.x,r.y,r.z),e.push(o.x,o.y,o.z))}}}else{let s=t.attributes.position;for(let a=0,c=s.count/3;a<c;a++)for(let l=0;l<3;l++){let d=3*a+l,u=3*a+(l+1)%3;r.fromBufferAttribute(s,d),o.fromBufferAttribute(s,u),LL(r,o,i)===!0&&(e.push(r.x,r.y,r.z),e.push(o.x,o.y,o.z))}}this.setAttribute("position",new qe(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}};function LL(n,t,e){let i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(r)===!0?!1:(e.add(i),e.add(r),!0)}var BL=Object.freeze({__proto__:null,BoxGeometry:Zi,CapsuleGeometry:fy,CircleGeometry:py,ConeGeometry:my,CylinderGeometry:On,DodecahedronGeometry:gy,EdgesGeometry:_y,ExtrudeGeometry:by,IcosahedronGeometry:cf,LatheGeometry:$m,OctahedronGeometry:ua,PlaneGeometry:ca,PolyhedronGeometry:da,RingGeometry:vy,ShapeGeometry:yy,SphereGeometry:fc,TetrahedronGeometry:xy,TorusGeometry:ha,TorusKnotGeometry:wy,TubeGeometry:My,WireframeGeometry:Sy}),Ry=class extends un{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ge(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}},Ty=class extends kt{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Ar=class extends un{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},qr=class extends Ar{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ge(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}},lf=class extends un{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ge(16777215),this.specular=new ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Cy=class extends un{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ge(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},fa=class extends un{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}},Ey=class extends un{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Dy=class extends un{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ge(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}},Ay=class extends on{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}};function Id(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function xB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function wB(n){function t(r,o){return n[r]-n[o]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function aE(n,t,e){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=e[o]*t;for(let c=0;c!==t;++c)r[s++]=n[a+c]}return r}function oD(n,t,e,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),e.push.apply(e,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(e,e.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),e.push(s)),o=n[r++];while(o!==void 0)}function DJ(n,t,e,i,r=30){let o=n.clone();o.name=t;let s=[];for(let c=0;c<o.tracks.length;++c){let l=o.tracks[c],d=l.getValueSize(),u=[],h=[];for(let f=0;f<l.times.length;++f){let m=l.times[f]*r;if(!(m<e||m>=i)){u.push(l.times[f]);for(let _=0;_<d;++_)h.push(l.values[f*d+_])}}u.length!==0&&(l.times=Id(u,l.times.constructor),l.values=Id(h,l.values.constructor),s.push(l))}o.tracks=s;let a=1/0;for(let c=0;c<o.tracks.length;++c)a>o.tracks[c].times[0]&&(a=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*a);return o.resetDuration(),o}function AJ(n,t=0,e=n,i=30){i<=0&&(i=30);let r=e.tracks.length,o=t/i;for(let s=0;s<r;++s){let a=e.tracks[s],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;let l=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===c});if(l===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let m=a.times.length-1,_;if(o<=a.times[0]){let p=d,v=u-d;_=a.values.slice(p,v)}else if(o>=a.times[m]){let p=m*u+d,v=p+u-d;_=a.values.slice(p,v)}else{let p=a.createInterpolant(),v=d,b=u-d;p.evaluate(o),_=p.resultBuffer.slice(v,b)}c==="quaternion"&&new ti().fromArray(_).normalize().conjugate().toArray(_);let g=l.times.length;for(let p=0;p<g;++p){let v=p*f+h;if(c==="quaternion")ti.multiplyQuaternionsFlat(l.values,v,_,0,l.values,v);else{let b=f-h*2;for(let y=0;y<b;++y)l.values[v+y]-=_[y]}}}return n.blendMode=KE,n}var IJ={convertArray:Id,isTypedArray:xB,getKeyframeOrder:wB,sortedArray:aE,flattenJSON:oD,subclip:DJ,makeClipAdditive:AJ},pc=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];e:{t:{let s;i:{n:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<o)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=e[++i],t<r)break t}s=e.length;break i}if(!(t>=o)){let a=e[1];t<a&&(i=2,o=a);for(let c=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=o,o=e[--i-1],t>=o)break t}s=i,i=0;break i}break e}for(;i<s;){let a=i+s>>>1;t<e[a]?s=a:i=a+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Iy=class extends pc{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dd,endingEnd:Dd}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Ad:o=t,a=2*e-i;break;case Em:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Ad:s=t,c=2*i-e;break;case Em:s=1,c=i+r[1]-r[0];break;default:s=t-1,c=e}let l=(i-e)*.5,d=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(c-i),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,l=c-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-e)/(r-e),_=m*m,g=_*m,p=-h*g+2*h*_-h*m,v=(1+h)*g+(-1.5-2*h)*_+(-.5+h)*m+1,b=(-1-f)*g+(1.5+f)*_+.5*m,y=f*g-f*_;for(let C=0;C!==a;++C)o[C]=p*s[d+C]+v*s[l+C]+b*s[c+C]+y*s[u+C];return o}},Zm=class extends pc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,l=c-a,d=(i-e)/(r-e),u=1-d;for(let h=0;h!==a;++h)o[h]=s[l+h]*u+s[c+h]*d;return o}},Py=class extends pc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Po=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Id(e,this.TimeBufferType),this.values=Id(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Id(t.times,Array),values:Id(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Py(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Zm(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Iy(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Vd:e=this.InterpolantFactoryMethodDiscrete;break;case zd:e=this.InterpolantFactoryMethodLinear;break;case X0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vd;case this.InterpolantFactoryMethodLinear:return zd;case this.InterpolantFactoryMethodSmooth:return X0}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),t=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),t=!1;break}s=c}if(r!==void 0&&xB(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===X0,o=t.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=t[a],d=t[a+1];if(l!==d&&(a!==1||l!==t[0]))if(r)c=!0;else{let u=a*i,h=u-i,f=u+i;for(let m=0;m!==i;++m){let _=e[u+m];if(_!==e[h+m]||_!==e[f+m]){c=!0;break}}}if(c){if(a!==s){t[s]=t[a];let u=a*i,h=s*i;for(let f=0;f!==i;++f)e[h+f]=e[u+f]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,c=s*i,l=0;l!==i;++l)e[c+l]=e[a+l];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Po.prototype.TimeBufferType=Float32Array;Po.prototype.ValueBufferType=Float32Array;Po.prototype.DefaultInterpolation=zd;var mc=class extends Po{constructor(t,e,i){super(t,e,i)}};mc.prototype.ValueTypeName="bool";mc.prototype.ValueBufferType=Array;mc.prototype.DefaultInterpolation=Vd;mc.prototype.InterpolantFactoryMethodLinear=void 0;mc.prototype.InterpolantFactoryMethodSmooth=void 0;var Qm=class extends Po{};Qm.prototype.ValueTypeName="color";var pa=class extends Po{};pa.prototype.ValueTypeName="number";var Fy=class extends pc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(i-e)/(r-e),l=t*a;for(let d=l+a;l!==d;l+=4)ti.slerpFlat(o,0,s,l-a,s,l,c);return o}},ma=class extends Po{InterpolantFactoryMethodLinear(t){return new Fy(this.times,this.values,this.getValueSize(),t)}};ma.prototype.ValueTypeName="quaternion";ma.prototype.InterpolantFactoryMethodSmooth=void 0;var gc=class extends Po{constructor(t,e,i){super(t,e,i)}};gc.prototype.ValueTypeName="string";gc.prototype.ValueBufferType=Array;gc.prototype.DefaultInterpolation=Vd;gc.prototype.InterpolantFactoryMethodLinear=void 0;gc.prototype.InterpolantFactoryMethodSmooth=void 0;var ga=class extends Po{};ga.prototype.ValueTypeName="vector";var _c=class{constructor(t="",e=-1,i=[],r=Wy){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=Do(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)e.push(FJ(i[s]).scale(r));let o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)e.push(Po.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let o=e.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);let d=wB(c);c=aE(c,1,d),l=aE(l,1,d),!r&&c[0]===0&&(c.push(o),l.push(l[0])),s.push(new pa(".morphTargetInfluences["+e[a].name+"]",c,l).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=t.length;a<c;a++){let l=t[a],d=l.name.match(o);if(d&&d.length>1){let u=d[1],h=r[u];h||(r[u]=h=[]),h.push(l)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(u,h,f,m,_){if(f.length!==0){let g=[],p=[];oD(f,g,p,m),g.length!==0&&_.push(new u(h,g,p))}},r=[],o=t.name||"default",s=t.fps||30,a=t.blendMode,c=t.length||-1,l=t.hierarchy||[];for(let u=0;u<l.length;u++){let h=l[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let _=0;_<h[m].morphTargets.length;_++)f[h[m].morphTargets[_]]=-1;for(let _ in f){let g=[],p=[];for(let v=0;v!==h[m].morphTargets.length;++v){let b=h[m];g.push(b.time),p.push(b.morphTarget===_?1:0)}r.push(new pa(".morphTargetInfluence["+_+"]",g,p))}c=f.length*s}else{let f=".bones["+e[u].name+"]";i(ga,f+".position",h,"pos",r),i(ma,f+".quaternion",h,"rot",r),i(ga,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function PJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pa;case"vector":case"vector2":case"vector3":case"vector4":return ga;case"color":return Qm;case"quaternion":return ma;case"bool":case"boolean":return mc;case"string":return gc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function FJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=PJ(n.type);if(n.times===void 0){let e=[],i=[];oD(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var sc={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},Km=class{constructor(t,e,i){let r=this,o=!1,s=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(d){a++,o===!1&&r.onStart!==void 0&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,u){return l.push(d,u),this},this.removeHandler=function(d){let u=l.indexOf(d);return u!==-1&&l.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=l.length;u<h;u+=2){let f=l[u],m=l[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return m}return null}}},MB=new Km,ir=(()=>{class n{constructor(e){this.manager=e!==void 0?e:MB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),tc={},cE=class extends Error{constructor(t,e){super(t),this.response=e}},tr=class extends ir{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=sc.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(tc[t]!==void 0){tc[t].push({onLoad:e,onProgress:i,onError:r});return}tc[t]=[],tc[t].push({onLoad:e,onProgress:i,onError:r});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let d=tc[t],u=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0,_=0,g=new ReadableStream({start(p){v();function v(){u.read().then(({done:b,value:y})=>{if(b)p.close();else{_+=y.byteLength;let C=new ProgressEvent("progress",{lengthComputable:m,loaded:_,total:f});for(let S=0,M=d.length;S<M;S++){let A=d[S];A.onProgress&&A.onProgress(C)}p.enqueue(y),v()}},b=>{p.error(b)})}}});return new Response(g)}else throw new cE(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(m=>f.decode(m))}}}).then(l=>{sc.add(t,l);let d=tc[t];delete tc[t];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onLoad&&f.onLoad(l)}}).catch(l=>{let d=tc[t];if(d===void 0)throw this.manager.itemError(t),l;delete tc[t];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}},lE=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=new tr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(a){try{e(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(t)}},i,r)}parse(t){let e=[];for(let i=0;i<t.length;i++){let r=_c.parse(t[i]);e.push(r)}return e}},dE=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=[],a=new af,c=new tr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let l=0;function d(u){c.load(t[u],function(h){let f=o.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(a.minFilter=_n),a.image=s,a.format=f.format,a.needsUpdate=!0,e&&e(a))},i,r)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)d(u);else c.load(t,function(u){let h=o.parse(u,!0);if(h.isCubemap){let f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){s[m]={mipmaps:[]};for(let _=0;_<h.mipmapCount;_++)s[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+_]),s[m].format=h.format,s[m].width=h.width,s[m].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=_n),a.format=h.format,a.needsUpdate=!0,e&&e(a)},i,r);return a}},Qd=class extends ir{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=sc.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;let a=km("img");function c(){d(),sc.add(t,this),e&&e(this),o.manager.itemEnd(t)}function l(u){d(),r&&r(u),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}},uE=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=new Hd;o.colorSpace=kn;let s=new Qd(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function c(l){s.load(t[l],function(d){o.images[l]=d,a++,a===6&&(o.needsUpdate=!0,e&&e(o))},void 0,r)}for(let l=0;l<t.length;++l)c(l);return o}},hE=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=new $r,a=new tr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(t,function(c){let l;try{l=o.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:oo,s.wrapT=l.wrapT!==void 0?l.wrapT:oo,s.magFilter=l.magFilter!==void 0?l.magFilter:_n,s.minFilter=l.minFilter!==void 0?l.minFilter:_n,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(s.colorSpace=l.colorSpace),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=Eo),l.mipmapCount===1&&(s.minFilter=_n),l.generateMipmaps!==void 0&&(s.generateMipmaps=l.generateMipmaps),s.needsUpdate=!0,e&&e(s,l)},i,r),s}},Jm=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=new yn,s=new Qd(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},_a=class extends Rt{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ge(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}},df=class extends _a{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ge(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},tC=new Be,UL=new R,VL=new R,eg=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z(512,512),this.map=null,this.mapPass=null,this.matrix=new Be,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gd,this._frameExtents=new z(1,1),this._viewportCount=1,this._viewports=[new yi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;UL.setFromMatrixPosition(t.matrixWorld),e.position.copy(UL),VL.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(VL),e.updateMatrixWorld(),tC.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(tC)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},fE=class extends eg{constructor(){super(new en(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,i=Zh*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||r!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},uf=class extends _a{constructor(t,e,i=0,r=Math.PI/3,o=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new fE}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},zL=new Be,bm=new R,iC=new R,pE=class extends eg{constructor(){super(new en(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z(4,2),this._viewportCount=6,this._viewports=[new yi(2,1,1,1),new yi(0,1,1,1),new yi(3,1,1,1),new yi(1,1,1,1),new yi(3,0,1,1),new yi(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),bm.setFromMatrixPosition(t.matrixWorld),i.position.copy(bm),iC.copy(i.position),iC.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(iC),i.updateMatrixWorld(),r.makeTranslation(-bm.x,-bm.y,-bm.z),zL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zL)}},pl=class extends _a{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new pE}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},mE=class extends eg{constructor(){super(new Ao(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ml=class extends _a{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.shadow=new mE}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},hf=class extends _a{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}},ky=class extends _a{constructor(t,e,i=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){let e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}},jy=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new R)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){let i=t.x,r=t.y,o=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*r),e.addScaledVector(s[2],.488603*o),e.addScaledVector(s[3],.488603*i),e.addScaledVector(s[4],1.092548*(i*r)),e.addScaledVector(s[5],1.092548*(r*o)),e.addScaledVector(s[6],.315392*(3*o*o-1)),e.addScaledVector(s[7],1.092548*(i*o)),e.addScaledVector(s[8],.546274*(i*i-r*r)),e}getIrradianceAt(t,e){let i=t.x,r=t.y,o=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],2*.511664*r),e.addScaledVector(s[2],2*.511664*o),e.addScaledVector(s[3],2*.511664*i),e.addScaledVector(s[4],2*.429043*i*r),e.addScaledVector(s[5],2*.429043*r*o),e.addScaledVector(s[6],.743125*o*o-.247708),e.addScaledVector(s[7],2*.429043*i*o),e.addScaledVector(s[8],.429043*(i*i-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,e+r*3);return this}toArray(t=[],e=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,e+r*3);return t}static getBasisAt(t,e){let i=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*i*o,e[8]=.546274*(i*i-r*r)}},Oy=class extends _a{constructor(t=new jy,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){let e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}},Ny=class n extends ir{constructor(t){super(t),this.textures={}}load(t,e,i,r){let o=this,s=new tr(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(a){try{e(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(t)}},i,r)}parse(t){let e=this.textures;function i(o){return e[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),e[o]}let r=n.createMaterialFromType(t.type);if(t.uuid!==void 0&&(r.uuid=t.uuid),t.name!==void 0&&(r.name=t.name),t.color!==void 0&&r.color!==void 0&&r.color.setHex(t.color),t.roughness!==void 0&&(r.roughness=t.roughness),t.metalness!==void 0&&(r.metalness=t.metalness),t.sheen!==void 0&&(r.sheen=t.sheen),t.sheenColor!==void 0&&(r.sheenColor=new ge().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(r.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(t.emissive),t.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(t.specular),t.specularIntensity!==void 0&&(r.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(r.shininess=t.shininess),t.clearcoat!==void 0&&(r.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(r.dispersion=t.dispersion),t.iridescence!==void 0&&(r.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(r.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(r.transmission=t.transmission),t.thickness!==void 0&&(r.thickness=t.thickness),t.attenuationDistance!==void 0&&(r.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(r.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(r.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(r.fog=t.fog),t.flatShading!==void 0&&(r.flatShading=t.flatShading),t.blending!==void 0&&(r.blending=t.blending),t.combine!==void 0&&(r.combine=t.combine),t.side!==void 0&&(r.side=t.side),t.shadowSide!==void 0&&(r.shadowSide=t.shadowSide),t.opacity!==void 0&&(r.opacity=t.opacity),t.transparent!==void 0&&(r.transparent=t.transparent),t.alphaTest!==void 0&&(r.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(r.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(r.depthFunc=t.depthFunc),t.depthTest!==void 0&&(r.depthTest=t.depthTest),t.depthWrite!==void 0&&(r.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(r.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(r.blendSrc=t.blendSrc),t.blendDst!==void 0&&(r.blendDst=t.blendDst),t.blendEquation!==void 0&&(r.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(r.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(r.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(r.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(r.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(r.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(r.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(r.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(r.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(r.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(r.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(r.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(r.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(r.rotation=t.rotation),t.linewidth!==void 0&&(r.linewidth=t.linewidth),t.dashSize!==void 0&&(r.dashSize=t.dashSize),t.gapSize!==void 0&&(r.gapSize=t.gapSize),t.scale!==void 0&&(r.scale=t.scale),t.polygonOffset!==void 0&&(r.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(r.dithering=t.dithering),t.alphaToCoverage!==void 0&&(r.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(r.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(r.visible=t.visible),t.toneMapped!==void 0&&(r.toneMapped=t.toneMapped),t.userData!==void 0&&(r.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),t.uniforms!==void 0)for(let o in t.uniforms){let s=t.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=i(s.value);break;case"c":r.uniforms[o].value=new ge().setHex(s.value);break;case"v2":r.uniforms[o].value=new z().fromArray(s.value);break;case"v3":r.uniforms[o].value=new R().fromArray(s.value);break;case"v4":r.uniforms[o].value=new yi().fromArray(s.value);break;case"m3":r.uniforms[o].value=new Kt().fromArray(s.value);break;case"m4":r.uniforms[o].value=new Be().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(t.defines!==void 0&&(r.defines=t.defines),t.vertexShader!==void 0&&(r.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(r.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(r.glslVersion=t.glslVersion),t.extensions!==void 0)for(let o in t.extensions)r.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(r.lights=t.lights),t.clipping!==void 0&&(r.clipping=t.clipping),t.size!==void 0&&(r.size=t.size),t.sizeAttenuation!==void 0&&(r.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(r.map=i(t.map)),t.matcap!==void 0&&(r.matcap=i(t.matcap)),t.alphaMap!==void 0&&(r.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(r.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(r.bumpScale=t.bumpScale),t.normalMap!==void 0&&(r.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(r.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new z().fromArray(o)}return t.displacementMap!==void 0&&(r.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(r.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(r.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(r.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(r.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(r.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(r.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(r.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(r.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(r.envMap=i(t.envMap)),t.envMapRotation!==void 0&&r.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(r.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(r.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(r.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(r.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(r.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(r.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(r.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(r.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(r.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new z().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(r.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(r.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(r.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(r.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(r.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){let e={ShadowMaterial:Ry,SpriteMaterial:Um,RawShaderMaterial:Ty,ShaderMaterial:kt,PointsMaterial:qd,MeshPhysicalMaterial:qr,MeshStandardMaterial:Ar,MeshPhongMaterial:lf,MeshToonMaterial:Cy,MeshNormalMaterial:fa,MeshLambertMaterial:Ey,MeshDepthMaterial:Wd,MeshDistanceMaterial:Bm,MeshBasicMaterial:tn,MeshMatcapMaterial:Dy,LineDashedMaterial:Ay,LineBasicMaterial:on,Material:un};return new e[t]}},Ds=class{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}},Ly=class extends gt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},By=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=new tr(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(a){try{e(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(t)}},i,r)}parse(t){let e={},i={};function r(f,m){if(e[m]!==void 0)return e[m];let g=f.interleavedBuffers[m],p=o(f,g.buffer),v=Wh(g.type,p),b=new hc(v,g.stride);return b.uuid=g.uuid,e[m]=b,b}function o(f,m){if(i[m]!==void 0)return i[m];let g=f.arrayBuffers[m],p=new Uint32Array(g).buffer;return i[m]=p,p}let s=t.isInstancedBufferGeometry?new Ly:new gt,a=t.data.index;if(a!==void 0){let f=Wh(a.type,a.array);s.setIndex(new fi(f,1))}let c=t.data.attributes;for(let f in c){let m=c[f],_;if(m.isInterleavedBufferAttribute){let g=r(t.data,m.data);_=new la(g,m.itemSize,m.offset,m.normalized)}else{let g=Wh(m.type,m.array),p=m.isInstancedBufferAttribute?Cs:fi;_=new p(g,m.itemSize,m.normalized)}m.name!==void 0&&(_.name=m.name),m.usage!==void 0&&_.setUsage(m.usage),s.setAttribute(f,_)}let l=t.data.morphAttributes;if(l)for(let f in l){let m=l[f],_=[];for(let g=0,p=m.length;g<p;g++){let v=m[g],b;if(v.isInterleavedBufferAttribute){let y=r(t.data,v.data);b=new la(y,v.itemSize,v.offset,v.normalized)}else{let y=Wh(v.type,v.array);b=new fi(y,v.itemSize,v.normalized)}v.name!==void 0&&(b.name=v.name),_.push(b)}s.morphAttributes[f]=_}t.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=t.data.groups||t.data.drawcalls||t.data.offsets;if(u!==void 0)for(let f=0,m=u.length;f!==m;++f){let _=u[f];s.addGroup(_.start,_.count,_.materialIndex)}let h=t.data.boundingSphere;if(h!==void 0){let f=new R;h.center!==void 0&&f.fromArray(h.center),s.boundingSphere=new En(f,h.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}},gE=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=this.path===""?Ds.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;let a=new tr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(c){let l=null;try{l=JSON.parse(c)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+t+".",u.message);return}let d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(l,e)},i,r)}loadAsync(t,e){return _i(this,null,function*(){let i=this,r=this.path===""?Ds.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;let o=new tr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);let s=yield o.loadAsync(t,e),a=JSON.parse(s),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return yield i.parseAsync(a)})}parse(t,e){let i=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,r),s=this.parseImages(t.images,function(){e!==void 0&&e(l)}),a=this.parseTextures(t.textures,s),c=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,o,c,a,i),d=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,d),e!==void 0){let u=!1;for(let h in s)if(s[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&e(l)}return l}parseAsync(t){return _i(this,null,function*(){let e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=yield this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,s),c=this.parseObject(t.object,r,a,s,e),l=this.parseSkeletons(t.skeletons,c);return this.bindSkeletons(c,l),c})}parseShapes(t){let e={};if(t!==void 0)for(let i=0,r=t.length;i<r;i++){let o=new cc().fromJSON(t[i]);e[o.uuid]=o}return e}parseSkeletons(t,e){let i={},r={};if(e.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),t!==void 0)for(let o=0,s=t.length;o<s;o++){let a=new rf().fromJSON(t[o],r);i[a.uuid]=a}return i}parseGeometries(t,e){let i={};if(t!==void 0){let r=new By;for(let o=0,s=t.length;o<s;o++){let a,c=t[o];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(c);break;default:c.type in BL?a=BL[c.type].fromJSON(c,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),i[c.uuid]=a}}return i}parseMaterials(t,e){let i={},r={};if(t!==void 0){let o=new Ny;o.setTextures(e);for(let s=0,a=t.length;s<a;s++){let c=t[s];i[c.uuid]===void 0&&(i[c.uuid]=o.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(t){let e={};if(t!==void 0)for(let i=0;i<t.length;i++){let r=t[i],o=_c.parse(r);e[o.uuid]=o}return e}parseImages(t,e){let i=this,r={},o;function s(c){return i.manager.itemStart(c),o.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){let l=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:i.resourcePath+l;return s(d)}else return c.data?{data:Wh(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&&t.length>0){let c=new Km(e);o=new Qd(c),o.setCrossOrigin(this.crossOrigin);for(let l=0,d=t.length;l<d;l++){let u=t[l],h=u.url;if(Array.isArray(h)){let f=[];for(let m=0,_=h.length;m<_;m++){let g=h[m],p=a(g);p!==null&&(p instanceof HTMLImageElement?f.push(p):f.push(new $r(p.data,p.width,p.height)))}r[u.uuid]=new rc(f)}else{let f=a(u.url);r[u.uuid]=new rc(f)}}}return r}parseImagesAsync(t){return _i(this,null,function*(){let e=this,i={},r;function o(s){return _i(this,null,function*(){if(typeof s=="string"){let a=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:e.resourcePath+a;return yield r.loadAsync(c)}else return s.data?{data:Wh(s.type,s.data),width:s.width,height:s.height}:null})}if(t!==void 0&&t.length>0){r=new Qd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=t.length;s<a;s++){let c=t[s],l=c.url;if(Array.isArray(l)){let d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u],m=yield o(f);m!==null&&(m instanceof HTMLImageElement?d.push(m):d.push(new $r(m.data,m.width,m.height)))}i[c.uuid]=new rc(d)}else{let d=yield o(c.url);i[c.uuid]=new rc(d)}}}return i})}parseTextures(t,e){function i(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(t!==void 0)for(let o=0,s=t.length;o<s;o++){let a=t[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),e[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let c=e[a.image],l=c.data,d;Array.isArray(l)?(d=new Hd,l.length===6&&(d.needsUpdate=!0)):(l&&l.data?d=new $r:d=new yn,l&&(d.needsUpdate=!0)),d.source=c,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,kJ)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],HL),d.wrapT=i(a.wrap[1],HL)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,GL)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,GL)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(t,e,i,r,o){let s;function a(h){return e[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),e[h]}function c(h){if(h!==void 0){if(Array.isArray(h)){let f=[];for(let m=0,_=h.length;m<_;m++){let g=h[m];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(i[g])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function l(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(t.type){case"Scene":s=new tf,t.background!==void 0&&(Number.isInteger(t.background)?s.background=new ge(t.background):s.background=l(t.background)),t.environment!==void 0&&(s.environment=l(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?s.fog=new ef(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(s.fog=new ty(t.fog.color,t.fog.density)),t.fog.name!==""&&(s.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(s.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(s.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&s.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":s=new en(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(s.focus=t.focus),t.zoom!==void 0&&(s.zoom=t.zoom),t.filmGauge!==void 0&&(s.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(s.filmOffset=t.filmOffset),t.view!==void 0&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new Ao(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(s.zoom=t.zoom),t.view!==void 0&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new hf(t.color,t.intensity);break;case"DirectionalLight":s=new ml(t.color,t.intensity);break;case"PointLight":s=new pl(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new ky(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new uf(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new df(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=new Oy().fromJSON(t);break;case"SkinnedMesh":d=a(t.geometry),u=c(t.material),s=new nf(d,u),t.bindMode!==void 0&&(s.bindMode=t.bindMode),t.bindMatrix!==void 0&&s.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(s.skeleton=t.skeleton);break;case"Mesh":d=a(t.geometry),u=c(t.material),s=new Ve(d,u);break;case"InstancedMesh":d=a(t.geometry),u=c(t.material);let h=t.count,f=t.instanceMatrix,m=t.instanceColor;s=new fl(d,u,h),s.instanceMatrix=new Cs(new Float32Array(f.array),16),m!==void 0&&(s.instanceColor=new Cs(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":d=a(t.geometry),u=c(t.material),s=new ry(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,u),s.geometry=d,s.perObjectFrustumCulled=t.perObjectFrustumCulled,s.sortObjects=t.sortObjects,s._drawRanges=t.drawRanges,s._reservedRanges=t.reservedRanges,s._visibility=t.visibility,s._active=t.active,s._bounds=t.bounds.map(_=>{let g=new vn;g.min.fromArray(_.boxMin),g.max.fromArray(_.boxMax);let p=new En;return p.radius=_.sphereRadius,p.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:g,sphereInitialized:_.sphereInitialized,sphere:p}}),s._maxGeometryCount=t.maxGeometryCount,s._maxVertexCount=t.maxVertexCount,s._maxIndexCount=t.maxIndexCount,s._geometryInitialized=t.geometryInitialized,s._geometryCount=t.geometryCount,s._matricesTexture=l(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(s._colorsTexture=l(t.colorsTexture.uuid));break;case"LOD":s=new ny;break;case"Line":s=new Qi(a(t.geometry),c(t.material));break;case"LineLoop":s=new of(a(t.geometry),c(t.material));break;case"LineSegments":s=new Dr(a(t.geometry),c(t.material));break;case"PointCloud":case"Points":s=new sf(a(t.geometry),c(t.material));break;case"Sprite":s=new iy(c(t.material));break;case"Group":s=new Er;break;case"Bone":s=new $d;break;default:s=new Rt}if(s.uuid=t.uuid,t.name!==void 0&&(s.name=t.name),t.matrix!==void 0?(s.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(t.position!==void 0&&s.position.fromArray(t.position),t.rotation!==void 0&&s.rotation.fromArray(t.rotation),t.quaternion!==void 0&&s.quaternion.fromArray(t.quaternion),t.scale!==void 0&&s.scale.fromArray(t.scale)),t.up!==void 0&&s.up.fromArray(t.up),t.castShadow!==void 0&&(s.castShadow=t.castShadow),t.receiveShadow!==void 0&&(s.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(s.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(s.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(s.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(s.visible=t.visible),t.frustumCulled!==void 0&&(s.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(s.renderOrder=t.renderOrder),t.userData!==void 0&&(s.userData=t.userData),t.layers!==void 0&&(s.layers.mask=t.layers),t.children!==void 0){let h=t.children;for(let f=0;f<h.length;f++)s.add(this.parseObject(h[f],e,i,r,o))}if(t.animations!==void 0){let h=t.animations;for(let f=0;f<h.length;f++){let m=h[f];s.animations.push(o[m])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(s.autoUpdate=t.autoUpdate);let h=t.levels;for(let f=0;f<h.length;f++){let m=h[f],_=s.getObjectByProperty("uuid",m.object);_!==void 0&&s.addLevel(_,m.distance,m.hysteresis)}}return s}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){let r=e[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}},kJ={UVMapping:Y0,CubeReflectionMapping:lc,CubeRefractionMapping:ul,EquirectangularReflectionMapping:Tm,EquirectangularRefractionMapping:Cm,CubeUVReflectionMapping:mf},HL={RepeatWrapping:Ko,ClampToEdgeWrapping:oo,MirroredRepeatWrapping:Ld},GL={NearestFilter:hi,NearestMipmapNearestFilter:sg,NearestMipmapLinearFilter:dl,LinearFilter:_n,LinearMipmapNearestFilter:Pd,LinearMipmapLinearFilter:Eo},tg=class extends ir{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=sc.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(l=>{e&&e(l),o.manager.itemEnd(t)}).catch(l=>{r&&r(l)});return}return setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(t,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){return sc.add(t,l),e&&e(l),o.manager.itemEnd(t),l}).catch(function(l){r&&r(l),sc.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});sc.add(t,c),o.manager.itemStart(t)}},O0,ig=class{static getContext(){return O0===void 0&&(O0=new(window.AudioContext||window.webkitAudioContext)),O0}static setContext(t){O0=t}},_E=class extends ir{constructor(t){super(t)}load(t,e,i,r){let o=this,s=new tr(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(c){try{let l=c.slice(0);ig.getContext().decodeAudioData(l,function(u){e(u)}).catch(a)}catch(l){a(l)}},i,r);function a(c){r?r(c):console.error(c),o.manager.itemError(t)}}},WL=new Be,$L=new Be,xd=new Be,bE=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new en,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new en,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){let e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,xd.copy(t.projectionMatrix);let r=e.eyeSep/2,o=r*e.near/e.focus,s=e.near*Math.tan(kd*e.fov*.5)/e.zoom,a,c;$L.elements[12]=-r,WL.elements[12]=r,a=-s*e.aspect+o,c=s*e.aspect+o,xd.elements[0]=2*e.near/(c-a),xd.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(xd),a=-s*e.aspect-o,c=s*e.aspect-o,xd.elements[0]=2*e.near/(c-a),xd.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(xd)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply($L),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(WL)}},co=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=qL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=qL();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function qL(){return(typeof performance>"u"?Date:performance).now()}var wd=new R,XL=new ti,jJ=new R,Md=new R,vE=class extends Rt{constructor(){super(),this.type="AudioListener",this.context=ig.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new co}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);let e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wd,XL,jJ),Md.set(0,0,-1).applyQuaternion(XL),e.positionX){let r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(wd.x,r),e.positionY.linearRampToValueAtTime(wd.y,r),e.positionZ.linearRampToValueAtTime(wd.z,r),e.forwardX.linearRampToValueAtTime(Md.x,r),e.forwardY.linearRampToValueAtTime(Md.y,r),e.forwardZ.linearRampToValueAtTime(Md.z,r),e.upX.linearRampToValueAtTime(i.x,r),e.upY.linearRampToValueAtTime(i.y,r),e.upZ.linearRampToValueAtTime(i.z,r)}else e.setPosition(wd.x,wd.y,wd.z),e.setOrientation(Md.x,Md.y,Md.z,i.x,i.y,i.z)}},Uy=class extends Rt{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;let e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},Sd=new R,YL=new ti,OJ=new R,Rd=new R,yE=class extends Uy{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Sd,YL,OJ),Rd.set(0,0,1).applyQuaternion(YL);let e=this.panner;if(e.positionX){let i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Sd.x,i),e.positionY.linearRampToValueAtTime(Sd.y,i),e.positionZ.linearRampToValueAtTime(Sd.z,i),e.orientationX.linearRampToValueAtTime(Rd.x,i),e.orientationY.linearRampToValueAtTime(Rd.y,i),e.orientationZ.linearRampToValueAtTime(Rd.z,i)}else e.setPosition(Sd.x,Sd.y,Sd.z),e.setOrientation(Rd.x,Rd.y,Rd.z)}},xE=class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0,e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}},Vy=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,o,s;switch(e){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,r=this.valueSize,o=t*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=e}else{s+=e;let a=e/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,r=t*e+e,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let c=e*this._origIndex;this._mixBufferRegion(i,r,c,1-o,e)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let c=e,l=e+e;c!==l;++c)if(i[c]!==i[c+e]){a.setValue(i,r);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let o=i,s=r;o!==s;++o)e[o]=e[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)t[e+s]=t[i+s]}_slerp(t,e,i,r){ti.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,o){let s=this._workIndex*o;ti.multiplyQuaternionsFlat(t,s,t,e,t,i),ti.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let c=e+a;t[c]=t[c]*s+t[i+a]*r}}_lerpAdditive(t,e,i,r,o){for(let s=0;s!==o;++s){let a=e+s;t[a]=t[a]+t[i+s]*r}}},sD="\\[\\]\\.:\\/",NJ=new RegExp("["+sD+"]","g"),aD="[^"+sD+"]",LJ="[^"+sD.replace("\\.","")+"]",BJ=/((?:WC+[\/:])*)/.source.replace("WC",aD),UJ=/(WCOD+)?/.source.replace("WCOD",LJ),VJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aD),zJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aD),HJ=new RegExp("^"+BJ+UJ+VJ+zJ+"$"),GJ=["material","materials","bones","map"],wE=class{constructor(t,e,i){let r=i||Wi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Wi=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(NJ,"")}static parseTrackName(e){let i=HJ.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);GJ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}let a=e[o];if(a===void 0){let d=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=wE,n})();Wi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wi.prototype.GetterByBindingType=[Wi.prototype._getValue_direct,Wi.prototype._getValue_array,Wi.prototype._getValue_arrayElement,Wi.prototype._getValue_toArray];Wi.prototype.SetterByBindingTypeAndVersioning=[[Wi.prototype._setValue_direct,Wi.prototype._setValue_direct_setNeedsUpdate,Wi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_array,Wi.prototype._setValue_array_setNeedsUpdate,Wi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_arrayElement,Wi.prototype._setValue_arrayElement_setNeedsUpdate,Wi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_fromArray,Wi.prototype._setValue_fromArray_setNeedsUpdate,Wi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var ME=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Do(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let t={};this._indicesByUUID=t;for(let i=0,r=arguments.length;i!==r;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){let t=this._objects,e=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length,a,c=t.length,l=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){let h=arguments[d],f=h.uuid,m=e[f];if(m===void 0){m=c++,e[f]=m,t.push(h);for(let _=0,g=s;_!==g;++_)o[_].push(new Wi(h,i[_],r[_]))}else if(m<l){a=t[m];let _=--l,g=t[_];e[g.uuid]=m,t[m]=g,e[f]=_,t[_]=h;for(let p=0,v=s;p!==v;++p){let b=o[p],y=b[_],C=b[m];b[m]=y,C===void 0&&(C=new Wi(h,i[p],r[p])),b[_]=C}}else t[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){let c=arguments[s],l=c.uuid,d=e[l];if(d!==void 0&&d>=o){let u=o++,h=t[u];e[h.uuid]=d,t[d]=h,e[l]=u,t[u]=c;for(let f=0,m=r;f!==m;++f){let _=i[f],g=_[u],p=_[d];_[d]=g,_[u]=p}}}this.nCachedObjects_=o}uncache(){let t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_,s=t.length;for(let a=0,c=arguments.length;a!==c;++a){let l=arguments[a],d=l.uuid,u=e[d];if(u!==void 0)if(delete e[d],u<o){let h=--o,f=t[h],m=--s,_=t[m];e[f.uuid]=u,t[u]=f,e[_.uuid]=h,t[h]=_,t.pop();for(let g=0,p=r;g!==p;++g){let v=i[g],b=v[h],y=v[m];v[u]=b,v[h]=y,v.pop()}}else{let h=--s,f=t[h];h>0&&(e[f.uuid]=u),t[u]=f,t.pop();for(let m=0,_=r;m!==_;++m){let g=i[m];g[u]=g[h],g.pop()}}}this.nCachedObjects_=o}subscribe_(t,e){let i=this._bindingsIndicesByPath,r=i[t],o=this._bindings;if(r!==void 0)return o[r];let s=this._paths,a=this._parsedPaths,c=this._objects,l=c.length,d=this.nCachedObjects_,u=new Array(l);r=o.length,i[t]=r,s.push(t),a.push(e),o.push(u);for(let h=d,f=c.length;h!==f;++h){let m=c[h];u[h]=new Wi(m,t,e)}return u}unsubscribe_(t){let e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){let r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,c=s[a],l=t[a];e[l]=i,s[i]=c,s.pop(),o[i]=o[a],o.pop(),r[i]=r[a],r.pop()}}},zy=class{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;let o=e.tracks,s=o.length,a=new Array(s),c={endingStart:Dd,endingEnd:Dd};for(let l=0;l!==s;++l){let d=o[l].createInterpolant(null);a[l]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Y2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){let r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let c=a.parameterPositions,l=a.sampleValues;return c[0]=o,c[1]=o+i,l[0]=t/s,l[1]=e/s,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}let o=this._startTime;if(o!==null){let c=(t-o)*i;c<0||i===0?e=0:(this._startTime=null,e=i*c)}e*=this._updateTimeScale(t);let s=this._updateTime(e),a=this._updateWeight(t);if(a>0){let c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case KE:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulateAdditive(a);break;case Wy:default:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,r=this.time+t,o=this._loopCount,s=i===Z2;if(t===0)return o===-1?r:s&&(o&1)===1?e-r:r;if(i===Gy){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=e||r<0){let a=Math.floor(r/e);r-=e*a,o+=Math.abs(a);let c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){let l=t<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return e-r}return r}_setEndings(t,e,i){let r=this._interpolantSettings;i?(r.endingStart=Ad,r.endingEnd=Ad):(t?r.endingStart=this.zeroSlopeAtStart?Ad:Dd:r.endingStart=Em,e?r.endingEnd=this.zeroSlopeAtEnd?Ad:Dd:r.endingEnd=Em)}_scheduleFading(t,e,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,c=s.sampleValues;return a[0]=o,c[0]=e,a[1]=o+t,c[1]=i,this}},WJ=new Float32Array(1),ng=class extends jn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,c=i.uuid,l=this._bindingsByRootAndName,d=l[c];d===void 0&&(d={},l[c]=d);for(let u=0;u!==o;++u){let h=r[u],f=h.name,m=d[f];if(m!==void 0)++m.referenceCount,s[u]=m;else{if(m=s[u],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,c,f));continue}let _=e&&e._propertyBindings[u].binding.parsedPath;m=new Vy(Wi.create(i,f,_),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,c,f),s[u]=m}a[u].resultBuffer=m.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,r=t._clip.uuid,o=this._actionsByClip[r];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,r,i)}let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){let r=this._actions,o=this._actionsByClip,s=o[e];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=s;else{let a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;let o=t._clip.uuid,s=this._actionsByClip,a=s[o],c=a.knownActions,l=c[c.length-1],d=t._byClipCacheIndex;l._byClipCacheIndex=d,c[d]=l,c.pop(),t._byClipCacheIndex=null;let u=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete u[h],c.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[e];s===void 0&&(s={},r[e]=s),s[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],c=e[e.length-1],l=t._cacheIndex;c._cacheIndex=l,e[l]=c,e.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&&(i=new Zm(new Float32Array(2),new Float32Array(2),1,WJ),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){let r=e||this._root,o=r.uuid,s=typeof t=="string"?_c.findByName(r,t):t,a=s!==null?s.uuid:t,c=this._actionsByClip[a],l=null;if(i===void 0&&(s!==null?i=s.blendMode:i=Wy),c!==void 0){let u=c.actionByRoot[o];if(u!==void 0&&u.blendMode===i)return u;l=c.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let d=new zy(this,s,e,i);return this._bindAction(d,l),this._addInactiveAction(d,a,o),d}existingAction(t,e){let i=e||this._root,r=i.uuid,o=typeof t=="string"?_c.findByName(i,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,r=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==i;++l)e[l]._update(r,t,o,s);let a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,c=s.length;a!==c;++a){let l=s[a];this._deactivateAction(l);let d=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=d,e[d]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,c=a[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}let r=this._bindingsByRootAndName,o=r[e];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},SE=class n{constructor(t){this.value=t}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},$J=0,RE=class extends jn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$J++}),this.name="",this.usage=Pm,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){let e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;let e=t.uniforms;this.uniforms.length=0;for(let i=0,r=e.length;i<r;i++){let o=Array.isArray(e[i])?e[i]:[e[i]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}},TE=class extends hc{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){let e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){let e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}},CE=class{constructor(t,e,i,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}},ZL=new Be,Xr=class{constructor(t,e,i=0,r=1/0){this.ray=new aa(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Kh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return ZL.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ZL),this}intersectObject(t,e=!0,i=[]){return EE(t,this,i,e),i.sort(QL),i}intersectObjects(t,e=!0,i=[]){for(let r=0,o=t.length;r<o;r++)EE(t[r],this,i,e);return i.sort(QL),i}};function QL(n,t){return n.distance-t.distance}function EE(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)EE(o[s],t,e,!0)}}var gl=class{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Cn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},DE=class{constructor(t=1,e=0,i=0){return this.radius=t,this.theta=e,this.y=i,this}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}},KL=new z,AE=class{constructor(t=new z(1/0,1/0),e=new z(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=KL.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,KL).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},JL=new R,N0=new R,IE=class{constructor(t=new R,e=new R){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){JL.subVectors(t,this.start),N0.subVectors(this.end,this.start);let i=N0.dot(N0),o=N0.dot(JL)/i;return e&&(o=Cn(o,0,1)),o}closestPointToPoint(t,e,i){let r=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},e2=new R,PE=class extends Rt{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";let i=new gt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,c=32;s<c;s++,a++){let l=s/c*Math.PI*2,d=a/c*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new qe(r,3));let o=new on({fog:!1,toneMapped:!1});this.cone=new Dr(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),e2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},ll=new R,L0=new Be,nC=new Be,FE=class extends Dr{constructor(t){let e=SB(t),i=new gt,r=[],o=[],s=new ge(0,0,1),a=new ge(0,1,0);for(let l=0;l<e.length;l++){let d=e[l];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new qe(r,3)),i.setAttribute("color",new qe(o,3));let c=new on({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){let e=this.bones,i=this.geometry,r=i.getAttribute("position");nC.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<e.length;o++){let a=e[o];a.parent&&a.parent.isBone&&(L0.multiplyMatrices(nC,a.matrixWorld),ll.setFromMatrixPosition(L0),r.setXYZ(s,ll.x,ll.y,ll.z),L0.multiplyMatrices(nC,a.parent.matrixWorld),ll.setFromMatrixPosition(L0),r.setXYZ(s+1,ll.x,ll.y,ll.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}};function SB(n){let t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push.apply(t,SB(n.children[e]));return t}var kE=class extends Ve{constructor(t,e,i){let r=new fc(e,4,2),o=new tn({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},qJ=new R,t2=new ge,i2=new ge,jE=class extends Rt{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";let r=new ua(e);r.rotateY(Math.PI*.5),this.material=new tn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new fi(s,3)),this.add(new Ve(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let e=t.geometry.getAttribute("color");t2.copy(this.light.color),i2.copy(this.light.groundColor);for(let i=0,r=e.count;i<r;i++){let o=i<r/2?t2:i2;e.setXYZ(i,o.r,o.g,o.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(qJ.setFromMatrixPosition(this.light.matrixWorld).negate())}},Kd=class extends Dr{constructor(t=10,e=10,i=4473924,r=8947848){i=new ge(i),r=new ge(r);let o=e/2,s=t/e,a=t/2,c=[],l=[];for(let h=0,f=0,m=-a;h<=e;h++,m+=s){c.push(-a,0,m,a,0,m),c.push(m,0,-a,m,0,a);let _=h===o?i:r;_.toArray(l,f),f+=3,_.toArray(l,f),f+=3,_.toArray(l,f),f+=3,_.toArray(l,f),f+=3}let d=new gt;d.setAttribute("position",new qe(c,3)),d.setAttribute("color",new qe(l,3));let u=new on({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},OE=class extends Dr{constructor(t=10,e=16,i=8,r=64,o=4473924,s=8947848){o=new ge(o),s=new ge(s);let a=[],c=[];if(e>1)for(let u=0;u<e;u++){let h=u/e*(Math.PI*2),f=Math.sin(h)*t,m=Math.cos(h)*t;a.push(0,0,0),a.push(f,0,m);let _=u&1?o:s;c.push(_.r,_.g,_.b),c.push(_.r,_.g,_.b)}for(let u=0;u<i;u++){let h=u&1?o:s,f=t-t/i*u;for(let m=0;m<r;m++){let _=m/r*(Math.PI*2),g=Math.sin(_)*f,p=Math.cos(_)*f;a.push(g,0,p),c.push(h.r,h.g,h.b),_=(m+1)/r*(Math.PI*2),g=Math.sin(_)*f,p=Math.cos(_)*f,a.push(g,0,p),c.push(h.r,h.g,h.b)}}let l=new gt;l.setAttribute("position",new qe(a,3)),l.setAttribute("color",new qe(c,3));let d=new on({vertexColors:!0,toneMapped:!1});super(l,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},n2=new R,B0=new R,r2=new R,NE=class extends Rt{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let r=new gt;r.setAttribute("position",new qe([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));let o=new on({fog:!1,toneMapped:!1});this.lightPlane=new Qi(r,o),this.add(this.lightPlane),r=new gt,r.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new Qi(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),n2.setFromMatrixPosition(this.light.matrixWorld),B0.setFromMatrixPosition(this.light.target.matrixWorld),r2.subVectors(B0,n2),this.lightPlane.lookAt(B0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(B0),this.targetLine.scale.z=r2.length()}},U0=new R,Tn=new hl,LE=class extends Dr{constructor(t){let e=new gt,i=new on({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,_){c(m),c(_)}function c(m){r.push(0,0,0),o.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(r.length/3-1)}e.setAttribute("position",new qe(r,3)),e.setAttribute("color",new qe(o,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new ge(16755200),d=new ge(16711680),u=new ge(43775),h=new ge(16777215),f=new ge(3355443);this.setColors(l,d,u,h,f)}setColors(t,e,i,r,o){let a=this.geometry.getAttribute("color");a.setXYZ(0,t.r,t.g,t.b),a.setXYZ(1,t.r,t.g,t.b),a.setXYZ(2,t.r,t.g,t.b),a.setXYZ(3,t.r,t.g,t.b),a.setXYZ(4,t.r,t.g,t.b),a.setXYZ(5,t.r,t.g,t.b),a.setXYZ(6,t.r,t.g,t.b),a.setXYZ(7,t.r,t.g,t.b),a.setXYZ(8,t.r,t.g,t.b),a.setXYZ(9,t.r,t.g,t.b),a.setXYZ(10,t.r,t.g,t.b),a.setXYZ(11,t.r,t.g,t.b),a.setXYZ(12,t.r,t.g,t.b),a.setXYZ(13,t.r,t.g,t.b),a.setXYZ(14,t.r,t.g,t.b),a.setXYZ(15,t.r,t.g,t.b),a.setXYZ(16,t.r,t.g,t.b),a.setXYZ(17,t.r,t.g,t.b),a.setXYZ(18,t.r,t.g,t.b),a.setXYZ(19,t.r,t.g,t.b),a.setXYZ(20,t.r,t.g,t.b),a.setXYZ(21,t.r,t.g,t.b),a.setXYZ(22,t.r,t.g,t.b),a.setXYZ(23,t.r,t.g,t.b),a.setXYZ(24,e.r,e.g,e.b),a.setXYZ(25,e.r,e.g,e.b),a.setXYZ(26,e.r,e.g,e.b),a.setXYZ(27,e.r,e.g,e.b),a.setXYZ(28,e.r,e.g,e.b),a.setXYZ(29,e.r,e.g,e.b),a.setXYZ(30,e.r,e.g,e.b),a.setXYZ(31,e.r,e.g,e.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){let t=this.geometry,e=this.pointMap,i=1,r=1;Tn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fn("c",e,t,Tn,0,0,-1),Fn("t",e,t,Tn,0,0,1),Fn("n1",e,t,Tn,-i,-r,-1),Fn("n2",e,t,Tn,i,-r,-1),Fn("n3",e,t,Tn,-i,r,-1),Fn("n4",e,t,Tn,i,r,-1),Fn("f1",e,t,Tn,-i,-r,1),Fn("f2",e,t,Tn,i,-r,1),Fn("f3",e,t,Tn,-i,r,1),Fn("f4",e,t,Tn,i,r,1),Fn("u1",e,t,Tn,i*.7,r*1.1,-1),Fn("u2",e,t,Tn,-i*.7,r*1.1,-1),Fn("u3",e,t,Tn,0,r*2,-1),Fn("cf1",e,t,Tn,-i,0,1),Fn("cf2",e,t,Tn,i,0,1),Fn("cf3",e,t,Tn,0,-r,1),Fn("cf4",e,t,Tn,0,r,1),Fn("cn1",e,t,Tn,-i,0,-1),Fn("cn2",e,t,Tn,i,0,-1),Fn("cn3",e,t,Tn,0,-r,-1),Fn("cn4",e,t,Tn,0,r,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Fn(n,t,e,i,r,o,s){U0.set(r,o,s).unproject(i);let a=t[n];if(a!==void 0){let c=e.getAttribute("position");for(let l=0,d=a.length;l<d;l++)c.setXYZ(a[l],U0.x,U0.y,U0.z)}}var V0=new vn,BE=class extends Dr{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new gt;o.setIndex(new fi(i,1)),o.setAttribute("position",new fi(r,3)),super(o,new on({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&V0.setFromObject(this.object),V0.isEmpty())return;let e=V0.min,i=V0.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=e.x,o[4]=i.y,o[5]=i.z,o[6]=e.x,o[7]=e.y,o[8]=i.z,o[9]=i.x,o[10]=e.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=e.z,o[15]=e.x,o[16]=i.y,o[17]=e.z,o[18]=e.x,o[19]=e.y,o[20]=e.z,o[21]=i.x,o[22]=e.y,o[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},rg=class extends Dr{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new gt;o.setIndex(new fi(i,1)),o.setAttribute("position",new qe(r,3)),super(o,new on({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},UE=class extends Qi{constructor(t,e=1,i=16776960){let r=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new gt;s.setAttribute("position",new qe(o,3)),s.computeBoundingSphere(),super(s,new on({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;let a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new gt;c.setAttribute("position",new qe(a,3)),c.computeBoundingSphere(),this.add(new Ve(c,new tn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},o2=new R,z0,rC,VE=class extends Rt{constructor(t=new R(0,0,1),e=new R(0,0,0),i=1,r=16776960,o=i*.2,s=o*.2){super(),this.type="ArrowHelper",z0===void 0&&(z0=new gt,z0.setAttribute("position",new qe([0,0,0,0,1,0],3)),rC=new On(0,.5,1,5,1),rC.translate(0,-.5,0)),this.position.copy(e),this.line=new Qi(z0,new on({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ve(rC,new tn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,o,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{o2.set(t.z,0,-t.x).normalize();let e=Math.acos(t.y);this.quaternion.setFromAxisAngle(o2,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},zE=class extends Dr{constructor(t=1){let e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new gt;r.setAttribute("position",new qe(e,3)),r.setAttribute("color",new qe(i,3));let o=new on({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(t,e,i){let r=new ge,o=this.geometry.attributes.color.array;return r.set(t),r.toArray(o,0),r.toArray(o,3),r.set(e),r.toArray(o,6),r.toArray(o,9),r.set(i),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},HE=class{constructor(){this.type="ShapePath",this.color=new ge,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Yd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.currentPath.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,o,s){return this.currentPath.bezierCurveTo(t,e,i,r,o,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(p){let v=[];for(let b=0,y=p.length;b<y;b++){let C=p[b],S=new cc;S.curves=C.curves,v.push(S)}return v}function i(p,v){let b=v.length,y=!1;for(let C=b-1,S=0;S<b;C=S++){let M=v[C],A=v[S],T=A.x-M.x,x=A.y-M.y;if(Math.abs(x)>Number.EPSILON){if(x<0&&(M=v[S],T=-T,A=v[C],x=-x),p.y<M.y||p.y>A.y)continue;if(p.y===M.y){if(p.x===M.x)return!0}else{let I=x*(p.x-M.x)-T*(p.y-M.y);if(I===0)return!0;if(I<0)continue;y=!y}}else{if(p.y!==M.y)continue;if(A.x<=p.x&&p.x<=M.x||M.x<=p.x&&p.x<=A.x)return!0}}return y}let r=sa.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,c,l=[];if(o.length===1)return a=o[0],c=new cc,c.curves=a.curves,l.push(c),l;let d=!r(o[0].getPoints());d=t?!d:d;let u=[],h=[],f=[],m=0,_;h[m]=void 0,f[m]=[];for(let p=0,v=o.length;p<v;p++)a=o[p],_=a.getPoints(),s=r(_),s=t?!s:s,s?(!d&&h[m]&&m++,h[m]={s:new cc,p:_},h[m].s.curves=a.curves,d&&m++,f[m]=[]):f[m].push({h:a,p:_[0]});if(!h[0])return e(o);if(h.length>1){let p=!1,v=0;for(let b=0,y=h.length;b<y;b++)u[b]=[];for(let b=0,y=h.length;b<y;b++){let C=f[b];for(let S=0;S<C.length;S++){let M=C[S],A=!0;for(let T=0;T<h.length;T++)i(M.p,h[T].p)&&(b!==T&&v++,A?(A=!1,u[T].push(M)):p=!0);A&&u[b].push(M)}}v>0&&p===!1&&(f=u)}let g;for(let p=0,v=h.length;p<v;p++){c=h[p].s,l.push(c),g=f[p];for(let b=0,y=g.length;b<y;b++)c.holes.push(g[b].h)}return l}},GE=class extends ai{constructor(t=1,e=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(t,e,Gt(pe({},r),{count:i})),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Hy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Hy);function cD(n){return!!(n&&n.set)}function ve(n,t){if(cD(n)){if(t===void 0)return n;if(Array.isArray(t))return n.set(...t),n;if(n.copy&&t)return n.copy(t),n;if(t!==void 0)return n.set(t),n}else return t;return n}function RB(n){return!!(n&&typeof n.dispose=="function")}function yl(n){return n!==void 0&&(n.observed||n.observers?.length>0)}var lD=class{constructor(t){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...e)=>(this.objRef&&this.objRef.add(...e),this.children.push(...e),this),this.remove=(...e)=>{this.objRef&&this.objRef.remove(...e);for(let i of e){let r=this.children.indexOf(i);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=e=>{if(this.memberMap.forEach((i,r)=>{let o=e[r];cD(o)?ve(o,i):e[r]=i}),this.children.forEach(i=>e.add(i)),this.objRef?.parent){let i=this.objRef?.parent;i.remove(this.objRef),i.add(e)}},this.addEventListener=(e,i)=>{let r=this.eventListener[e];r||(r=[],this.eventListener[e]=r),r.push(i),this.objRef&&this.objRef.addEventListener(e,i)},this.removeEventListener=(e,i)=>{let r=this.eventListener[e];if(!r)return;let o=r.indexOf(i);o>=0&&r.splice(o,1)},this.objRef=t}get(t,e,i){switch(e){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{let r=e,o=this.objRef[r];return o!==void 0&&this.memberMap.set(r,o),o}}}set(t,e,i,r){return e==="objRef"?(i&&this.applyToObject3D(i),this.loaded=!0,this.objRef=i):(this.memberMap.set(e,i),this.objRef&&(this.objRef[e]=i)),!0}};function Zy(n=new Rt){let t=new lD(n);return new Proxy(t,t)}function bf(n){return n.__isProxy===!0&&n.objRef===void 0}var Yr=(()=>{class n{set objRef(e){this.applyObjRef(e)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(e){this.removeEvents(),this.eventListeners=e,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new nt),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new Gl(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(e){return Array.isArray(e)?new(this.getType())(...e):new(this.getType())(e)}ngOnChanges(e){if(this.objRef&&!bf(this.objRef)){this.emitPropertyChanges(e);return}this.objRef||(this.objRef=this.createThreeInstance(e.args?.currentValue));for(let i in e)this[i]=e[i].currentValue;this.emitPropertyChanges(e)}disposeObjRef(){RB(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef(),this.emitRemoveEvent()}applyObjRef(e){this._objRef!==e&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!bf(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitRemoveEvent(){this._objRef&&!bf(this._objRef)&&(this._objRef.dispatchEvent?.({type:"removed",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(e){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:e}),this.updateEmitter&&this.updateEmitter.next(e)}removeEvents(){if(this.eventListeners&&this._objRef){for(let e of Object.entries(this.eventListeners))this._objRef.removeEventListener(e[0],e[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(let e of Object.entries(this.eventListeners))this._objRef.addEventListener(e[0],e[1])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[Hn],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var XJ=["*"],TB=(()=>{class n extends Yr{constructor(e){super(),this.parent=e}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(e){(this._objRef!==e||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(e,i){!this.parent.objRef||e===i&&i?.parent?.uuid===this.parent.objRef.uuid||(i&&i.parent&&i.parent.remove(i),e&&(!e.parent||e.parent&&e.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(e))}set lookAt(e){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(e)?this.objRef.lookAt(...e):this.objRef.lookAt(e))})}static{this.\u0275fac=function(i){return new(i||n)(F(n))}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[X],ngContentSelectors:XJ,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var YJ=["*"],me=class n extends TB{getType(){return Rt}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(t){this._objRef&&(this._objRef.children=t)}get children(){return this._objRef?.children}set up(t){this._objRef&&(this._objRef.up=ve(this._objRef.up,t))}get up(){return this._objRef?.up}set position(t){this._objRef&&ve(this._objRef.position,t)}get position(){return this._objRef?.position}set rotation(t){this._objRef&&ve(this._objRef.rotation,t)}get rotation(){return this._objRef?.rotation}set quaternion(t){this._objRef&&ve(this._objRef.quaternion,t)}get quaternion(){return this._objRef?.quaternion}set scale(t){this._objRef&&ve(this._objRef.scale,t)}get scale(){return this._objRef?.scale}set modelViewMatrix(t){this._objRef&&ve(this._objRef.modelViewMatrix,t)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(t){this._objRef&&ve(this._objRef.normalMatrix,t)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(t){this._objRef&&(this._objRef.matrix=ve(this._objRef.matrix,t))}get matrix(){return this._objRef?.matrix}set matrixWorld(t){this._objRef&&(this._objRef.matrixWorld=ve(this._objRef.matrixWorld,t))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(t){this._objRef&&(this._objRef.matrixAutoUpdate=t)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(t){this._objRef&&(this._objRef.matrixWorldAutoUpdate=t)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(t){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=t)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(t){this._objRef&&(this._objRef.layers=ve(this._objRef.layers,t))}get layers(){return this._objRef?.layers}set visible(t){this._objRef&&(this._objRef.visible=t)}get visible(){return this._objRef?.visible}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(t){this._objRef&&(this._objRef.receiveShadow=t)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(t){this._objRef&&(this._objRef.frustumCulled=t)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(t){this._objRef&&(this._objRef.renderOrder=t)}get renderOrder(){return this._objRef?.renderOrder}set animations(t){this._objRef&&(this._objRef.animations=t)}get animations(){return this._objRef?.animations}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set customDepthMaterial(t){this._objRef&&(this._objRef.customDepthMaterial=t)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(t){this._objRef&&(this._objRef.customDistanceMaterial=t)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}static{this.DEFAULT_UP=Rt.DEFAULT_UP}static{this.DEFAULT_MATRIX_AUTO_UPDATE=Rt.DEFAULT_MATRIX_AUTO_UPDATE}static{this.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE}constructor(t){super(t)}static{this.\u0275fac=function(e){return new(e||n)(F(n,4))}}static{this.\u0275cmp=L({type:n,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial"},features:[ie([]),X],ngContentSelectors:YJ,decls:1,vars:0,template:function(e,i){e&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}};var ZJ=["*"],bc=(()=>{class n extends me{getType(){return hl}get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(e){this._objRef&&(this._objRef.layers=ve(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set matrixWorldInverse(e){this._objRef&&(this._objRef.matrixWorldInverse=ve(this._objRef.matrixWorldInverse,e))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(e){this._objRef&&(this._objRef.projectionMatrix=ve(this._objRef.projectionMatrix,e))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(e){this._objRef&&(this._objRef.projectionMatrixInverse=ve(this._objRef.projectionMatrixInverse,e))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}set coordinateSystem(e){this._objRef&&(this._objRef.coordinateSystem=e)}get coordinateSystem(){return this._objRef?.coordinateSystem}set viewport(e){this._objRef&&(this._objRef.viewport=ve(this._objRef.viewport,e))}get viewport(){return this._objRef?.viewport}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse",coordinateSystem:"coordinateSystem",viewport:"viewport"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:ZJ,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var QJ=["*"],Zt=(()=>{class n extends bc{getType(){return en}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(e){this._objRef&&(this._objRef.zoom=e)}get zoom(){return this._objRef?.zoom}set fov(e){this._objRef&&(this._objRef.fov=e)}get fov(){return this._objRef?.fov}set aspect(e){this._objRef&&(this._objRef.aspect=e)}get aspect(){return this._objRef?.aspect}set near(e){this._objRef&&(this._objRef.near=e)}get near(){return this._objRef?.near}set far(e){this._objRef&&(this._objRef.far=e)}get far(){return this._objRef?.far}set focus(e){this._objRef&&(this._objRef.focus=e)}get focus(){return this._objRef?.focus}set view(e){this._objRef&&(this._objRef.view=e)}get view(){return this._objRef?.view}set filmGauge(e){this._objRef&&(this._objRef.filmGauge=e)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(e){this._objRef&&(this._objRef.filmOffset=e)}get filmOffset(){return this._objRef?.filmOffset}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[ie([{provide:me,useExisting:_e(()=>n)},{provide:bc,useExisting:_e(()=>n)}]),X],ngContentSelectors:QJ,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var KJ=["*"],dD=(()=>{class n extends me{getType(){return Qi}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:KJ,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var JJ=["*"],ba=(()=>{class n extends dD{getType(){return Dr}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-lineSegments"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:JJ,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var eee=["*"],Pr=(()=>{class n extends ba{getType(){return Kd}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-gridHelper"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:eee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var tee=["*"],Is=(()=>{class n extends me{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=ve(this._objRef.color,e))}get color(){return this._objRef?.color}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:tee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var iee=["*"],hr=(()=>{class n extends Is{getType(){return ml}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set position(e){this._objRef&&ve(this._objRef.position,e)}get position(){return this._objRef?.position}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set target(e){this._objRef&&(this._objRef.target=e)}get target(){return this._objRef?.target}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:iee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var nee=["*"],vf=(()=>{class n extends Is{getType(){return df}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(e){this._objRef&&ve(this._objRef.position,e)}get position(){return this._objRef?.position}set color(e){this._objRef&&(this._objRef.color=ve(this._objRef.color,e))}get color(){return this._objRef?.color}set groundColor(e){this._objRef&&(this._objRef.groundColor=ve(this._objRef.groundColor,e))}get groundColor(){return this._objRef?.groundColor}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:nee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var ree=["*"],Ri=(()=>{class n extends me{getType(){return Ve}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:ree,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var oee=["*"],Bt=(()=>{class n extends me{getType(){return tf}get isScene(){return this._objRef?.isScene}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set backgroundBlurriness(e){this._objRef&&(this._objRef.backgroundBlurriness=e)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(e){this._objRef&&(this._objRef.backgroundIntensity=e)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(e){this._objRef&&(this._objRef.background=ve(this._objRef.background,e))}get background(){return this._objRef?.background}set backgroundRotation(e){this._objRef&&(this._objRef.backgroundRotation=ve(this._objRef.backgroundRotation,e))}get backgroundRotation(){return this._objRef?.backgroundRotation}set environment(e){this._objRef&&(this._objRef.environment=e)}get environment(){return this._objRef?.environment}set environmentIntensity(e){this._objRef&&(this._objRef.environmentIntensity=e)}get environmentIntensity(){return this._objRef?.environmentIntensity}set environmentRotation(e){this._objRef&&(this._objRef.environmentRotation=ve(this._objRef.environmentRotation,e))}get environmentRotation(){return this._objRef?.environmentRotation}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",backgroundRotation:"backgroundRotation",environment:"environment",environmentIntensity:"environmentIntensity",environmentRotation:"environmentRotation"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:oee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var CB=(()=>{class n extends Yr{constructor(e){super(),this.parent=e}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}static{this.\u0275fac=function(i){return new(i||n)(F(me))}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-material"]],features:[X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var see=["*"],sn=(()=>{class n extends CB{getType(){return un}get isMaterial(){return this._objRef?.isMaterial}set alphaHash(e){this._objRef&&(this._objRef.alphaHash=e)}get alphaHash(){return this._objRef?.alphaHash}set alphaToCoverage(e){this._objRef&&(this._objRef.alphaToCoverage=e)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendAlpha(e){this._objRef&&(this._objRef.blendAlpha=e)}get blendAlpha(){return this._objRef?.blendAlpha}set blendColor(e){this._objRef&&(this._objRef.blendColor=ve(this._objRef.blendColor,e))}get blendColor(){return this._objRef?.blendColor}set blendDst(e){this._objRef&&(this._objRef.blendDst=e)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(e){this._objRef&&(this._objRef.blendDstAlpha=e)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(e){this._objRef&&(this._objRef.blendEquation=e)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(e){this._objRef&&(this._objRef.blendEquationAlpha=e)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(e){this._objRef&&(this._objRef.blending=e)}get blending(){return this._objRef?.blending}set blendSrc(e){this._objRef&&(this._objRef.blendSrc=e)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(e){this._objRef&&(this._objRef.blendSrcAlpha=e)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(e){this._objRef&&(this._objRef.clipIntersection=e)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(e){this._objRef&&(this._objRef.clippingPlanes=e)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(e){this._objRef&&(this._objRef.clipShadows=e)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(e){this._objRef&&(this._objRef.colorWrite=e)}get colorWrite(){return this._objRef?.colorWrite}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set depthFunc(e){this._objRef&&(this._objRef.depthFunc=e)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(e){this._objRef&&(this._objRef.depthTest=e)}get depthTest(){return this._objRef?.depthTest}set depthWrite(e){this._objRef&&(this._objRef.depthWrite=e)}get depthWrite(){return this._objRef?.depthWrite}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set stencilWrite(e){this._objRef&&(this._objRef.stencilWrite=e)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(e){this._objRef&&(this._objRef.stencilFunc=e)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(e){this._objRef&&(this._objRef.stencilRef=e)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(e){this._objRef&&(this._objRef.stencilWriteMask=e)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(e){this._objRef&&(this._objRef.stencilFuncMask=e)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(e){this._objRef&&(this._objRef.stencilFail=e)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(e){this._objRef&&(this._objRef.stencilZFail=e)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(e){this._objRef&&(this._objRef.stencilZPass=e)}get stencilZPass(){return this._objRef?.stencilZPass}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set polygonOffset(e){this._objRef&&(this._objRef.polygonOffset=e)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(e){this._objRef&&(this._objRef.polygonOffsetFactor=e)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(e){this._objRef&&(this._objRef.polygonOffsetUnits=e)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(e){this._objRef&&(this._objRef.precision=e)}get precision(){return this._objRef?.precision}set premultipliedAlpha(e){this._objRef&&(this._objRef.premultipliedAlpha=e)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(e){this._objRef&&(this._objRef.forceSinglePass=e)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(e){this._objRef&&(this._objRef.dithering=e)}get dithering(){return this._objRef?.dithering}set side(e){this._objRef&&(this._objRef.side=e)}get side(){return this._objRef?.side}set shadowSide(e){this._objRef&&(this._objRef.shadowSide=e)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(e){this._objRef&&(this._objRef.toneMapped=e)}get toneMapped(){return this._objRef?.toneMapped}set transparent(e){this._objRef&&(this._objRef.transparent=e)}get transparent(){return this._objRef?.transparent}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set vertexColors(e){this._objRef&&(this._objRef.vertexColors=e)}get vertexColors(){return this._objRef?.vertexColors}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}get alphaTest(){return this._objRef?.alphaTest}set alphaTest(e){this._objRef&&(this._objRef.alphaTest=e)}set needsUpdate(e){this._objRef&&(this._objRef.needsUpdate=e)}constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(F(me,4))}}static{this.\u0275cmp=L({type:n,selectors:[["th-material"]],inputs:{alphaHash:"alphaHash",alphaToCoverage:"alphaToCoverage",blendAlpha:"blendAlpha",blendColor:"blendColor",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version",alphaTest:"alphaTest",needsUpdate:"needsUpdate"},features:[ie([]),X],ngContentSelectors:see,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var aee=["*"],uo=(()=>{class n extends sn{getType(){return lf}get isMeshPhongMaterial(){return this._objRef?.isMeshPhongMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=ve(this._objRef.color,e))}get color(){return this._objRef?.color}set specular(e){this._objRef&&(this._objRef.specular=ve(this._objRef.specular,e))}get specular(){return this._objRef?.specular}set shininess(e){this._objRef&&(this._objRef.shininess=e)}get shininess(){return this._objRef?.shininess}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=ve(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=ve(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set metal(e){this._objRef&&(this._objRef.metal=e)}get metal(){return this._objRef?.metal}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[ie([{provide:sn,useExisting:_e(()=>n)}]),X],ngContentSelectors:aee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var EB=(()=>{class n extends Yr{constructor(e){super(),this.parent=e}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}static{this.\u0275fac=function(i){return new(i||n)(F(me))}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-geometry"]],features:[X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var cee=["*"],ii=(()=>{class n extends EB{getType(){return gt}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(e){this._objRef&&(this._objRef.index=ve(this._objRef.index,e))}get index(){return this._objRef?.index}set attributes(e){this._objRef&&(this._objRef.attributes=e)}get attributes(){return this._objRef?.attributes}set morphAttributes(e){this._objRef&&(this._objRef.morphAttributes=e)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(e){this._objRef&&(this._objRef.morphTargetsRelative=e)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(e){this._objRef&&(this._objRef.groups=e)}get groups(){return this._objRef?.groups}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=ve(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=ve(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(e){this._objRef&&(this._objRef.drawRange=e)}get drawRange(){return this._objRef?.drawRange}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(F(me,4))}}static{this.\u0275cmp=L({type:n,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},features:[ie([]),X],ngContentSelectors:cee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var dee=["*"],Jo=(()=>{class n extends ii{getType(){return ca}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-planeGeometry"]],features:[ie([{provide:ii,useExisting:_e(()=>n)}]),X],ngContentSelectors:dee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var iu=new Se("A reference to the raycaster object",{factory:()=>new Xr}),yc=(()=>{class n{static{this.instanceCnt=0}constructor(){this.raycaster=q(iu),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=n.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(e,i){this.camera=e,this.canvas=i,this.subscribe()}addEventTarget(e){this.groups.push(e)}removeEventTarget(e){let i=this.groups.indexOf(e);i>=0&&this.groups.splice(i,1)}onPointerMove(e){if(!this.isReady())return;let i=this.getFirstIntersectedGroup(e.layerX,e.layerY,"mouseEnter");if((!this.selected||this.selected!==i?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:"mouseExit",component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),i&&i.target)){this.selected=i.target;let r=pe({type:"mouseEnter",component:i.target.host},i);this.selected.host.objRef?.dispatchEvent(r),this.selected.emitOnMouseEnter(r)}}onPointerDown(e){if(this.maxClickDistance=e.width,this.pointerDownEvent=e,!this.isReady())return;let i=this.getFirstIntersectedGroup(e.layerX,e.layerY,"pointerDown");if(i&&i.target&&i.target.host.objRef){let r=pe({type:"pointerDown",component:i.target.host},i);i.target.host.objRef.dispatchEvent(r),i.target.emitOnPointerDown(r)}}onPointerUp(e){let i=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let r=this.getFirstIntersectedGroup(e.layerX,e.layerY,"pointerUp");if(r&&r.target&&r.target.host.objRef){let o=pe({type:"pointerUp",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnPointerUp(o)}if(!(this.calcPointerDownUpDinstance(e,i)>this.maxClickDistance)&&(r=this.getFirstIntersectedGroup(e.layerX,e.layerY,"click"),r&&r.target&&r.target.host.objRef)){let o=pe({type:"click",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnClick(o)}}isReady(e){return!!(this.enabled&&(e||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(e,i){if(!i)return Number.MAX_VALUE;let r=e.layerX-i.layerX,o=e.layerY-i.layerY;return Math.sqrt(r*r+o*o)}getFirstIntersectedGroup(e,i,r){if(!this.camera||!this.canvas||!this.camera.objRef)return;e=e/this.canvas.clientWidth*2-1,i=-(i/this.canvas.clientHeight)*2+1;let o=new z(e,i);this.raycaster.setFromCamera(o,this.camera.objRef);let s,a;for(let c of this.groups){let l=c.host.objRef;if(!c[r]||!l)continue;let d=this.raycaster.intersectObject(l,!0);d.length>0&&(!s||s.distance>d[0].distance)&&(s=d[0],a=c)}if(a&&s)return pe({target:a},s)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();var uee=["*"],lg=new Se("HOST_ELEMENT"),Fr=(()=>{class n{constructor(e,i){this.engServ=e,this.raycaster=i,this.hostElement=q(lg),this.onCurrentRendererPass=new nt,this.onRender=new nt}set contentScene(e){e&&(this.scene=e)}set effectComposer(e){this._effectComposer=e,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(e){this._camera=e,this.initRaycaster()}get camera(){return this._camera}set contentCamera(e){e&&(this.camera=e)}set viewPort(e){this._viewPort=e,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.raycaster.init(this.camera,this.hostElement.nativeElement)}add(e){}remove(e){}configureEffectComposerRenderTarget(){if(!(!this.viewPort||!this.effectComposer)){let e,i;this.viewPort instanceof yi?(e=this.viewPort.z,i=this.viewPort?.width):(e=this.viewPort.width,i=this.viewPort.height),this.effectComposer.setSize(e,i)}}static{this.\u0275fac=function(i){return new(i||n)(F(ho),F(yc))}}static{this.\u0275cmp=L({type:n,selectors:[["th-view"]],contentQueries:function(i,r,o){if(i&1&&(Yi(o,Bt,5),Yi(o,bc,5)),i&2){let s;ct(s=lt())&&(r.contentScene=s.first),ct(s=lt())&&(r.contentCamera=s.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onCurrentRendererPass:"onCurrentRendererPass",onRender:"onRender"},features:[ie([{provide:me,useExisting:_e(()=>n)},{provide:iu,useValue:new Xr},yc])],ngContentSelectors:uee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var AB=new R,hee=new ti,IB=new R,Mf=class extends Rt{constructor(t=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}};var va=new Be,fee=new Be,Qy=class{constructor(t={}){let e=this,i,r,o,s,a={camera:{style:""},objects:new WeakMap},c=t.element!==void 0?t.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c;let l=document.createElement("div");l.style.transformOrigin="0 0",l.style.pointerEvents="none",c.appendChild(l);let d=document.createElement("div");d.style.transformStyle="preserve-3d",l.appendChild(d),this.getSize=function(){return{width:i,height:r}},this.render=function(g,p){let v=p.projectionMatrix.elements[5]*s;p.view&&p.view.enabled?(l.style.transform=`translate( ${-p.view.offsetX*(i/p.view.width)}px, ${-p.view.offsetY*(r/p.view.height)}px )`,l.style.transform+=`scale( ${p.view.fullWidth/p.view.width}, ${p.view.fullHeight/p.view.height} )`):l.style.transform="",g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld();let b,y;p.isOrthographicCamera&&(b=-(p.right+p.left)/2,y=(p.top+p.bottom)/2);let C=p.view&&p.view.enabled?p.view.height/p.view.fullHeight:1,S=p.isOrthographicCamera?`scale( ${C} )scale(`+v+")translate("+u(b)+"px,"+u(y)+"px)"+h(p.matrixWorldInverse):`scale( ${C} )translateZ(`+v+"px)"+h(p.matrixWorldInverse),A=(p.isPerspectiveCamera?"perspective("+v+"px) ":"")+S+"translate("+o+"px,"+s+"px)";a.camera.style!==A&&(d.style.transform=A,a.camera.style=A),_(g,g,p,S)},this.setSize=function(g,p){i=g,r=p,o=i/2,s=r/2,c.style.width=g+"px",c.style.height=p+"px",l.style.width=g+"px",l.style.height=p+"px",d.style.width=g+"px",d.style.height=p+"px"};function u(g){return Math.abs(g)<1e-10?0:g}function h(g){let p=g.elements;return"matrix3d("+u(p[0])+","+u(-p[1])+","+u(p[2])+","+u(p[3])+","+u(p[4])+","+u(-p[5])+","+u(p[6])+","+u(p[7])+","+u(p[8])+","+u(-p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(-p[13])+","+u(p[14])+","+u(p[15])+")"}function f(g){let p=g.elements;return"translate(-50%,-50%)"+("matrix3d("+u(p[0])+","+u(p[1])+","+u(p[2])+","+u(p[3])+","+u(-p[4])+","+u(-p[5])+","+u(-p[6])+","+u(-p[7])+","+u(p[8])+","+u(p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(p[13])+","+u(p[14])+","+u(p[15])+")")}function m(g){g.isCSS3DObject&&(g.element.style.display="none");for(let p=0,v=g.children.length;p<v;p++)m(g.children[p])}function _(g,p,v,b){if(g.visible===!1){m(g);return}if(g.isCSS3DObject){let y=g.layers.test(v.layers)===!0,C=g.element;if(C.style.display=y===!0?"":"none",y===!0){g.onBeforeRender(e,p,v);let S;g.isCSS3DSprite?(va.copy(v.matrixWorldInverse),va.transpose(),g.rotation2D!==0&&va.multiply(fee.makeRotationZ(g.rotation2D)),g.matrixWorld.decompose(AB,hee,IB),va.setPosition(AB),va.scale(IB),va.elements[3]=0,va.elements[7]=0,va.elements[11]=0,va.elements[15]=1,S=f(va)):S=f(g.matrixWorld);let M=a.objects.get(g);if(M===void 0||M.style!==S){C.style.transform=S;let A={style:S};a.objects.set(g,A)}C.parentNode!==d&&d.appendChild(C),g.onAfterRender(e,p,v)}}for(let y=0,C=g.children.length;y<C;y++)_(g.children[y],p,v,b)}}};var Rf=class extends Rt{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new z(.5,.5),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this.center=t.center,this}},Sf=new R,PB=new Be,FB=new Be,kB=new R,jB=new R,Ky=class{constructor(t={}){let e=this,i,r,o,s,a={objects:new WeakMap},c=t.element!==void 0?t.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:i,height:r}},this.render=function(m,_){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),_.parent===null&&_.matrixWorldAutoUpdate===!0&&_.updateMatrixWorld(),PB.copy(_.matrixWorldInverse),FB.multiplyMatrices(_.projectionMatrix,PB),d(m,m,_),f(m)},this.setSize=function(m,_){i=m,r=_,o=i/2,s=r/2,c.style.width=m+"px",c.style.height=_+"px"};function l(m){m.isCSS2DObject&&(m.element.style.display="none");for(let _=0,g=m.children.length;_<g;_++)l(m.children[_])}function d(m,_,g){if(m.visible===!1){l(m);return}if(m.isCSS2DObject){Sf.setFromMatrixPosition(m.matrixWorld),Sf.applyMatrix4(FB);let p=Sf.z>=-1&&Sf.z<=1&&m.layers.test(g.layers)===!0,v=m.element;v.style.display=p===!0?"":"none",p===!0&&(m.onBeforeRender(e,_,g),v.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(Sf.x*o+o)+"px,"+(-Sf.y*s+s)+"px)",v.parentNode!==c&&c.appendChild(v),m.onAfterRender(e,_,g));let b={distanceToCameraSquared:u(g,m)};a.objects.set(m,b)}for(let p=0,v=m.children.length;p<v;p++)d(m.children[p],_,g)}function u(m,_){return kB.setFromMatrixPosition(m.matrixWorld),jB.setFromMatrixPosition(_.matrixWorld),kB.distanceToSquared(jB)}function h(m){let _=[];return m.traverseVisible(function(g){g.isCSS2DObject&&_.push(g)}),_}function f(m){let _=h(m).sort(function(p,v){if(p.renderOrder!==v.renderOrder)return v.renderOrder-p.renderOrder;let b=a.objects.get(p).distanceToCameraSquared,y=a.objects.get(v).distanceToCameraSquared;return b-y}),g=_.length;for(let p=0,v=_.length;p<v;p++)_[p].element.style.zIndex=g-p}}};var OB={alpha:!0,antialias:!0,preserveDrawingBuffer:!0},xc=new Se("Renderer Providers"),NB=new Se("CSS3DRenderer"),LB=new Se("CSS2DRenderer"),nu=new Se("WebGLRenderer");function wl(n){let t=new uc(pe(pe({},OB),n));return Object.assign(t,pe(pe({},OB),n)),[{provide:nu,useValue:t},{provide:xc,multi:!0,useExisting:nu}]}function Jy(n){return[{provide:NB,useFactory:()=>{let e=new Qy(n),i=e.domElement.style;return i.position="absolute",i.top="0px",i.bottom="0px",i.left="0px",i.right="0px",i.overflow="hidden",e}},{provide:xc,multi:!0,useExisting:NB}]}function BB(n){return[{provide:LB,useFactory:()=>{let e=new Ky(n),i=e.domElement.style;return i.position="absolute",i.top="0px",i.bottom="0px",i.left="0px",i.right="0px",i.overflow="hidden",e}},{provide:xc,multi:!0,useExisting:LB}]}var ho=(()=>{class n{constructor(e){this.ngZone=e,this.hostElement=q(lg),this.clock=new co,this.destroyed$=new at,this.resizeEmitter=new nt,this.beforeRenderEmitter=new nt,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(gi(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(gi(this.destroyed$));let i=this.initRenderer();this.renderers=i.renderers,this.canvas=i.canvas,this.wegblRenderer=i.mainRenderer,this.initResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.hostElement&&this.resizeObserver.unobserve(this.hostElement.nativeElement)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{this.initCanvasSize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.hostElement.nativeElement)})}initCanvasSize(){this.canvas?.style.setProperty("width","100%"),this.canvas?.style.setProperty("height","100%")}initRenderer(){let e=q(xc),i,r;for(let o of e)o.domElement instanceof HTMLCanvasElement&&(r=o,i=r.domElement);if(!e||e.length<1)throw new Error("missing Canvas Renderer");return{canvas:i,mainRenderer:r,renderers:e}}setViews(e){this.views=e}addView(e){this.views.push(e);let i=this.calcRendererSize();i&&this.adjustViewDimensions(e,i.width,i.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(let e of this.views)this.renderView(e)}renderView(e){let i=e.camera,r=e.scene;if(!(!i||!r||!i.objRef||!r.objRef)){yl(e.onRender)&&this.ngZone.run(()=>e.onRender.emit({renderer:this.renderers,scene:r,camera:i}));for(let o of this.renderers)if(!(e.effectComposer&&!(o instanceof uc)))if(this.applyRendererParametersFromView(e,o),yl(e.onCurrentRendererPass)&&this.ngZone.run(()=>e.onCurrentRendererPass.emit({renderer:o,scene:r,camera:i,engine:this})),e.effectComposer){e.effectComposer.render();return}else o.render(r.objRef,i.objRef)}}applyRendererParametersFromView(e,i){e.viewPort&&i.setViewport&&(e.viewPort instanceof yi?i.setViewport(e.viewPort):i.setViewport(e.viewPort.x,e.viewPort.y,e.viewPort.width,e.viewPort.height)),e.scissor&&i.setScissor&&(e.scissor instanceof yi?i.setScissor(e.scissor):i.setScissor(e.scissor.x,e.scissor.y,e.scissor.width,e.scissor.height)),e.scissorTest!==void 0&&i.setScissorTest&&i.setScissorTest(e.scissorTest),e.clearColor&&i.setClearColor&&i.setClearColor(e.clearColor),e.clearAlpha!==void 0&&i.setClearAlpha&&i.setClearAlpha(e.clearAlpha),e.shadow!==void 0&&i.shadowMap&&(i.shadowMap.enabled=!0)}resize(){let{width:e,height:i}=this.calcRendererSize();this.renderers?.forEach(r=>r.setSize(e,i,!1));for(let r of this.views)this.adjustViewDimensions(r,e,i);return this.resizeEmitter.emit({width:e,height:i}),!0}calcRendererSize(){return{width:this.hostElement.nativeElement.clientWidth??0,height:this.hostElement.nativeElement.clientHeight??0}}adjustViewDimensions(e,i,r){e.viewPort||(e.camera&&e.camera.objRef.aspect&&(e.camera.objRef.aspect=i/r,e.camera.objRef.updateProjectionMatrix()),e.effectComposer?.setSize(i,r))}static{this.\u0275fac=function(i){return new(i||n)(de($e))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();var ya=(()=>{class n{constructor(e,i){this.engineService=e,this.ngZone=i,this.active=!0,this.destroyed$=new at,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(gi(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,this.frameId!==void 0&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){this.frameId===void 0&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}static{this.\u0275fac=function(i){return new(i||n)(de(ho),de($e))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();var pee=["*"];function mee(n,t){n&1&&K(0)}function gee(){return[{provide:xc,useFactory:()=>{let n=q(xc,{skipSelf:!0,optional:!0});return n||[wl()[0].useValue]}},{provide:nu,useFactory:()=>{let n=q(nu,{skipSelf:!0,optional:!0});if(n)return n;let t=q(xc),e=t[0];if(t.length===1&&e instanceof uc)return e}}]}var Dt=(()=>{class n extends Fr{static{this.instanceCnt=0}get obj(){return this}set views(e){this.setViews(e)}get rendererCanvas(){return this.engServ.canvas}constructor(e,i,r,o){super(e,r),this.engServ=e,this.animationLoop=i,this.raycaster=r,this.elementRef=o,this.isDevMode=Jj,this.nid=n.instanceCnt++,this.disableDefaultView=!1,this.engServ.renderers.forEach(s=>this.elementRef.nativeElement.appendChild(s.domElement))}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.engServ.resize(),super.ngOnInit(),this.setViews()}setViews(e){this.engServ.setViews([]),this.disableDefaultView||this.engServ.addView(this),e?.forEach(i=>this.engServ.addView(i))}static{this.\u0275fac=function(i){return new(i||n)(F(ho),F(ya),F(_e(()=>yc)),F(et))}}static{this.\u0275cmp=L({type:n,selectors:[["th-canvas"]],contentQueries:function(i,r,o){if(i&1&&Yi(o,Fr,4),i&2){let s;ct(s=lt())&&(r.views=s)}},inputs:{disableDefaultView:"disableDefaultView"},features:[ie([{provide:lg,useFactory:()=>q(et)},{provide:me,useExisting:_e(()=>n)},ho,ya,{provide:iu,useValue:new Xr},_e(()=>yc),{provide:Fr,useExisting:_e(()=>n)},gee()]),X],ngContentSelectors:pee,decls:1,vars:1,template:function(i,r){i&1&&(ae(),Fi(0,mee,1,0)),i&2&&gn(r.isDevMode()?0:-1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0})}}return n})();var dg=function(){var n=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(d){d.preventDefault(),i(++n%t.children.length)},!1);function e(d){return t.appendChild(d.dom),d}function i(d){for(var u=0;u<t.children.length;u++)t.children[u].style.display=u===d?"block":"none";n=d}var r=(performance||Date).now(),o=r,s=0,a=e(new dg.Panel("FPS","#0ff","#002")),c=e(new dg.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=e(new dg.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var d=(performance||Date).now();if(c.update(d-r,200),d>=o+1e3&&(a.update(s*1e3/(d-o),100),o=d,s=0,l)){var u=performance.memory;l.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:t,setMode:i}};dg.Panel=function(n,t,e){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,c=48*s,l=3*s,d=2*s,u=3*s,h=15*s,f=74*s,m=30*s,_=document.createElement("canvas");_.width=a,_.height=c,_.style.cssText="width:80px;height:48px";var g=_.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=e,g.fillRect(0,0,a,c),g.fillStyle=t,g.fillText(n,l,d),g.fillRect(u,h,f,m),g.fillStyle=e,g.globalAlpha=.9,g.fillRect(u,h,f,m),{dom:_,update:function(p,v){i=Math.min(i,p),r=Math.max(r,p),g.fillStyle=e,g.globalAlpha=1,g.fillRect(0,0,a,h),g.fillStyle=t,g.fillText(o(p)+" "+n+" ("+o(i)+"-"+o(r)+")",l,d),g.drawImage(_,u+s,h,f-s,m,u,h,f-s,m),g.fillRect(u+f-s,h,s,m),g.fillStyle=e,g.globalAlpha=.9,g.fillRect(u+f-s,h,s,o((1-p/v)*m))}}};var VB=dg;var An=(()=>{class n{constructor(e,i){this.engineService=e,this.canvas=i,this.stats=new VB}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.canvas.elementRef)throw new Error("No canvas present");let e=this.canvas.elementRef.nativeElement;e&&(e.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),e.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(e){e?this.stats.dom.style.visibility="visible":this.stats.dom.style.visibility="hidden"}static{this.\u0275fac=function(i){return new(i||n)(F(ho),F(Dt))}}static{this.\u0275dir=Ye({type:n,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}})}}return n})();var ex="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",an="assets/";function hD(n,t){if(t===JE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===gf||t===ag){let e=n.getIndex();if(e===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===gf)for(let s=1;s<=i;s++)r.push(e.getX(0)),r.push(e.getX(s)),r.push(e.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(e.getX(s)),r.push(e.getX(s+1)),r.push(e.getX(s+2))):(r.push(e.getX(s+2)),r.push(e.getX(s+1)),r.push(e.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var tx=class extends ir{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new vD(e)}),this.register(function(e){return new yD(e)}),this.register(function(e){return new DD(e)}),this.register(function(e){return new AD(e)}),this.register(function(e){return new ID(e)}),this.register(function(e){return new wD(e)}),this.register(function(e){return new MD(e)}),this.register(function(e){return new SD(e)}),this.register(function(e){return new RD(e)}),this.register(function(e){return new bD(e)}),this.register(function(e){return new TD(e)}),this.register(function(e){return new xD(e)}),this.register(function(e){return new ED(e)}),this.register(function(e){return new CD(e)}),this.register(function(e){return new gD(e)}),this.register(function(e){return new PD(e)}),this.register(function(e){return new FD(e)})}load(t,e,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let l=Ds.extractUrlBase(t);s=Ds.resolveURL(l,this.path)}else s=Ds.extractUrlBase(t);this.manager.itemStart(t);let a=function(l){r?r(l):console.error(l),o.manager.itemError(t),o.manager.itemEnd(t)},c=new tr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(l){try{o.parse(l,s,function(d){e(d),o.manager.itemEnd(t)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let o,s={},a={},c=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===$B){try{s[vi.KHR_BINARY_GLTF]=new kD(t)}catch(u){r&&r(u);return}o=JSON.parse(s[vi.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new VD(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){let u=this.pluginCallbacks[d](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){let u=o.extensionsUsed[d],h=o.extensionsRequired||[];switch(u){case vi.KHR_MATERIALS_UNLIT:s[u]=new _D;break;case vi.KHR_DRACO_MESH_COMPRESSION:s[u]=new jD(o,this.dracoLoader);break;case vi.KHR_TEXTURE_TRANSFORM:s[u]=new OD;break;case vi.KHR_MESH_QUANTIZATION:s[u]=new ND;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,o){i.parse(t,e,r,o)})}};function _ee(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var vi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},gD=class{constructor(t){this.parser=t,this.name=vi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let o=e[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let o=e.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],l,d=new ge(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],Nn);let u=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new ml(d),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new pl(d),l.distance=u;break;case"spot":l=new uf(d),l.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,wc(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=e.createUniqueName(c.name||"light_"+t),r=Promise.resolve(l),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return i._getNodeRef(e.cache,a,c)})}},_D=class{constructor(){this.name=vi.KHR_MATERIALS_UNLIT}getMaterialType(){return tn}extendParams(t,e,i){let r=[];t.color=new ge(1,1,1),t.opacity=1;let o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Nn),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,kn))}return Promise.all(r)}},bD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}},vD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new z(a,a)}return Promise.all(o)}},yD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},xD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},wD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];e.sheenColor=new ge(0,0,0),e.sheenRoughness=0,e.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Nn)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,kn)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},MD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},SD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return e.attenuationColor=new ge().setRGB(a[0],a[1],a[2],Nn),Promise.all(o)}},RD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},TD=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return e.specularColor=new ge().setRGB(a[0],a[1],a[2],Nn),s.specularColorTexture!==void 0&&o.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,kn)),Promise.all(o)}},CD=class{constructor(t){this.parser=t,this.name=vi.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(o)}},ED=class{constructor(t){this.parser=t,this.name=vi.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:qr}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},DD=class{constructor(t){this.parser=t,this.name=vi.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,s)}},AD=class{constructor(t){this.parser=t,this.name=vi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(t,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},ID=class{constructor(t){this.parser=t,this.name=vi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(t,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},PD=class{constructor(t){this.name=vi.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,l=r.byteLength||0,d=r.count,u=r.byteStride,h=new Uint8Array(a,c,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){let f=new ArrayBuffer(d*u);return s.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}else return null}},FD=class{constructor(t){this.name=vi.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let l of r.primitives)if(l.mode!==es.TRIANGLES&&l.mode!==es.TRIANGLE_STRIP&&l.mode!==es.TRIANGLE_FAN&&l.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],c={};for(let l in s)a.push(this.parser.getDependency("accessor",s[l]).then(d=>(c[l]=d,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(l=>{let d=l.pop(),u=d.isGroup?d.children:[d],h=l[0].count,f=[];for(let m of u){let _=new Be,g=new R,p=new ti,v=new R(1,1,1),b=new fl(m.geometry,m.material,h);for(let y=0;y<h;y++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,y),c.ROTATION&&p.fromBufferAttribute(c.ROTATION,y),c.SCALE&&v.fromBufferAttribute(c.SCALE,y),b.setMatrixAt(y,_.compose(g,p,v));for(let y in c)if(y==="_COLOR_0"){let C=c[y];b.instanceColor=new Cs(C.array,C.itemSize,C.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&m.geometry.setAttribute(y,c[y]);Rt.prototype.copy.call(b,m),this.parser.assignFinalMaterial(b),f.push(b)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}},$B="glTF",ug=12,zB={JSON:1313821514,BIN:5130562},kD=class{constructor(t){this.name=vi.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,ug),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==$B)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-ug,o=new DataView(t,ug),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===zB.JSON){let l=new Uint8Array(t,ug+s,a);this.content=i.decode(l)}else if(c===zB.BIN){let l=ug+s;this.body=t.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},jD=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=vi.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},c={},l={};for(let d in s){let u=BD[d]||d.toLowerCase();a[u]=s[d]}for(let d in t.attributes){let u=BD[d]||d.toLowerCase();if(s[d]!==void 0){let h=i.accessors[t.attributes[d]],f=Tf[h.componentType];l[u]=f.name,c[u]=h.normalized===!0}}return e.getDependency("bufferView",o).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(f){for(let m in f.attributes){let _=f.attributes[m],g=c[m];g!==void 0&&(_.normalized=g)}u(f)},a,l,Nn,h)})})}},OD=class{constructor(){this.name=vi.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},ND=class{constructor(){this.name=vi.KHR_MESH_QUANTIZATION}},ix=class extends pc{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)e[s]=i[o+s];return e}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,d=r-e,u=(i-e)/d,h=u*u,f=h*u,m=t*l,_=m-l,g=-2*f+3*h,p=f-h,v=1-g,b=p-h+u;for(let y=0;y!==a;y++){let C=s[_+y+a],S=s[_+y+c]*d,M=s[m+y+a],A=s[m+y]*d;o[y]=v*C+b*S+g*M+p*A}return o}},bee=new ti,LD=class extends ix{interpolate_(t,e,i,r){let o=super.interpolate_(t,e,i,r);return bee.fromArray(o).normalize().toArray(o),o}},es={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Tf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},HB={9728:hi,9729:_n,9984:sg,9985:Pd,9986:dl,9987:Eo},GB={33071:oo,33648:Ld,10497:Ko},fD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ml={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},vee={CUBICSPLINE:void 0,LINEAR:zd,STEP:Vd},pD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function yee(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ar({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ms})),n.DefaultMaterial}function ru(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function wc(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xee(n,t,e){let i=!1,r=!1,o=!1;for(let l=0,d=t.length;l<d;l++){let u=t[l];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],c=[];for(let l=0,d=t.length;l<d;l++){let u=t[l];if(i){let h=u.POSITION!==void 0?e.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(r){let h=u.NORMAL!==void 0?e.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(o){let h=u.COLOR_0!==void 0?e.getDependency("accessor",u.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){let d=l[0],u=l[1],h=l[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=u),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function wee(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Mee(n){let t,e=n.extensions&&n.extensions[vi.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+mD(e.attributes):t=n.indices+":"+mD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+mD(n.targets[i]);return t}function mD(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function UD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function See(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var Ree=new Be,VD=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new _ee,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,o=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&o<98?this.textureLoader=new Jm(this.options.manager):this.textureLoader=new tg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return ru(o,a,r),wc(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=e.length;r<o;r++){let s=e[r].joints;for(let a=0,c=s.length;a<c;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){let s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[l,d]of s.children.entries())o(d,a.children[l])};return o(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let o=t(e[r]);o&&i.push(o)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[vi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(Ds.resolveURL(e.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,o=e.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let s=fD[r.type],a=Tf[r.componentType],c=r.normalized===!0,l=new a(r.count*s);return Promise.resolve(new fi(l,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=fD[r.type],l=Tf[r.componentType],d=l.BYTES_PER_ELEMENT,u=d*c,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0,_,g;if(f&&f!==u){let p=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,b=e.cache.get(v);b||(_=new l(a,p*f,r.count*f/d),b=new hc(_,f/d),e.cache.add(v,b)),g=new la(b,c,h%f/d,m)}else a===null?_=new l(r.count*c):_=new l(a,h,r.count*c),g=new fi(_,c,m);if(r.sparse!==void 0){let p=fD.SCALAR,v=Tf[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,C=new v(s[1],b,r.sparse.count*p),S=new l(s[2],y,r.sparse.count*c);a!==null&&(g=new fi(g.array.slice(),g.itemSize,g.normalized));for(let M=0,A=C.length;M<A;M++){let T=C[M];if(g.setX(T,S[M*c]),c>=2&&g.setY(T,S[M*c+1]),c>=3&&g.setZ(T,S[M*c+2]),c>=4&&g.setW(T,S[M*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){let e=this.json,i=this.options,o=e.textures[t].source,s=e.images[o],a=this.textureLoader;if(s.uri){let c=i.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,e,i){let r=this,o=this.json,s=o.textures[t],a=o.images[e],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(e,i).then(function(d){d.flipY=!1,d.name=s.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);let h=(o.samplers||{})[s.sampler]||{};return d.magFilter=HB[h.magFilter]||_n,d.minFilter=HB[h.minFilter]||Eo,d.wrapS=GB[h.wrapS]||Ko,d.wrapT=GB[h.wrapT]||Ko,r.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(t,e){let i=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(u=>u.clone());let s=r.images[t],a=self.URL||self.webkitURL,c=s.uri||"",l=!1;if(s.bufferView!==void 0)c=i.getDependency("bufferView",s.bufferView).then(function(u){l=!0;let h=new Blob([u],{type:s.mimeType});return c=a.createObjectURL(h),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let d=Promise.resolve(c).then(function(u){return new Promise(function(h,f){let m=h;e.isImageBitmapLoader===!0&&(m=function(_){let g=new yn(_);g.needsUpdate=!0,h(g)}),e.load(Ds.resolveURL(u,o.path),m,void 0,f)})}).then(function(u){return l===!0&&a.revokeObjectURL(c),wc(u,s),u.userData.mimeType=s.mimeType||See(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),u});return this.sourceCache[t]=d,d}assignTexture(t,e,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[vi.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[vi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[vi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),t[e]=s,s})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,s=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new qd,un.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new on,un.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}t.material=i}getMaterialType(){return Ar}loadMaterial(t){let e=this,i=this.json,r=this.extensions,o=i.materials[t],s,a={},c=o.extensions||{},l=[];if(c[vi.KHR_MATERIALS_UNLIT]){let u=r[vi.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),l.push(u.extendParams(a,o,e))}else{let u=o.pbrMetallicRoughness||{};if(a.color=new ge(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){let h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Nn),a.opacity=h[3]}u.baseColorTexture!==void 0&&l.push(e.assignTexture(a,"map",u.baseColorTexture,kn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),l.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=Kn);let d=o.alphaMode||pD.OPAQUE;if(d===pD.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===pD.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==tn&&(l.push(e.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new z(1,1),o.normalTexture.scale!==void 0)){let u=o.normalTexture.scale;a.normalScale.set(u,u)}if(o.occlusionTexture!==void 0&&s!==tn&&(l.push(e.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==tn){let u=o.emissiveFactor;a.emissive=new ge().setRGB(u[0],u[1],u[2],Nn)}return o.emissiveTexture!==void 0&&s!==tn&&l.push(e.assignTexture(a,"emissiveMap",o.emissiveTexture,kn)),Promise.all(l).then(function(){let u=new s(a);return o.name&&(u.name=o.name),wc(u,o),e.associations.set(u,{materials:t}),o.extensions&&ru(r,u,o),u})}createUniqueName(t){let e=Wi.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[vi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(c){return WB(c,a,e)})}let s=[];for(let a=0,c=t.length;a<c;a++){let l=t[a],d=Mee(l),u=r[d];if(u)s.push(u.promise);else{let h;l.extensions&&l.extensions[vi.KHR_DRACO_MESH_COMPRESSION]?h=o(l):h=WB(new gt,l,e),r[d]={primitive:l,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(t){let e=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let c=0,l=s.length;c<l;c++){let d=s[c].material===void 0?yee(this.cache):this.getDependency("material",s[c].material);a.push(d)}return a.push(e.loadGeometries(s)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),d=c[c.length-1],u=[];for(let f=0,m=d.length;f<m;f++){let _=d[f],g=s[f],p,v=l[f];if(g.mode===es.TRIANGLES||g.mode===es.TRIANGLE_STRIP||g.mode===es.TRIANGLE_FAN||g.mode===void 0)p=o.isSkinnedMesh===!0?new nf(_,v):new Ve(_,v),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),g.mode===es.TRIANGLE_STRIP?p.geometry=hD(p.geometry,ag):g.mode===es.TRIANGLE_FAN&&(p.geometry=hD(p.geometry,gf));else if(g.mode===es.LINES)p=new Dr(_,v);else if(g.mode===es.LINE_STRIP)p=new Qi(_,v);else if(g.mode===es.LINE_LOOP)p=new of(_,v);else if(g.mode===es.POINTS)p=new sf(_,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(p.geometry.morphAttributes).length>0&&wee(p,o),p.name=e.createUniqueName(o.name||"mesh_"+t),wc(p,o),g.extensions&&ru(r,p,g),e.assignFinalMaterial(p),u.push(p)}for(let f=0,m=u.length;f<m;f++)e.associations.set(u[f],{meshes:t,primitives:f});if(u.length===1)return o.extensions&&ru(r,u[0],o),u[0];let h=new Er;o.extensions&&ru(r,h,o),e.associations.set(h,{meshes:t});for(let f=0,m=u.length;f<m;f++)h.add(u[f]);return h})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new en(st.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new Ao(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),wc(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,o=e.joints.length;r<o;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let l=0,d=s.length;l<d;l++){let u=s[l];if(u){a.push(u);let h=new Be;o!==null&&h.fromArray(o.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[l])}return new rf(a,c)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],c=[],l=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){let f=r.channels[u],m=r.samplers[f.sampler],_=f.target,g=_.node,p=r.parameters!==void 0?r.parameters[m.input]:m.input,v=r.parameters!==void 0?r.parameters[m.output]:m.output;_.node!==void 0&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",p)),c.push(this.getDependency("accessor",v)),l.push(m),d.push(_))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(d)]).then(function(u){let h=u[0],f=u[1],m=u[2],_=u[3],g=u[4],p=[];for(let v=0,b=h.length;v<b;v++){let y=h[v],C=f[v],S=m[v],M=_[v],A=g[v];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();let T=i._createAnimationTracks(y,C,S,M,A);if(T)for(let x=0;x<T.length;x++)p.push(T[x])}return new _c(o,void 0,p)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],o=i._loadNodeShallow(t),s=[],a=r.children||[];for(let l=0,d=a.length;l<d;l++)s.push(i.getDependency("node",a[l]));let c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(l){let d=l[0],u=l[1],h=l[2];h!==null&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,Ree)});for(let f=0,m=u.length;f<m;f++)d.add(u[f]);return d})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let o=e.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(t)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(t)}).forEach(function(l){a.push(l)}),this.nodeCache[t]=Promise.all(a).then(function(l){let d;if(o.isBone===!0?d=new $d:l.length>1?d=new Er:l.length===1?d=l[0]:d=new Rt,d!==l[0])for(let u=0,h=l.length;u<h;u++)d.add(l[u]);if(o.name&&(d.userData.name=o.name,d.name=s),wc(d,o),o.extensions&&ru(i,d,o),o.matrix!==void 0){let u=new Be;u.fromArray(o.matrix),d.applyMatrix4(u)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,o=new Er;i.name&&(o.name=r.createUniqueName(i.name)),wc(o,i),i.extensions&&ru(e,o,i);let s=i.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let d=0,u=c.length;d<u;d++)o.add(c[d]);let l=d=>{let u=new Map;for(let[h,f]of r.associations)(h instanceof un||h instanceof yn)&&u.set(h,f);return d.traverse(h=>{let f=r.associations.get(h);f!=null&&u.set(h,f)}),u};return r.associations=l(o),o})}_createAnimationTracks(t,e,i,r,o){let s=[],a=t.name?t.name:t.uuid,c=[];Ml[o.path]===Ml.weights?t.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a);let l;switch(Ml[o.path]){case Ml.weights:l=pa;break;case Ml.rotation:l=ma;break;case Ml.position:case Ml.scale:l=ga;break;default:switch(i.itemSize){case 1:l=pa;break;case 2:case 3:default:l=ga;break}break}let d=r.interpolation!==void 0?vee[r.interpolation]:zd,u=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){let m=new l(c[h]+"."+Ml[o.path],e.array,u,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),s.push(m)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=UD(e.constructor),r=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o++)r[o]=e[o]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof ma?LD:ix;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Tee(n,t,e){let i=t.attributes,r=new vn;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new R(c[0],c[1],c[2]),new R(l[0],l[1],l[2])),a.normalized){let d=UD(Tf[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=t.targets;if(o!==void 0){let a=new R,c=new R;for(let l=0,d=o.length;l<d;l++){let u=o[l];if(u.POSITION!==void 0){let h=e.json.accessors[u.POSITION],f=h.min,m=h.max;if(f!==void 0&&m!==void 0){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){let _=UD(Tf[h.componentType]);c.multiplyScalar(_)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new En;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function WB(n,t,e){let i=t.attributes,r=[];function o(s,a){return e.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(let s in i){let a=BD[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(t.indices!==void 0&&!n.index){let s=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(s)}return Si.workingColorSpace!==Nn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Si.workingColorSpace}" not supported.`),wc(n,t),Tee(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?xee(n,t.targets,e):n})}var Cf=class{setCrossOrigin(t){this.crossOrigin=t}setWithCredentials(t){this.withCredentials=t}createLoaderInstance(){let t=new this.clazz;return this.crossOrigin&&t.setCrossOrigin(this.crossOrigin),this.withCredentials!==void 0&&t.setWithCredentials(this.withCredentials),t}};var Ef=(()=>{class n extends Cf{load(...e){return this.createLoaderInstance().loadAsync(...e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();var Df=(()=>{class n{set url(e){this._url=e,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new nt),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new nt),this.onProgress$}constructor(e,i){this.host=e,this.zone=i,this.initialized=!1,this.animationLoop=q(ya),this.proxy=Zy(),e.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){return _i(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");if(!this.proxy)return;let e=this._url,i=yl(this.onProgress$)?o=>{this.zone.run(()=>{this.onProgress$?.next(o)})}:void 0,r=yield this.zone.runOutsideAngular(()=>this.service.load(e,i));this.animationLoop.requestAnimationFrame(),this.proxy.objRef=this.getRefFromResponse(r),this.host.objRef=this.proxy,this.onLoaded$&&r!=null&&this.zone.run(()=>this.onLoaded$?.next(r))})}static{this.\u0275fac=function(i){ih()}}static{this.\u0275dir=Ye({type:n,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}})}}return n})();var zD=new WeakMap,nx=class extends ir{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,i,r){let o=new tr(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,s=>{this.parse(s,e,r)},i,r)}parse(t,e,i=()=>{}){this.decodeDracoFile(t,e,null,null,kn,i).catch(i)}decodeDracoFile(t,e,i,r,o=Nn,s=()=>{}){let a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:o};return this.decodeGeometry(t,a).then(e).catch(s)}decodeGeometry(t,e){let i=JSON.stringify(e);if(zD.has(t)){let c=zD.get(t);if(c.key===i)return c.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,o=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(o,s).then(c=>(r=c,new Promise((l,d)=>{r._callbacks[o]={resolve:l,reject:d},r.postMessage({type:"decode",id:o,taskConfig:e,buffer:t},[t])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),zD.set(t,{key:i,promise:a}),a}_createGeometry(t){let e=new gt;t.index&&e.setIndex(new fi(t.index.array,1));for(let i=0;i<t.attributes.length;i++){let r=t.attributes[i],o=r.name,s=r.array,a=r.itemSize,c=new fi(s,a);o==="color"&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=!(s instanceof Float32Array)),e.setAttribute(o,c)}return e}_assignVertexColorSpace(t,e){if(e!==kn)return;let i=new ge;for(let r=0,o=t.count;r<o;r++)i.fromBufferAttribute(t,r).convertSRGBToLinear(),t.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(t,e){let i=new tr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(e),i.setWithCredentials(this.withCredentials),new Promise((r,o)=>{i.load(t,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(i=>{let r=i[0];t||(this.decoderConfig.wasmBinary=i[1]);let o=Cee.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){let s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=e,i._taskLoad+=e,i})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Cee(){let n,t;onmessage=function(s){let a=s.data;switch(a.type){case"init":n=a.decoderConfig,t=new Promise(function(d){n.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(n)});break;case"decode":let c=a.buffer,l=a.taskConfig;t.then(d=>{let u=d.draco,h=new u.Decoder;try{let f=e(u,h,new Int8Array(c),l),m=f.attributes.map(_=>_.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}});break}};function e(s,a,c,l){let d=l.attributeIDs,u=l.attributeTypes,h,f,m=a.GetEncodedGeometryType(c);if(m===s.TRIANGULAR_MESH)h=new s.Mesh,f=a.DecodeArrayToMesh(c,c.byteLength,h);else if(m===s.POINT_CLOUD)h=new s.PointCloud,f=a.DecodeArrayToPointCloud(c,c.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let _={index:null,attributes:[]};for(let g in d){let p=self[u[g]],v,b;if(l.useUniqueIDs)b=d[g],v=a.GetAttributeByUniqueId(h,b);else{if(b=a.GetAttributeId(h,s[d[g]]),b===-1)continue;v=a.GetAttribute(h,b)}let y=r(s,a,h,g,p,v);g==="color"&&(y.vertexColorSpace=l.vertexColorSpace),_.attributes.push(y)}return m===s.TRIANGULAR_MESH&&(_.index=i(s,a,h)),s.destroy(h),_}function i(s,a,c){let d=c.num_faces()*3,u=d*4,h=s._malloc(u);a.GetTrianglesUInt32Array(c,u,h);let f=new Uint32Array(s.HEAPF32.buffer,h,d).slice();return s._free(h),{array:f,itemSize:1}}function r(s,a,c,l,d,u){let h=u.num_components(),m=c.num_points()*h,_=m*d.BYTES_PER_ELEMENT,g=o(s,d),p=s._malloc(_);a.GetAttributeDataArrayForAllPoints(c,u,g,_,p);let v=new d(s.HEAPF32.buffer,p,m).slice();return s._free(p),{name:l,array:v,itemSize:h}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var Zr=class extends Cf{load(...t){return this.createLoaderInstance().load(...t)}};var Sl=(()=>{class n extends Zr{constructor(){super(...arguments),this.clazz=nx,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(e){this.decoderPath=e}setDecoderConfig(e){this.decoderConfig=e}setWorkerLimit(e){this.workerLimit=e}setReuseInstance(e){this.reuseInstance=e}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;let e=super.createLoaderInstance();return e.setDecoderPath(this.decoderPath),this.decoderConfig&&e.setDecoderConfig(this.decoderConfig),this.workerLimit&&e.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=e),e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Dee=(()=>{class n extends Ef{constructor(e){super(),this.dracoLoaderService=e,this.clazz=tx}createLoaderInstance(){let e=super.createLoaderInstance();return e.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),e}static{this.\u0275fac=function(i){return new(i||n)(de(Sl))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xn=(()=>{class n extends Df{constructor(e,i,r){super(e,i),this.host=e,this.zone=i,this.service=r}getRefFromResponse(e){return e.scene}static{this.\u0275fac=function(i){return new(i||n)(F(me,1),F($e),F(Dee))}}static{this.\u0275dir=Ye({type:n,selectors:[["","loadGLTF",""]],features:[X]})}}return n})();var Rl=(()=>{class n{constructor(e,i){this.engineService=e,this.animationLoopService=i}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(e){e?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}static{this.\u0275fac=function(i){return new(i||n)(F(ho),F(ya))}}static{this.\u0275dir=Ye({type:n,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}})}}return n})();var qB=(()=>{class n{constructor(){this.assetPath=an+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(e){this.animationMixer=new ng(e.scene),e.scene.traverse(i=>{i.isMesh&&(i.castShadow=!0,i.receiveShadow=!0)});for(let i of e.animations){let r=this.animationMixer.clipAction(i);this.actions[i.name]=r,(this.emotes.indexOf(i.name)>=0||this.states.indexOf(i.name)>=4)&&(r.clampWhenFinished=!0,r.loop=Gy)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(e){this.animationMixer&&this.animationMixer.update(e.delta)}fadeToAction(e,i){this.previousAction=this.activeAction,this.activeAction=this.actions[e],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(i),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(i).play()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-robot"]],decls:1,vars:2,consts:[["loadGLTF","",3,"onLoaded","beforeRender","url","castShadow"]],template:function(i,r){i&1&&(H(0,"th-mesh",0),Le("onLoaded",function(s){return r.onInit(s)})("beforeRender",function(s){return r.beforeRender(s)}),ee()),i&2&&j("url",r.assetPath)("castShadow",!0)},dependencies:[Ri,Xn,Rl],encapsulation:2,changeDetection:0})}}return n})();var ox=(()=>{class n{transform(e){return new ef(...e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Vo({name:"fog",type:n,pure:!0})}}return n})();var Iee=["gridHelper"],Pee=()=>["#e0e0e0"],Fee=()=>["#e0e0e0",20,100],kee=()=>[45,2,.25,100],jee=n=>[n,5,10],Oee=()=>[0,2,0],Nee=()=>["#ffffff","#444444"],Lee=()=>[0,20,0],Bee=()=>["#ffffff"],Uee=()=>[0,20,10],Vee=n=>[n,0,0],zee=()=>[2e3,2e3],Hee=()=>({color:"#999999",depthWrite:!1}),Gee=()=>[200,40,"#000000","#000000"],YB=(()=>{class n{constructor(){this.Math=Math}ngAfterViewInit(){let e=this.gridHelper?.objRef?.material;e&&(e.opacity=.2,e.transparent=!0)}onBeforeRender(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-animation-example"]],viewQuery:function(i,r){if(i&1&&qt(Iee,7),i&2){let o;ct(o=lt())&&(r.gridHelper=o.first)}},decls:12,vars:37,consts:[["gridHelper",""],[3,"onRender","thStats","shadow"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position","intensity"],[3,"args","position","castShadow","intensity"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",1),Le("onRender",function(){return ht(o),ft(r.onBeforeRender())}),H(1,"th-scene",2),ki(2,"fog"),fe(3,"th-perspectiveCamera",3)(4,"th-hemisphereLight",4)(5,"th-directionalLight",5),H(6,"th-mesh",6),fe(7,"th-planeGeometry",7)(8,"th-meshPhongMaterial",7),ee(),fe(9,"th-gridHelper",8,0)(11,"app-robot"),ee()()}i&2&&(j("thStats",!0)("shadow",!0),k(),j("background",J(22,Pee))("fog",Gi(2,20,J(23,Fee))),k(2),j("args",J(24,kee))("position",bt(25,jee,-5))("lookAt",J(27,Oee)),k(),j("args",J(28,Nee))("position",J(29,Lee))("intensity",3),k(),j("args",J(30,Bee))("position",J(31,Uee))("castShadow",!0)("intensity",3),k(),j("rotation",bt(32,Vee,-.5*r.Math.PI))("receiveShadow",!0),k(),j("args",J(34,zee)),k(),j("args",J(35,Hee)),k(),j("args",J(36,Gee))("receiveShadow",!0))},dependencies:[Zt,Pr,hr,vf,Ri,Bt,uo,Jo,Dt,An,qB,ox],encapsulation:2,changeDetection:0})}}return n})();var Wee=["*"],Ci=(()=>{class n extends Is{getType(){return hf}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-ambientLight"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:Wee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var $ee=["*"],wa=(()=>{class n extends sn{getType(){return tn}get isMeshBasicMaterial(){return this._objRef?.isMeshBasicMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=ve(this._objRef.color,e))}get color(){return this._objRef?.color}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[ie([{provide:sn,useExisting:_e(()=>n)}]),X],ngContentSelectors:$ee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var qee=["*"],ou=(()=>{class n extends ii{getType(){return Zi}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-boxGeometry"]],features:[ie([{provide:ii,useExisting:_e(()=>n)}]),X],ngContentSelectors:qee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Xee=()=>({color:"purple"}),Yee=()=>[75,2,.1,1e3],Zee=()=>[1,1,5],ZB=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-basic-example"]],decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(i,r){i&1&&(H(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),fe(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),ee(),fe(5,"th-ambientLight")(6,"th-perspectiveCamera",1),ee()()),i&2&&(k(4),j("args",J(3,Xee)),k(2),j("args",J(4,Yee))("position",J(5,Zee)))},dependencies:[Zt,Ci,Ri,Bt,wa,ou,Dt],encapsulation:2,changeDetection:0})}}return n})();var QB={type:"change"},WD={type:"start"},KB={type:"end"},sx=new aa,JB=new ur,Qee=Math.cos(70*st.DEG2RAD),Af=class extends jn{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new R,this.cursor=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ir.ROTATE,MIDDLE:Ir.DOLLY,RIGHT:Ir.PAN},this.touches={ONE:As.ROTATE,TWO:As.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(w){w.addEventListener("keydown",ze),this._domElementKeyEvents=w},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(QB),i.update(),o=r.NONE},this.update=function(){let w=new R,ce=new ti().setFromUnitVectors(t.up,new R(0,1,0)),Z=ce.clone().invert(),he=new R,Fe=new ti,wt=new R,Ht=2*Math.PI;return function(Un=null){let Di=i.object.position;w.copy(Di).sub(i.target),w.applyQuaternion(ce),a.setFromVector3(w),i.autoRotate&&o===r.NONE&&V(x(Un)),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Vn=i.minAzimuthAngle,zn=i.maxAzimuthAngle;isFinite(Vn)&&isFinite(zn)&&(Vn<-Math.PI?Vn+=Ht:Vn>Math.PI&&(Vn-=Ht),zn<-Math.PI?zn+=Ht:zn>Math.PI&&(zn-=Ht),Vn<=zn?a.theta=Math.max(Vn,Math.min(zn,a.theta)):a.theta=a.theta>(Vn+zn)/2?Math.max(Vn,a.theta):Math.min(zn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let _o=!1;if(i.zoomToCursor&&S||i.object.isOrthographicCamera)a.radius=Ce(a.radius);else{let bo=a.radius;a.radius=Ce(a.radius*l),_o=bo!=a.radius}if(w.setFromSpherical(a),w.applyQuaternion(Z),Di.copy(i.target).add(w),i.object.lookAt(i.target),i.enableDamping===!0?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),i.zoomToCursor&&S){let bo=null;if(i.object.isPerspectiveCamera){let Ac=w.length();bo=Ce(Ac*l);let Ll=Ac-bo;i.object.position.addScaledVector(y,Ll),i.object.updateMatrixWorld(),_o=!!Ll}else if(i.object.isOrthographicCamera){let Ac=new R(C.x,C.y,0);Ac.unproject(i.object);let Ll=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),_o=Ll!==i.object.zoom;let Bl=new R(C.x,C.y,0);Bl.unproject(i.object),i.object.position.sub(Bl).add(Ac),i.object.updateMatrixWorld(),bo=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;bo!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(bo).add(i.object.position):(sx.origin.copy(i.object.position),sx.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(sx.direction))<Qee?t.lookAt(i.target):(JB.setFromNormalAndCoplanarPoint(i.object.up,i.target),sx.intersectPlane(JB,i.target))))}else if(i.object.isOrthographicCamera){let bo=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),bo!==i.object.zoom&&(i.object.updateProjectionMatrix(),_o=!0)}return l=1,S=!1,_o||he.distanceToSquared(i.object.position)>s||8*(1-Fe.dot(i.object.quaternion))>s||wt.distanceToSquared(i.target)>s?(i.dispatchEvent(QB),he.copy(i.object.position),Fe.copy(i.object.quaternion),wt.copy(i.target),!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",rt),i.domElement.removeEventListener("pointerdown",Tt),i.domElement.removeEventListener("pointercancel",E),i.domElement.removeEventListener("wheel",Me),i.domElement.removeEventListener("pointermove",P),i.domElement.removeEventListener("pointerup",E),i.domElement.getRootNode().removeEventListener("keydown",pt,{capture:!0}),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",ze),i._domElementKeyEvents=null)};let i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=r.NONE,s=1e-6,a=new gl,c=new gl,l=1,d=new R,u=new z,h=new z,f=new z,m=new z,_=new z,g=new z,p=new z,v=new z,b=new z,y=new R,C=new z,S=!1,M=[],A={},T=!1;function x(w){return w!==null?2*Math.PI/60*i.autoRotateSpeed*w:2*Math.PI/60/60*i.autoRotateSpeed}function I(w){let ce=Math.abs(w*.01);return Math.pow(.95,i.zoomSpeed*ce)}function V(w){c.theta-=w}function W(w){c.phi-=w}let te=function(){let w=new R;return function(Z,he){w.setFromMatrixColumn(he,0),w.multiplyScalar(-Z),d.add(w)}}(),ne=function(){let w=new R;return function(Z,he){i.screenSpacePanning===!0?w.setFromMatrixColumn(he,1):(w.setFromMatrixColumn(he,0),w.crossVectors(i.object.up,w)),w.multiplyScalar(Z),d.add(w)}}(),B=function(){let w=new R;return function(Z,he){let Fe=i.domElement;if(i.object.isPerspectiveCamera){let wt=i.object.position;w.copy(wt).sub(i.target);let Ht=w.length();Ht*=Math.tan(i.object.fov/2*Math.PI/180),te(2*Z*Ht/Fe.clientHeight,i.object.matrix),ne(2*he*Ht/Fe.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(te(Z*(i.object.right-i.object.left)/i.object.zoom/Fe.clientWidth,i.object.matrix),ne(he*(i.object.top-i.object.bottom)/i.object.zoom/Fe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(w){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l/=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(w){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l*=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function se(w,ce){if(!i.zoomToCursor)return;S=!0;let Z=i.domElement.getBoundingClientRect(),he=w-Z.left,Fe=ce-Z.top,wt=Z.width,Ht=Z.height;C.x=he/wt*2-1,C.y=-(Fe/Ht)*2+1,y.set(C.x,C.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ce(w){return Math.max(i.minDistance,Math.min(i.maxDistance,w))}function Ie(w){u.set(w.clientX,w.clientY)}function Qe(w){se(w.clientX,w.clientX),p.set(w.clientX,w.clientY)}function vt(w){m.set(w.clientX,w.clientY)}function Q(w){h.set(w.clientX,w.clientY),f.subVectors(h,u).multiplyScalar(i.rotateSpeed);let ce=i.domElement;V(2*Math.PI*f.x/ce.clientHeight),W(2*Math.PI*f.y/ce.clientHeight),u.copy(h),i.update()}function Ee(w){v.set(w.clientX,w.clientY),b.subVectors(v,p),b.y>0?G(I(b.y)):b.y<0&&U(I(b.y)),p.copy(v),i.update()}function We(w){_.set(w.clientX,w.clientY),g.subVectors(_,m).multiplyScalar(i.panSpeed),B(g.x,g.y),m.copy(_),i.update()}function N(w){se(w.clientX,w.clientY),w.deltaY<0?U(I(w.deltaY)):w.deltaY>0&&G(I(w.deltaY)),i.update()}function we(w){let ce=!1;switch(w.code){case i.keys.UP:w.ctrlKey||w.metaKey||w.shiftKey?W(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,i.keyPanSpeed),ce=!0;break;case i.keys.BOTTOM:w.ctrlKey||w.metaKey||w.shiftKey?W(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,-i.keyPanSpeed),ce=!0;break;case i.keys.LEFT:w.ctrlKey||w.metaKey||w.shiftKey?V(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(i.keyPanSpeed,0),ce=!0;break;case i.keys.RIGHT:w.ctrlKey||w.metaKey||w.shiftKey?V(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(-i.keyPanSpeed,0),ce=!0;break}ce&&(w.preventDefault(),i.update())}function Ne(w){if(M.length===1)u.set(w.pageX,w.pageY);else{let ce=zt(w),Z=.5*(w.pageX+ce.x),he=.5*(w.pageY+ce.y);u.set(Z,he)}}function Ue(w){if(M.length===1)m.set(w.pageX,w.pageY);else{let ce=zt(w),Z=.5*(w.pageX+ce.x),he=.5*(w.pageY+ce.y);m.set(Z,he)}}function O(w){let ce=zt(w),Z=w.pageX-ce.x,he=w.pageY-ce.y,Fe=Math.sqrt(Z*Z+he*he);p.set(0,Fe)}function ye(w){i.enableZoom&&O(w),i.enablePan&&Ue(w)}function Te(w){i.enableZoom&&O(w),i.enableRotate&&Ne(w)}function Pe(w){if(M.length==1)h.set(w.pageX,w.pageY);else{let Z=zt(w),he=.5*(w.pageX+Z.x),Fe=.5*(w.pageY+Z.y);h.set(he,Fe)}f.subVectors(h,u).multiplyScalar(i.rotateSpeed);let ce=i.domElement;V(2*Math.PI*f.x/ce.clientHeight),W(2*Math.PI*f.y/ce.clientHeight),u.copy(h)}function Ae(w){if(M.length===1)_.set(w.pageX,w.pageY);else{let ce=zt(w),Z=.5*(w.pageX+ce.x),he=.5*(w.pageY+ce.y);_.set(Z,he)}g.subVectors(_,m).multiplyScalar(i.panSpeed),B(g.x,g.y),m.copy(_)}function ke(w){let ce=zt(w),Z=w.pageX-ce.x,he=w.pageY-ce.y,Fe=Math.sqrt(Z*Z+he*he);v.set(0,Fe),b.set(0,Math.pow(v.y/p.y,i.zoomSpeed)),G(b.y),p.copy(v);let wt=(w.pageX+ce.x)*.5,Ht=(w.pageY+ce.y)*.5;se(wt,Ht)}function Ke(w){i.enableZoom&&ke(w),i.enablePan&&Ae(w)}function Xe(w){i.enableZoom&&ke(w),i.enableRotate&&Pe(w)}function Tt(w){i.enabled!==!1&&(M.length===0&&(i.domElement.setPointerCapture(w.pointerId),i.domElement.addEventListener("pointermove",P),i.domElement.addEventListener("pointerup",E)),!Je(w)&&(ci(w),w.pointerType==="touch"?Ct(w):re(w)))}function P(w){i.enabled!==!1&&(w.pointerType==="touch"?Oe(w):Re(w))}function E(w){switch(At(w),M.length){case 0:i.domElement.releasePointerCapture(w.pointerId),i.domElement.removeEventListener("pointermove",P),i.domElement.removeEventListener("pointerup",E),i.dispatchEvent(KB),o=r.NONE;break;case 1:let ce=M[0],Z=A[ce];Ct({pointerId:ce,pageX:Z.x,pageY:Z.y});break}}function re(w){let ce;switch(w.button){case 0:ce=i.mouseButtons.LEFT;break;case 1:ce=i.mouseButtons.MIDDLE;break;case 2:ce=i.mouseButtons.RIGHT;break;default:ce=-1}switch(ce){case Ir.DOLLY:if(i.enableZoom===!1)return;Qe(w),o=r.DOLLY;break;case Ir.ROTATE:if(w.ctrlKey||w.metaKey||w.shiftKey){if(i.enablePan===!1)return;vt(w),o=r.PAN}else{if(i.enableRotate===!1)return;Ie(w),o=r.ROTATE}break;case Ir.PAN:if(w.ctrlKey||w.metaKey||w.shiftKey){if(i.enableRotate===!1)return;Ie(w),o=r.ROTATE}else{if(i.enablePan===!1)return;vt(w),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(WD)}function Re(w){switch(o){case r.ROTATE:if(i.enableRotate===!1)return;Q(w);break;case r.DOLLY:if(i.enableZoom===!1)return;Ee(w);break;case r.PAN:if(i.enablePan===!1)return;We(w);break}}function Me(w){i.enabled===!1||i.enableZoom===!1||o!==r.NONE||(w.preventDefault(),i.dispatchEvent(WD),N(De(w)),i.dispatchEvent(KB))}function De(w){let ce=w.deltaMode,Z={clientX:w.clientX,clientY:w.clientY,deltaY:w.deltaY};switch(ce){case 1:Z.deltaY*=16;break;case 2:Z.deltaY*=100;break}return w.ctrlKey&&!T&&(Z.deltaY*=10),Z}function pt(w){w.key==="Control"&&(T=!0,i.domElement.getRootNode().addEventListener("keyup",Ge,{passive:!0,capture:!0}))}function Ge(w){w.key==="Control"&&(T=!1,i.domElement.getRootNode().removeEventListener("keyup",Ge,{passive:!0,capture:!0}))}function ze(w){i.enabled===!1||i.enablePan===!1||we(w)}function Ct(w){switch(Vt(w),M.length){case 1:switch(i.touches.ONE){case As.ROTATE:if(i.enableRotate===!1)return;Ne(w),o=r.TOUCH_ROTATE;break;case As.PAN:if(i.enablePan===!1)return;Ue(w),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(i.touches.TWO){case As.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ye(w),o=r.TOUCH_DOLLY_PAN;break;case As.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Te(w),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(WD)}function Oe(w){switch(Vt(w),o){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;Pe(w),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;Ae(w),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ke(w),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Xe(w),i.update();break;default:o=r.NONE}}function rt(w){i.enabled!==!1&&w.preventDefault()}function ci(w){M.push(w.pointerId)}function At(w){delete A[w.pointerId];for(let ce=0;ce<M.length;ce++)if(M[ce]==w.pointerId){M.splice(ce,1);return}}function Je(w){for(let ce=0;ce<M.length;ce++)if(M[ce]==w.pointerId)return!0;return!1}function Vt(w){let ce=A[w.pointerId];ce===void 0&&(ce=new z,A[w.pointerId]=ce),ce.set(w.pageX,w.pageY)}function zt(w){let ce=w.pointerId===M[0]?M[1]:M[0];return A[ce]}i.domElement.addEventListener("contextmenu",rt),i.domElement.addEventListener("pointerdown",Tt),i.domElement.addEventListener("pointercancel",E),i.domElement.addEventListener("wheel",Me,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",pt,{passive:!0,capture:!0}),this.update()}};var nn=(()=>{class n extends Yr{constructor(e,i){super(),this._camera=e,this.canvas=i,this.renderLoop=q(ya)}createThreeInstance(e){e||(e=[this._camera.objRef,this.canvas?.elementRef.nativeElement]);let i=super.createThreeInstance(e);return this.patchDispatchEvent(i),this.subscribeControlUpdater(i),i}patchDispatchEvent(e){if(e.dispatchEvent){this.origDispatchEventMethod=e.dispatchEvent;let i=this.origDispatchEventMethod;e.dispatchEvent=r=>{i.call(e,r),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(e){e.update!==void 0&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(i=>{e.update(i.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(F(me),F(Dt))}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-control"]],features:[X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var Kee=["*"],In=(()=>{class n extends nn{getType(){return Af}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set target(e){this._objRef&&(this._objRef.target=ve(this._objRef.target,e))}get target(){return this._objRef?.target}set center(e){this._objRef&&(this._objRef.center=ve(this._objRef.center,e))}get center(){return this._objRef?.center}set cursor(e){this._objRef&&(this._objRef.cursor=ve(this._objRef.cursor,e))}get cursor(){return this._objRef?.cursor}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set minTargetRadius(e){this._objRef&&(this._objRef.minTargetRadius=e)}get minTargetRadius(){return this._objRef?.minTargetRadius}set maxTargetRadius(e){this._objRef&&(this._objRef.maxTargetRadius=e)}get maxTargetRadius(){return this._objRef?.maxTargetRadius}set minPolarAngle(e){this._objRef&&(this._objRef.minPolarAngle=e)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(e){this._objRef&&(this._objRef.maxPolarAngle=e)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(e){this._objRef&&(this._objRef.minAzimuthAngle=e)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(e){this._objRef&&(this._objRef.maxAzimuthAngle=e)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(e){this._objRef&&(this._objRef.enableDamping=e)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set zoomToCursor(e){this._objRef&&(this._objRef.zoomToCursor=e)}get zoomToCursor(){return this._objRef?.zoomToCursor}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(e){this._objRef&&(this._objRef.screenSpacePanning=e)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(e){this._objRef&&(this._objRef.keyPanSpeed=e)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set autoRotate(e){this._objRef&&(this._objRef.autoRotate=e)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(e){this._objRef&&(this._objRef.autoRotateSpeed=e)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(e){this._objRef&&(this._objRef.touches=e)}get touches(){return this._objRef?.touches}set target0(e){this._objRef&&(this._objRef.target0=ve(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set position0(e){this._objRef&&(this._objRef.position0=ve(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set zoom0(e){this._objRef&&(this._objRef.zoom0=e)}get zoom0(){return this._objRef?.zoom0}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-orbitControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",target:"target",center:"center",cursor:"cursor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minTargetRadius:"minTargetRadius",maxTargetRadius:"maxTargetRadius",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",zoomToCursor:"zoomToCursor",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Kee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Jee=["*"],fr=(()=>{class n extends Is{getType(){return pl}get isPointLight(){return this._objRef?.isPointLight}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set distance(e){this._objRef&&(this._objRef.distance=e)}get distance(){return this._objRef?.distance}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set decay(e){this._objRef&&(this._objRef.decay=e)}get decay(){return this._objRef?.decay}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set power(e){this._objRef&&(this._objRef.power=e)}get power(){return this._objRef?.power}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:Jee,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var ts=(()=>{class n{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new nt),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new nt),this.mouseExit}get onClick(){return this.click||(this.click=new nt),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new nt),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new nt),this.pointerUp}constructor(e,i){this.host=e,this.raycasterService=i,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:"mouseExit"})}emitOnMouseEnter(e){this.mouseEnter?.emit(e)}emitOnClick(e){this.click?.emit(e)}emitOnPointerDown(e){this.pointerDown?.emit(e)}emitOnPointerUp(e){this.pointerUp?.emit(e)}ngOnDestroy(){this.unSubscribeEvents()}static{this.\u0275fac=function(i){return new(i||n)(F(me,1),F(yc))}}static{this.\u0275dir=Ye({type:n,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"}})}}return n})();var ete=()=>[2,2,2],tte=()=>[1,1,1],ite=()=>[10,10],e3=()=>[10,10,10],nte=()=>[45,2,.1,100],rte=()=>[0,0,0],t3=(()=>{class n{constructor(){this.selected=!1,this.glbPath=`${an}DamagedHelmet.glb`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-controls-example"]],decls:8,vars:17,consts:[[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(H(0,"th-canvas",0)(1,"th-scene"),fe(2,"th-ambientLight",1),H(3,"th-object3D",2),Le("onClick",function(){return r.selected=!r.selected}),ee(),fe(4,"th-gridHelper",3)(5,"th-pointLight",4),H(6,"th-perspectiveCamera",5),fe(7,"th-orbitControls"),ee()()()),i&2&&(j("thStats",!0),k(2),j("intensity",3),k(),j("url",r.glbPath)("scale",r.selected?J(10,ete):J(11,tte)),k(),j("args",J(12,ite)),k(),j("position",J(13,e3))("intensity",3),k(),j("args",J(14,nte))("position",J(15,e3))("lookAt",J(16,rte)))},dependencies:[In,Zt,me,Pr,Ci,fr,Bt,Dt,Xn,ts,An],encapsulation:2,changeDetection:0})}}return n})();var ote=()=>[0,1,0],ste=()=>[10,10],i3=()=>[10,10,10],ate=()=>[45,2,.1,100],cte=()=>[0,0,0],n3=(()=>{class n{constructor(e){this.cdref=e,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${an}DamagedHelmet.glb`,this.modelUrl2=`${an}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl!==this.modelUrl1?this.modelUrl=this.modelUrl1:this.modelUrl=this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelUrl!==this.modelUrl1?this.modelScale=[100,100,100]:this.modelScale=[1,1,1]}onRefChange(e){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}static{this.\u0275fac=function(i){return new(i||n)(F(Ai))}}static{this.\u0275cmp=L({type:n,selectors:[["app-dynamic-loader-example"]],decls:7,vars:17,consts:[[3,"onRender"],[3,"intensity"],["loadGLTF","",3,"onLoaded","objRef$","url","scale","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(H(0,"th-canvas",0),Le("onRender",function(){return r.onBeforeRender()}),H(1,"th-scene"),fe(2,"th-ambientLight",1),H(3,"th-object3D",2),Le("onLoaded",function(){return r.onLoaded()})("objRef$",function(s){return r.onRefChange(s)}),ee(),fe(4,"th-gridHelper",3)(5,"th-pointLight",4)(6,"th-perspectiveCamera",5),ee()()),i&2&&(k(2),j("intensity",3),k(),j("url",r.modelUrl)("scale",r.modelScale)("rotation",r.rotation)("position",J(11,ote)),k(),j("args",J(12,ste)),k(),j("position",J(13,i3))("intensity",3),k(),j("args",J(14,ate))("position",J(15,i3))("lookAt",J(16,cte)))},dependencies:[Zt,me,Pr,Ci,fr,Bt,Dt,Xn],encapsulation:2,changeDetection:0})}}return n})();var r3=(()=>{class n{transform(e,i){return e.bind(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Vo({name:"bind",type:n,pure:!0})}}return n})();var dte=()=>[10,10],o3=()=>[10,10,10],ute=()=>[45,2,.1,100],hte=()=>[0,0,0],fte=(n,t)=>({change:n,end:t});function pte(n,t){if(n&1&&(H(0,"li"),Ft(1),ee()),n&2){let e=t.$implicit;k(),Ks(" ",e," ")}}var s3=(()=>{class n{constructor(e){this.cdref=e,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${an}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(e){this.pushToChangesArray(Object.keys(e).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(e){this.changes.length>=20&&this.changes.shift(),this.changes.push(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Ai))}}static{this.\u0275cmp=L({type:n,selectors:[["app-events-example"]],decls:15,vars:22,consts:[[3,"intensity"],["loadGLTF","",3,"onUpdate","onLoaded","url","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"]],template:function(i,r){i&1&&(H(0,"th-canvas")(1,"th-scene"),fe(2,"th-ambientLight",0),H(3,"th-object3D",1),Le("onUpdate",function(s){return r.logUpdates(s)})("onLoaded",function(){return r.onLoaded()}),ee(),fe(4,"th-gridHelper",2)(5,"th-pointLight",3),H(6,"th-perspectiveCamera",4),fe(7,"th-orbitControls",5),ki(8,"bind"),ee()()(),H(9,"div",6)(10,"h1"),Ft(11,"Updates"),ee(),H(12,"ol"),ar(13,pte,2,1,"li",null,br),ee()()),i&2&&(k(2),j("intensity",3),k(),j("url",r.assetPath)("rotation",r.rotation)("position",r.position),k(),j("args",J(14,dte)),k(),j("position",J(15,o3))("intensity",3),k(),j("args",J(16,ute))("position",J(17,o3))("lookAt",J(18,hte)),k(),j("threeEvents",Wn(19,fte,Wj(8,11,r.onOrbitControlChange,r),r.onOrbitControlEnd)),k(6),cr(r.changes))},dependencies:[In,Zt,me,Pr,Ci,fr,Bt,Dt,Xn,r3],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0})}}return n})();var Tl={name:"ngx-three",version:"0.36.0",scripts:{ng:"ng",start:"ng serve",build:"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/",test:"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless",lint:"ng lint",e2e:"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\ngx-three)",package:"ng build --configuration production ngx-three && npm run copy:docs",format:'prettier-eslint --write "{,!(node_modules|dist)/**/}*.{ts,tsx}"'},private:!0,dependencies:{"@angular/animations":"^18.2.11","@angular/cdk":"^18.2.12","@angular/common":"^18.2.11","@angular/compiler":"^18.2.11","@angular/core":"^18.2.11","@angular/forms":"^18.2.11","@angular/material":"^18.2.12","@angular/platform-browser":"^18.2.11","@angular/platform-browser-dynamic":"^18.2.11","@angular/router":"^18.2.11","@stackblitz/sdk":"^1.9.0","@types/webxr":"^0.5.5","highlight.js":"^11.9.0","lil-gui":"^0.18.2","ngx-highlightjs":"^11.0.0-beta.1","normalize.css":"^8.0.1",rxjs:"~7.8.1","simplex-noise":"^4.0.1",three:"~0.165.0",tslib:"^2.6.2","zone.js":"~0.14.10"},devDependencies:{"@angular-devkit/build-angular":"^18.2.11","@angular-eslint/builder":"~18.4.0","@angular-eslint/eslint-plugin":"~18.4.0","@angular-eslint/eslint-plugin-template":"~18.4.0","@angular-eslint/schematics":"^18.4.0","@angular-eslint/template-parser":"~18.4.0","@angular/cli":"^18.2.11","@angular/compiler-cli":"^18.2.11","@types/jasmine":"^4.3.5","@types/node":"^20.5.3","@types/three":"^0.165.0","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0",acorn:">=8",eslint:"^8.57.0","eslint-plugin-import":"^2.28.1","eslint-plugin-jsdoc":"^46.5.0","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"^5.1.0","jasmine-spec-reporter":"^7.0.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","ng-packagr":"^18.2.1",prettier:"^3.0.2","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.9.1",typescript:"^5.4.5","utility-types":"^3.10.0"}};var $D=`
import "zone.js";`;function a3(n,t){return _i(this,null,function*(){let e=ZD(n),i=Pf(e),r=YD(i),o={"package.json":_te(),"src/index.html":{content:XD(r)},"src/main.ts":{content:qD(i,t)},"src/polyfills.ts":{content:$D},"src/assets.ts":{content:`export const ASSET_PATH = '${ex}';`}};yield gte(n,o),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:o})}).then(s=>s.json()).then(s=>window.open(`https://codesandbox.io/s/${s.sandbox_id}`,"_blank"))})}function gte(n,t){return Promise.all(n.map(e=>fetch(e).then(i=>_i(this,null,function*(){t[`src/app/${Pf(e)}`]={content:yield i.text()}}))))}function _te(){return{content:{main:"src/main.ts",dependencies:pe({"ngx-three":"latest","@types/three":Tl.devDependencies["@types/three"]},Tl.dependencies),devDependencies:pe({},Tl.devDependencies)}}}function Pf(n){return n.replace(/^.*[\\\/]/,"")}function qD(n,t){let e=vte(t)??bte(n),i=yte(t,e);return`
            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
            import { NgModule } from '@angular/core';
            import { BrowserModule } from '@angular/platform-browser';
            import { NgxThreeModule } from 'ngx-three';
            import { FormsModule } from '@angular/forms';
            import { ${i} } from './app/${n.replace(".ts","")}';

            @NgModule({
                imports: [
                    BrowserModule,
                    NgxThreeModule,
                    FormsModule
                ],
                providers: [],
                declarations: [${i}],
                bootstrap: [${e}]
            })
            export class AppModule {}

            platformBrowserDynamic().bootstrapModule(AppModule)
            .catch(err => console.log(err));
            `}function XD(n){return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>NgxThreeDemo</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
    </head>
    <body>
        <${n}></${n}>
    </body>
    </html>
    `}function bte(n){return n.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>t.toUpperCase()).replace(/[-.]/g,"")}function YD(n){return"app-"+n.replace(".component.ts","")}function ZD(n){for(let t of n)if(t.endsWith(".ts"))return t;return""}function c3(n){for(let t of n)if(t.endsWith(".html"))return t}function vte(n){if(n&&n.length>0)return n[0]}function yte(n,t){return n&&n.length>0?n.join(","):t}var xte="https://stackblitz.com",l3=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],wte=["project","search","ports","settings"],Mte=["light","dark"],Ste=["editor","preview"],d3={clickToLoad:n=>Ff("ctl",n),devToolsHeight:n=>u3("devtoolsheight",n),forceEmbedLayout:n=>Ff("embed",n),hideDevTools:n=>Ff("hidedevtools",n),hideExplorer:n=>Ff("hideExplorer",n),hideNavigation:n=>Ff("hideNavigation",n),openFile:n=>h3("file",n),showSidebar:n=>Rte("showSidebar",n),sidebarView:n=>QD("sidebarView",n,wte),startScript:n=>h3("startScript",n),terminalHeight:n=>u3("terminalHeight",n),theme:n=>QD("theme",n,Mte),view:n=>QD("view",n,Ste),zenMode:n=>Ff("zenMode",n)};function f3(n={}){let t=Object.entries(n).map(([e,i])=>i!=null&&d3.hasOwnProperty(e)?d3[e](i):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function Ff(n,t){return t===!0?`${n}=1`:""}function Rte(n,t){return typeof t=="boolean"?`${n}=${t?"1":"0"}`:""}function u3(n,t){if(typeof t=="number"&&!Number.isNaN(t)){let e=Math.min(100,Math.max(0,t));return`${n}=${encodeURIComponent(Math.round(e))}`}return""}function QD(n,t="",e=[]){return e.includes(t)?`${n}=${encodeURIComponent(t)}`:""}function h3(n,t){return(Array.isArray(t)?t:[t]).filter(i=>typeof i=="string"&&i.trim()!=="").map(i=>`${n}=${encodeURIComponent(i)}`).join("&")}function p3(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function t1(n,t){return`${m3(t)}${n}${f3(t)}`}function i1(n,t){let e={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(e,t),`${m3(e)}${n}${f3(e)}`}function m3(n={}){return(typeof n.origin=="string"?n.origin:xte).replace(/\/$/,"")}function n1(n,t,e){if(!t||!n||!n.parentNode)throw new Error("Invalid Element");n.id&&(t.id=n.id),n.className&&(t.className=n.className),Tte(t,e),n.replaceWith(t)}function r1(n){if(typeof n=="string"){let t=document.getElementById(n);if(!t)throw new Error(`Could not find element with id '${n}'`);return t}else if(n instanceof HTMLElement)return n;throw new Error(`Invalid element: ${n}`)}function o1(n){return n&&n.newWindow===!1?"_self":"_blank"}function Tte(n,t={}){let e=Object.hasOwnProperty.call(t,"height")?`${t.height}`:"300",i=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;n.setAttribute("height",e),i?n.setAttribute("width",i):n.setAttribute("style","width:100%;")}var KD=class{constructor(t){this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}request({type:t,payload:e}){return new Promise((i,r)=>{let o=p3();this.pending[o]={resolve:i,reject:r},this.port.postMessage({type:t,payload:Gt(pe({},e),{__reqid:o})})})}messageListener(t){if(typeof t.data.payload?.__reqid!="string")return;let{type:e,payload:i}=t.data,{__reqid:r,__success:o,__error:s}=i;this.pending[r]&&(o?this.pending[r].resolve(this.cleanResult(i)):this.pending[r].reject(s?`${e}: ${s}`:e),delete this.pending[r])}cleanResult(t){let e=pe({},t);return delete e.__reqid,delete e.__success,delete e.__error,Object.keys(e).length?e:null}},JD=class{constructor(t,e){this.editor={openFile:i=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}}),setCurrentFile:i=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:i}}),setTheme:i=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:i}}),setView:i=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:i}}),showSidebar:(i=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:i}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(i=>i?.url??null),setUrl:(i="/")=>{if(typeof i!="string"||!i.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${i}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:i}})}},this._rdc=new KD(t),Object.defineProperty(this.preview,"origin",{value:typeof e.previewOrigin=="string"?e.previewOrigin:null,writable:!1})}applyFsDiff(t){let e=i=>i!==null&&typeof i=="object";if(!e(t)||!e(t.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(t.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},ax=[],e1=class{constructor(t){this.id=p3(),this.element=t,this.pending=new Promise((e,i)=>{let r=({data:l,ports:d})=>{l?.action==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new JD(d[0],l.payload),e(this.vm),s())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(c),window.removeEventListener("message",r)}window.addEventListener("message",r),o();let a=0,c=window.setInterval(()=>{if(this.vm){s();return}if(a>=20){s(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),ax.forEach((l,d)=>{l.id===this.id&&ax.splice(d,1)});return}a++,o()},500)}),ax.push(this)}},Cte=n=>{let t=n instanceof Element?"element":"id";return ax.find(e=>e[t]===n)??null};function Ete(n,t){let e=document.createElement("input");return e.type="hidden",e.name=n,e.value=t,e}function Dte(n){return n.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function g3({template:n,title:t,description:e,dependencies:i,files:r,settings:o}){if(!l3.includes(n)){let l=l3.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}let s=[],a=(l,d,u="")=>{s.push(Ete(l,typeof d=="string"?d:u))};a("project[title]",t),typeof e=="string"&&e.length>0&&a("project[description]",e),a("project[template]",n,"javascript"),i&&(n==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(i))),o&&a("project[settings]",JSON.stringify(o)),Object.entries(r).forEach(([l,d])=>{a(`project[files][${Dte(l)}]`,d)});let c=document.createElement("form");return c.method="POST",c.setAttribute("style","display:none!important;"),c.append(...s),c}function Ate(n,t){let e=g3(n);return e.action=i1("/run",t),e.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${e.outerHTML}
  <script>document.getElementById('${e.id}').submit();<\/script>
</body>
</html>`}function Ite(n,t){let e=g3(n);e.action=t1("/run",t),e.target=o1(t),document.body.appendChild(e),e.submit(),document.body.removeChild(e)}function cx(n){return n?.contentWindow?(Cte(n)??new e1(n)).pending:Promise.reject("Provided element is not an iframe.")}function Pte(n,t){Ite(n,t)}function Fte(n,t){let e=t1(`/edit/${n}`,t),i=o1(t);window.open(e,i)}function kte(n,t){let e=t1(`/github/${n}`,t),i=o1(t);window.open(e,i)}function jte(n,t,e){let i=r1(n),r=Ate(t,e),o=document.createElement("iframe");return n1(i,o,e),o.contentDocument?.write(r),cx(o)}function Ote(n,t,e){let i=r1(n),r=document.createElement("iframe");return r.src=i1(`/edit/${t}`,e),n1(i,r,e),cx(r)}function Nte(n,t,e){let i=r1(n),r=document.createElement("iframe");return r.src=i1(`/github/${t}`,e),n1(i,r,e),cx(r)}var _3={connect:cx,embedGithubProject:Nte,embedProject:jte,embedProjectId:Ote,openGithubProject:kte,openProject:Pte,openProjectId:Fte};function b3(n,t){return _i(this,null,function*(){let e=ZD(n),i=c3(n),r=Pf(e),o=YD(r),s={template:"angular-cli",title:o,description:"ngx-three example "+o,files:{"src/index.html":XD(o),"src/main.ts":qD(r,t),"src/polyfills.ts":$D,"src/assets.ts":`export const ASSET_PATH = '${ex}';`},dependencies:pe({"ngx-three":"latest","@types/three":Tl.devDependencies["@types/three"]},Tl.dependencies),devDependencies:pe({},Tl.devDependencies)};yield Lte(n,s.files);let a=i?{openFile:`src/app/${Pf(i)}`}:void 0;_3.openProject(s,a)})}function Lte(n,t){return Promise.all(n.map(e=>fetch(e).then(i=>_i(this,null,function*(){let r=yield i.text();t[`src/app/${Pf(e)}`]=r}))))}var Sa=class{constructor(){this.urls=[],this.fileNames=[]}setUrls(t){this.urls=t,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(t=>t.split("/").pop()??"")}toStackblitz(t){t?.preventDefault(),b3(this.urls,this.declarations)}toCodeSandbox(t){t?.preventDefault(),a3(this.urls,this.declarations)}getLanguage(t){switch(t.substring(t.lastIndexOf(".")+1)){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"css":return"css";default:return"typescript"}}};var c1;try{c1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{c1=!1}var xi=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?uh(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||c1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(de(Vr))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fg;function Bte(){if(fg==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fg=!0}))}finally{fg=fg||!1}return fg}function Cl(n){return Bte()?n:!!n.capture}var Fs=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Fs||{}),lx,su;function dx(){if(su==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return su=!1,su;if("scrollBehavior"in document.documentElement.style)su=!0;else{let n=Element.prototype.scrollTo;n?su=!/\{\s*\[native code\]\s*\}/.test(n.toString()):su=!1}}return su}function kf(){if(typeof document!="object"||!document)return Fs.NORMAL;if(lx==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),lx=Fs.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,lx=n.scrollLeft===0?Fs.NEGATED:Fs.INVERTED),n.remove()}return lx}var a1;function Ute(){if(a1==null){let n=typeof document<"u"?document.head:null;a1=!!(n&&(n.createShadowRoot||n.attachShadow))}return a1}function v3(n){if(Ute()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function is(n){return n.composedPath?n.composedPath()[0]:n.target}function pg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function jf(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function fo(n){return n!=null&&`${n}`!="false"}function Sc(n,t=0){return Vte(n)?Number(n):arguments.length===2?t:0}function Vte(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Of(n){return Array.isArray(n)?n:[n]}function Bn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function ks(n){return n instanceof et?n.nativeElement:n}function zte(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let t=0;t<n.addedNodes.length;t++)if(!(n.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<n.removedNodes.length;t++)if(!(n.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var y3=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hte=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map,this._ngZone=q($e)}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){let i=ks(e);return new It(r=>{let s=this._observeElement(i).pipe(dt(a=>a.filter(c=>!zte(c))),li(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let i=new at,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}static{this.\u0275fac=function(i){return new(i||n)(de(y3))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ux=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Sc(e),this._subscribe()}constructor(e,i){this._contentObserver=e,this._elementRef=i,this.event=new nt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(us(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(F(Hte),F(et))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Mi],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[dn]})}}return n})(),hx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[y3]})}}return n})();var M3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})(),x3=new Set,au,Gte=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$te}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&Wte(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(i){return new(i||n)(de(xi),de(Rp,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wte(n,t){if(!x3.has(n))try{au||(au=document.createElement("style"),t&&au.setAttribute("nonce",t),au.setAttribute("type","text/css"),document.head.appendChild(au)),au.sheet&&(au.sheet.insertRule(`@media ${n} {body{ }}`,0),x3.add(n))}catch(e){console.error(e)}}function $te(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var fx=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new at}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return w3(Of(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=w3(Of(e)).map(s=>this._registerQuery(s).observable),o=$l(r);return o=Fc(o.pipe(xr(1)),o.pipe(Xl(1),us(0))),o.pipe(dt(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new It(s=>{let a=c=>this._zone.run(()=>s.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(yo(i),dt(({matches:s})=>({query:e,matches:s})),gi(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static{this.\u0275fac=function(i){return new(i||n)(de(Gte),de($e))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function w3(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var S3={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var hie=200,d1=class{constructor(t,e){this._letterKeyStream=new at,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new at,this.selectedItem=this._selectedItem;let i=typeof e?.debounceInterval=="number"?e.debounceInterval:hie;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Hi(e=>this._pressedLetters.push(e)),us(t),li(()=>this._pressedLetters.length>0),dt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},u1=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=mi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new at,this.change=new at,t instanceof qs?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):ov(t)&&(this._effectRef=lh(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new d1(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||jf(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),r=e[i];this._activeItem=r??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex+t*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return ov(this._items)?this._items():this._items instanceof qs?this._items.toArray():this._items}_itemsChanged(t){if(this._typeahead?.setItems(t),this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e,this._typeahead?.setCurrentSelectedItemIndex(e))}}};var gx=class extends u1{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var f1=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return pie(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=fie(wie(e));if(i&&(R3(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=R3(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!yie(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return xie(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(i){return new(i||n)(de(xi))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fie(n){try{return n.frameElement}catch{return null}}function pie(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function mie(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function gie(n){return bie(n)&&n.type=="hidden"}function _ie(n){return vie(n)&&n.hasAttribute("href")}function bie(n){return n.nodeName.toLowerCase()=="input"}function vie(n){return n.nodeName.toLowerCase()=="a"}function E3(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function R3(n){if(!E3(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function yie(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function xie(n){return gie(n)?!1:mie(n)||_ie(n)||n.hasAttribute("contenteditable")||E3(n)}function wie(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var h1=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,o=!1,s){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Wo(t,{injector:this._injector}):setTimeout(t)}},D3=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._injector=q(Xi),this._document=r}create(e,i=!1){return new h1(e,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(de(f1),de($e),de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function p1(n){return n.buttons===0||n.detail===0}function m1(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Mie=new Se("cdk-input-modality-detector-options"),Sie={ignoreKeys:[18,17,224,91,16]},A3=650,Nf=Cl({passive:!0,capture:!0}),Rie=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new Sn(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=is(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<A3||(this._modality.next(p1(s)?"keyboard":"mouse"),this._mostRecentTarget=is(s))},this._onTouchstart=s=>{if(m1(s)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=is(s)},this._options=pe(pe({},Sie),o),this.modalityDetected=this._modality.pipe(Xl(1)),this.modalityChanged=this.modalityDetected.pipe(V_()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Nf),r.addEventListener("mousedown",this._onMousedown,Nf),r.addEventListener("touchstart",this._onTouchstart,Nf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Nf),document.removeEventListener("mousedown",this._onMousedown,Nf),document.removeEventListener("touchstart",this._onTouchstart,Nf))}static{this.\u0275fac=function(i){return new(i||n)(de(xi),de($e),de(yt),de(Mie,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mx=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(mx||{}),Tie=new Se("cdk-focus-monitor-default-options"),px=Cl({passive:!0,capture:!0}),mg=(()=>{class n{constructor(e,i,r,o,s){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new at,this._rootNodeFocusAndBlurListener=a=>{let c=is(a);for(let l=c;l;l=l.parentElement)a.type==="focus"?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||mx.IMMEDIATE}monitor(e,i=!1){let r=ks(e);if(!this._platform.isBrowser||r.nodeType!==1)return mt();let o=v3(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new at,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=ks(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=ks(e),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===mx.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===mx.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?A3:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=is(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,px),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,px)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,px),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,px),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(de($e),de(xi),de(Rie),de(yt,8),de(Tie,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I3=(()=>{class n{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new nt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(mg))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}}return n})(),cu=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(cu||{}),T3="cdk-high-contrast-black-on-white",C3="cdk-high-contrast-white-on-black",l1="cdk-high-contrast-active",P3=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=q(fx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return cu.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return cu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return cu.BLACK_ON_WHITE}return cu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(l1,T3,C3),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===cu.BLACK_ON_WHITE?e.add(l1,T3):i===cu.WHITE_ON_BLACK&&e.add(l1,C3)}}static{this.\u0275fac=function(i){return new(i||n)(de(xi),de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Cie=new Se("cdk-dir-doc",{providedIn:"root",factory:Eie});function Eie(){return q(yt)}var Die=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Aie(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Die.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Ta=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new nt,e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=Aie(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(de(Cie,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var El=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();function Pie(){return!0}var Fie=new Se("mat-sanity-checks",{providedIn:"root",factory:Pie}),wi=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return pg()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(i){return new(i||n)(de(P3),de(Fie,8),de(yt))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[El,El]})}}return n})();var Fo=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Fo||{}),b1=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Fo.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},k3=Cl({passive:!0,capture:!0}),v1=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=is(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,k3)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,k3)))}},j3={enterDuration:225,exitDuration:150},kie=800,O3=Cl({passive:!0,capture:!0}),N3=["mousedown","touchstart"],L3=["mouseup","mouseleave","touchend","touchcancel"],gg=class n{static{this._eventManager=new v1}constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ks(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=pe(pe({},j3),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||jie(t,e,r),a=t-r.left,c=e-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,_=new b1(this,d,i,m);d.style.transform="scale3d(1, 1, 1)",_.state=Fo.FADING_IN,i.persistent||(this._mostRecentTransientRipple=_);let g=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let p=()=>{g&&(g.fallbackTimer=null),clearTimeout(b),this._finishRippleTransition(_)},v=()=>this._destroyRipple(_),b=setTimeout(v,l+100);d.addEventListener("transitionend",p),d.addEventListener("transitioncancel",v),g={onTransitionEnd:p,onTransitionCancel:v,fallbackTimer:b}}),this._activeRipples.set(_,g),(m||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===Fo.FADING_OUT||t.state===Fo.HIDDEN)return;let e=t.element,i=pe(pe({},j3),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Fo.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=ks(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,N3.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{L3.forEach(e=>{this._triggerElement.addEventListener(e,this,O3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Fo.FADING_IN?this._startFadeOutTransition(t):t.state===Fo.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Fo.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Fo.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=p1(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+kie;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!m1(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Fo.VISIBLE||t.config.terminateOnPointerUp&&t.state===Fo.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(N3.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(L3.forEach(e=>t.removeEventListener(e,this,O3)),this._pointerUpEventsRegistered=!1))}};function jie(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var lu=new Se("mat-ripple-global-options"),_g=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new gg(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:pe(pe(pe({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,pe(pe({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,pe(pe({},this.rippleConfig),e))}static{this.\u0275fac=function(i){return new(i||n)(F(et),F($e),F(xi),F(lu,8),F(Gn,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Wt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),du=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,wi]})}}return n})();var y1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi]})}}return n})();var x1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[du,wi,y1]})}}return n})(),B3={capture:!0},U3=["focus","mousedown","mouseenter","touchstart"],g1="mat-ripple-loader-uninitialized",_1="mat-ripple-loader-class-name",V3="mat-ripple-loader-centered",bx="mat-ripple-loader-disabled",z3=(()=>{class n{constructor(){this._document=q(yt,{optional:!0}),this._animationMode=q(Gn,{optional:!0}),this._globalRippleOptions=q(lu,{optional:!0}),this._platform=q(xi),this._ngZone=q($e),this._hosts=new Map,this._onInteraction=e=>{let i=is(e);if(i instanceof HTMLElement){let r=i.closest(`[${g1}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(let e of U3)this._document?.addEventListener(e,this._onInteraction,B3)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of U3)this._document?.removeEventListener(i,this._onInteraction,B3)}configureRipple(e,i){e.setAttribute(g1,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(_1))&&e.setAttribute(_1,i.className||""),i.centered&&e.setAttribute(V3,""),i.disabled&&e.setAttribute(bx,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,i){let r=this._hosts.get(e);if(r){r.disabled=i;return}i?e.setAttribute(bx,""):e.removeAttribute(bx)}_createRipple(e){if(!this._document)return;let i=this._hosts.get(e);if(i)return i;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(_1)),e.append(r);let o=new _g(new et(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,o.centered=e.hasAttribute(V3),o.disabled=e.hasAttribute(bx),this.attachRipple(e,o),o}attachRipple(e,i){e.removeAttribute(g1),this._hosts.set(e,i)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Oie=["mat-button",""],Nie=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Lie=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Bie=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Uie=["mat-icon-button",""],Vie=["*"];var zie=new Se("MAT_BUTTON_CONFIG");var Hie=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],H3=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,i,r,o){this._elementRef=e,this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=q(mg),this._rippleLoader=q(z3),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let s=q(zie,{optional:!0}),a=e.nativeElement,c=a.classList;this.disabledInteractive=s?.disabledInteractive??!1,this.color=s?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:l,mdcClasses:d}of Hie)a.hasAttribute(l)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){ih()}}static{this.\u0275dir=Ye({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Mi],disabled:[2,"disabled","disabled",Mi],ariaDisabled:[2,"aria-disabled","ariaDisabled",Mi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Mi]},features:[dn]})}}return n})();var vx=(()=>{class n extends H3{constructor(e,i,r,o){super(e,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(xi),F($e),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Li("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),qo(r.color?"mat-"+r.color:""),Wt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[X,Ti],attrs:Oie,ngContentSelectors:Lie,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(ae(Nie),fe(0,"span",0),K(1),H(2,"span",1),K(3,1),ee(),K(4,2),fe(5,"span",2)(6,"span",3)),i&2&&Wt("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var G3=(()=>{class n extends H3{constructor(e,i,r,o){super(e,i,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(xi),F($e),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Li("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),qo(r.color?"mat-"+r.color:""),Wt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[X,Ti],attrs:Uie,ngContentSelectors:Vie,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(ae(),fe(0,"span",0),K(1),fe(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Bie],encapsulation:2,changeDetection:0})}}return n})();var bg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,du,wi]})}}return n})();var Gie=["*"],yx;function Wie(){if(yx===void 0&&(yx=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(yx=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return yx}function vg(n){return Wie()?.createHTML(n)||n}function $3(n){return Error(`Unable to find icon with the name "${n}"`)}function $ie(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function q3(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function X3(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Rc=class{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},qie=(()=>{class n{constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new Rc(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){let s=this._sanitizer.sanitize(sr.HTML,r);if(!s)throw X3(r);let a=vg(s);return this._addSvgIconConfig(e,i,new Rc("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Rc(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let o=this._sanitizer.sanitize(sr.HTML,i);if(!o)throw X3(i);let s=vg(o);return this._addSvgIconSetConfig(e,new Rc("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(sr.RESOURCE_URL,e);if(!i)throw q3(e);let r=this._cachedIconsByUrl.get(i);return r?mt(xx(r)):this._loadSvgIconFromConfig(new Rc(e,null)).pipe(Hi(o=>this._cachedIconsByUrl.set(i,o)),dt(o=>xx(o)))}getNamedSvgIcon(e,i=""){let r=Y3(i,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):Kr($3(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?mt(xx(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(dt(i=>xx(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return mt(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Lr(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(sr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),mt(null)})));return ql(o).pipe(dt(()=>{let s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw $3(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Hi(i=>e.svgText=i),dt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?mt(null):this._fetchIcon(e).pipe(Hi(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(vg("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(vg("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw $ie();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(sr.RESOURCE_URL,i);if(!s)throw q3(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(dt(l=>vg(l)),Us(()=>this._inProgressUrlFetches.delete(s)),lp());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(Y3(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,e);if(o)return Xie(o)?new Rc(o.url,null,o.options):new Rc(o,null)}}static{this.\u0275fac=function(i){return new(i||n)(de(Op,8),de(Up),de(yt,8),de(io))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xx(n){return n.cloneNode(!0)}function Y3(n,t){return n+":"+t}function Xie(n){return!!(n.url&&n.options)}var Yie=new Se("MAT_ICON_DEFAULT_OPTIONS"),Zie=new Se("mat-icon-location",{providedIn:"root",factory:Qie});function Qie(){let n=q(yt),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var Z3=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Kie=Z3.map(n=>`[${n}]`).join(", "),Jie=/^url\(['"]?#(.*?)['"]?\)$/,wx=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,o,s,a){this._elementRef=e,this._iconRegistry=i,this._location=o,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=mi.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(Kie),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)Z3.forEach(s=>{let a=i[o],c=a.getAttribute(s),l=c?c.match(Jie):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(xr(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(qie),$c("aria-hidden"),F(Zie),F(io),F(Yie,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Li("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),qo(r.color?"mat-"+r.color:""),Wt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Mi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[dn,Ti],ngContentSelectors:Gie,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),yg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,wi]})}}return n})();var ene=["*"];var tne=new Se("MAT_CARD_CONFIG"),K3=(()=>{class n{constructor(e){this.appearance=e?.appearance||"raised"}static{this.\u0275fac=function(i){return new(i||n)(F(tne,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&Wt("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Ti],ngContentSelectors:ene,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-app-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-app-corner-medium));border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color, var(--mat-app-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-app-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-app-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-app-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-app-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-app-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-app-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-app-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-app-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-app-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-app-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-app-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-app-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return n})();var J3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return n})();var eU=(()=>{class n{constructor(){this.align="start"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,r){i&2&&Wt("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0})}}return n})();var w1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,Yo,wi]})}}return n})();var xg=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},M1=class extends xg{constructor(t,e,i,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},uu=class extends xg{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},S1=class extends xg{constructor(t){super(),this.element=t instanceof et?t.nativeElement:t}},Mx=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof M1)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof uu)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof S1)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Sx=class extends Mx{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Xi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var tU=(()=>{class n extends uu{constructor(e,i){super(e,i)}static{this.\u0275fac=function(i){return new(i||n)(F(Ur),F(_r))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[X]})}}return n})();var Rx=(()=>{class n extends Mx{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new nt,this.attachDomPortal=o=>{this._document;let s=o.element;s.parentNode;let a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=i.createComponent(o,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(i){return new(i||n)(F(Uo),F(_r),F(yt))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[X]})}}return n})();var iU=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();var nne=20,Lf=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new at,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=nne){return this._platform.isBrowser?new It(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(U_(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(li(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=ks(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Lo(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(de($e),de(xi),de(yt,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dl=(()=>{class n{constructor(e,i,r,o){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=o,this._destroyed=new at,this._elementScrolled=new It(s=>this.ngZone.runOutsideAngular(()=>Lo(this.elementRef.nativeElement,"scroll").pipe(gi(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&kf()!=Fs.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),kf()==Fs.INVERTED?e.left=e.right:kf()==Fs.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;dx()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:i:e=="end"&&(e=s?i:r),s&&kf()==Fs.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&kf()==Fs.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Lf),F($e),F(Ta,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),rne=20,Al=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new at,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=rne){return e>0?this._change.pipe(U_(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(de(xi),de($e),de(yt,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})(),R1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[El,hu,El,hu]})}}return n})();var C1=class{constructor(t){this._box=t,this._destroyed=new at,this._resizeSubject=new at,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new It(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(li(e=>e.some(i=>i.target===t)),Na({bufferSize:1,refCount:!0}),gi(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},nU=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=q($e),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new C1(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ni=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ni||{}),Ca="*";function Tx(n,t){return{type:ni.Trigger,name:n,definitions:t,options:{}}}function fu(n,t=null){return{type:ni.Animate,styles:t,timings:n}}function rU(n,t=null){return{type:ni.Sequence,steps:n,options:t}}function ns(n){return{type:ni.Style,styles:n,offset:null}}function pu(n,t,e){return{type:ni.State,name:n,styles:t,options:e}}function mu(n,t,e=null){return{type:ni.Transition,expr:n,animation:t,options:e}}var Il=class{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},wg=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Cx="!";var I1=["*"];function ane(n,t){n&1&&K(0)}var cne=["tabListContainer"],lne=["tabList"],dne=["tabListInner"],une=["nextPaginator"],hne=["previousPaginator"],fne=n=>({animationDuration:n}),pne=(n,t)=>({value:n,params:t});function mne(n,t){}var gne=["tabBodyWrapper"],_ne=["tabHeader"];function bne(n,t){}function vne(n,t){if(n&1&&Fi(0,bne,0,0,"ng-template",12),n&2){let e=$t().$implicit;j("cdkPortalOutlet",e.templateLabel)}}function yne(n,t){if(n&1&&Ft(0),n&2){let e=$t().$implicit;Xc(e.textLabel)}}function xne(n,t){if(n&1){let e=Yt();H(0,"div",7,2),Le("click",function(){let r=ht(e),o=r.$implicit,s=r.$index,a=$t(),c=Pt(1);return ft(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let o=ht(e).$index,s=$t();return ft(s._tabFocusChanged(r,o))}),fe(2,"span",8)(3,"div",9),H(4,"span",10)(5,"span",11),Fi(6,vne,1,1,null,12)(7,yne,1,1),ee()()()}if(n&2){let e=t.$implicit,i=t.$index,r=Pt(1),o=$t();qo(e.labelClass),Wt("mdc-tab--active",o.selectedIndex===i),j("id",o._getTabLabelId(i))("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),Li("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),k(3),j("matRippleTrigger",r)("matRippleDisabled",e.disabled||o.disableRipple),k(3),gn(e.templateLabel?6:7)}}function wne(n,t){n&1&&K(0)}function Mne(n,t){if(n&1){let e=Yt();H(0,"mat-tab-body",13),Le("_onCentered",function(){ht(e);let r=$t();return ft(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){ht(e);let o=$t();return ft(o._setTabBodyWrapperHeight(r))}),ee()}if(n&2){let e=t.$implicit,i=t.$index,r=$t();qo(e.bodyClass),Wt("mat-mdc-tab-body-active",r.selectedIndex===i),j("id",r._getTabContentId(i))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Li("tabindex",r.contentTabIndex!=null&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))("aria-hidden",r.selectedIndex!==i)}}var Sne=new Se("MatTabContent"),Rne=(()=>{class n{constructor(e){this.template=e}static{this.\u0275fac=function(i){return new(i||n)(F(Ur))}}static{this.\u0275dir=Ye({type:n,selectors:[["","matTabContent",""]],standalone:!0,features:[ie([{provide:Sne,useExisting:n}])]})}}return n})(),Tne=new Se("MatTabLabel"),aU=new Se("MAT_TAB"),Cne=(()=>{class n extends tU{constructor(e,i,r){super(e,i),this._closestTab=r}static{this.\u0275fac=function(i){return new(i||n)(F(Ur),F(_r),F(aU,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[ie([{provide:Tne,useExisting:n}]),X]})}}return n})(),cU=new Se("MAT_TAB_GROUP"),P1=(()=>{class n{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,i){this._viewContainerRef=e,this._closestTabGroup=i,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new at,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new uu(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static{this.\u0275fac=function(i){return new(i||n)(F(_r),F(cU,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-tab"]],contentQueries:function(i,r,o){if(i&1&&(Yi(o,Cne,5),Yi(o,Rne,7,Ur)),i&2){let s;ct(s=lt())&&(r.templateLabel=s.first),ct(s=lt())&&(r._explicitContent=s.first)}},viewQuery:function(i,r){if(i&1&&qt(Ur,7),i&2){let o;ct(o=lt())&&(r._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Mi],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[ie([{provide:aU,useExisting:n}]),dn,Hn,Ti],ngContentSelectors:I1,decls:1,vars:0,template:function(i,r){i&1&&(ae(),Fi(0,ane,1,0,"ng-template"))},encapsulation:2})}}return n})(),E1="mdc-tab-indicator--active",oU="mdc-tab-indicator--no-transition",D1=class{constructor(t){this._items=t}hide(){this._items.forEach(t=>t.deactivateInkBar())}alignToElement(t){let e=this._items.find(r=>r.elementRef.nativeElement===t),i=this._currentItem;if(e!==i&&(i?.deactivateInkBar(),e)){let r=i?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(r),this._currentItem=e}}},Ene=(()=>{class n{constructor(){this._elementRef=q(et),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let i=this._elementRef.nativeElement;if(!e||!i.getBoundingClientRect||!this._inkBarContentElement){i.classList.add(E1);return}let r=i.getBoundingClientRect(),o=e.width/r.width,s=e.left-r.left;i.classList.add(oU),this._inkBarContentElement.style.setProperty("transform",`translateX(${s}px) scaleX(${o})`),i.getBoundingClientRect(),i.classList.remove(oU),i.classList.add(E1),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(E1)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,i=this._inkBarElement=e.createElement("span"),r=this._inkBarContentElement=e.createElement("span");i.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",i.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Mi]},features:[dn]})}}return n})();var lU=(()=>{class n extends Ene{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static{this.\u0275fac=function(i){return new(i||n)(F(et))}}static{this.\u0275dir=Ye({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,r){i&2&&(Li("aria-disabled",!!r.disabled),Wt("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[2,"disabled","disabled",Mi]},standalone:!0,features:[dn,X]})}}return n})(),sU=Cl({passive:!0}),Dne=650,Ane=100,Ine=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let i=isNaN(e)?0:e;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}constructor(e,i,r,o,s,a,c){this._elementRef=e,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=o,this._ngZone=s,this._platform=a,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new at,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new at,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new nt,this.indexFocused=new nt,this._sharedResizeObserver=q(nU),this._injector=q(Xi),s.runOutsideAngular(()=>{Lo(e.nativeElement,"mouseleave").pipe(gi(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Lo(this._previousPaginator.nativeElement,"touchstart",sU).pipe(gi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Lo(this._nextPaginator.nativeElement,"touchstart",sU).pipe(gi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:mt("ltr"),i=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(us(32),gi(this._destroyed)),r=this._viewportRuler.change(150).pipe(gi(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new gx(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),Wo(o,{injector:this._injector}),ds(e,r,i,this._items.changes,this._itemsResized()).pipe(gi(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?pn:this._items.changes.pipe(yo(this._items),Pn(e=>new It(i=>this._ngZone.runOutsideAngular(()=>{let r=new ResizeObserver(o=>i.next(o));return e.forEach(o=>r.observe(o.elementRef.nativeElement)),()=>{r.disconnect()}}))),Xl(1),li(e=>e.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!jf(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let i=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?i.scrollLeft=0:i.scrollLeft=i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,i=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let i=this._tabListContainer.nativeElement.offsetWidth,r=(e=="before"?-1:1)*i/3;return this._scrollTo(this._scrollDistance+r)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let i=this._items?this._items.toArray()[e]:null;if(!i)return;let r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:s}=i.elementRef.nativeElement,a,c;this._getLayoutDirection()=="ltr"?(a=o,c=a+s):(c=this._tabListInner.nativeElement.offsetWidth-o,a=c-s);let l=this.scrollDistance,d=this.scrollDistance+r;a<l?this.scrollDistance-=l-a:c>d&&(this.scrollDistance+=Math.min(c-d,a-l))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,i=this._elementRef.nativeElement.offsetWidth,r=e-i>=5;r||(this.scrollDistance=0),r!==this._showPaginationControls&&(this._showPaginationControls=r,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,i=this._tabListContainer.nativeElement.offsetWidth;return e-i||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=e?e.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,i){i&&i.button!=null&&i.button!==0||(this._stopInterval(),cp(Dne,Ane).pipe(gi(ds(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:r,distance:o}=this._scrollHeader(e);(o===0||o>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Ai),F(Al),F(Ta,8),F($e),F(xi),F(Gn,8))}}static{this.\u0275dir=Ye({type:n,inputs:{disablePagination:[2,"disablePagination","disablePagination",Mi],selectedIndex:[2,"selectedIndex","selectedIndex",ld]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[dn]})}}return n})(),Pne=(()=>{class n extends Ine{constructor(e,i,r,o,s,a,c){super(e,i,r,o,s,a,c),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new D1(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Ai),F(Al),F(Ta,8),F($e),F(xi),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-tab-header"]],contentQueries:function(i,r,o){if(i&1&&Yi(o,lU,4),i&2){let s;ct(s=lt())&&(r._items=s)}},viewQuery:function(i,r){if(i&1&&(qt(cne,7),qt(lne,7),qt(dne,7),qt(une,5),qt(hne,5)),i&2){let o;ct(o=lt())&&(r._tabListContainer=o.first),ct(o=lt())&&(r._tabList=o.first),ct(o=lt())&&(r._tabListInner=o.first),ct(o=lt())&&(r._nextPaginator=o.first),ct(o=lt())&&(r._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,r){i&2&&Wt("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl",r._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",Mi]},standalone:!0,features:[dn,X,Ti],ngContentSelectors:I1,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(i,r){if(i&1){let o=Yt();ae(),H(0,"div",5,0),Le("click",function(){return ht(o),ft(r._handlePaginatorClick("before"))})("mousedown",function(a){return ht(o),ft(r._handlePaginatorPress("before",a))})("touchend",function(){return ht(o),ft(r._stopInterval())}),fe(2,"div",6),ee(),H(3,"div",7,1),Le("keydown",function(a){return ht(o),ft(r._handleKeydown(a))}),H(5,"div",8,2),Le("cdkObserveContent",function(){return ht(o),ft(r._onContentChanges())}),H(7,"div",9,3),K(9),ee()()(),H(10,"div",10,4),Le("mousedown",function(a){return ht(o),ft(r._handlePaginatorPress("after",a))})("click",function(){return ht(o),ft(r._handlePaginatorClick("after"))})("touchend",function(){return ht(o),ft(r._stopInterval())}),fe(12,"div",6),ee()}i&2&&(Wt("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),j("matRippleDisabled",r._disableScrollBefore||r.disableRipple),k(3),Wt("_mat-animation-noopable",r._animationMode==="NoopAnimations"),k(2),Li("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null),k(5),Wt("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),j("matRippleDisabled",r._disableScrollAfter||r.disableRipple))},dependencies:[_g,ux],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}}return n})(),Fne=new Se("MAT_TABS_CONFIG"),kne={translateTab:Tx("translateTab",[pu("center, void, left-origin-center, right-origin-center",ns({transform:"none",visibility:"visible"})),pu("left",ns({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),pu("right",ns({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),mu("* => left, * => right, left => center, right => center",fu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),mu("void => left-origin-center",[ns({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),fu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),mu("void => right-origin-center",[ns({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),fu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},jne=(()=>{class n extends Rx{constructor(e,i,r,o){super(e,i,o),this._host=r,this._centeringSub=mi.EMPTY,this._leavingSub=mi.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(yo(this._host._isCenterPosition(this._host._position))).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(F(Uo),F(_r),F(_e(()=>dU)),F(yt))}}static{this.\u0275dir=Ye({type:n,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[X]})}}return n})(),dU=(()=>{class n{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,i,r){this._elementRef=e,this._dir=i,this._dirChangeSubscription=mi.EMPTY,this._translateTabComplete=new at,this._onCentering=new nt,this._beforeCentering=new nt,this._afterLeavingCenter=new nt,this._onCentered=new nt(!0),this.animationDuration="500ms",this.preserveContent=!1,i&&(this._dirChangeSubscription=i.change.subscribe(o=>{this._computePositionAnimationState(o),r.markForCheck()})),this._translateTabComplete.subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){let i=this._isCenterPosition(e.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(e){return e=="center"||e=="left-origin-center"||e=="right-origin-center"}_computePositionAnimationState(e=this._getLayoutDirection()){this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(e){let i=this._getLayoutDirection();return i=="ltr"&&e<=0||i=="rtl"&&e>0?"left-origin-center":"right-origin-center"}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Ta,8),F(Ai))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-tab-body"]],viewQuery:function(i,r){if(i&1&&qt(Rx,5),i&2){let o;ct(o=lt())&&(r._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Ti],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(i,r){if(i&1){let o=Yt();H(0,"div",1,0),Le("@translateTab.start",function(a){return ht(o),ft(r._onTranslateTabStarted(a))})("@translateTab.done",function(a){return ht(o),ft(r._translateTabComplete.next(a))}),Fi(2,mne,0,0,"ng-template",2),ee()}i&2&&j("@translateTab",Wn(3,pne,r._position,bt(1,fne,r.animationDuration)))},dependencies:[jne,Dl],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[kne.translateTab]}})}}return n})(),One=0,Nne=!0,uU=(()=>{class n{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){let i=e+"";this._animationDuration=/^\d+$/.test(i)?e+"ms":i}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){if(!Nne)throw new Error("mat-tab-group background color must be set through the Sass theming API");let i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&i.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,i,r,o){this._elementRef=e,this._changeDetectorRef=i,this._animationMode=o,this._tabs=new qs,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=mi.EMPTY,this._tabLabelSubscription=mi.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new nt,this.focusChange=new nt,this.animationDone=new nt,this.selectedTabChange=new nt(!0),this._isServer=!q(xi).isBrowser,this._groupId=One++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=r&&r.disablePagination!=null?r.disablePagination:!1,this.dynamicHeight=r&&r.dynamicHeight!=null?r.dynamicHeight:!1,r?.contentTabIndex!=null&&(this.contentTabIndex=r.contentTabIndex),this.preserveContent=!!r?.preserveContent,this.fitInkBarToContent=r&&r.fitInkBarToContent!=null?r.fitInkBarToContent:!1,this.stretchTabs=r&&r.stretchTabs!=null?r.stretchTabs:!0}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let i=this._selectedIndex==null;if(!i){this.selectedTabChange.emit(this._createChangeEvent(e));let r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,o)=>r.isActive=o===e),i||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-e,this._selectedIndex!=null&&i.position==0&&!i.origin&&(i.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let i=this._tabs.toArray(),r;for(let o=0;o<i.length;o++)if(i[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,r=i[o];break}!r&&i[e]&&Promise.resolve().then(()=>{i[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(yo(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let i=this._tabHeader;i&&(i.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let i=new A1;return i.index=e,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[e]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=ds(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,i,r){i.focusIndex=r,e.disabled||(this.selectedIndex=r)}_getTabIndex(e){let i=this._lastFocusedTabIndex??this.selectedIndex;return e===i?0:-1}_tabFocusChanged(e,i){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=i)}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Ai),F(Fne,8),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-tab-group"]],contentQueries:function(i,r,o){if(i&1&&Yi(o,P1,5),i&2){let s;ct(s=lt())&&(r._allTabs=s)}},viewQuery:function(i,r){if(i&1&&(qt(gne,5),qt(_ne,5)),i&2){let o;ct(o=lt())&&(r._tabBodyWrapper=o.first),ct(o=lt())&&(r._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(i,r){i&2&&(qo("mat-"+(r.color||"primary")),$o("--mat-tab-animation-duration",r.animationDuration),Wt("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header",r.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Mi],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Mi],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Mi],selectedIndex:[2,"selectedIndex","selectedIndex",ld],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",ld],disablePagination:[2,"disablePagination","disablePagination",Mi],disableRipple:[2,"disableRipple","disableRipple",Mi],preserveContent:[2,"preserveContent","preserveContent",Mi],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[ie([{provide:cU,useExisting:n}]),dn,Ti],ngContentSelectors:I1,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(i,r){if(i&1){let o=Yt();ae(),H(0,"mat-tab-header",3,0),Le("indexFocused",function(a){return ht(o),ft(r._focusChanged(a))})("selectFocusedIndex",function(a){return ht(o),ft(r.selectedIndex=a)}),ar(2,xne,8,17,"div",4,br),ee(),Fi(4,wne,1,0),H(5,"div",5,1),ar(7,Mne,1,13,"mat-tab-body",6,br),ee()}i&2&&(j("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),k(2),cr(r._tabs),k(2),gn(r._isServer?4:-1),k(),Wt("_mat-animation-noopable",r._animationMode==="NoopAnimations"),k(2),cr(r._tabs))},dependencies:[Pne,lU,I3,_g,Rx,dU],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height);font-family:var(--mat-tab-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-app-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-app-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height);border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-app-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}}return n})(),A1=class{};var F1=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,wi]})}}return n})();var O1=new Se("HIGHLIGHT_OPTIONS");function fU(n){return[{provide:O1,useValue:n}]}var Bf=function(n){return n.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",n.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",n.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",n.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",n.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",n}(Bf||{}),Bne=(()=>{class n{constructor(){this.document=q(yt),this.isPlatformBrowser=uh(q(Vr)),this.options=q(O1,{optional:!0}),this._ready=new Sn(null),this.ready=Qw(this._ready.asObservable().pipe(li(e=>!!e))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(Pn(e=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=e,this.loadLineNumbers().pipe(Hi(i=>{i.activateLineNumbers(),this._ready.next(e)}))):(this._ready.next(e),pn)),Lr(e=>(console.error("[HLJS] ",e),this._ready.error(e),pn))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return Kr(()=>Bf.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return Kr(()=>Bf.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return Kr(()=>Bf.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return Kr(()=>Bf.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(Pn(e=>this._loadLanguages(e)))}return Kr(()=>Bf.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(e){let i=Object.entries(this.options.languages).map(([r,o])=>k1(o()).pipe(Hi(s=>e.registerLanguage(r,s))));return ql(i).pipe(dt(()=>e))}loadCoreLibrary(){return k1(this.options.coreLibraryLoader())}loadFullLibrary(){return k1(this.options.fullLibraryLoader())}loadLineNumbers(){return Pi(this.options.lineNumbersLoader())}setTheme(e){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=e:this.loadTheme(e))}loadTheme(e){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=e,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),k1=n=>Pi(n).pipe(li(t=>!!t?.default),dt(t=>t.default)),Une=(()=>{class n{constructor(){this.loader=q(Bne),this.options=q(O1,{optional:!0}),this.hljsSignal=cd(null),this.hljs=ch(()=>this.hljsSignal()),this.loader.ready.then(e=>{this.hljsSignal.set(e),this.options?.highlightOptions&&e.configure(this.options.highlightOptions)})}highlight(e,i){return _i(this,null,function*(){return(yield this.loader.ready).highlight(e,i)})}highlightAuto(e,i){return _i(this,null,function*(){return(yield this.loader.ready).highlightAuto(e,i)})}highlightElement(e){return _i(this,null,function*(){(yield this.loader.ready).highlightElement(e)})}highlightAll(){return _i(this,null,function*(){(yield this.loader.ready).highlightAll()})}configure(e){return _i(this,null,function*(){(yield this.loader.ready).configure(e)})}registerLanguage(e,i){return _i(this,null,function*(){(yield this.loader.ready).registerLanguage(e,i)})}unregisterLanguage(e){return _i(this,null,function*(){(yield this.loader.ready).unregisterLanguage(e)})}registerAliases(r,o){return _i(this,arguments,function*(e,{languageName:i}){(yield this.loader.ready).registerAliases(e,{languageName:i})})}listLanguages(){return _i(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(e){return _i(this,null,function*(){return(yield this.loader.ready).getLanguage(e)})}safeMode(){return _i(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return _i(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(e,i){return _i(this,null,function*(){let r=yield this.loader.ready;r.lineNumbersBlock&&r.lineNumbersBlock(e,i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j1;function Vne(){if(!j1)try{j1=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:n=>n})}catch{}return j1}function zne(n){return Vne()?.createHTML(n)||n}var hU=(()=>{class n{constructor(){this._hljs=q(Une),this._nativeElement=q(et).nativeElement,this._sanitizer=q(Up),this._platform=q(Vr),uh(this._platform)&&(lh(()=>{let e=this.code();this.setTextContent(e||""),e&&this.highlightElement(e)}),lh(()=>{let e=this.highlightResult();this.setInnerHTML(e?.value),this.highlighted.emit(e)}))}setTextContent(e){requestAnimationFrame(()=>this._nativeElement.textContent=e)}setInnerHTML(e){requestAnimationFrame(()=>this._nativeElement.innerHTML=zne(this._sanitizer.sanitize(sr.HTML,e)||""))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n})}}return n})(),pU=(()=>{class n extends hU{constructor(){super(...arguments),this.code=pk(null,{alias:"highlight"}),this.highlightResult=cd(null),this.highlighted=new nt}highlightElement(e){return _i(this,null,function*(){let i=yield this._hljs.highlight(e,{language:this.language,ignoreIllegals:this.ignoreIllegals});this.highlightResult.set(i)})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(i,r){i&2&&Wt("hljs",!0)},inputs:{code:[1,"highlight","code"],language:"language",ignoreIllegals:[2,"ignoreIllegals","ignoreIllegals",Mi]},outputs:{highlighted:"highlighted"},standalone:!0,features:[ie([{provide:hU,useExisting:n}]),dn,X]})}}return n})();var mU=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();function gU(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(n)}var Gne=new Se("GIST_OPTIONS");var Wne=(()=>{class n{constructor(){this._http=q(Op),this._options=q(Gne,{optional:!0})}getCodeFromGist(e){let i;return this._options?.clientId&&this._options?.clientSecret&&(i=new ta().set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${e}`,{params:i,responseType:"json"})}getCodeFromUrl(e){return this.fetchFile(e,{responseType:"text"})}fetchFile(e,i){return gU(e)?this._http.get(e,i).pipe(Na(1),Lr(r=>(console.error("[NgxHighlight]: Unable to fetch the URL!",r.message),pn))):pn}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $ne=new Se("HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:qne});function qne(){let n=q(yt)?.location;return{getPathname:()=>n?n.origin:""}}var _U=(()=>{class n{constructor(){this._location=q($ne),this._loader=q(Wne)}transform(e){return this._loader.getCodeFromUrl(gU(e)?e:`${this._location.getPathname()}/${e}`)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Vo({name:"codeFromUrl",type:n,pure:!0,standalone:!0})}}return n})(),bU=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();function Yne(n,t){if(n&1&&(H(0,"mat-tab",2)(1,"pre"),Ft(2,"              "),fe(3,"code",5),ki(4,"codeFromUrl"),ki(5,"async"),Ft(6,`
            `),ee()()),n&2){let e=t.$implicit,i=t.$index,r=$t();j("label",r.fileNames[i]),k(3),j("highlight",Gi(5,5,Gi(4,3,e)))("language",r.getLanguage(r.fileNames[i]))}}var vU=(()=>{class n{constructor(e){this.editorService=e,this.fileNames=[],this.lineNumbers=!1}set codeUrls(e){this.editorService.setUrls(e),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}getLanguage(e){return this.editorService.getLanguage(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Sa))}}static{this.\u0275cmp=L({type:n,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},decls:15,vars:0,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"highlight","language"]],template:function(i,r){i&1&&(H(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),ar(4,Yne,7,7,"mat-tab",2,br),ee()()(),H(6,"mat-card-actions",3)(7,"button",4),Le("click",function(s){return r.editorService.toCodeSandbox(s)}),H(8,"mat-icon"),Ft(9,"crop_din"),ee(),Ft(10," CodeSandbox "),ee(),H(11,"button",4),Le("click",function(s){return r.editorService.toStackblitz(s)}),H(12,"mat-icon"),Ft(13,"bolt"),ee(),Ft(14," Stackblitz "),ee()()()),i&2&&(k(4),cr(r.codeUrls))},dependencies:[vx,wx,K3,eU,J3,P1,uU,pU,xv,_U],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0})}}return n})();function Qne(n,t){n&1&&rh(0)}var yU=(()=>{class n{constructor(e,i){this.editorService=e,this.route=i,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}static{this.\u0275fac=function(i){return new(i||n)(F(Sa),F(Ya))}}static{this.\u0275cmp=L({type:n,selectors:[["app-example-page"]],decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(i,r){i&1&&(H(0,"div",0),Fi(1,Qne,1,0,"ng-container",1),ee(),fe(2,"app-code",2)),i&2&&(k(),j("ngComponentOutlet",r.exampleComponent),k(),j("lineNumbers",!0)("codeUrls",r.codeUrls))},dependencies:[uO,vU],changeDetection:0})}}return n})();var cn=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},Kne=new Ao(-1,1,1,-1,0,1),N1=class extends gt{constructor(){super(),this.setAttribute("position",new qe([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new qe([0,2,0,0,2,0],2))}},Jne=new N1,pr=class{constructor(t){this._mesh=new Ve(Jne,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Kne)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}};var mr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var Uf=class extends cn{constructor(t,e){super(),this.textureID=e!==void 0?e:"tDiffuse",t instanceof kt?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Bi.clone(t.uniforms),this.material=new kt({name:t.name!==void 0?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new pr(this.material)}render(t,e,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var Mg=class extends cn{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,i){let r=t.getContext(),o=t.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}},Ex=class extends cn{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}};var Dx=class{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),e===void 0){let i=t.getSize(new z);this._width=i.width,this._height=i.height,e=new ai(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:$i}),e.texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Uf(mr),this.copyPass.material.blending=ei,this.clock=new co}swapBuffers(){let t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){let e=this.passes.indexOf(t);e!==-1&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());let e=this.renderer.getRenderTarget(),i=!1;for(let r=0,o=this.passes.length;r<o;r++){let s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),s.needsSwap){if(i){let a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Mg!==void 0&&(s instanceof Mg?i=!0:s instanceof Ex&&(i=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(t===void 0){let e=this.renderer.getSize(new z);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;let i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var ere=["*"],xU=(()=>{class n extends Yr{getType(){return Dx}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set renderTarget1(e){this._objRef&&(this._objRef.renderTarget1=e)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(e){this._objRef&&(this._objRef.renderTarget2=e)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(e){this._objRef&&(this._objRef.writeBuffer=e)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(e){this._objRef&&(this._objRef.readBuffer=e)}get readBuffer(){return this._objRef?.readBuffer}set passes(e){this._objRef&&(this._objRef.passes=e)}get passes(){return this._objRef?.passes}set copyPass(e){this._objRef&&(this._objRef.copyPass=e)}get copyPass(){return this._objRef?.copyPass}set clock(e){this._objRef&&(this._objRef.clock=e)}get clock(){return this._objRef?.clock}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},features:[ie([]),X],ngContentSelectors:ere,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var tre=["*"],Ea=(()=>{class n extends xU{constructor(e,i){super(),this.view=e,this.engineService=i}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.engineService.wegblRenderer,e[1]=e[1]??this.initRenderTarget(),super.createThreeInstance(e)}initRenderTarget(){if(this.view.viewPort){let e,i;return this.view.viewPort instanceof yi?(e=this.view.viewPort.z,i=this.view.viewPort?.width):(e=this.view.viewPort.width,i=this.view.viewPort.height),new ai(e,i)}else return}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}static{this.\u0275fac=function(i){return new(i||n)(F(Fr),F(ho))}}static{this.\u0275cmp=L({type:n,selectors:[["th-effectComposer"]],features:[ie([]),X],ngContentSelectors:tre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var pi=(()=>{class n extends Yr{constructor(e){super(),this.effectComposer=e}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}static{this.\u0275fac=function(i){return new(i||n)(F(Ea,8))}}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-control"]],features:[X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var ire=["*"],Ei=(()=>{class n extends pi{getType(){return cn}set isPass(e){this._objRef&&(this._objRef.isPass=e)}get isPass(){return this._objRef?.isPass}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set needsSwap(e){this._objRef&&(this._objRef.needsSwap=e)}get needsSwap(){return this._objRef?.needsSwap}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:ire,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var xt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Ui={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},ri={x:0,y:0},ko={camera:new Be,gizmos:new Be},rn={type:"change"},Os={type:"start"},rs={type:"end"},nre=new Xr,Yn=new R,wU=new Be,MU=new Be,js=new R,Ax=class extends jn{constructor(t,e,i=null){super(),this.camera=null,this.domElement=e,this.scene=i,this.target=new R,this._currentTarget=new R,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new z,this._v3_1=new R,this._v3_2=new R,this._m4_1=new Be,this._m4_2=new Be,this._quat=new ti,this._translationMatrix=new Be,this._rotationMatrix=new Be,this._scaleMatrix=new Be,this._rotationAxis=new R,this._cameraMatrixState=new Be,this._cameraProjectionState=new Be,this._fovState=1,this._upState=new R,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Be,this._up0=new R,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Be,this._gizmoMatrixState0=new Be,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Ui.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new R,this._startCursorPosition=new R,this._grid=null,this._gridPosition=new R,this._gizmos=new Er,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new R,this._cursorPosCurr=new R,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=xt.IDLE,this.setCamera(t),this.scene!=null&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=ore.bind(this),this._onWheel=dre.bind(this),this._onPointerUp=lre.bind(this),this._onPointerMove=cre.bind(this),this._onPointerDown=are.bind(this),this._onPointerCancel=sre.bind(this),this._onWindowResize=rre.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(t,e){if(this.enabled)switch(this.dispatchEvent(Os),this.setCenter(t.clientX,t.clientY),e){case"PAN":if(!this.enablePan)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(xt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(rn));break;case"ROTATE":if(!this.enableRotate)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(xt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ri.x,ri.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(rn);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(xt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(xt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}onSinglePanMove(t,e){if(this.enabled){let i=e!=this._state;switch(this.setCenter(t.clientX,t.clientY),e){case xt.PAN:this.enablePan&&(i?(this.dispatchEvent(rs),this.dispatchEvent(Os),this.updateTbState(e,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case xt.ROTATE:if(this.enableRotate)if(i)this.dispatchEvent(rs),this.dispatchEvent(Os),this.updateTbState(e,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ri.x,ri.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ri.x,ri.y,this.domElement,this._tbRadius));let r=this._startCursorPosition.distanceTo(this._currentCursorPosition),o=this._startCursorPosition.angleTo(this._currentCursorPosition),s=Math.max(r/this._tbRadius,o)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),s)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=s,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case xt.SCALE:if(this.enableZoom)if(i)this.dispatchEvent(rs),this.dispatchEvent(Os),this.updateTbState(e,!0),this._startCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(s,this._v3_1))}break;case xt.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(i)this.dispatchEvent(rs),this.dispatchEvent(Os),this.updateTbState(e,!0),this._startCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=st.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(st.DEG2RAD*this._fovState*.5),d=st.RAD2DEG*(Math.atan(l/c)*2);d=st.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(st.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Yn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Yn.x,Yn.y,Yn.z)}break}this.dispatchEvent(rn)}}onSinglePanEnd(){if(this._state==xt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){let e=Math.abs((this._wPrev+this._wCurr)/2),i=this;this._animationId=window.requestAnimationFrame(function(r){i.updateTbState(xt.ANIMATION_ROTATE,!0);let o=i.calculateRotationAxis(i._cursorPosPrev,i._cursorPosCurr);i.onRotationAnim(r,o,Math.min(e,i.wMax))})}else this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn);else this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn)}else(this._state==xt.PAN||this._state==xt.IDLE)&&(this.updateTbState(xt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(rn));this.dispatchEvent(rs)}onDoubleTap(t){if(this.enabled&&this.enablePan&&this.scene!=null){this.dispatchEvent(Os),this.setCenter(t.clientX,t.clientY);let e=this.unprojectOnObj(this.getCursorNDC(ri.x,ri.y,this.domElement),this.camera);if(e!=null&&this.enableAnimations){let i=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){i.updateTbState(xt.ANIMATION_FOCUS,!0),i.onFocusAnim(r,e,i._cameraMatrixState,i._gizmoMatrixState)})}else e!=null&&!this.enableAnimations&&(this.updateTbState(xt.FOCUS,!0),this.focus(e,this.scaleFactor),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rn))}this.dispatchEvent(rs)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(Os),this.updateTbState(xt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=xt.PAN&&(this.updateTbState(xt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(rn))}onDoublePanEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rs)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(Os),this.updateTbState(xt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let t;this._state!=xt.ZROTATE&&(this.updateTbState(xt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),t=this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):t=new R().setFromMatrixPosition(this._gizmoMatrixState);let e=st.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);this.applyTransformMatrix(this.zRotate(t,e)),this.dispatchEvent(rn)}}onRotateEnd(){this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rs)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(Os),this.updateTbState(xt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let t=12;this._state!=xt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(xt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),t*this._devPxRatio);let e=this._currentFingerDistance/this._startFingerDistance,i;this.enablePan?this.camera.isOrthographicCamera?i=this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(i=this.unprojectOnTbPlane(this.camera,ri.x,ri.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):i=this._gizmos.position,this.applyTransformMatrix(this.scale(e,i)),this.dispatchEvent(rn)}}onPinchEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rs)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(Os),this.updateTbState(xt.SCALE,!0);let t=0,e=0,i=this._touchCurrent.length;for(let r=0;r<i;r++)t+=this._touchCurrent[r].clientX,e+=this._touchCurrent[r].clientY;this.setCenter(t/i,e/i),this._startCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let t=0,e=0,i=this._touchCurrent.length;for(let h=0;h<i;h++)t+=this._touchCurrent[h].clientX,e+=this._touchCurrent[h].clientY;this.setCenter(t/i,e/i);let r=8;this._currentCursorPosition.setY(this.getCursorNDC(ri.x,ri.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*r):o>0&&(s=Math.pow(this.scaleFactor,o*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=st.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(st.DEG2RAD*this._fovState*.5),d=st.RAD2DEG*(Math.atan(l/c)*2);d=st.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(st.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Yn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Yn.x,Yn.y,Yn.z),this.dispatchEvent(rn)}}onTriplePanEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rs)}setCenter(t,e){ri.x=t,ri.y=e}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(t,e){return t.operation==e.operation?t.mouse==e.mouse&&t.key==e.key:!1}setMouseAction(t,e,i=null){let r=["PAN","ROTATE","ZOOM","FOV"],o=[0,1,2,"WHEEL"],s=["CTRL","SHIFT",null],a;if(!r.includes(t)||!o.includes(e)||!s.includes(i)||e=="WHEEL"&&t!="ZOOM"&&t!="FOV")return!1;switch(t){case"PAN":a=xt.PAN;break;case"ROTATE":a=xt.ROTATE;break;case"ZOOM":a=xt.SCALE;break;case"FOV":a=xt.FOV;break}let c={operation:t,mouse:e,key:i,state:a};for(let l=0;l<this.mouseActions.length;l++)if(this.mouseActions[l].mouse==c.mouse&&this.mouseActions[l].key==c.key)return this.mouseActions.splice(l,1,c),!0;return this.mouseActions.push(c),!0}unsetMouseAction(t,e=null){for(let i=0;i<this.mouseActions.length;i++)if(this.mouseActions[i].mouse==t&&this.mouseActions[i].key==e)return this.mouseActions.splice(i,1),!0;return!1}getOpFromAction(t,e){let i;for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==t&&i.key==e)return i.operation;if(e!=null){for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==t&&i.key==null)return i.operation}return null}getOpStateFromAction(t,e){let i;for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==t&&i.key==e)return i.state;if(e!=null){for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==t&&i.key==null)return i.state}return null}getAngle(t,e){return Math.atan2(e.clientY-t.clientY,e.clientX-t.clientX)*180/Math.PI}updateTouchEvent(t){for(let e=0;e<this._touchCurrent.length;e++)if(this._touchCurrent[e].pointerId==t.pointerId){this._touchCurrent.splice(e,1,t);break}}applyTransformMatrix(t){if(t.camera!=null&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==xt.ROTATE||this._state==xt.ZROTATE||this._state==xt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),t.gizmos!=null&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==xt.SCALE||this._state==xt.FOCUS||this._state==xt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){let e=this.camera.position.distanceTo(this._gizmos.position),i=new vn;i.setFromObject(this._gizmos);let r=new En;i.getBoundingSphere(r);let o=Math.max(this._nearPos0,r.radius+r.center.length()),s=e-this._initialNear,a=Math.min(o,s);this.camera.near=e-a;let c=Math.min(this._farPos0,-r.radius+r.center.length()),l=e-this._initialFar,d=Math.min(c,l);this.camera.far=e-d,this.camera.updateProjectionMatrix()}else{let e=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,e=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,e=!0),e&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(t,e,i,r){let o=e-t,s=(r-i)/1e3;return s==0?0:o/s}calculatePointersDistance(t,e){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}calculateRotationAxis(t,e){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(t,e).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(t){let e=t.position.distanceTo(this._gizmos.position);if(t.type=="PerspectiveCamera"){let i=st.DEG2RAD*t.fov*.5,r=Math.atan(t.aspect*Math.tan(i));return Math.tan(Math.min(i,r))*e*this.radiusFactor}else if(t.type=="OrthographicCamera")return Math.min(t.top,t.right)*this.radiusFactor}focus(t,e,i=1){Yn.copy(t).sub(this._gizmos.position).multiplyScalar(i),this._translationMatrix.makeTranslation(Yn.x,Yn.y,Yn.z),wU.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),MU.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(e,this._gizmos.position)),this._gizmoMatrixState.copy(wU),this._cameraMatrixState.copy(MU)}drawGrid(){if(this.scene!=null){let i,r,o,s;if(this.camera.isOrthographicCamera){let a=this.camera.right-this.camera.left,c=this.camera.bottom-this.camera.top;o=Math.max(a,c),s=o/20,i=o/this.camera.zoom*3,r=i/s*this.camera.zoom}else if(this.camera.isPerspectiveCamera){let a=this.camera.position.distanceTo(this._gizmos.position),c=st.DEG2RAD*this.camera.fov*.5,l=Math.atan(this.camera.aspect*Math.tan(c));o=Math.tan(Math.max(c,l))*a*2,s=o/20,i=o*3,r=i/s}this._grid==null&&(this._grid=new Kd(i,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}dispose(){this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),this.scene!==null&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){this._grid!=null&&this.scene!=null&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(t){return 1-Math.pow(1-t,3)}activateGizmos(t){let e=this._gizmos.children[0],i=this._gizmos.children[1],r=this._gizmos.children[2];t?(e.material.setValues({opacity:1}),i.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(e.material.setValues({opacity:.6}),i.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(t,e,i){let r=i.getBoundingClientRect();return this._v2_1.setX((t-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-e)/r.height*2-1),this._v2_1.clone()}getCursorPosition(t,e,i){return this._v2_1.copy(this.getCursorNDC(t,e,i)),this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5,this._v2_1.clone()}setCamera(t){t.lookAt(this.target),t.updateMatrix(),t.type=="PerspectiveCamera"&&(this._fov0=t.fov,this._fovState=t.fov),this._cameraMatrixState0.copy(t.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(t.projectionMatrix),this._zoom0=t.zoom,this._zoomState=this._zoom0,this._initialNear=t.near,this._nearPos0=t.position.distanceTo(this.target)-t.near,this._nearPos=this._initialNear,this._initialFar=t.far,this._farPos0=t.position.distanceTo(this.target)-t.far,this._farPos=this._initialFar,this._up0.copy(t.up),this._upState.copy(t.up),this.camera=t,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(t),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(rn)}setTbRadius(t){this.radiusFactor=t,this._tbRadius=this.calculateTbRadius(this.camera);let i=new Es(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=new gt().setFromPoints(i);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(rn)}makeGizmos(t,e){let r=new Es(0,0,e,e).getPoints(this._curvePts),o=new gt().setFromPoints(r),s=new on({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new on({color:8454016,fog:!1,transparent:!0,opacity:.6}),c=new on({color:8421631,fog:!1,transparent:!0,opacity:.6}),l=new Qi(o,s),d=new Qi(o,a),u=new Qi(o,c),h=Math.PI*.5;if(l.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(t),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera.zoom!==1){let f=1/this.camera.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(t.x,t.y,t.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(l),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(t,e,i,r){if(this._timeStart==-1&&(this._timeStart=t),this._state==xt.ANIMATION_FOCUS){let s=(t-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,this.scaleFactor),this._timeStart=-1,this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn);else{let a=this.easeOutCubic(s),c=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,c,a),this.dispatchEvent(rn);let l=this;this._animationId=window.requestAnimationFrame(function(d){l.onFocusAnim(d,e,i,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(t,e,i){if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=t),this._state==xt.ANIMATION_ROTATE){let r=(t-this._timeStart)/1e3;if(i+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+i*r+0,this.applyTransformMatrix(this.rotate(e,this._angleCurrent)),this.dispatchEvent(rn);let s=this;this._animationId=window.requestAnimationFrame(function(a){s.onRotationAnim(a,e,i)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn)}else this._animationId=-1,this._timeStart=-1,this._state!=xt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(rn))}pan(t,e,i=!1){let r=t.clone().sub(e);if(this.camera.isOrthographicCamera)r.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&i){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);let o=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/o)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),ko}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rn)}rotate(t,e){let i=this._gizmos.position;return this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._rotationMatrix.makeRotationAxis(t,-e),this._m4_1.makeTranslation(i.x,i.y,i.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),ko}copyState(){let t;this.camera.isOrthographicCamera?t=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(t=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(t)}pasteState(){let t=this;navigator.clipboard.readText().then(function(i){t.setStateFromJSON(i)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(t,e,i=!0){js.copy(e);let r=1/t;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=t,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),js.sub(this._v3_1);let o=js.clone().multiplyScalar(r);return js.sub(o),this._m4_1.makeTranslation(js.x,js.y,js.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),ko}else if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let o=this._v3_1.distanceTo(js),s=o-o*r,a=o-s;if(a<this.minDistance?(r=this.minDistance/o,s=o-o*r):a>this.maxDistance&&(r=this.maxDistance/o,s=o-o*r),Yn.copy(js).sub(this._v3_1).normalize().multiplyScalar(s),this._m4_1.makeTranslation(Yn.x,Yn.y,Yn.z),i){let c=this._v3_2;o=c.distanceTo(js),s=o-o*r,Yn.copy(js).sub(this._v3_2).normalize().multiplyScalar(s),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(Yn.x,Yn.y,Yn.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return ko}}setFov(t){this.camera.isPerspectiveCamera&&(this.camera.fov=st.clamp(t,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(t=null,e=null){t!=null?ko.camera!=null?ko.camera.copy(t):ko.camera=t.clone():ko.camera=null,e!=null?ko.gizmos!=null?ko.gizmos.copy(e):ko.gizmos=e.clone():ko.gizmos=null}zRotate(t,e){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,e),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._m4_1.makeTranslation(t.x,t.y,t.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(t),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,e),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),ko}getRaycaster(){return nre}unprojectOnObj(t,e){let i=this.getRaycaster();i.near=e.near,i.far=e.far,i.setFromCamera(t,e);let r=i.intersectObjects(this.scene.children,!0);for(let o=0;o<r.length;o++)if(r[o].object.uuid!=this._gizmos.uuid&&r[o].face!=null)return r[o].point.clone();return null}unprojectOnTbSurface(t,e,i,r,o){if(t.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(e,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);let s=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),c=Math.pow(this._tbRadius,2);return s+a<=c*.5?this._v3_1.setZ(Math.sqrt(c-(s+a))):this._v3_1.setZ(c*.5/Math.sqrt(s+a)),this._v3_1}else if(t.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(e,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=t.position.distanceTo(this._gizmos.position),c=Math.pow(o,2),l=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return s.set(this._v3_1.x,this._v3_1.y,o),s;let u=l/d,h=a,f=Math.pow(u,2)+1,m=2*u*h,_=Math.pow(h,2)-c,g=Math.pow(m,2)-4*f*_;if(g>=0&&(this._v2_1.setX((-m-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),st.RAD2DEG*this._v2_1.angle()>=45)){let b=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(b),s.z+=a,s}f=u,m=h,_=-c*.5,g=Math.pow(m,2)-4*f*_,this._v2_1.setX((-m-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);let p=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(p),s.z+=a,s}}unprojectOnTbPlane(t,e,i,r,o=!1){if(t.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(e,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(t.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(e,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=this._v3_1.z,c=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2)),l;if(o?l=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):l=t.position.distanceTo(this._gizmos.position),c==0)return s.set(0,0,0),s;let d=a/c,u=l,h=-u/d,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));return s.multiplyScalar(f),s.z=0,s}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(t,e){this._state=t,e&&this.updateMatrixState()}update(){if(this.target.equals(this._currentTarget)===!1&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){let e=st.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(e/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){let e=this.camera.position.distanceTo(this._gizmos.position);if(e>this.maxDistance+1e-6||e<this.minDistance-1e-6){let r=st.clamp(e,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/e,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=st.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());let i=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),i<this._tbRadius-1e-6||i>this._tbRadius+1e-6){let r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,o=this._tbRadius/r,a=new Es(0,0,o,o).getPoints(this._curvePts),c=new gt().setFromPoints(a);for(let l in this._gizmos.children)this._gizmos.children[l].geometry=c}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(t){let e=JSON.parse(t);if(e.arcballState!=null){this._cameraMatrixState.fromArray(e.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(e.arcballState.cameraUp),this.camera.near=e.arcballState.cameraNear,this.camera.far=e.arcballState.cameraFar,this.camera.zoom=e.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=e.arcballState.cameraFov),this._gizmoMatrixState.fromArray(e.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);let i=new Be().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(i),this.camera.lookAt(this._gizmos.position),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rn)}}};function rre(){let n=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);let t=this._tbRadius/n,i=new Es(0,0,t,t).getPoints(this._curvePts),r=new gt().setFromPoints(i);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(rn)}function ore(n){if(this.enabled){for(let t=0;t<this.mouseActions.length;t++)if(this.mouseActions[t].mouse==2){n.preventDefault();break}}}function sre(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Ui.NONE}function are(n){if(n.button==0&&n.isPrimary?(this._downValid=!0,this._downEvents.push(n),this._downStart=performance.now()):this._downValid=!1,n.pointerType=="touch"&&this._input!=Ui.CURSOR)switch(this._touchStart.push(n),this._touchCurrent.push(n),this._input){case Ui.NONE:this._input=Ui.ONE_FINGER,this.onSinglePanStart(n,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case Ui.ONE_FINGER:case Ui.ONE_FINGER_SWITCHED:this._input=Ui.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Ui.TWO_FINGER:this._input=Ui.MULT_FINGER,this.onTriplePanStart(n);break}else if(n.pointerType!="touch"&&this._input==Ui.NONE){let t=null;n.ctrlKey||n.metaKey?t="CTRL":n.shiftKey&&(t="SHIFT"),this._mouseOp=this.getOpFromAction(n.button,t),this._mouseOp!=null&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=Ui.CURSOR,this._button=n.button,this.onSinglePanStart(n,this._mouseOp))}}function cre(n){if(n.pointerType=="touch"&&this._input!=Ui.CURSOR)switch(this._input){case Ui.ONE_FINGER:this.updateTouchEvent(n),this.onSinglePanMove(n,xt.ROTATE);break;case Ui.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],n)*this._devPxRatio>=this._switchSensibility){this._input=Ui.ONE_FINGER,this.updateTouchEvent(n),this.onSinglePanStart(n,"ROTATE");break}break;case Ui.TWO_FINGER:this.updateTouchEvent(n),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Ui.MULT_FINGER:this.updateTouchEvent(n),this.onTriplePanMove(n);break}else if(n.pointerType!="touch"&&this._input==Ui.CURSOR){let t=null;n.ctrlKey||n.metaKey?t="CTRL":n.shiftKey&&(t="SHIFT");let e=this.getOpStateFromAction(this._button,t);e!=null&&this.onSinglePanMove(n,e)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],n)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function lre(n){if(n.pointerType=="touch"&&this._input!=Ui.CURSOR){let t=this._touchCurrent.length;for(let e=0;e<t;e++)if(this._touchCurrent[e].pointerId==n.pointerId){this._touchCurrent.splice(e,1),this._touchStart.splice(e,1);break}switch(this._input){case Ui.ONE_FINGER:case Ui.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ui.NONE,this.onSinglePanEnd();break;case Ui.TWO_FINGER:this.onDoublePanEnd(n),this.onPinchEnd(n),this.onRotateEnd(n),this._input=Ui.ONE_FINGER_SWITCHED;break;case Ui.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ui.NONE,this.onTriplePanEnd());break}}else n.pointerType!="touch"&&this._input==Ui.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ui.NONE,this.onSinglePanEnd(),this._button=-1);if(n.isPrimary)if(this._downValid)if(n.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{let e=n.timeStamp-this._clickStart,i=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;e<=this._maxInterval&&i<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(n)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function dre(n){if(this.enabled&&this.enableZoom){let t=null;n.ctrlKey||n.metaKey?t="CTRL":n.shiftKey&&(t="SHIFT");let e=this.getOpFromAction("WHEEL",t);if(e!=null){n.preventDefault(),this.dispatchEvent(Os);let i=125,r=n.deltaY/i,o=1;switch(r>0?o=1/this.scaleFactor:r<0&&(o=this.scaleFactor),e){case"ZOOM":if(this.updateTbState(xt.SCALE,!0),r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let s;this.camera.isOrthographicCamera?s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(o,s))}else this.applyTransformMatrix(this.scale(o,this._gizmos.position));this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rn),this.dispatchEvent(rs);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(xt.FOV,!0),n.deltaX!=0&&(r=n.deltaX/i,o=1,r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let s=this._v3_1.distanceTo(this._gizmos.position),a=s/o;a=st.clamp(a,this.minDistance,this.maxDistance);let c=s*Math.tan(st.DEG2RAD*this.camera.fov*.5),l=st.RAD2DEG*(Math.atan(c/a)*2);l>this.maxFov?l=this.maxFov:l<this.minFov&&(l=this.minFov);let d=c/Math.tan(st.DEG2RAD*(l/2));o=s/d,this.setFov(l),this.applyTransformMatrix(this.scale(o,this._gizmos.position,!1))}this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(rn),this.dispatchEvent(rs);break}}}}var ure=["*"],SU=(()=>{class n extends nn{getType(){return Ax}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set focusAnimationTime(e){this._objRef&&(this._objRef.focusAnimationTime=e)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set enableGizmos(e){this._objRef&&(this._objRef.enableGizmos=e)}get enableGizmos(){return this._objRef?.enableGizmos}set adjustNearFar(e){this._objRef&&(this._objRef.adjustNearFar=e)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(e){this._objRef&&(this._objRef.scaleFactor=e)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(e){this._objRef&&(this._objRef.wMax=e)}get wMax(){return this._objRef?.wMax}set enableAnimations(e){this._objRef&&(this._objRef.enableAnimations=e)}get enableAnimations(){return this._objRef?.enableAnimations}set enableGrid(e){this._objRef&&(this._objRef.enableGrid=e)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(e){this._objRef&&(this._objRef.cursorZoom=e)}get cursorZoom(){return this._objRef?.cursorZoom}set minFov(e){this._objRef&&(this._objRef.minFov=e)}get minFov(){return this._objRef?.minFov}set maxFov(e){this._objRef&&(this._objRef.maxFov=e)}get maxFov(){return this._objRef?.maxFov}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set target(e){this._objRef&&(this._objRef.target=ve(this._objRef.target,e))}get target(){return this._objRef?.target}set radiusFactor(e){this._objRef&&(this._objRef.radiusFactor=e)}get radiusFactor(){return this._objRef?.radiusFactor}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-arcballControls"]],inputs:{camera:"camera",domElement:"domElement",scene:"scene",focusAnimationTime:"focusAnimationTime",enabled:"enabled",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",enableGizmos:"enableGizmos",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableGrid:"enableGrid",cursorZoom:"cursorZoom",minFov:"minFov",maxFov:"maxFov",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",target:"target",radiusFactor:"radiusFactor",rotateSpeed:"rotateSpeed"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:ure,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var fre=["*"],RU=(()=>{class n extends ba{getType(){return rg}get type(){return this._objRef?.type}set box(e){this._objRef&&(this._objRef.box=ve(this._objRef.box,e))}get box(){return this._objRef?.box}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-box3Helper"]],inputs:{box:"box"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:fre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var mre=["*"],TU=(()=>{class n extends me{getType(){return Rf}set element(e){this._objRef&&(this._objRef.element=e)}get element(){return this._objRef?.element}set center(e){this._objRef&&(this._objRef.center=ve(this._objRef.center,e))}get center(){return this._objRef?.center}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}get onAfterRender(){return this._objRef?.onAfterRender}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-cSS2DObjectGen"]],inputs:{element:"element",center:"center",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:mre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var gre=["*"],CU=(()=>{class n extends me{getType(){return Mf}set element(e){this._objRef&&(this._objRef.element=e)}get element(){return this._objRef?.element}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}get onAfterRender(){return this._objRef?.onAfterRender}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-cSS3DObjectGen"]],inputs:{element:"element",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:gre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var po=(()=>{class n extends Yr{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-abs-texture"]],features:[X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var _re=["*"],mo=class n extends po{getType(){return yn}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}set source(t){this._objRef&&(this._objRef.source=t)}get source(){return this._objRef?.source}get image(){return this._objRef?.image}set image(t){this._objRef&&(this._objRef.image=t)}set mipmaps(t){this._objRef&&(this._objRef.mipmaps=t)}get mipmaps(){return this._objRef?.mipmaps}set mapping(t){this._objRef&&(this._objRef.mapping=t)}get mapping(){return this._objRef?.mapping}set channel(t){this._objRef&&(this._objRef.channel=t)}get channel(){return this._objRef?.channel}set wrapS(t){this._objRef&&(this._objRef.wrapS=t)}get wrapS(){return this._objRef?.wrapS}set wrapT(t){this._objRef&&(this._objRef.wrapT=t)}get wrapT(){return this._objRef?.wrapT}set magFilter(t){this._objRef&&(this._objRef.magFilter=t)}get magFilter(){return this._objRef?.magFilter}set minFilter(t){this._objRef&&(this._objRef.minFilter=t)}get minFilter(){return this._objRef?.minFilter}set anisotropy(t){this._objRef&&(this._objRef.anisotropy=t)}get anisotropy(){return this._objRef?.anisotropy}set format(t){this._objRef&&(this._objRef.format=t)}get format(){return this._objRef?.format}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set internalFormat(t){this._objRef&&(this._objRef.internalFormat=t)}get internalFormat(){return this._objRef?.internalFormat}set matrix(t){this._objRef&&(this._objRef.matrix=ve(this._objRef.matrix,t))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(t){this._objRef&&(this._objRef.matrixAutoUpdate=t)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(t){this._objRef&&(this._objRef.offset=ve(this._objRef.offset,t))}get offset(){return this._objRef?.offset}set repeat(t){this._objRef&&(this._objRef.repeat=ve(this._objRef.repeat,t))}get repeat(){return this._objRef?.repeat}set center(t){this._objRef&&(this._objRef.center=ve(this._objRef.center,t))}get center(){return this._objRef?.center}set rotation(t){this._objRef&&(this._objRef.rotation=t)}get rotation(){return this._objRef?.rotation}set generateMipmaps(t){this._objRef&&(this._objRef.generateMipmaps=t)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(t){this._objRef&&(this._objRef.premultiplyAlpha=t)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(t){this._objRef&&(this._objRef.flipY=t)}get flipY(){return this._objRef?.flipY}set unpackAlignment(t){this._objRef&&(this._objRef.unpackAlignment=t)}get unpackAlignment(){return this._objRef?.unpackAlignment}set colorSpace(t){this._objRef&&(this._objRef.colorSpace=t)}get colorSpace(){return this._objRef?.colorSpace}set isRenderTargetTexture(t){this._objRef&&(this._objRef.isRenderTargetTexture=t)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set version(t){this._objRef&&(this._objRef.version=t)}get version(){return this._objRef?.version}set pmremVersion(t){this._objRef&&(this._objRef.pmremVersion=t)}get pmremVersion(){return this._objRef?.pmremVersion}set needsUpdate(t){this._objRef&&(this._objRef.needsUpdate=t)}set needsPMREMUpdate(t){this._objRef&&(this._objRef.needsPMREMUpdate=t)}static{this.DEFAULT_ANISOTROPY=yn.DEFAULT_ANISOTROPY}static{this.DEFAULT_IMAGE=yn.DEFAULT_IMAGE}static{this.DEFAULT_MAPPING=yn.DEFAULT_MAPPING}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(n)))(i||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",image:"image",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",colorSpace:"colorSpace",isRenderTargetTexture:"isRenderTargetTexture",userData:"userData",version:"version",pmremVersion:"pmremVersion",needsUpdate:"needsUpdate",needsPMREMUpdate:"needsPMREMUpdate"},features:[ie([{provide:po,useExisting:_e(()=>n)}]),X],ngContentSelectors:_re,decls:1,vars:0,template:function(e,i){e&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}};var bre=["*"],Tg=(()=>{class n extends ii{getType(){return da}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-polyhedronGeometry"]],features:[ie([{provide:ii,useExisting:_e(()=>n)}]),X],ngContentSelectors:bre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Px={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new z(256,256)},center:{value:new z(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec2 center;
		uniform float angle;
		uniform float scale;
		uniform vec2 tSize;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		float pattern() {

			float s = sin( angle ), c = cos( angle );

			vec2 tex = vUv * tSize - center;
			vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;

			return ( sin( point.x ) * sin( point.y ) ) * 4.0;

		}

		void main() {

			vec4 color = texture2D( tDiffuse, vUv );

			float average = ( color.r + color.g + color.b ) / 3.0;

			gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );

		}`};var Vf=new ur,Pl=new Xr,Tc=new z,EU=new R,U1=new z,Fx=new z,kx=new R,V1=new R,DU=new Be,AU=new R,IU=new R,jx=class extends jn{constructor(t,e,i){super(),i.style.touchAction="none";let r=null,o=null,s=[];this.mode="translate",this.rotateSpeed=1;let a=this;function c(){i.addEventListener("pointermove",m),i.addEventListener("pointerdown",_),i.addEventListener("pointerup",g),i.addEventListener("pointerleave",g)}function l(){i.removeEventListener("pointermove",m),i.removeEventListener("pointerdown",_),i.removeEventListener("pointerup",g),i.removeEventListener("pointerleave",g),i.style.cursor=""}function d(){l()}function u(){return t}function h(b){t=b}function f(){return Pl}function m(b){if(a.enabled!==!1){if(p(b),Pl.setFromCamera(Tc,e),r)a.mode==="translate"?Pl.ray.intersectPlane(Vf,kx)&&r.position.copy(kx.sub(EU).applyMatrix4(DU)):a.mode==="rotate"&&(U1.subVectors(Tc,Fx).multiplyScalar(a.rotateSpeed),r.rotateOnWorldAxis(AU,U1.x),r.rotateOnWorldAxis(IU.normalize(),-U1.y)),a.dispatchEvent({type:"drag",object:r}),Fx.copy(Tc);else if(b.pointerType==="mouse"||b.pointerType==="pen")if(s.length=0,Pl.setFromCamera(Tc,e),Pl.intersectObjects(t,a.recursive,s),s.length>0){let y=s[0].object;Vf.setFromNormalAndCoplanarPoint(e.getWorldDirection(Vf.normal),V1.setFromMatrixPosition(y.matrixWorld)),o!==y&&o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),i.style.cursor="auto",o=null),o!==y&&(a.dispatchEvent({type:"hoveron",object:y}),i.style.cursor="pointer",o=y)}else o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),i.style.cursor="auto",o=null);Fx.copy(Tc)}}function _(b){a.enabled!==!1&&(p(b),s.length=0,Pl.setFromCamera(Tc,e),Pl.intersectObjects(t,a.recursive,s),s.length>0&&(a.transformGroup===!0?r=v(s[0].object):r=s[0].object,Vf.setFromNormalAndCoplanarPoint(e.getWorldDirection(Vf.normal),V1.setFromMatrixPosition(r.matrixWorld)),Pl.ray.intersectPlane(Vf,kx)&&(a.mode==="translate"?(DU.copy(r.parent.matrixWorld).invert(),EU.copy(kx).sub(V1.setFromMatrixPosition(r.matrixWorld))):a.mode==="rotate"&&(AU.set(0,1,0).applyQuaternion(e.quaternion).normalize(),IU.set(1,0,0).applyQuaternion(e.quaternion).normalize())),i.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})),Fx.copy(Tc))}function g(){a.enabled!==!1&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),i.style.cursor=o?"pointer":"auto")}function p(b){let y=i.getBoundingClientRect();Tc.x=(b.clientX-y.left)/y.width*2-1,Tc.y=-(b.clientY-y.top)/y.height*2+1}function v(b,y=null){return b.isGroup&&(y=b),b.parent===null?y:v(b.parent,y)}c(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=c,this.deactivate=l,this.dispose=d,this.getObjects=u,this.getRaycaster=f,this.setObjects=h}};var vre=["*"],PU=(()=>{class n extends nn{getType(){return jx}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set recursive(e){this._objRef&&(this._objRef.recursive=e)}get recursive(){return this._objRef?.recursive}set transformGroup(e){this._objRef&&(this._objRef.transformGroup=e)}get transformGroup(){return this._objRef?.transformGroup}set mode(e){this._objRef&&(this._objRef.mode=e)}get mode(){return this._objRef?.mode}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set activate(e){this._objRef&&(this._objRef.activate=e)}get activate(){return this._objRef?.activate}set deactivate(e){this._objRef&&(this._objRef.deactivate=e)}get deactivate(){return this._objRef?.deactivate}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set getObjects(e){this._objRef&&(this._objRef.getObjects=e)}get getObjects(){return this._objRef?.getObjects}set getRaycaster(e){this._objRef&&(this._objRef.getRaycaster=e)}get getRaycaster(){return this._objRef?.getRaycaster}set setObjects(e){this._objRef&&(this._objRef.setObjects=e)}get setObjects(){return this._objRef?.setObjects}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-dragControls"]],inputs:{enabled:"enabled",recursive:"recursive",transformGroup:"transformGroup",mode:"mode",rotateSpeed:"rotateSpeed",activate:"activate",deactivate:"deactivate",dispose:"dispose",getObjects:"getObjects",getRaycaster:"getRaycaster",setObjects:"setObjects"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:vre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var FU={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform float intensity;
		uniform bool grayscale;
		uniform float time;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 base = texture2D( tDiffuse, vUv );

			float noise = rand( fract( vUv + time ) );

			vec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );

			color = mix( base.rgb, color, intensity );

			if ( grayscale ) {

				color = vec3( luminance( color ) ); // assuming linear-srgb

			}

			gl_FragColor = vec4( color, base.a );

		}`};var Ox=class extends cn{constructor(t=.5,e=!1){super();let i=FU;this.uniforms=Bi.clone(i.uniforms),this.material=new kt({name:i.name,uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.uniforms.intensity.value=t,this.uniforms.grayscale.value=e,this.fsQuad=new pr(this.material)}render(t,e,i,r){this.uniforms.tDiffuse.value=i.texture,this.uniforms.time.value+=r,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var xre=["*"],kU=(()=>{class n extends Ei{getType(){return Ox}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:xre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var jU=new R,z1=new gl,H1=new R,Nx=class{constructor(t,e){this.object=t,this.domElement=e,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;let i=0,r=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(u){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(u.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0},this.onPointerUp=function(u){if(this.activeLook)switch(u.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1},this.onPointerMove=function(u){this.domElement===document?(this.pointerX=u.pageX-this.viewHalfX,this.pointerY=u.pageY-this.viewHalfY):(this.pointerX=u.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=u.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}},this.onKeyUp=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}},this.lookAt=function(u,h,f){return u.isVector3?H1.copy(u):H1.set(u,h,f),this.object.lookAt(H1),d(this),this},this.update=function(){let u=new R;return function(f){if(this.enabled===!1)return;if(this.heightSpeed){let C=st.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=f*(C*this.heightCoef)}else this.autoSpeedFactor=0;let m=f*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(m+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(m),this.moveLeft&&this.object.translateX(-m),this.moveRight&&this.object.translateX(m),this.moveUp&&this.object.translateY(m),this.moveDown&&this.object.translateY(-m);let _=f*this.lookSpeed;this.activeLook||(_=0);let g=1;this.constrainVertical&&(g=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.pointerX*_,this.lookVertical&&(i-=this.pointerY*_*g),i=Math.max(-85,Math.min(85,i));let p=st.degToRad(90-i),v=st.degToRad(r);this.constrainVertical&&(p=st.mapLinear(p,0,Math.PI,this.verticalMin,this.verticalMax));let b=this.object.position;u.setFromSphericalCoords(1,p,v).add(b),this.object.lookAt(u)}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",OU),this.domElement.removeEventListener("pointerdown",s),this.domElement.removeEventListener("pointermove",o),this.domElement.removeEventListener("pointerup",a),window.removeEventListener("keydown",c),window.removeEventListener("keyup",l)};let o=this.onPointerMove.bind(this),s=this.onPointerDown.bind(this),a=this.onPointerUp.bind(this),c=this.onKeyDown.bind(this),l=this.onKeyUp.bind(this);this.domElement.addEventListener("contextmenu",OU),this.domElement.addEventListener("pointerdown",s),this.domElement.addEventListener("pointermove",o),this.domElement.addEventListener("pointerup",a),window.addEventListener("keydown",c),window.addEventListener("keyup",l);function d(u){let h=u.object.quaternion;jU.set(0,0,-1).applyQuaternion(h),z1.setFromVector3(jU),i=90-st.radToDeg(z1.phi),r=st.radToDeg(z1.theta)}this.handleResize(),d(this)}};function OU(n){n.preventDefault()}var Mre=["*"],NU=(()=>{class n extends nn{getType(){return Nx}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(e){this._objRef&&(this._objRef.lookSpeed=e)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(e){this._objRef&&(this._objRef.lookVertical=e)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}set activeLook(e){this._objRef&&(this._objRef.activeLook=e)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(e){this._objRef&&(this._objRef.heightSpeed=e)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(e){this._objRef&&(this._objRef.heightCoef=e)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(e){this._objRef&&(this._objRef.heightMin=e)}get heightMin(){return this._objRef?.heightMin}set heightMax(e){this._objRef&&(this._objRef.heightMax=e)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(e){this._objRef&&(this._objRef.constrainVertical=e)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(e){this._objRef&&(this._objRef.verticalMin=e)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(e){this._objRef&&(this._objRef.verticalMax=e)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(e){this._objRef&&(this._objRef.mouseDragOn=e)}get mouseDragOn(){return this._objRef?.mouseDragOn}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-firstPersonControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Mre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Rre={type:"change"},Lx=class extends jn{constructor(t,e){super(),this.object=t,this.domElement=e,this.enabled=!0,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;let i=this,r=1e-6,o=new ti,s=new R;this.tmpQuaternion=new ti,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new R(0,0,0),this.rotationVector=new R(0,0,0),this.keydown=function(m){if(!(m.altKey||this.enabled===!1)){switch(m.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(m){if(this.enabled!==!1){switch(m.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}},this.pointerdown=function(m){if(this.enabled!==!1)if(this.dragToLook)this.status++;else{switch(m.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(m){if(this.enabled!==!1&&(!this.dragToLook||this.status>0)){let _=this.getContainerDimensions(),g=_.size[0]/2,p=_.size[1]/2;this.moveState.yawLeft=-(m.pageX-_.offset[0]-g)/g,this.moveState.pitchDown=(m.pageY-_.offset[1]-p)/p,this.updateRotationVector()}},this.pointerup=function(m){if(this.enabled!==!1){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(m.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}},this.pointercancel=function(){this.enabled!==!1&&(this.dragToLook?(this.status=0,this.moveState.yawLeft=this.moveState.pitchDown=0):(this.moveState.forward=0,this.moveState.back=0,this.updateMovementVector()),this.updateRotationVector())},this.contextMenu=function(m){this.enabled!==!1&&m.preventDefault()},this.update=function(m){if(this.enabled===!1)return;let _=m*i.movementSpeed,g=m*i.rollSpeed;i.object.translateX(i.moveVector.x*_),i.object.translateY(i.moveVector.y*_),i.object.translateZ(i.moveVector.z*_),i.tmpQuaternion.set(i.rotationVector.x*g,i.rotationVector.y*g,i.rotationVector.z*g,1).normalize(),i.object.quaternion.multiply(i.tmpQuaternion),(s.distanceToSquared(i.object.position)>r||8*(1-o.dot(i.object.quaternion))>r)&&(i.dispatchEvent(Rre),o.copy(i.object.quaternion),s.copy(i.object.position))},this.updateMovementVector=function(){let m=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-m+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",a),this.domElement.removeEventListener("pointerdown",l),this.domElement.removeEventListener("pointermove",c),this.domElement.removeEventListener("pointerup",d),this.domElement.removeEventListener("pointercancel",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",f)};let a=this.contextMenu.bind(this),c=this.pointermove.bind(this),l=this.pointerdown.bind(this),d=this.pointerup.bind(this),u=this.pointercancel.bind(this),h=this.keydown.bind(this),f=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",a),this.domElement.addEventListener("pointerdown",l),this.domElement.addEventListener("pointermove",c),this.domElement.addEventListener("pointerup",d),this.domElement.addEventListener("pointercancel",u),window.addEventListener("keydown",h),window.addEventListener("keyup",f),this.updateMovementVector(),this.updateRotationVector()}};var Tre=["*"],LU=(()=>{class n extends nn{getType(){return Lx}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set dragToLook(e){this._objRef&&(this._objRef.dragToLook=e)}get dragToLook(){return this._objRef?.dragToLook}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set rollSpeed(e){this._objRef&&(this._objRef.rollSpeed=e)}get rollSpeed(){return this._objRef?.rollSpeed}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-flyControls"]],inputs:{autoForward:"autoForward",domElement:"domElement",dragToLook:"dragToLook",enabled:"enabled",movementSpeed:"movementSpeed",object:"object",rollSpeed:"rollSpeed"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Tre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var BU={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:`

		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		uniform int byp; //should we apply the glitch ?

		uniform sampler2D tDiffuse;
		uniform sampler2D tDisp;

		uniform float amount;
		uniform float angle;
		uniform float seed;
		uniform float seed_x;
		uniform float seed_y;
		uniform float distortion_x;
		uniform float distortion_y;
		uniform float col_s;

		varying vec2 vUv;


		float rand(vec2 co){
			return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		void main() {
			if(byp<1) {
				vec2 p = vUv;
				float xs = floor(gl_FragCoord.x / 0.5);
				float ys = floor(gl_FragCoord.y / 0.5);
				//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch
				float disp = texture2D(tDisp, p*seed*seed).r;
				if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {
					if(seed_x>0.){
						p.y = 1. - (p.y + distortion_y);
					}
					else {
						p.y = distortion_y;
					}
				}
				if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {
					if(seed_y>0.){
						p.x=distortion_x;
					}
					else {
						p.x = 1. - (p.x + distortion_x);
					}
				}
				p.x+=disp*seed_x*(seed/5.);
				p.y+=disp*seed_y*(seed/5.);
				//base from RGB shift shader
				vec2 offset = amount * vec2( cos(angle), sin(angle));
				vec4 cr = texture2D(tDiffuse, p + offset);
				vec4 cga = texture2D(tDiffuse, p);
				vec4 cb = texture2D(tDiffuse, p - offset);
				gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);
				//add noise
				vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
				gl_FragColor = gl_FragColor+ snow;
			}
			else {
				gl_FragColor=texture2D (tDiffuse, vUv);
			}
		}`};var Bx=class extends cn{constructor(t=64){super();let e=BU;this.uniforms=Bi.clone(e.uniforms),this.heightMap=this.generateHeightmap(t),this.uniforms.tDisp.value=this.heightMap,this.material=new kt({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new pr(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(t,e,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=st.randFloat(-1,1),this.uniforms.seed_y.value=st.randFloat(-1,1),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.uniforms.seed_x.value=st.randFloat(-.3,.3),this.uniforms.seed_y.value=st.randFloat(-.3,.3)):this.goWild==!1&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}generateTrigger(){this.randX=st.randInt(120,240)}generateHeightmap(t){let e=new Float32Array(t*t),i=t*t;for(let o=0;o<i;o++){let s=st.randFloat(0,1);e[o]=s}let r=new $r(e,t,t,eu,yr);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}};var Ere=["*"],UU=(()=>{class n extends Ei{getType(){return Bx}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set goWild(e){this._objRef&&(this._objRef.goWild=e)}get goWild(){return this._objRef?.goWild}set curF(e){this._objRef&&(this._objRef.curF=e)}get curF(){return this._objRef?.curF}set randX(e){this._objRef&&(this._objRef.randX=e)}get randX(){return this._objRef?.randX}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:Ere,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Are=["*"],Fl=(()=>{class n extends me{getType(){return Er}get isGroup(){return this._objRef?.isGroup}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-group"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:Are,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Ire=["*"],VU=(()=>{class n extends Tg{getType(){return cf}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-icosahedronGeometry"]],features:[ie([{provide:ii,useExisting:_e(()=>n)}]),X],ngContentSelectors:Ire,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Fre=["*"],zU=(()=>{class n extends Ri{getType(){return fl}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=ve(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=ve(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set count(e){this._objRef&&(this._objRef.count=e)}get count(){return this._objRef?.count}set instanceColor(e){this._objRef&&(this._objRef.instanceColor=ve(this._objRef.instanceColor,e))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(e){this._objRef&&(this._objRef.instanceMatrix=ve(this._objRef.instanceMatrix,e))}get instanceMatrix(){return this._objRef?.instanceMatrix}set morphTexture(e){this._objRef&&(this._objRef.morphTexture=e)}get morphTexture(){return this._objRef?.morphTexture}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix",morphTexture:"morphTexture"},features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:Fre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var jre=["*"],Cg=(()=>{class n extends Ei{getType(){return Uf}set textureID(e){this._objRef&&(this._objRef.textureID=e)}get textureID(){return this._objRef?.textureID}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:jre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Ux=class extends Af{constructor(t,e){super(t,e),this.screenSpacePanning=!1,this.mouseButtons={LEFT:Ir.PAN,MIDDLE:Ir.DOLLY,RIGHT:Ir.ROTATE},this.touches={ONE:As.PAN,TWO:As.DOLLY_ROTATE}}};var Ore=["*"],GU=(()=>{class n extends In{getType(){return Ux}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-mapControls"]],features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Ore,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Lre=["*"],Eg=(()=>{class n extends sn{getType(){return Ar}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set color(e){this._objRef&&(this._objRef.color=ve(this._objRef.color,e))}get color(){return this._objRef?.color}set roughness(e){this._objRef&&(this._objRef.roughness=e)}get roughness(){return this._objRef?.roughness}set metalness(e){this._objRef&&(this._objRef.metalness=e)}get metalness(){return this._objRef?.metalness}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=ve(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=ve(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(e){this._objRef&&(this._objRef.roughnessMap=e)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(e){this._objRef&&(this._objRef.metalnessMap=e)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set envMapIntensity(e){this._objRef&&(this._objRef.envMapIntensity=e)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-meshStandardMaterial"]],inputs:{type:"type",defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog"},features:[ie([{provide:sn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Lre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var zf=class n extends cn{constructor(t,e,i,r){super(),this.renderScene=e,this.renderCamera=i,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new ge(1,1,1),this.hiddenEdgeColor=new ge(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=t!==void 0?new z(t.x,t.y):new z(256,256);let o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new ai(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Wd,this.depthMaterial.side=Kn,this.depthMaterial.depthPacking=$y,this.depthMaterial.blending=ei,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Kn,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new ai(this.resolution.x,this.resolution.y,{type:$i}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new ai(o,s,{type:$i}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new ai(o,s,{type:$i}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new ai(Math.round(o/2),Math.round(s/2),{type:$i}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new ai(o,s,{type:$i}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new ai(Math.round(o/2),Math.round(s/2),{type:$i}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;let a=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=c,this.overlayMaterial=this.getOverlayMaterial();let l=mr;this.copyUniforms=Bi.clone(l.uniforms),this.materialCopy=new kt({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:ei,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ge,this.oldClearAlpha=1,this.fsQuad=new pr(null),this.tempPulseColor1=new ge,this.tempPulseColor2=new ge,this.textureMatrix=new Be;function d(u,h){let f=h.isPerspectiveCamera?"perspective":"orthographic";return u.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(t,e){this.renderTargetMaskBuffer.setSize(t,e),this.renderTargetDepthBuffer.setSize(t,e);let i=Math.round(t/this.downSampleRatio),r=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,r),this.renderTargetBlurBuffer1.setSize(i,r),this.renderTargetEdgeBuffer1.setSize(i,r),this.separableBlurMaterial1.uniforms.texSize.value.set(i,r),i=Math.round(i/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(i,r),this.renderTargetEdgeBuffer2.setSize(i,r),this.separableBlurMaterial2.uniforms.texSize.value.set(i,r)}changeVisibilityOfSelectedObjects(t){let e=this._visibilityCache;function i(r){r.isMesh&&(t===!0?r.visible=e.get(r):(e.set(r,r.visible),r.visible=t))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(i)}changeVisibilityOfNonSelectedObjects(t){let e=this._visibilityCache,i=[];function r(s){s.isMesh&&i.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(r);function o(s){if(s.isMesh||s.isSprite){let a=!1;for(let c=0;c<i.length;c++)if(i[c].id===s.id){a=!0;break}if(a===!1){let c=s.visible;(t===!1||e.get(s)===!0)&&(s.visible=t),e.set(s,c)}}else(s.isPoints||s.isLine)&&(t===!0?s.visible=e.get(s):(e.set(s,s.visible),s.visible=t))}this.renderScene.traverse(o)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(t,e,i,r,o){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();let s=t.autoClear;t.autoClear=!1,o&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);let a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(i),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,t.setRenderTarget(null),this.fsQuad.render(t))}getPrepareMaskMaterial(){return new kt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new z(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new kt({uniforms:{maskTexture:{value:null},texSize:{value:new z(.5,.5)},visibleEdgeColor:{value:new R(1,1,1)},hiddenEdgeColor:{value:new R(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(t){return new kt({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new kt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:jd,depthTest:!1,depthWrite:!1,transparent:!0})}};zf.BlurDirectionX=new z(1,0);zf.BlurDirectionY=new z(0,1);var Bre=["*"],$U=(()=>{class n extends Ei{getType(){return zf}set renderScene(e){this._objRef&&(this._objRef.renderScene=e)}get renderScene(){return this._objRef?.renderScene}set renderCamera(e){this._objRef&&(this._objRef.renderCamera=e)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(e){this._objRef&&(this._objRef.selectedObjects=e)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(e){this._objRef&&(this._objRef.visibleEdgeColor=ve(this._objRef.visibleEdgeColor,e))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(e){this._objRef&&(this._objRef.hiddenEdgeColor=ve(this._objRef.hiddenEdgeColor,e))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(e){this._objRef&&(this._objRef.edgeGlow=e)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(e){this._objRef&&(this._objRef.usePatternTexture=e)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(e){this._objRef&&(this._objRef.edgeThickness=e)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(e){this._objRef&&(this._objRef.edgeStrength=e)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(e){this._objRef&&(this._objRef.downSampleRatio=e)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(e){this._objRef&&(this._objRef.pulsePeriod=e)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(e){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set patternTexture(e){this._objRef&&(this._objRef.patternTexture=e)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(e){this._objRef&&(this._objRef.maskBufferMaterial=e)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(e){this._objRef&&(this._objRef.renderTargetMaskBuffer=e)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(e){this._objRef&&(this._objRef.depthMaterial=e)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(e){this._objRef&&(this._objRef.prepareMaskMaterial=e)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(e){this._objRef&&(this._objRef.renderTargetDepthBuffer=e)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(e){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=e)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(e){this._objRef&&(this._objRef.renderTargetBlurBuffer1=e)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(e){this._objRef&&(this._objRef.renderTargetBlurBuffer2=e)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(e){this._objRef&&(this._objRef.edgeDetectionMaterial=e)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=e)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=e)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(e){this._objRef&&(this._objRef.separableBlurMaterial1=e)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(e){this._objRef&&(this._objRef.separableBlurMaterial2=e)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(e){this._objRef&&(this._objRef.overlayMaterial=e)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(e){this._objRef&&(this._objRef.tempPulseColor1=ve(this._objRef.tempPulseColor1,e))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(e){this._objRef&&(this._objRef.tempPulseColor2=ve(this._objRef.tempPulseColor2,e))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(e){this._objRef&&(this._objRef.textureMatrix=ve(this._objRef.textureMatrix,e))}get textureMatrix(){return this._objRef?.textureMatrix}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:Bre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Vre=["*"],W1=(()=>{class n extends sn{getType(){return kt}get isShaderMaterial(){return this._objRef?.isShaderMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set uniforms(e){this._objRef&&(this._objRef.uniforms=e)}get uniforms(){return this._objRef?.uniforms}set uniformsGroups(e){this._objRef&&(this._objRef.uniformsGroups=e)}get uniformsGroups(){return this._objRef?.uniformsGroups}set vertexShader(e){this._objRef&&(this._objRef.vertexShader=e)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(e){this._objRef&&(this._objRef.fragmentShader=e)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(e){this._objRef&&(this._objRef.linewidth=e)}get linewidth(){return this._objRef?.linewidth}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set lights(e){this._objRef&&(this._objRef.lights=e)}get lights(){return this._objRef?.lights}set clipping(e){this._objRef&&(this._objRef.clipping=e)}get clipping(){return this._objRef?.clipping}set extensions(e){this._objRef&&(this._objRef.extensions=e)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(e){this._objRef&&(this._objRef.defaultAttributeValues=e)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(e){this._objRef&&(this._objRef.index0AttributeName=e)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(e){this._objRef&&(this._objRef.uniformsNeedUpdate=e)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(e){this._objRef&&(this._objRef.glslVersion=e)}get glslVersion(){return this._objRef?.glslVersion}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",uniformsGroups:"uniformsGroups",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion"},features:[ie([{provide:sn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Vre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Vx=class extends cn{constructor(t,e,i=null,r=null,o=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ge}render(t,e,i){let r=t.autoClear;t.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),this.clearAlpha!==null&&(o=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor!==null&&t.setClearColor(this._oldClearColor),this.clearAlpha!==null&&t.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),t.autoClear=r}};var Hre=["*"],qU=(()=>{class n extends Ei{getType(){return Vx}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(e){this._objRef&&(this._objRef.clearColor=ve(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(e){this._objRef&&(this._objRef.clearAlpha=e)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(e){this._objRef&&(this._objRef.clearDepth=e)}get clearDepth(){return this._objRef?.clearDepth}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:Hre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Dg={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new z(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform highp sampler2D tDepth;
		uniform highp sampler2D tNormal;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			return texture2D( tDepth, screenPosition ).x;
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`};var Cc={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new z(512,512)},sampleUvOffsets:{value:[new z(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},Ag={createSampleWeights:function(n,t){let e=[];for(let i=0;i<=n;i++)e.push(Gre(i,t));return e},createSampleOffsets:function(n,t){let e=[];for(let i=0;i<=n;i++)e.push(t.clone().multiplyScalar(i));return e},configure:function(n,t,e,i){n.defines.KERNEL_RADIUS=t,n.uniforms.sampleUvOffsets.value=Ag.createSampleOffsets(t,i),n.uniforms.sampleWeights.value=Ag.createSampleWeights(t,e),n.needsUpdate=!0}};function Gre(n,t){return Math.exp(-(n*n)/(2*(t*t)))/(Math.sqrt(2*Math.PI)*t)}var $1=(()=>{class n extends cn{constructor(e,i,r=new z(256,256)){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new ge,this._oldClearColor=new ge,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new z(r.x,r.y),this.saoRenderTarget=new ai(this.resolution.x,this.resolution.y,{type:$i}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();let o=new Ts;o.format=Rs,o.type=Ss,this.normalRenderTarget=new ai(this.resolution.x,this.resolution.y,{minFilter:hi,magFilter:hi,type:$i,depthTexture:o}),this.normalMaterial=new fa,this.normalMaterial.blending=ei,this.saoMaterial=new kt({defines:Object.assign({},Dg.defines),fragmentShader:Dg.fragmentShader,vertexShader:Dg.vertexShader,uniforms:Bi.clone(Dg.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=o,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=ei,this.vBlurMaterial=new kt({uniforms:Bi.clone(Cc.uniforms),defines:Object.assign({},Cc.defines),vertexShader:Cc.vertexShader,fragmentShader:Cc.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=o,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=ei,this.hBlurMaterial=new kt({uniforms:Bi.clone(Cc.uniforms),defines:Object.assign({},Cc.defines),vertexShader:Cc.vertexShader,fragmentShader:Cc.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=o,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=ei,this.materialCopy=new kt({uniforms:Bi.clone(mr.uniforms),vertexShader:mr.vertexShader,fragmentShader:mr.fragmentShader,blending:ei}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=Jd,this.materialCopy.blendSrc=pf,this.materialCopy.blendDst=_l,this.materialCopy.blendEquation=vr,this.materialCopy.blendSrcAlpha=ff,this.materialCopy.blendDstAlpha=_l,this.materialCopy.blendEquationAlpha=vr,this.fsQuad=new pr(null)}render(e,i,r){this.renderToScreen&&(this.materialCopy.blending=ei,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let o=e.autoClear;e.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;let s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Ag.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(0,1)),Ag.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let a=this.materialCopy;this.params.output===n.OUTPUT.Normal?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===n.OUTPUT.Default?a.blending=Jd:a.blending=ei,this.renderPass(e,a,this.renderToScreen?null:r),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}renderPass(e,i,r,o,s){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=i,this.fsQuad.render(e),e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,i,r,o,s){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=i,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,i){this.saoRenderTarget.setSize(e,i),this.blurIntermediateRenderTarget.setSize(e,i),this.normalRenderTarget.setSize(e,i),this.saoMaterial.uniforms.size.value.set(e,i),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,i),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,i),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}return n.OUTPUT={Default:0,SAO:1,Normal:2},n})();var Wre=["*"],XU=class n extends Ei{getType(){return $1}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(t){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(t){this._objRef&&(this._objRef.saoRenderTarget=t)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(t){this._objRef&&(this._objRef.blurIntermediateRenderTarget=t)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(t){this._objRef&&(this._objRef.saoMaterial=t)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(t){this._objRef&&(this._objRef.vBlurMaterial=t)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(t){this._objRef&&(this._objRef.hBlurMaterial=t)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(t){this._objRef&&(this._objRef.materialCopy=t)}get materialCopy(){return this._objRef?.materialCopy}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set params(t){this._objRef&&(this._objRef.params=t)}get params(){return this._objRef?.params}static{this.OUTPUT=$1.OUTPUT}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(n)))(i||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",normalRenderTarget:"normalRenderTarget",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",fsQuad:"fsQuad",params:"params"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:Wre,decls:1,vars:0,template:function(e,i){e&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}};var zx=class{constructor(t=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let e=0;e<256;e++)this.p[e]=Math.floor(t.random()*256);this.perm=[];for(let e=0;e<512;e++)this.perm[e]=this.p[e&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(t,e,i){return t[0]*e+t[1]*i}dot3(t,e,i,r){return t[0]*e+t[1]*i+t[2]*r}dot4(t,e,i,r,o){return t[0]*e+t[1]*i+t[2]*r+t[3]*o}noise(t,e){let i,r,o,s=.5*(Math.sqrt(3)-1),a=(t+e)*s,c=Math.floor(t+a),l=Math.floor(e+a),d=(3-Math.sqrt(3))/6,u=(c+l)*d,h=c-u,f=l-u,m=t-h,_=e-f,g,p;m>_?(g=1,p=0):(g=0,p=1);let v=m-g+d,b=_-p+d,y=m-1+2*d,C=_-1+2*d,S=c&255,M=l&255,A=this.perm[S+this.perm[M]]%12,T=this.perm[S+g+this.perm[M+p]]%12,x=this.perm[S+1+this.perm[M+1]]%12,I=.5-m*m-_*_;I<0?i=0:(I*=I,i=I*I*this.dot(this.grad3[A],m,_));let V=.5-v*v-b*b;V<0?r=0:(V*=V,r=V*V*this.dot(this.grad3[T],v,b));let W=.5-y*y-C*C;return W<0?o=0:(W*=W,o=W*W*this.dot(this.grad3[x],y,C)),70*(i+r+o)}noise3d(t,e,i){let r,o,s,a,l=(t+e+i)*.3333333333333333,d=Math.floor(t+l),u=Math.floor(e+l),h=Math.floor(i+l),f=1/6,m=(d+u+h)*f,_=d-m,g=u-m,p=h-m,v=t-_,b=e-g,y=i-p,C,S,M,A,T,x;v>=b?b>=y?(C=1,S=0,M=0,A=1,T=1,x=0):v>=y?(C=1,S=0,M=0,A=1,T=0,x=1):(C=0,S=0,M=1,A=1,T=0,x=1):b<y?(C=0,S=0,M=1,A=0,T=1,x=1):v<y?(C=0,S=1,M=0,A=0,T=1,x=1):(C=0,S=1,M=0,A=1,T=1,x=0);let I=v-C+f,V=b-S+f,W=y-M+f,te=v-A+2*f,ne=b-T+2*f,B=y-x+2*f,G=v-1+3*f,U=b-1+3*f,se=y-1+3*f,Ce=d&255,Ie=u&255,Qe=h&255,vt=this.perm[Ce+this.perm[Ie+this.perm[Qe]]]%12,Q=this.perm[Ce+C+this.perm[Ie+S+this.perm[Qe+M]]]%12,Ee=this.perm[Ce+A+this.perm[Ie+T+this.perm[Qe+x]]]%12,We=this.perm[Ce+1+this.perm[Ie+1+this.perm[Qe+1]]]%12,N=.6-v*v-b*b-y*y;N<0?r=0:(N*=N,r=N*N*this.dot3(this.grad3[vt],v,b,y));let we=.6-I*I-V*V-W*W;we<0?o=0:(we*=we,o=we*we*this.dot3(this.grad3[Q],I,V,W));let Ne=.6-te*te-ne*ne-B*B;Ne<0?s=0:(Ne*=Ne,s=Ne*Ne*this.dot3(this.grad3[Ee],te,ne,B));let Ue=.6-G*G-U*U-se*se;return Ue<0?a=0:(Ue*=Ue,a=Ue*Ue*this.dot3(this.grad3[We],G,U,se)),32*(r+o+s+a)}noise4d(t,e,i,r){let o=this.grad4,s=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,d,u,h,f,m,_=(t+e+i+r)*c,g=Math.floor(t+_),p=Math.floor(e+_),v=Math.floor(i+_),b=Math.floor(r+_),y=(g+p+v+b)*l,C=g-y,S=p-y,M=v-y,A=b-y,T=t-C,x=e-S,I=i-M,V=r-A,W=T>x?32:0,te=T>I?16:0,ne=x>I?8:0,B=T>V?4:0,G=x>V?2:0,U=I>V?1:0,se=W+te+ne+B+G+U,Ce=s[se][0]>=3?1:0,Ie=s[se][1]>=3?1:0,Qe=s[se][2]>=3?1:0,vt=s[se][3]>=3?1:0,Q=s[se][0]>=2?1:0,Ee=s[se][1]>=2?1:0,We=s[se][2]>=2?1:0,N=s[se][3]>=2?1:0,we=s[se][0]>=1?1:0,Ne=s[se][1]>=1?1:0,Ue=s[se][2]>=1?1:0,O=s[se][3]>=1?1:0,ye=T-Ce+l,Te=x-Ie+l,Pe=I-Qe+l,Ae=V-vt+l,ke=T-Q+2*l,Ke=x-Ee+2*l,Xe=I-We+2*l,Tt=V-N+2*l,P=T-we+3*l,E=x-Ne+3*l,re=I-Ue+3*l,Re=V-O+3*l,Me=T-1+4*l,De=x-1+4*l,pt=I-1+4*l,Ge=V-1+4*l,ze=g&255,Ct=p&255,Oe=v&255,rt=b&255,ci=a[ze+a[Ct+a[Oe+a[rt]]]]%32,At=a[ze+Ce+a[Ct+Ie+a[Oe+Qe+a[rt+vt]]]]%32,Je=a[ze+Q+a[Ct+Ee+a[Oe+We+a[rt+N]]]]%32,Vt=a[ze+we+a[Ct+Ne+a[Oe+Ue+a[rt+O]]]]%32,zt=a[ze+1+a[Ct+1+a[Oe+1+a[rt+1]]]]%32,Vi=.6-T*T-x*x-I*I-V*V;Vi<0?d=0:(Vi*=Vi,d=Vi*Vi*this.dot4(o[ci],T,x,I,V));let w=.6-ye*ye-Te*Te-Pe*Pe-Ae*Ae;w<0?u=0:(w*=w,u=w*w*this.dot4(o[At],ye,Te,Pe,Ae));let ce=.6-ke*ke-Ke*Ke-Xe*Xe-Tt*Tt;ce<0?h=0:(ce*=ce,h=ce*ce*this.dot4(o[Je],ke,Ke,Xe,Tt));let Z=.6-P*P-E*E-re*re-Re*Re;Z<0?f=0:(Z*=Z,f=Z*Z*this.dot4(o[Vt],P,E,re,Re));let he=.6-Me*Me-De*De-pt*pt-Ge*Ge;return he<0?m=0:(he*=he,m=he*he*this.dot4(o[zt],Me,De,pt,Ge)),27*(d+u+h+f+m)}};var Ig={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},Pg={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},Fg={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};var q1=(()=>{class n extends cn{constructor(e,i,r,o,s=32){super(),this.width=r!==void 0?r:512,this.height=o!==void 0?o:512,this.clear=!0,this.camera=i,this.scene=e,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(s),this.generateRandomKernelRotations();let a=new Ts;a.format=Rs,a.type=Ss,this.normalRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi,type:$i,depthTexture:a}),this.ssaoRenderTarget=new ai(this.width,this.height,{type:$i}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new kt({defines:Object.assign({},Ig.defines),uniforms:Bi.clone(Ig.uniforms),vertexShader:Ig.vertexShader,fragmentShader:Ig.fragmentShader,blending:ei}),this.ssaoMaterial.defines.KERNEL_SIZE=s,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new fa,this.normalMaterial.blending=ei,this.blurMaterial=new kt({defines:Object.assign({},Fg.defines),uniforms:Bi.clone(Fg.uniforms),vertexShader:Fg.vertexShader,fragmentShader:Fg.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new kt({defines:Object.assign({},Pg.defines),uniforms:Bi.clone(Pg.uniforms),vertexShader:Pg.vertexShader,fragmentShader:Pg.fragmentShader,blending:ei}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new kt({uniforms:Bi.clone(mr.uniforms),vertexShader:mr.vertexShader,fragmentShader:mr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:pf,blendDst:_l,blendEquation:vr,blendSrcAlpha:ff,blendDstAlpha:_l,blendEquationAlpha:vr}),this.fsQuad=new pr(null),this.originalClearColor=new ge}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,i,r){switch(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Jd,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(e,i,r,o,s){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=i,this.fsQuad.render(e),e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,i,r,o,s){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=i,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,i){this.width=e,this.height=i,this.ssaoRenderTarget.setSize(e,i),this.normalRenderTarget.setSize(e,i),this.blurRenderTarget.setSize(e,i),this.ssaoMaterial.uniforms.resolution.value.set(e,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,i)}generateSampleKernel(e){let i=this.kernel;for(let r=0;r<e;r++){let o=new R;o.x=Math.random()*2-1,o.y=Math.random()*2-1,o.z=Math.random(),o.normalize();let s=r/e;s=st.lerp(.1,1,s*s),o.multiplyScalar(s),i.push(o)}}generateRandomKernelRotations(){let r=new zx,o=4*4,s=new Float32Array(o);for(let a=0;a<o;a++){let c=Math.random()*2-1,l=Math.random()*2-1,d=0;s[a]=r.noise3d(c,l,d)}this.noiseTexture=new $r(s,4,4,eu,yr),this.noiseTexture.wrapS=Ko,this.noiseTexture.wrapT=Ko,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let e=this.scene,i=this._visibilityCache;e.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){let e=this.scene,i=this._visibilityCache;e.traverse(function(r){let o=i.get(r);r.visible=o}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},n})();var $re=["*"],YU=class n extends Ei{getType(){return q1}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set width(t){this._objRef&&(this._objRef.width=t)}get width(){return this._objRef?.width}set height(t){this._objRef&&(this._objRef.height=t)}get height(){return this._objRef?.height}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set kernelRadius(t){this._objRef&&(this._objRef.kernelRadius=t)}get kernelRadius(){return this._objRef?.kernelRadius}set kernel(t){this._objRef&&(this._objRef.kernel=t)}get kernel(){return this._objRef?.kernel}set noiseTexture(t){this._objRef&&(this._objRef.noiseTexture=t)}get noiseTexture(){return this._objRef?.noiseTexture}set output(t){this._objRef&&(this._objRef.output=t)}get output(){return this._objRef?.output}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(t){this._objRef&&(this._objRef.ssaoRenderTarget=t)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(t){this._objRef&&(this._objRef.blurRenderTarget=t)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(t){this._objRef&&(this._objRef.ssaoMaterial=t)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(t){this._objRef&&(this._objRef.blurMaterial=t)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(t){this._objRef&&(this._objRef.depthRenderMaterial=t)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(t){this._objRef&&(this._objRef.copyMaterial=t)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}static{this.OUTPUT=q1.OUTPUT}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(n)))(i||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:$re,decls:1,vars:0,template:function(e,i){e&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}};var Ns={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},kg={name:"SSRDepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},Ec={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z},opacity:{value:.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};var X1=(()=>{class n extends cn{constructor({renderer:e,scene:i,camera:r,width:o,height:s,selects:a,bouncing:c=!1,groundReflector:l}){super(),this.width=o!==void 0?o:512,this.height=s!==void 0?s:512,this.clear=!0,this.renderer=e,this.scene=i,this.camera=r,this.groundReflector=l,this.opacity=Ns.uniforms.opacity.value,this.output=0,this.maxDistance=Ns.uniforms.maxDistance.value,this.thickness=Ns.uniforms.thickness.value,this.tempColor=new ge,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=c,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,u?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=Ns.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=Ns.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=Ns.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});let d=new Ts;d.type=Bd,d.minFilter=hi,d.magFilter=hi,this.beautyRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi,type:$i,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi}),this.normalRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi,type:$i}),this.metalnessRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi,type:$i}),this.ssrRenderTarget=new ai(this.width,this.height,{minFilter:hi,magFilter:hi}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new kt({defines:Object.assign({},Ns.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Bi.clone(Ns.uniforms),vertexShader:Ns.vertexShader,fragmentShader:Ns.fragmentShader,blending:ei}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new fa,this.normalMaterial.blending=ei,this.metalnessOnMaterial=new tn({color:"white"}),this.metalnessOffMaterial=new tn({color:"black"}),this.blurMaterial=new kt({defines:Object.assign({},Ec.defines),uniforms:Bi.clone(Ec.uniforms),vertexShader:Ec.vertexShader,fragmentShader:Ec.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new kt({defines:Object.assign({},Ec.defines),uniforms:Bi.clone(Ec.uniforms),vertexShader:Ec.vertexShader,fragmentShader:Ec.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new kt({defines:Object.assign({},kg.defines),uniforms:Bi.clone(kg.uniforms),vertexShader:kg.vertexShader,fragmentShader:kg.fragmentShader,blending:ei}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new kt({uniforms:Bi.clone(mr.uniforms),vertexShader:mr.vertexShader,fragmentShader:mr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Od,blendDst:Nd,blendEquation:vr,blendSrcAlpha:Od,blendDstAlpha:Nd,blendEquationAlpha:vr}),this.fsQuad=new pr(null),this.originalClearColor=new ge}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,i){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),e.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(e,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(e,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.renderPass(e,this.blurMaterial2,this.blurRenderTarget2)),this.output){case n.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ws,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ws,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i));break;case n.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ws,this.renderPass(e,this.copyMaterial,this.prevRenderTarget));break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=ei,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(e,i,r,o,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));let a=e.getClearAlpha(this.tempColor),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=i,this.fsQuad.render(e),e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,i,r,o,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));let a=e.getClearAlpha(this.tempColor),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=i,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderMetalness(e,i,r,o,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));let a=e.getClearAlpha(this.tempColor),c=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(e.setClearColor(o),e.setClearAlpha(s||0),e.clear()),this.scene.traverseVisible(l=>{l._SSRPassBackupMaterial=l.material,this._selects.includes(l)?l.material=this.metalnessOnMaterial:l.material=this.metalnessOffMaterial}),e.render(this.scene,this.camera),this.scene.traverseVisible(l=>{l.material=l._SSRPassBackupMaterial}),e.autoClear=c,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,i){this.width=e,this.height=i,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(e*e+i*i),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(e,i),this.prevRenderTarget.setSize(e,i),this.ssrRenderTarget.setSize(e,i),this.normalRenderTarget.setSize(e,i),this.metalnessRenderTarget.setSize(e,i),this.blurRenderTarget.setSize(e,i),this.blurRenderTarget2.setSize(e,i),this.ssrMaterial.uniforms.resolution.value.set(e,i),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,i),this.blurMaterial2.uniforms.resolution.value.set(e,i)}}return n.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},n})();var qre=["*"],ZU=class n extends Ei{getType(){return X1}set width(t){this._objRef&&(this._objRef.width=t)}get width(){return this._objRef?.width}set height(t){this._objRef&&(this._objRef.height=t)}get height(){return this._objRef?.height}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set renderer(t){this._objRef&&(this._objRef.renderer=t)}get renderer(){return this._objRef?.renderer}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set groundReflector(t){this._objRef&&(this._objRef.groundReflector=t)}get groundReflector(){return this._objRef?.groundReflector}set opacity(t){this._objRef&&(this._objRef.opacity=t)}get opacity(){return this._objRef?.opacity}set output(t){this._objRef&&(this._objRef.output=t)}get output(){return this._objRef?.output}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set thickness(t){this._objRef&&(this._objRef.thickness=t)}get thickness(){return this._objRef?.thickness}set tempColor(t){this._objRef&&(this._objRef.tempColor=ve(this._objRef.tempColor,t))}get tempColor(){return this._objRef?.tempColor}get selects(){return this._objRef?.selects}set selects(t){this._objRef&&(this._objRef.selects=t)}set selective(t){this._objRef&&(this._objRef.selective=t)}get selective(){return this._objRef?.selective}get bouncing(){return this._objRef?.bouncing}set bouncing(t){this._objRef&&(this._objRef.bouncing=t)}set blur(t){this._objRef&&(this._objRef.blur=t)}get blur(){return this._objRef?.blur}get distanceAttenuation(){return this._objRef?.distanceAttenuation}set distanceAttenuation(t){this._objRef&&(this._objRef.distanceAttenuation=t)}get fresnel(){return this._objRef?.fresnel}set fresnel(t){this._objRef&&(this._objRef.fresnel=t)}get infiniteThick(){return this._objRef?.infiniteThick}set infiniteThick(t){this._objRef&&(this._objRef.infiniteThick=t)}set beautyRenderTarget(t){this._objRef&&(this._objRef.beautyRenderTarget=t)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(t){this._objRef&&(this._objRef.prevRenderTarget=t)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(t){this._objRef&&(this._objRef.metalnessRenderTarget=t)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(t){this._objRef&&(this._objRef.ssrRenderTarget=t)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(t){this._objRef&&(this._objRef.blurRenderTarget=t)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(t){this._objRef&&(this._objRef.blurRenderTarget2=t)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(t){this._objRef&&(this._objRef.ssrMaterial=t)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(t){this._objRef&&(this._objRef.metalnessOnMaterial=t)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(t){this._objRef&&(this._objRef.metalnessOffMaterial=t)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(t){this._objRef&&(this._objRef.blurMaterial=t)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(t){this._objRef&&(this._objRef.blurMaterial2=t)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(t){this._objRef&&(this._objRef.depthRenderMaterial=t)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(t){this._objRef&&(this._objRef.copyMaterial=t)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}static{this.OUTPUT=X1.OUTPUT}set dispose(t){this._objRef&&(this._objRef.dispose=t)}get dispose(){return this._objRef?.dispose}set renderPass(t){this._objRef&&(this._objRef.renderPass=t)}get renderPass(){return this._objRef?.renderPass}set renderOverride(t){this._objRef&&(this._objRef.renderOverride=t)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(t){this._objRef&&(this._objRef.renderMetalness=t)}get renderMetalness(){return this._objRef?.renderMetalness}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(n)))(i||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selects:"selects",selective:"selective",bouncing:"bouncing",blur:"blur",distanceAttenuation:"distanceAttenuation",fresnel:"fresnel",infiniteThick:"infiniteThick",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:qre,decls:1,vars:0,template:function(e,i){e&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}};var Xre=["*"],kl=(()=>{class n extends ii{getType(){return fc}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-sphereGeometry"]],features:[ie([{provide:ii,useExisting:_e(()=>n)}]),X],ngContentSelectors:Xre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var Y1={type:"change"},Z1={type:"start"},Q1={type:"end"},Gx=class extends jn{constructor(t,e){super();let i=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Ir.ROTATE,MIDDLE:Ir.DOLLY,RIGHT:Ir.PAN},this.target=new R;let o=1e-6,s=new R,a=1,c=r.NONE,l=r.NONE,d=0,u=0,h=0,f=new R,m=new z,_=new z,g=new R,p=new z,v=new z,b=new z,y=new z,C=[],S={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){let N=i.domElement.getBoundingClientRect(),we=i.domElement.ownerDocument.documentElement;i.screen.left=N.left+window.pageXOffset-we.clientLeft,i.screen.top=N.top+window.pageYOffset-we.clientTop,i.screen.width=N.width,i.screen.height=N.height};let M=function(){let N=new z;return function(Ne,Ue){return N.set((Ne-i.screen.left)/i.screen.width,(Ue-i.screen.top)/i.screen.height),N}}(),A=function(){let N=new z;return function(Ne,Ue){return N.set((Ne-i.screen.width*.5-i.screen.left)/(i.screen.width*.5),(i.screen.height+2*(i.screen.top-Ue))/i.screen.width),N}}();this.rotateCamera=function(){let N=new R,we=new ti,Ne=new R,Ue=new R,O=new R,ye=new R;return function(){ye.set(_.x-m.x,_.y-m.y,0);let Pe=ye.length();Pe?(f.copy(i.object.position).sub(i.target),Ne.copy(f).normalize(),Ue.copy(i.object.up).normalize(),O.crossVectors(Ue,Ne).normalize(),Ue.setLength(_.y-m.y),O.setLength(_.x-m.x),ye.copy(Ue.add(O)),N.crossVectors(ye,f).normalize(),Pe*=i.rotateSpeed,we.setFromAxisAngle(N,Pe),f.applyQuaternion(we),i.object.up.applyQuaternion(we),g.copy(N),h=Pe):!i.staticMoving&&h&&(h*=Math.sqrt(1-i.dynamicDampingFactor),f.copy(i.object.position).sub(i.target),we.setFromAxisAngle(g,h),f.applyQuaternion(we),i.object.up.applyQuaternion(we)),m.copy(_)}}(),this.zoomCamera=function(){let N;c===r.TOUCH_ZOOM_PAN?(N=d/u,d=u,i.object.isPerspectiveCamera?f.multiplyScalar(N):i.object.isOrthographicCamera?(i.object.zoom=st.clamp(i.object.zoom/N,i.minZoom,i.maxZoom),a!==i.object.zoom&&i.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(N=1+(v.y-p.y)*i.zoomSpeed,N!==1&&N>0&&(i.object.isPerspectiveCamera?f.multiplyScalar(N):i.object.isOrthographicCamera?(i.object.zoom=st.clamp(i.object.zoom/N,i.minZoom,i.maxZoom),a!==i.object.zoom&&i.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),i.staticMoving?p.copy(v):p.y+=(v.y-p.y)*this.dynamicDampingFactor)},this.panCamera=function(){let N=new z,we=new R,Ne=new R;return function(){if(N.copy(y).sub(b),N.lengthSq()){if(i.object.isOrthographicCamera){let O=(i.object.right-i.object.left)/i.object.zoom/i.domElement.clientWidth,ye=(i.object.top-i.object.bottom)/i.object.zoom/i.domElement.clientWidth;N.x*=O,N.y*=ye}N.multiplyScalar(f.length()*i.panSpeed),Ne.copy(f).cross(i.object.up).setLength(N.x),Ne.add(we.copy(i.object.up).setLength(N.y)),i.object.position.add(Ne),i.target.add(Ne),i.staticMoving?b.copy(y):b.add(N.subVectors(y,b).multiplyScalar(i.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!i.noZoom||!i.noPan)&&(f.lengthSq()>i.maxDistance*i.maxDistance&&(i.object.position.addVectors(i.target,f.setLength(i.maxDistance)),p.copy(v)),f.lengthSq()<i.minDistance*i.minDistance&&(i.object.position.addVectors(i.target,f.setLength(i.minDistance)),p.copy(v)))},this.update=function(){f.subVectors(i.object.position,i.target),i.noRotate||i.rotateCamera(),i.noZoom||i.zoomCamera(),i.noPan||i.panCamera(),i.object.position.addVectors(i.target,f),i.object.isPerspectiveCamera?(i.checkDistances(),i.object.lookAt(i.target),s.distanceToSquared(i.object.position)>o&&(i.dispatchEvent(Y1),s.copy(i.object.position))):i.object.isOrthographicCamera?(i.object.lookAt(i.target),(s.distanceToSquared(i.object.position)>o||a!==i.object.zoom)&&(i.dispatchEvent(Y1),s.copy(i.object.position),a=i.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){c=r.NONE,l=r.NONE,i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.up.copy(i.up0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),f.subVectors(i.object.position,i.target),i.object.lookAt(i.target),i.dispatchEvent(Y1),s.copy(i.object.position),a=i.object.zoom};function T(N){i.enabled!==!1&&(C.length===0&&(i.domElement.setPointerCapture(N.pointerId),i.domElement.addEventListener("pointermove",x),i.domElement.addEventListener("pointerup",I)),vt(N),N.pointerType==="touch"?se(N):ne(N))}function x(N){i.enabled!==!1&&(N.pointerType==="touch"?Ce(N):B(N))}function I(N){i.enabled!==!1&&(N.pointerType==="touch"?Ie(N):G(),Q(N),C.length===0&&(i.domElement.releasePointerCapture(N.pointerId),i.domElement.removeEventListener("pointermove",x),i.domElement.removeEventListener("pointerup",I)))}function V(N){Q(N)}function W(N){i.enabled!==!1&&(window.removeEventListener("keydown",W),l===r.NONE&&(N.code===i.keys[r.ROTATE]&&!i.noRotate?l=r.ROTATE:N.code===i.keys[r.ZOOM]&&!i.noZoom?l=r.ZOOM:N.code===i.keys[r.PAN]&&!i.noPan&&(l=r.PAN)))}function te(){i.enabled!==!1&&(l=r.NONE,window.addEventListener("keydown",W))}function ne(N){if(c===r.NONE)switch(N.button){case i.mouseButtons.LEFT:c=r.ROTATE;break;case i.mouseButtons.MIDDLE:c=r.ZOOM;break;case i.mouseButtons.RIGHT:c=r.PAN;break}let we=l!==r.NONE?l:c;we===r.ROTATE&&!i.noRotate?(_.copy(A(N.pageX,N.pageY)),m.copy(_)):we===r.ZOOM&&!i.noZoom?(p.copy(M(N.pageX,N.pageY)),v.copy(p)):we===r.PAN&&!i.noPan&&(b.copy(M(N.pageX,N.pageY)),y.copy(b)),i.dispatchEvent(Z1)}function B(N){let we=l!==r.NONE?l:c;we===r.ROTATE&&!i.noRotate?(m.copy(_),_.copy(A(N.pageX,N.pageY))):we===r.ZOOM&&!i.noZoom?v.copy(M(N.pageX,N.pageY)):we===r.PAN&&!i.noPan&&y.copy(M(N.pageX,N.pageY))}function G(){c=r.NONE,i.dispatchEvent(Q1)}function U(N){if(i.enabled!==!1&&i.noZoom!==!0){switch(N.preventDefault(),N.deltaMode){case 2:p.y-=N.deltaY*.025;break;case 1:p.y-=N.deltaY*.01;break;default:p.y-=N.deltaY*25e-5;break}i.dispatchEvent(Z1),i.dispatchEvent(Q1)}}function se(N){switch(Ee(N),C.length){case 1:c=r.TOUCH_ROTATE,_.copy(A(C[0].pageX,C[0].pageY)),m.copy(_);break;default:c=r.TOUCH_ZOOM_PAN;let we=C[0].pageX-C[1].pageX,Ne=C[0].pageY-C[1].pageY;u=d=Math.sqrt(we*we+Ne*Ne);let Ue=(C[0].pageX+C[1].pageX)/2,O=(C[0].pageY+C[1].pageY)/2;b.copy(M(Ue,O)),y.copy(b);break}i.dispatchEvent(Z1)}function Ce(N){switch(Ee(N),C.length){case 1:m.copy(_),_.copy(A(N.pageX,N.pageY));break;default:let we=We(N),Ne=N.pageX-we.x,Ue=N.pageY-we.y;u=Math.sqrt(Ne*Ne+Ue*Ue);let O=(N.pageX+we.x)/2,ye=(N.pageY+we.y)/2;y.copy(M(O,ye));break}}function Ie(N){switch(C.length){case 0:c=r.NONE;break;case 1:c=r.TOUCH_ROTATE,_.copy(A(N.pageX,N.pageY)),m.copy(_);break;case 2:c=r.TOUCH_ZOOM_PAN;for(let we=0;we<C.length;we++)if(C[we].pointerId!==N.pointerId){let Ne=S[C[we].pointerId];_.copy(A(Ne.x,Ne.y)),m.copy(_);break}break}i.dispatchEvent(Q1)}function Qe(N){i.enabled!==!1&&N.preventDefault()}function vt(N){C.push(N)}function Q(N){delete S[N.pointerId];for(let we=0;we<C.length;we++)if(C[we].pointerId==N.pointerId){C.splice(we,1);return}}function Ee(N){let we=S[N.pointerId];we===void 0&&(we=new z,S[N.pointerId]=we),we.set(N.pageX,N.pageY)}function We(N){let we=N.pointerId===C[0].pointerId?C[1]:C[0];return S[we.pointerId]}this.dispose=function(){i.domElement.removeEventListener("contextmenu",Qe),i.domElement.removeEventListener("pointerdown",T),i.domElement.removeEventListener("pointercancel",V),i.domElement.removeEventListener("wheel",U),i.domElement.removeEventListener("pointermove",x),i.domElement.removeEventListener("pointerup",I),window.removeEventListener("keydown",W),window.removeEventListener("keyup",te)},this.domElement.addEventListener("contextmenu",Qe),this.domElement.addEventListener("pointerdown",T),this.domElement.addEventListener("pointercancel",V),this.domElement.addEventListener("wheel",U,{passive:!1}),window.addEventListener("keydown",W),window.addEventListener("keyup",te),this.handleResize(),this.update()}};var Yre=["*"],Wx=(()=>{class n extends nn{getType(){return Gx}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set screen(e){this._objRef&&(this._objRef.screen=e)}get screen(){return this._objRef?.screen}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(e){this._objRef&&(this._objRef.noRotate=e)}get noRotate(){return this._objRef?.noRotate}set noZoom(e){this._objRef&&(this._objRef.noZoom=e)}get noZoom(){return this._objRef?.noZoom}set noPan(e){this._objRef&&(this._objRef.noPan=e)}get noPan(){return this._objRef?.noPan}set noRoll(e){this._objRef&&(this._objRef.noRoll=e)}get noRoll(){return this._objRef?.noRoll}set staticMoving(e){this._objRef&&(this._objRef.staticMoving=e)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(e){this._objRef&&(this._objRef.dynamicDampingFactor=e)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set target(e){this._objRef&&(this._objRef.target=ve(this._objRef.target,e))}get target(){return this._objRef?.target}set position0(e){this._objRef&&(this._objRef.position0=ve(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set target0(e){this._objRef&&(this._objRef.target0=ve(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set up0(e){this._objRef&&(this._objRef.up0=ve(this._objRef.up0,e))}get up0(){return this._objRef?.up0}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-trackballControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",noRoll:"noRoll",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target",position0:"position0",target0:"target0",up0:"up0"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:Yre,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var gu=new Xr,jr=new R,jl=new R,fn=new ti,KU={X:new R(1,0,0),Y:new R(0,1,0),Z:new R(0,0,1)},K1={type:"change"},JU={type:"mouseDown",mode:null},eV={type:"mouseUp",mode:null},tV={type:"objectChange"},Hf=class extends Rt{constructor(t,e){super(),e===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";let i=new eA;this._gizmo=i,this.add(i);let r=new tA;this._plane=r,this.add(r);let o=this;function s(v,b){let y=b;Object.defineProperty(o,v,{get:function(){return y!==void 0?y:b},set:function(C){y!==C&&(y=C,r[v]=C,i[v]=C,o.dispatchEvent({type:v+"-changed",value:C}),o.dispatchEvent(K1))}}),o[v]=b,r[v]=b,i[v]=b}s("camera",t),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);let a=new R,c=new R,l=new ti,d=new ti,u=new R,h=new ti,f=new R,m=new R,_=new R,g=0,p=new R;s("worldPosition",a),s("worldPositionStart",c),s("worldQuaternion",l),s("worldQuaternionStart",d),s("cameraPosition",u),s("cameraQuaternion",h),s("pointStart",f),s("pointEnd",m),s("rotationAxis",_),s("rotationAngle",g),s("eye",p),this._offset=new R,this._startNorm=new R,this._endNorm=new R,this._cameraScale=new R,this._parentPosition=new R,this._parentQuaternion=new ti,this._parentQuaternionInv=new ti,this._parentScale=new R,this._worldScaleStart=new R,this._worldQuaternionInv=new ti,this._worldScale=new R,this._positionStart=new R,this._quaternionStart=new ti,this._scaleStart=new R,this._getPointer=Zre.bind(this),this._onPointerDown=Kre.bind(this),this._onPointerHover=Qre.bind(this),this._onPointerMove=Jre.bind(this),this._onPointerUp=eoe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(t){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(t)}pointerHover(t){if(this.object===void 0||this.dragging===!0)return;t!==null&&gu.setFromCamera(t,this.camera);let e=J1(this._gizmo.picker[this.mode],gu);e?this.axis=e.object.name:this.axis=null}pointerDown(t){if(!(this.object===void 0||this.dragging===!0||t!=null&&t.button!==0)&&this.axis!==null){t!==null&&gu.setFromCamera(t,this.camera);let e=J1(this._plane,gu,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,JU.mode=this.mode,this.dispatchEvent(JU)}}pointerMove(t){let e=this.axis,i=this.mode,r=this.object,o=this.space;if(i==="scale"?o="local":(e==="E"||e==="XYZE"||e==="XYZ")&&(o="world"),r===void 0||e===null||this.dragging===!1||t!==null&&t.button!==-1)return;t!==null&&gu.setFromCamera(t,this.camera);let s=J1(this._plane,gu,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&e!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),e.indexOf("X")===-1&&(this._offset.x=0),e.indexOf("Y")===-1&&(this._offset.y=0),e.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&e!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(fn.copy(this._quaternionStart).invert()),e.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(jr.setFromMatrixPosition(r.parent.matrixWorld)),e.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(jr.setFromMatrixPosition(r.parent.matrixWorld))));else if(i==="scale"){if(e.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),jl.set(a,a,a)}else jr.copy(this.pointStart),jl.copy(this.pointEnd),jr.applyQuaternion(this._worldQuaternionInv),jl.applyQuaternion(this._worldQuaternionInv),jl.divide(jr),e.search("X")===-1&&(jl.x=1),e.search("Y")===-1&&(jl.y=1),e.search("Z")===-1&&(jl.z=1);r.scale.copy(this._scaleStart).multiply(jl),this.scaleSnap&&(e.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);let a=20/this.worldPosition.distanceTo(jr.setFromMatrixPosition(this.camera.matrixWorld)),c=!1;e==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(jr.copy(this.rotationAxis).cross(this.eye))*a):(e==="X"||e==="Y"||e==="Z")&&(this.rotationAxis.copy(KU[e]),jr.copy(KU[e]),o==="local"&&jr.applyQuaternion(this.worldQuaternion),jr.cross(this.eye),jr.length()===0?c=!0:this.rotationAngle=this._offset.dot(jr.normalize())*a),(e==="E"||c)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&e!=="E"&&e!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(fn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(fn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(K1),this.dispatchEvent(tV)}}pointerUp(t){t!==null&&t.button!==0||(this.dragging&&this.axis!==null&&(eV.mode=this.mode,this.dispatchEvent(eV)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(K1),this.dispatchEvent(tV),this.pointStart.copy(this.pointEnd))}getRaycaster(){return gu}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}};function Zre(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{let t=this.domElement.getBoundingClientRect();return{x:(n.clientX-t.left)/t.width*2-1,y:-(n.clientY-t.top)/t.height*2+1,button:n.button}}}function Qre(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function Kre(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function Jre(n){this.enabled&&this.pointerMove(this._getPointer(n))}function eoe(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function J1(n,t,e){let i=t.intersectObject(n,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||e)return i[r];return!1}var $x=new ao,Ki=new R(0,1,0),iV=new R(0,0,0),nV=new Be,qx=new ti,Yx=new ti,Da=new R,rV=new Be,Ng=new R(1,0,0),_u=new R(0,1,0),Lg=new R(0,0,1),Xx=new R,jg=new R,Og=new R,eA=class extends Rt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let t=new tn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new on({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=t.clone();i.opacity=.15;let r=e.clone();r.opacity=.5;let o=t.clone();o.color.setHex(16711680);let s=t.clone();s.color.setHex(65280);let a=t.clone();a.color.setHex(255);let c=t.clone();c.color.setHex(16711680),c.opacity=.5;let l=t.clone();l.color.setHex(65280),l.opacity=.5;let d=t.clone();d.color.setHex(255),d.opacity=.5;let u=t.clone();u.opacity=.25;let h=t.clone();h.color.setHex(16776960),h.opacity=.25,t.clone().color.setHex(16776960);let m=t.clone();m.color.setHex(7895160);let _=new On(0,.04,.1,12);_.translate(0,.05,0);let g=new Zi(.08,.08,.08);g.translate(0,.04,0);let p=new gt;p.setAttribute("position",new qe([0,0,0,1,0,0],3));let v=new On(.0075,.0075,.5,3);v.translate(0,.25,0);function b(ne,B){let G=new ha(ne,.0075,3,64,B*Math.PI*2);return G.rotateY(Math.PI/2),G.rotateX(Math.PI/2),G}function y(){let ne=new gt;return ne.setAttribute("position",new qe([0,0,0,1,1,1],3)),ne}let C={X:[[new Ve(_,o),[.5,0,0],[0,0,-Math.PI/2]],[new Ve(_,o),[-.5,0,0],[0,0,Math.PI/2]],[new Ve(v,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Ve(_,s),[0,.5,0]],[new Ve(_,s),[0,-.5,0],[Math.PI,0,0]],[new Ve(v,s)]],Z:[[new Ve(_,a),[0,0,.5],[Math.PI/2,0,0]],[new Ve(_,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Ve(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new Ve(new ua(.1,0),u.clone()),[0,0,0]]],XY:[[new Ve(new Zi(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new Ve(new Zi(.15,.15,.01),c.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},S={X:[[new Ve(new On(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Ve(new On(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(new On(.2,0,.6,4),i),[0,.3,0]],[new Ve(new On(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ve(new On(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Ve(new On(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new ua(.2,0),i)]],XY:[[new Ve(new Zi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Ve(new Zi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},M={START:[[new Ve(new ua(.01,2),r),null,null,null,"helper"]],END:[[new Ve(new ua(.01,2),r),null,null,null,"helper"]],DELTA:[[new Qi(y(),r),null,null,null,"helper"]],X:[[new Qi(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Qi(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Qi(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={XYZE:[[new Ve(b(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new Ve(b(.5,.5),o)]],Y:[[new Ve(b(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Ve(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Ve(b(.75,1),h),null,[0,Math.PI/2,0]]]},T={AXIS:[[new Qi(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},x={XYZE:[[new Ve(new fc(.25,10,8),i)]],X:[[new Ve(new ha(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Ve(new ha(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Ve(new ha(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Ve(new ha(.75,.1,2,24),i)]]},I={X:[[new Ve(g,o),[.5,0,0],[0,0,-Math.PI/2]],[new Ve(v,o),[0,0,0],[0,0,-Math.PI/2]],[new Ve(g,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(g,s),[0,.5,0]],[new Ve(v,s)],[new Ve(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Ve(g,a),[0,0,.5],[Math.PI/2,0,0]],[new Ve(v,a),[0,0,0],[Math.PI/2,0,0]],[new Ve(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Ve(new Zi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new Ve(new Zi(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new Zi(.1,.1,.1),u.clone())]]},V={X:[[new Ve(new On(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Ve(new On(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(new On(.2,0,.6,4),i),[0,.3,0]],[new Ve(new On(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ve(new On(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Ve(new On(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Ve(new Zi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Ve(new Zi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new Zi(.2,.2,.2),i),[0,0,0]]]},W={X:[[new Qi(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Qi(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Qi(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function te(ne){let B=new Rt;for(let G in ne)for(let U=ne[G].length;U--;){let se=ne[G][U][0].clone(),Ce=ne[G][U][1],Ie=ne[G][U][2],Qe=ne[G][U][3],vt=ne[G][U][4];se.name=G,se.tag=vt,Ce&&se.position.set(Ce[0],Ce[1],Ce[2]),Ie&&se.rotation.set(Ie[0],Ie[1],Ie[2]),Qe&&se.scale.set(Qe[0],Qe[1],Qe[2]),se.updateMatrix();let Q=se.geometry.clone();Q.applyMatrix4(se.matrix),se.geometry=Q,se.renderOrder=1/0,se.position.set(0,0,0),se.rotation.set(0,0,0),se.scale.set(1,1,1),B.add(se)}return B}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=te(C)),this.add(this.gizmo.rotate=te(A)),this.add(this.gizmo.scale=te(I)),this.add(this.picker.translate=te(S)),this.add(this.picker.rotate=te(x)),this.add(this.picker.scale=te(V)),this.add(this.helper.translate=te(M)),this.add(this.helper.rotate=te(T)),this.add(this.helper.scale=te(W)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){let i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Yx;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){let s=r[o];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(fn.setFromEuler($x.set(0,0,0)),s.quaternion.copy(i).multiply(fn),Math.abs(Ki.copy(Ng).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(fn.setFromEuler($x.set(0,0,Math.PI/2)),s.quaternion.copy(i).multiply(fn),Math.abs(Ki.copy(_u).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(fn.setFromEuler($x.set(0,Math.PI/2,0)),s.quaternion.copy(i).multiply(fn),Math.abs(Ki.copy(Lg).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(fn.setFromEuler($x.set(0,Math.PI/2,0)),Ki.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(nV.lookAt(iV,Ki,_u)),s.quaternion.multiply(fn),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),jr.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),jr.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(jr),s.visible=this.dragging):(s.quaternion.copy(i),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(Ki.copy(Ng).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(Ki.copy(_u).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(Ki.copy(Lg).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(Ki.copy(Lg).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(Ki.copy(Ng).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(Ki.copy(_u).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(qx.copy(i),Ki.copy(this.eye).applyQuaternion(fn.copy(i).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(nV.lookAt(this.eye,iV,_u)),s.name==="X"&&(fn.setFromAxisAngle(Ng,Math.atan2(-Ki.y,Ki.z)),fn.multiplyQuaternions(qx,fn),s.quaternion.copy(fn)),s.name==="Y"&&(fn.setFromAxisAngle(_u,Math.atan2(Ki.x,Ki.z)),fn.multiplyQuaternions(qx,fn),s.quaternion.copy(fn)),s.name==="Z"&&(fn.setFromAxisAngle(Lg,Math.atan2(Ki.y,Ki.x)),fn.multiplyQuaternions(qx,fn),s.quaternion.copy(fn))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(c){return s.name===c}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(t)}},tA=class extends Ve{constructor(){super(new ca(1e5,1e5,2,2),new tn({visible:!1,wireframe:!0,side:Kn,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),Xx.copy(Ng).applyQuaternion(e==="local"?this.worldQuaternion:Yx),jg.copy(_u).applyQuaternion(e==="local"?this.worldQuaternion:Yx),Og.copy(Lg).applyQuaternion(e==="local"?this.worldQuaternion:Yx),Ki.copy(jg),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ki.copy(this.eye).cross(Xx),Da.copy(Xx).cross(Ki);break;case"Y":Ki.copy(this.eye).cross(jg),Da.copy(jg).cross(Ki);break;case"Z":Ki.copy(this.eye).cross(Og),Da.copy(Og).cross(Ki);break;case"XY":Da.copy(Og);break;case"YZ":Da.copy(Xx);break;case"XZ":Ki.copy(Og),Da.copy(jg);break;case"XYZ":case"E":Da.set(0,0,0);break}break;case"rotate":default:Da.set(0,0,0)}Da.length()===0?this.quaternion.copy(this.cameraQuaternion):(rV.lookAt(jr.set(0,0,0),Da,Ki),this.quaternion.setFromRotationMatrix(rV)),super.updateMatrixWorld(t)}};var toe=["*"],oV=(()=>{class n extends nn{getType(){return Hf}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set axis(e){this._objRef&&(this._objRef.axis=e)}get axis(){return this._objRef?.axis}set mode(e){this._objRef&&(this._objRef.mode=e)}get mode(){return this._objRef?.mode}set translationSnap(e){this._objRef&&(this._objRef.translationSnap=e)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(e){this._objRef&&(this._objRef.rotationSnap=e)}get rotationSnap(){return this._objRef?.rotationSnap}set space(e){this._objRef&&(this._objRef.space=e)}get space(){return this._objRef?.space}set size(e){this._objRef&&(this._objRef.size=e)}get size(){return this._objRef?.size}set dragging(e){this._objRef&&(this._objRef.dragging=e)}get dragging(){return this._objRef?.dragging}set showX(e){this._objRef&&(this._objRef.showX=e)}get showX(){return this._objRef?.showX}set showY(e){this._objRef&&(this._objRef.showY=e)}get showY(){return this._objRef?.showY}set showZ(e){this._objRef&&(this._objRef.showZ=e)}get showZ(){return this._objRef?.showZ}get isTransformControls(){return this._objRef?.isTransformControls}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-transformControlsGen"]],inputs:{domElement:"domElement",camera:"camera",object:"object",enabled:"enabled",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",mouseButtons:"mouseButtons"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:toe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var sV={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ge(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var Gf=class n extends cn{constructor(t,e,i,r){super(),this.strength=e!==void 0?e:1,this.radius=i,this.threshold=r,this.resolution=t!==void 0?new z(t.x,t.y):new z(256,256),this.clearColor=new ge(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new ai(o,s,{type:$i}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){let h=new ai(o,s,{type:$i});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);let f=new ai(o,s,{type:$i});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),o=Math.round(o/2),s=Math.round(s/2)}let a=sV;this.highPassUniforms=Bi.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new kt({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];let c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new z(1/o,1/s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1;let l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=l,this.bloomTintColors=[new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let d=mr;this.copyUniforms=Bi.clone(d.uniforms),this.blendMaterial=new kt({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:jd,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ge,this.oldClearAlpha=1,this.basic=new tn,this.fsQuad=new pr(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,e){let i=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(i,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(i,r),this.renderTargetsVertical[o].setSize(i,r),this.separableBlurMaterials[o].uniforms.invSize.value=new z(1/i,1/r),i=Math.round(i/2),r=Math.round(r/2)}render(t,e,i,r,o){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();let s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),o&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let a=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[c]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[c]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(i),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}getSeperableBlurMaterial(t){let e=[];for(let i=0;i<t;i++)e.push(.39894*Math.exp(-.5*i*i/(t*t))/t);return new kt({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},gaussianCoefficients:{value:e}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(t){return new kt({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Gf.BlurDirectionX=new z(1,0);Gf.BlurDirectionY=new z(0,1);var ioe=["*"],Zx=(()=>{class n extends Ei{getType(){return Gf}set resolution(e){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set strength(e){this._objRef&&(this._objRef.strength=e)}get strength(){return this._objRef?.strength}set radius(e){this._objRef&&(this._objRef.radius=e)}get radius(){return this._objRef?.radius}set threshold(e){this._objRef&&(this._objRef.threshold=e)}get threshold(){return this._objRef?.threshold}set clearColor(e){this._objRef&&(this._objRef.clearColor=ve(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(e){this._objRef&&(this._objRef.renderTargetsHorizontal=e)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(e){this._objRef&&(this._objRef.renderTargetsVertical=e)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(e){this._objRef&&(this._objRef.nMips=e)}get nMips(){return this._objRef?.nMips}set renderTargetBright(e){this._objRef&&(this._objRef.renderTargetBright=e)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(e){this._objRef&&(this._objRef.highPassUniforms=e)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(e){this._objRef&&(this._objRef.materialHighPassFilter=e)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(e){this._objRef&&(this._objRef.separableBlurMaterials=e)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(e){this._objRef&&(this._objRef.compositeMaterial=e)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(e){this._objRef&&(this._objRef.bloomTintColors=e)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set blendMaterial(e){this._objRef&&(this._objRef.blendMaterial=e)}get blendMaterial(){return this._objRef?.blendMaterial}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(e){this._objRef&&(this._objRef.basic=e)}get basic(){return this._objRef?.basic}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",blendMaterial:"blendMaterial",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:ioe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var noe=["*"],cV=(()=>{class n extends TU{constructor(){super(...arguments),this.elementRef=q(et)}getType(){return Rf}createThreeInstance(e){return super.createThreeInstance(e??this.elementRef?.nativeElement)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-cSS2DObject"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:noe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return n})();var ooe=["*"],Qx=(()=>{class n extends CU{constructor(){super(...arguments),this.elementRef=q(et)}getType(){return Mf}createThreeInstance(e){return super.createThreeInstance(e??this.elementRef?.nativeElement)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["th-cSS3DObject"]],features:[ie([{provide:me,useExisting:_e(()=>n)}]),X],ngContentSelectors:ooe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return n})();var soe=["*"],Wf=(()=>{class n extends qU{constructor(e,i){super(e),this.effectComposer=e,this.view=i}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.view.scene,e[1]=e[1]??this.view.camera,e[2]=e[2]??this.overrideMaterial,e[3]=e[3]??this.clearColor,e[4]=e[4]??this.clearAlpha,super.createThreeInstance(e)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}static{this.\u0275fac=function(i){return new(i||n)(F(Ea),F(Fr))}}static{this.\u0275cmp=L({type:n,selectors:[["th-renderPass"]],features:[ie([{provide:pi,useExisting:_e(()=>n)}]),X],ngContentSelectors:soe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var aoe=["*"],dV=(()=>{class n extends oV{constructor(e,i,r){super(e,i),this.scene=r,this.objectAdded=()=>{this.objRef&&this.targetObject!=null&&this.targetObject.parent&&this.objRef.attach(this.targetObject)},this.objectRemoved=()=>{this._objRef?.detach()}}getType(){return Hf}set object(e){this._objRef&&(this.removeObjectListeners(),this.targetObject=e,this.addObjectListeners(),e?this.objectAdded():this.objectRemoved())}addToParent(){this._objRef&&!this._objRef.parent&&this.scene?.objRef?.add(this._objRef)}removeFromParent(){this._objRef&&this.scene?.objRef?.remove(this._objRef)}ngOnDestroy(){this.removeObjectListeners(),this.objectRemoved(),this.targetObject=void 0}removeObjectListeners(){this.targetObject&&(this.targetObject.removeEventListener("added",this.objectAdded),this.targetObject.removeEventListener("removed",this.objectRemoved))}addObjectListeners(){this.targetObject?.addEventListener("added",this.objectAdded),this.targetObject?.addEventListener("removed",this.objectRemoved)}static{this.\u0275fac=function(i){return new(i||n)(F(me),F(Dt),F(Bt))}}static{this.\u0275cmp=L({type:n,selectors:[["th-transformControls"]],inputs:{object:"object"},features:[ie([{provide:nn,useExisting:_e(()=>n)}]),X],ngContentSelectors:aoe,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})();var nA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();var Pa=(()=>{class n{transform(e){return Array.isArray(e)?new ge(...e):new ge(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Vo({name:"color",type:n,pure:!0})}}return n})();var go=new ge,Jx=class extends ir{constructor(t){super(t),this.propertyNameMapping={},this.customPropertyMapping={}}load(t,e,i,r){let o=this,s=new tr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(a){try{e(o.parse(a))}catch(c){r?r(c):console.error(c),o.manager.itemError(t)}},i,r)}setPropertyNameMapping(t){this.propertyNameMapping=t}setCustomPropertyNameMapping(t){this.customPropertyMapping=t}parse(t){function e(g,p=0){let v=/^ply([\s\S]*)end_header(\r\n|\r|\n)/,b="",y=v.exec(g);y!==null&&(b=y[1]);let C={comments:[],elements:[],headerLength:p,objInfo:""},S=b.split(/\r\n|\r|\n/),M;function A(T,x){let I={type:T[0]};return I.type==="list"?(I.name=T[3],I.countType=T[1],I.itemType=T[2]):I.name=T[1],I.name in x&&(I.name=x[I.name]),I}for(let T=0;T<S.length;T++){let x=S[T];if(x=x.trim(),x==="")continue;let I=x.split(/\s+/),V=I.shift();switch(x=I.join(" "),V){case"format":C.format=I[0],C.version=I[1];break;case"comment":C.comments.push(x);break;case"element":M!==void 0&&C.elements.push(M),M={},M.name=I[0],M.count=parseInt(I[1]),M.properties=[];break;case"property":M.properties.push(A(I,_.propertyNameMapping));break;case"obj_info":C.objInfo=x;break;default:console.log("unhandled",V,I)}}return M!==void 0&&C.elements.push(M),C}function i(g,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(g);case"float":case"double":case"float32":case"float64":return parseFloat(g)}}function r(g,p){let v={};for(let b=0;b<g.length;b++){if(p.empty())return null;if(g[b].type==="list"){let y=[],C=i(p.next(),g[b].countType);for(let S=0;S<C;S++){if(p.empty())return null;y.push(i(p.next(),g[b].itemType))}v[g[b].name]=y}else v[g[b].name]=i(p.next(),g[b].type)}return v}function o(){let g={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(let p of Object.keys(_.customPropertyMapping))g[p]=[];return g}function s(g){let p=g.map(b=>b.name);function v(b){for(let y=0,C=b.length;y<C;y++){let S=b[y];if(p.includes(S))return S}return null}return{attrX:v(["x","px","posx"])||"x",attrY:v(["y","py","posy"])||"y",attrZ:v(["z","pz","posz"])||"z",attrNX:v(["nx","normalx"]),attrNY:v(["ny","normaly"]),attrNZ:v(["nz","normalz"]),attrS:v(["s","u","texture_u","tx"]),attrT:v(["t","v","texture_v","ty"]),attrR:v(["red","diffuse_red","r","diffuse_r"]),attrG:v(["green","diffuse_green","g","diffuse_g"]),attrB:v(["blue","diffuse_blue","b","diffuse_b"])}}function a(g,p){let v=o(),b=/end_header\s+(\S[\s\S]*\S|\S)\s*$/,y,C;(C=b.exec(g))!==null?y=C[1].split(/\s+/):y=[];let S=new rA(y);e:for(let M=0;M<p.elements.length;M++){let A=p.elements[M],T=s(A.properties);for(let x=0;x<A.count;x++){let I=r(A.properties,S);if(!I)break e;l(v,A.name,I,T)}}return c(v)}function c(g){let p=new gt;g.indices.length>0&&p.setIndex(g.indices),p.setAttribute("position",new qe(g.vertices,3)),g.normals.length>0&&p.setAttribute("normal",new qe(g.normals,3)),g.uvs.length>0&&p.setAttribute("uv",new qe(g.uvs,2)),g.colors.length>0&&p.setAttribute("color",new qe(g.colors,3)),(g.faceVertexUvs.length>0||g.faceVertexColors.length>0)&&(p=p.toNonIndexed(),g.faceVertexUvs.length>0&&p.setAttribute("uv",new qe(g.faceVertexUvs,2)),g.faceVertexColors.length>0&&p.setAttribute("color",new qe(g.faceVertexColors,3)));for(let v of Object.keys(_.customPropertyMapping))g[v].length>0&&p.setAttribute(v,new qe(g[v],_.customPropertyMapping[v].length));return p.computeBoundingSphere(),p}function l(g,p,v,b){if(p==="vertex"){g.vertices.push(v[b.attrX],v[b.attrY],v[b.attrZ]),b.attrNX!==null&&b.attrNY!==null&&b.attrNZ!==null&&g.normals.push(v[b.attrNX],v[b.attrNY],v[b.attrNZ]),b.attrS!==null&&b.attrT!==null&&g.uvs.push(v[b.attrS],v[b.attrT]),b.attrR!==null&&b.attrG!==null&&b.attrB!==null&&(go.setRGB(v[b.attrR]/255,v[b.attrG]/255,v[b.attrB]/255).convertSRGBToLinear(),g.colors.push(go.r,go.g,go.b));for(let y of Object.keys(_.customPropertyMapping))for(let C of _.customPropertyMapping[y])g[y].push(v[C])}else if(p==="face"){let y=v.vertex_indices||v.vertex_index,C=v.texcoord;y.length===3?(g.indices.push(y[0],y[1],y[2]),C&&C.length===6&&(g.faceVertexUvs.push(C[0],C[1]),g.faceVertexUvs.push(C[2],C[3]),g.faceVertexUvs.push(C[4],C[5]))):y.length===4&&(g.indices.push(y[0],y[1],y[3]),g.indices.push(y[1],y[2],y[3])),b.attrR!==null&&b.attrG!==null&&b.attrB!==null&&(go.setRGB(v[b.attrR]/255,v[b.attrG]/255,v[b.attrB]/255).convertSRGBToLinear(),g.faceVertexColors.push(go.r,go.g,go.b),g.faceVertexColors.push(go.r,go.g,go.b),g.faceVertexColors.push(go.r,go.g,go.b))}}function d(g,p){let v={},b=0;for(let y=0;y<p.length;y++){let C=p[y],S=C.valueReader;if(C.type==="list"){let M=[],A=C.countReader.read(g+b);b+=C.countReader.size;for(let T=0;T<A;T++)M.push(S.read(g+b)),b+=S.size;v[C.name]=M}else v[C.name]=S.read(g+b),b+=S.size}return[v,b]}function u(g,p,v){function b(y,C,S){switch(C){case"int8":case"char":return{read:M=>y.getInt8(M),size:1};case"uint8":case"uchar":return{read:M=>y.getUint8(M),size:1};case"int16":case"short":return{read:M=>y.getInt16(M,S),size:2};case"uint16":case"ushort":return{read:M=>y.getUint16(M,S),size:2};case"int32":case"int":return{read:M=>y.getInt32(M,S),size:4};case"uint32":case"uint":return{read:M=>y.getUint32(M,S),size:4};case"float32":case"float":return{read:M=>y.getFloat32(M,S),size:4};case"float64":case"double":return{read:M=>y.getFloat64(M,S),size:8}}}for(let y=0,C=g.length;y<C;y++){let S=g[y];S.type==="list"?(S.countReader=b(p,S.countType,v),S.valueReader=b(p,S.itemType,v)):S.valueReader=b(p,S.type,v)}}function h(g,p){let v=o(),b=p.format==="binary_little_endian",y=new DataView(g,p.headerLength),C,S=0;for(let M=0;M<p.elements.length;M++){let A=p.elements[M],T=A.properties,x=s(T);u(T,y,b);for(let I=0;I<A.count;I++){C=d(S,T),S+=C[1];let V=C[0];l(v,A.name,V,x)}}return c(v)}function f(g){let p=0,v=!0,b="",y=[],C=new TextDecoder().decode(g.subarray(0,5)),S=/^ply\r\n/.test(C);do{let M=String.fromCharCode(g[p++]);M!==`
`&&M!=="\r"?b+=M:(b==="end_header"&&(v=!1),b!==""&&(y.push(b),b=""))}while(v&&p<g.length);return S===!0&&p++,{headerText:y.join("\r")+"\r",headerLength:p}}let m,_=this;if(t instanceof ArrayBuffer){let g=new Uint8Array(t),{headerText:p,headerLength:v}=f(g),b=e(p,v);if(b.format==="ascii"){let y=new TextDecoder().decode(g);m=a(y,b)}else m=h(t,b)}else m=a(t,e(t));return m}},rA=class{constructor(t){this.arr=t,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}};var loe=(()=>{class n extends Ef{constructor(){super(...arguments),this.clazz=Jx}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uV=(()=>{class n extends Df{constructor(e,i,r){super(e,i),this.host=e,this.zone=i,this.service=r}getRefFromResponse(e){return e.computeVertexNormals(),e}load(){return _i(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");let e=this._url,i=yl(this.onProgress$)?o=>{this.onProgress$?.next(o)}:void 0,r=yield this.zone.runOutsideAngular(()=>this.service.load(e,i));this.host.objRef=this.getRefFromResponse(r),this.onLoaded$&&r!==void 0&&this.onLoaded$?.next(r)})}static{this.\u0275fac=function(i){return new(i||n)(F(ii,1),F($e),F(loe))}}static{this.\u0275dir=Ye({type:n,selectors:[["","loadPLY",""]],features:[X]})}}return n})();var uoe=["outerRef"],hoe=["innerRef"],foe=["*"];function poe(n,t){n&1&&rh(0)}function moe(n,t){if(n&1){let e=Yt();H(0,"div",5,1),Le("onResize",function(){ht(e);let r=$t();return ft(r.onResize())}),H(2,"div",3,2)(4,"div",6),Fi(5,poe,1,0,"ng-container",7),ee()()()}if(n&2){let e=$t(),i=Pt(3);j("ngStyle",e.styles),k(2),j("ngStyle",e.transformInnerStyles),k(2),av(e.style),j("className",e.className),k(),j("ngTemplateOutlet",i)}}function goe(n,t){n&1&&rh(0)}function _oe(n,t){if(n&1&&(H(0,"div",4,1),Fi(2,goe,1,0,"ng-container",7),ee()),n&2){let e=$t(),i=Pt(3);j("ngStyle",e.styles)("className",e.className),k(2),j("ngTemplateOutlet",i)}}function boe(n,t){n&1&&K(0)}var Ug=new R,aA=new R,voe=new R;function yoe(n,t,e){let i=Ug.setFromMatrixPosition(n.matrixWorld);i.project(t);let r=e.width/2,o=e.height/2;return[i.x*r+r,-(i.y*o)+o]}function xoe(n,t){let e=Ug.setFromMatrixPosition(n.matrixWorld),i=aA.setFromMatrixPosition(t.matrixWorld),r=e.sub(i),o=t.getWorldDirection(voe);return r.angleTo(o)>Math.PI/2}function woe(n,t,e,i){let r=Ug.setFromMatrixPosition(n.matrixWorld),o=r.clone();o.project(t),e.setFromCamera(o,t);let s=e.intersectObjects(i,!0);if(s.length){let a=s[0].distance;return r.distanceTo(e.ray.origin)<a}return!0}function Moe(n,t){if(t instanceof Ao)return t.zoom;if(t instanceof en){let e=Ug.setFromMatrixPosition(n.matrixWorld),i=aA.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,o=e.distanceTo(i);return 1/(2*Math.tan(r/2)*o)}else return 1}function Soe(n,t,e){if(t instanceof en||t instanceof Ao){let i=Ug.setFromMatrixPosition(n.matrixWorld),r=aA.setFromMatrixPosition(t.matrixWorld),o=i.distanceTo(r),s=(e[1]-e[0])/(t.far-t.near),a=e[1]-s*t.far;return Math.round(s*o+a)}}var sA=n=>Math.abs(n)<1e-10?0:n;function hV(n,t,e=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=sA(t[r]*n.elements[r])+(r!==15?",":")");return e+i}var Roe=(n=>t=>hV(t,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Toe=(n=>(t,e)=>hV(t,n(e),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),fV=(()=>{class n extends Fl{constructor(e,i){super(i),this.view=e,this.DoubleSide=Kn,this.FRAGMENT_SHADER=Eoe,this.VERTEX_SHADER=Coe,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new nt,this.calculatePosition=yoe,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=q(iu)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(e){super.ngOnChanges(e)}appendElement(e){if(!(!this.el||!this.objRef||!this.view.hostElement||!this.view.camera)){if(this.target=this.portal??this.view.hostElement.nativeElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)e.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let i=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());e.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${i[0]}px,${i[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(e):this.target.appendChild(e))}}onFrame(){let e=this.view.camera?.objRef,i=this.view.scene?.objRef,r=this._objRef,o=this.getSize();if(!e||!r||!i||!this.el)return;e.updateMatrixWorld(),r.updateWorldMatrix(!0,!1);let s=this.transform?this.oldPosition:this.calculatePosition(r,e,o);if(this.transform||Math.abs(this.oldZoom-e.zoom)>this.eps||Math.abs(this.oldPosition[0]-s[0])>this.eps||Math.abs(this.oldPosition[1]-s[1])>this.eps){let a=xoe(r,e),c=!1;typeof this.occlude=="boolean"?this.occlude===!0&&(c=[i]):Array.isArray(this.occlude)&&(c=this.occlude.map(d=>d.objRef??d));let l=this.notOccluded;if(c?this.notOccluded=!a&&woe(r,e,this.raycaster,c):this.notOccluded=!a,l!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${Soe(r,e,this.zIndexRange)}`,this.transform){let[d,u]=[o.width/2,o.height/2],h=e.projectionMatrix.elements[5]*u,{isOrthographicCamera:f,top:m,left:_,bottom:g,right:p}=e,v=Roe(e.matrixWorldInverse),b=f?`scale(${h})translate(${sA(-(p+_)/2)}px,${sA((m+g)/2)}px)`:`translateZ(${h}px)`,y=r.matrixWorld;this.sprite&&(y=e.matrixWorldInverse.clone().transpose().copyPosition(y).scale(r.scale),y.elements[3]=y.elements[7]=y.elements[11]=0,y.elements[15]=1),this.el.style.width=o.width+"px",this.el.style.height=o.height+"px",this.el.style.perspective=f?"":`${h}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${b}${v}translate(${d}px,${u}px)`,this.transformInnerRef.nativeElement.style.transform=Toe(y,1/((this.distanceFactor||10)/400)))}else{let d=this.distanceFactor===void 0?1:Moe(r,e)*this.distanceFactor;this.el.style.transform=`translate3d(${s[0]}px,${s[1]}px,0) scale(${d})`}this.oldPosition=s,this.oldZoom=e.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){let e=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:e.width+"px",height:e.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:pe(pe({position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none"},this.fullscreen&&{top:-e.height/2+"px",left:-e.width/2+"px",width:e.width+"px",height:e.height+"px"}),this.style)}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.view.hostElement.nativeElement.getBoundingClientRect()??{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(F(Fr),F(me,4))}}static{this.\u0275cmp=L({type:n,selectors:[["th-html"]],viewQuery:function(i,r){if(i&1&&(qt(uoe,5),qt(hoe,5)),i&2){let o;ct(o=lt())&&(r.transformOuterRef=o.first),ct(o=lt())&&(r.transformInnerRef=o.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},features:[X,Hn],ngContentSelectors:foe,decls:4,vars:1,consts:[["tempOutlet",""],["outerRef",""],["innerRef",""],[3,"ngStyle"],[3,"ngStyle","className"],[3,"onResize","ngStyle"],[3,"className"],[4,"ngTemplateOutlet"]],template:function(i,r){i&1&&(ae(),Fi(0,moe,6,6,"div",3)(1,_oe,3,3,"div",4)(2,boe,1,0,"ng-template",null,0,lv)),i&2&&gn(r.transform?0:1)},dependencies:[yv,hO,Rl],encapsulation:2,changeDetection:0})}}return n})(),Coe=`
/*
  This shader is from the THREE's SpriteMaterial.
  We need to turn the backing plane into a Sprite
  (make it always face the camera) if "transfrom" 
  is false. 
*/
#include <common>
void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;
  
  // This is somewhat arbitrary, but it seems to work well
  // Need to figure out how to derive this dynamically if it even matters
  float size = 0.03;
  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;
  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix * mvPosition;
}
`,Eoe=`
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}
`;var $f=(()=>{class n{constructor(e,i){this.host=e,this.parent=i,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=Zy()}set refById(e){this.id=e,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(i=>{this.parentObj=i,this.applyRef()})}applyRef(){if(!this.parentObj||this.id===void 0)return;let e=this.findById(this.parentObj,this.id);e&&this.setRef(this.host,e)}findById(e,i){if((e.name??e.uuid)===i)return e;for(let r of e.children){let o=this.findById(r,i);if(o!==void 0)return o}}setRef(e,i){let r=e.objRef;r&&bf(r)&&(r.objRef=i,e.objRef=r)}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(F(me,2),F(me,4))}}static{this.\u0275dir=Ye({type:n,selectors:[["","refById",""]],inputs:{refById:"refById"}})}}return n})();var pV=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[nA,Yo,nA]})}}return n})();function mV(n){return[{provide:me,useExisting:_e(()=>n)}]}var lA=n=>[0,n,0],Aoe=()=>[0,1,0],Ioe=()=>({background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}),gV=n=>[n,0,0],Poe=n=>[0,.039,n],Foe=()=>[.17,.17,.17],koe=()=>[4,10,2],joe=()=>[100,100],Ooe=()=>[55,2,.1,100],Noe=(n,t)=>[n,0,t],Loe=()=>[0,0,0],_V=(()=>{class n{constructor(e){this.Math=Math,this.sprite=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new co(!0),this.plane=new ur(new R(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}static{this.\u0275fac=function(i){return new(i||n)(F(Sl))}}static{this.\u0275cmp=L({type:n,selectors:[["app-html-example"]],decls:17,vars:57,consts:[["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src",Kb`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",1),Le("onRender",function(){return ht(o),ft(r.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight",2),H(3,"th-group",3)(4,"th-object3D",4)(5,"th-mesh",5)(6,"th-html",6),fe(7,"iframe",7),ee()()()(),fe(8,"th-directionalLight",8,0),ki(10,"color"),H(11,"th-mesh",9),fe(12,"th-planeGeometry",10)(13,"th-meshBasicMaterial",11),ki(14,"color"),ee(),H(15,"th-perspectiveCamera",12),fe(16,"th-orbitControls"),ee()()()}i&2&&(j("thStats",!0)("shadow",!0),k(2),j("intensity",3),k(),j("rotation",bt(35,lA,r.Math.PI))("position",J(37,Aoe)),k(),j("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),j("refById","Cube008_2"),k(),av(J(38,Ioe)),j("rotation",bt(39,gV,-1*r.Math.PI/2))("position",bt(41,Poe,-.5))("scale",J(43,Foe))("sprite",r.sprite)("transform",!0)("occlude",!0),k(2),j("castShadow",!0)("position",J(44,koe))("lookAt",bt(45,lA,-3))("color",Gi(10,31,"#ffffff"))("intensity",2),k(3),j("receiveShadow",!0)("rotation",bt(47,gV,3*r.Math.PI/2))("position",bt(49,lA,-3)),k(),j("args",J(51,joe)),k(),j("color",Gi(14,33,"#efefef")),k(2),j("args",J(52,Ooe))("position",Wn(53,Noe,-5,-15))("lookAt",J(56,Loe)))},dependencies:[In,Zt,me,Ci,hr,Fl,Ri,Bt,wa,Jo,Dt,Xn,An,$f,fV,Pa],encapsulation:2,changeDetection:0})}}return n})();var yGe=.5*(Math.sqrt(3)-1),xGe=(3-Math.sqrt(3))/6,Boe=1/3,Fa=1/6,wGe=(Math.sqrt(5)-1)/4,MGe=(5-Math.sqrt(5))/20,dA=n=>Math.floor(n)|0;var uA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function bV(n=Math.random){let t=Uoe(n),e=new Float64Array(t).map(o=>uA[o%12*3]),i=new Float64Array(t).map(o=>uA[o%12*3+1]),r=new Float64Array(t).map(o=>uA[o%12*3+2]);return function(s,a,c){let l,d,u,h,f=(s+a+c)*Boe,m=dA(s+f),_=dA(a+f),g=dA(c+f),p=(m+_+g)*Fa,v=m-p,b=_-p,y=g-p,C=s-v,S=a-b,M=c-y,A,T,x,I,V,W;C>=S?S>=M?(A=1,T=0,x=0,I=1,V=1,W=0):C>=M?(A=1,T=0,x=0,I=1,V=0,W=1):(A=0,T=0,x=1,I=1,V=0,W=1):S<M?(A=0,T=0,x=1,I=0,V=1,W=1):C<M?(A=0,T=1,x=0,I=0,V=1,W=1):(A=0,T=1,x=0,I=1,V=1,W=0);let te=C-A+Fa,ne=S-T+Fa,B=M-x+Fa,G=C-I+2*Fa,U=S-V+2*Fa,se=M-W+2*Fa,Ce=C-1+3*Fa,Ie=S-1+3*Fa,Qe=M-1+3*Fa,vt=m&255,Q=_&255,Ee=g&255,We=.6-C*C-S*S-M*M;if(We<0)l=0;else{let Ue=vt+t[Q+t[Ee]];We*=We,l=We*We*(e[Ue]*C+i[Ue]*S+r[Ue]*M)}let N=.6-te*te-ne*ne-B*B;if(N<0)d=0;else{let Ue=vt+A+t[Q+T+t[Ee+x]];N*=N,d=N*N*(e[Ue]*te+i[Ue]*ne+r[Ue]*B)}let we=.6-G*G-U*U-se*se;if(we<0)u=0;else{let Ue=vt+I+t[Q+V+t[Ee+W]];we*=we,u=we*we*(e[Ue]*G+i[Ue]*U+r[Ue]*se)}let Ne=.6-Ce*Ce-Ie*Ie-Qe*Qe;if(Ne<0)h=0;else{let Ue=vt+1+t[Q+1+t[Ee+1]];Ne*=Ne,h=Ne*Ne*(e[Ue]*Ce+i[Ue]*Ie+r[Ue]*Qe)}return 32*(l+d+u+h)}}function Uoe(n){let e=new Uint8Array(512);for(let i=0;i<512/2;i++)e[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(n()*(256-i)),o=e[i];e[i]=e[r],e[r]=o}for(let i=256;i<512;i++)e[i]=e[i-256];return e}var Voe=["canvas"],zoe=["light"],Hoe=["instancedMesh"],Goe=()=>[0,0,30],Woe=()=>[0,0,0],$oe=()=>["#808080"],qoe=n=>[void 0,void 0,n],Xoe=(n,t,e)=>[n,t,e],vV=()=>["#9C1E15"],Yoe=n=>[0,0,n],Zoe=(n,t)=>[n,t],yV=(()=>{class n{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new Rt,this.simplexNoise=bV(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){let e=this.light?.position;e&&(e.x=this.pointerPN.x*this.W,e.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;let e=-this.W/2+this.PADDING,i=-this.H/2+this.PADDING,r=Date.now()*1e-4,o=this.pointerPN.x*.1,s=this.pointerPN.y*.1,a=.005,c,l,d,u,h,f;for(let m=0;m<this.NX;m++)for(let _=0;_<this.NY;_++)c=e+m*this.SIZEP,l=i+_*this.SIZEP,d=c*a+o,u=l*a+s,h=this.simplexNoise(d,u,r)*Math.PI,f=this.simplexNoise(u,d,r)*Math.PI,this.dummy.position.set(c,l,-10),this.dummy.rotation.set(h,f,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(m*this.NY+_,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(e){if(!this.canvas||!this.canvas.hostElement.nativeElement)return;let i=this.canvas.hostElement.nativeElement;this.pointerPN.x=(e.clientX-i.offsetLeft+window.scrollX)/i.clientWidth*2-1,this.pointerPN.y=-((e.clientY-i.offsetTop+window.scrollY)/i.clientHeight)*2+1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-instanced-mesh-example"]],viewQuery:function(i,r){if(i&1&&(qt(Voe,5),qt(zoe,5),qt(Hoe,5)),i&2){let o;ct(o=lt())&&(r.canvas=o.first),ct(o=lt())&&(r.light=o.first),ct(o=lt())&&(r.instancedMesh=o.first)}},hostBindings:function(i,r){i&1&&Le("mousemove",function(s){return r.onMouseMove(s)},!1,th)},decls:15,vars:34,consts:[["canvas",""],["light",""],["instancedMesh",""],[3,"onRender","shadow"],[3,"position","lookAt"],[3,"intensity","color"],[3,"castShadow","intensity","decay"],[3,"args","count","castShadow","receiveShadow"],[3,"args"],[3,"color"],[3,"position","receiveShadow"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",3,0),Le("onRender",function(){return ht(o),ft(r.onRender())}),H(2,"th-scene")(3,"th-perspectiveCamera",4),fe(4,"th-orbitControls"),ee(),fe(5,"th-ambientLight",5)(6,"th-pointLight",6,1),H(8,"th-instancedMesh",7,2),fe(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",9),ee(),H(12,"th-mesh",10),fe(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",9),ee()()()}i&2&&(j("shadow",!0),k(3),j("position",J(18,Goe))("lookAt",J(19,Woe)),k(2),j("intensity",3)("color",J(20,$oe)),k(),j("castShadow",!0)("intensity",3)("decay",0),k(2),j("args",bt(21,qoe,r.NUM_INSTANCES))("count",r.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),k(2),j("args",Js(23,Xoe,r.SIZE,r.SIZE,r.SIZE)),k(),j("color",J(27,vV)),k(),j("position",bt(28,Yoe,-10-r.SIZE))("receiveShadow",!0),k(),j("args",Wn(30,Zoe,r.W*2,r.H*2)),k(),j("color",J(33,vV)))},dependencies:[In,Zt,Ci,fr,zU,Ri,Bt,uo,ou,Jo,Dt],encapsulation:2,changeDetection:0})}}return n})();var Qoe=()=>[2,2,2],Koe=()=>[1,1,1],Joe=()=>({color:"purple"}),ese=n=>[n,0,0],tse=()=>[2,0,0],ise=()=>[75,2,.1,1e3],nse=()=>[1,1,5],rse=(()=>{class n{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},decls:3,vars:7,consts:[[3,"onClick","rotation","position","scale"],[3,"args"]],template:function(i,r){i&1&&(H(0,"th-mesh",0),Le("onClick",function(){return r.selected=!r.selected}),fe(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),ee()),i&2&&(j("rotation",r.rotation)("position",r.position)("scale",r.selected?J(4,Qoe):J(5,Koe)),k(2),j("args",J(6,Joe)))},dependencies:[Ri,wa,ou,ts],encapsulation:2,changeDetection:0})}}return n})(),xV=(()=>{class n{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-introductory-example"]],decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(i,r){i&1&&(H(0,"th-canvas",0),Le("onRender",function(){return r.onBeforeRender()}),H(1,"th-scene"),fe(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),ee()()),i&2&&(k(2),j("position",bt(6,ese,-2))("rotation",r.rotation),k(),j("position",J(8,tse))("rotation",r.rotation),k(2),j("args",J(9,ise))("position",J(10,nse)))},dependencies:[Zt,Ci,Bt,Dt,rse],encapsulation:2,changeDetection:0})}}return n})();var ose=()=>[0,1,0],sse=()=>[100,100,100],ase=n=>[0,0,n],cse=()=>[10,10],wV=()=>[10,10,10],lse=()=>[45,2,.1,100],dse=()=>[0,0,0],MV=(()=>{class n{constructor(){this.assetPath1=`${an}DamagedHelmet.glb`,this.assetPath2=`${an}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-loader-example"]],decls:8,vars:24,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(H(0,"th-canvas",0),Le("onRender",function(){return r.onBeforeRender()}),H(1,"th-scene",1),fe(2,"th-ambientLight",2),H(3,"th-object3D",3),fe(4,"th-object3D",4),ee(),fe(5,"th-gridHelper",5)(6,"th-pointLight",6)(7,"th-perspectiveCamera",7),ee()()),i&2&&(k(),j("thStats",!0),k(),j("intensity",3),k(),j("url",r.assetPath1)("rotation",r.rotation)("position",J(15,ose)),k(),j("url",r.assetPath2)("scale",J(16,sse))("rotation",r.rotation)("position",bt(17,ase,-3)),k(),j("args",J(19,cse)),k(),j("position",J(20,wV))("decay",0),k(),j("args",J(21,lse))("position",J(22,wV))("lookAt",J(23,dse)))},dependencies:[Zt,me,Pr,Ci,fr,Bt,Dt,Xn,An],encapsulation:2,changeDetection:0})}}return n})();var use=["slider"],hse=()=>[35,2,.1,100],fse=()=>[0,0,6],pse=(n,t)=>({x:0,y:0,width:n,height:t}),mse=()=>["#ffffff","#444444",1],gse=n=>[n,2,2],_se=()=>[1,3],bse=(n,t,e)=>({x:n,y:0,width:t,height:e}),SV=(()=>{class n{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new ge(12375183),this.colorRight=new ge(9419988)}ngOnInit(){!this.slider||!this.canvas||!this.canvas.rendererCanvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas.clientWidth||0)/2)}onPointerMove(e){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||e.isPrimary===!1)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.sliderPos=Math.max(r.left,Math.min(r.right,e.pageX))-r.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(e){e.isPrimary!==!1&&(this.controlsEnabled=!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-multi-scene-example"]],viewQuery:function(i,r){if(i&1&&(qt(use,7),qt(Dt,7)),i&2){let o;ct(o=lt())&&(r.slider=o.first),ct(o=lt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&Le("pointermove",function(s){return r.onPointerMove(s)},!1,HS)("pointerup",function(){return r.onPointerUp()},!1,HS)},decls:20,vars:33,consts:[["slider",""],["thecanvas",""],["cam",""],["light",""],["geo",""],[1,"slider",3,"pointerdown"],[3,"disableDefaultView"],[3,"args","position"],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],[3,"args","position","intensity"],[3,"args"],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(i,r){if(i&1){let o=Yt();H(0,"div",5,0),Le("pointerdown",function(a){return ht(o),ft(r.onSliderPointerDown(a))}),ee(),H(2,"th-canvas",6,1)(4,"th-perspectiveCamera",7,2),fe(6,"th-orbitControls"),ee(),H(7,"th-view",8)(8,"th-scene",9),fe(9,"th-hemisphereLight",10,3),H(11,"th-mesh"),fe(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",11,4),ee()()(),H(15,"th-view",8)(16,"th-scene",9),fe(17,"th-hemisphereLight",12),H(18,"th-mesh",13),fe(19,"th-meshStandardMaterial",14),ee()()()()}if(i&2){let o=Pt(3),s=Pt(5),a=Pt(10),c=Pt(14);k(2),j("disableDefaultView",!0),k(2),j("args",J(20,hse))("position",J(21,fse)),k(3),j("scissor",Wn(22,pse,r.sliderPos,(o.rendererCanvas==null?null:o.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorLeft)("camera",s),k(),j("background",r.colorLeft),k(),j("args",J(25,mse))("position",bt(26,gse,-2))("intensity",3),k(4),j("args",J(28,_se)),k(2),j("scissor",Js(29,bse,r.sliderPos,(o.rendererCanvas==null?null:o.rendererCanvas.width)||0,(o.rendererCanvas==null?null:o.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorRight)("camera",s),k(),j("background",r.colorRight),k(),j("objRef",a.objRef==null?null:a.objRef.clone()),k(),j("geometry",c.objRef),k(),j("wireframe",!0)}},dependencies:[In,Zt,vf,Ri,Bt,Eg,VU,Dt,Fr],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0})}}return n})();var tw={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};var vse=["thecanvas"],yse=(n,t)=>({x:0,y:0,width:n,height:t}),xse=()=>[0,0,1],wse=()=>["#ffffff"],Mse=()=>[0,0,0],iw=n=>[n,0,0],Sse=()=>[200,32,16],Rse=()=>["#fac400"],Tse=()=>["#f83f0d"],Cse=()=>[400,0,0],hA=(n,t,e,i)=>({x:n,y:t,width:e,height:i}),Ese=n=>[n],Dse=()=>({value:.055}),Ase=n=>({amount:n}),Ise=()=>[.35,.5,2048,!0],RV=(()=>{class n{constructor(){this.Math=Math,this.RGBShiftShader=tw,this.DotScreenShader=Px,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new ge(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,i)=>{this.updateSize(),e.position.x+=this.mouseX*.05,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(i.position),e.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new ge(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,i)=>{this.updateSize(),e.position.x-=this.mouseX*.05,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new ge(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,i)=>{this.updateSize(),e.position.y-=this.mouseX*.05,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(i.position),e.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new Xd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;let i=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=e.clientX-i.left-i.width/2,this.mouseY=e.clientY-i.right-i.height/2}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(i,r){if(i&1&&qt(vse,7),i&2){let o;ct(o=lt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&Le("mousemove",function(s){return r.onMouseMove(s)},!1,th)},decls:32,vars:96,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview1",""],["camera1",""],["thview2",""],["camera2",""],["thview3",""],["camera3",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"onRender","scene","viewPort","scissor","scissorTest"],[3,"position","up","fov","aspect","near","far"],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",10,0)(2,"th-scene",null,1),fe(4,"th-directionalLight",11),H(5,"th-mesh",12),fe(6,"th-sphereGeometry",13,2)(8,"th-meshPhongMaterial",14,3),ee(),fe(10,"th-mesh",15)(11,"th-mesh",15),ee(),H(12,"th-view",16,4),Le("onRender",function(){ht(o);let a=Pt(3),c=Pt(15);return ft(r.view1.updateCamera(c.objRef,a.objRef))}),fe(14,"th-perspectiveCamera",17,5),H(16,"th-effectComposer"),fe(17,"th-renderPass",18)(18,"th-unrealBloomPass",19)(19,"th-shaderPass",20)(20,"th-glitchPass"),ee()(),H(21,"th-view",21,6),Le("onRender",function(){ht(o);let a=Pt(3),c=Pt(24);return ft(r.view2.updateCamera(c.objRef,a.objRef))}),fe(23,"th-perspectiveCamera",17,7),H(25,"th-effectComposer"),fe(26,"th-renderPass")(27,"th-filmPass",13),ee()(),H(28,"th-view",21,8),Le("onRender",function(){ht(o);let a=Pt(3),c=Pt(31);return ft(r.view3.updateCamera(c.objRef,a.objRef))}),fe(30,"th-perspectiveCamera",17,9),ee()()}if(i&2){let o=Pt(3),s=Pt(7),a=Pt(9),c=Pt(13),l=Pt(22),d=Pt(29);j("disableDefaultView",!0)("viewPort",Wn(57,yse,.5*r.canvasWidth,r.canvasHeight)),k(4),j("position",J(60,xse))("args",J(61,wse))("intensity",3),k(),j("position",J(62,Mse))("rotation",bt(63,iw,-r.Math.PI/2)),k(),j("args",J(65,Sse)),k(2),j("flatShading",!1)("shininess",30)("specular",J(66,Rse))("color",J(67,Tse)),k(2),j("position",bt(68,iw,-400))("rotation",bt(70,iw,-r.Math.PI/2))("geometry",s.objRef)("material",a.objRef),k(),j("position",J(72,Cse))("rotation",bt(73,iw,-r.Math.PI/2))("geometry",s.objRef)("material",a.objRef),k(),j("scene",o)("viewPort",ah(75,hA,r.view1.left*r.canvasWidth,r.view1.bottom*r.canvasHeight,r.view1.width*r.canvasWidth,r.view1.height*r.canvasHeight))("scissor",c.viewPort)("scissorTest",!0),k(2),j("position",r.view1.eye)("up",r.view1.up)("fov",r.view1.fov)("aspect",r.view1.width*r.canvasWidth/(r.view1.height*r.canvasHeight))("near",1)("far",1e4),k(3),j("clearColor",r.view1.background),k(),j("strength",.2),k(),j("args",bt(80,Ese,r.RGBShiftShader))("uniforms",bt(83,Ase,J(82,Dse))),k(2),j("scene",o)("viewPort",ah(85,hA,r.view2.left*r.canvasWidth,r.view2.bottom*r.canvasHeight,r.view2.width*r.canvasWidth,r.view2.height*r.canvasHeight))("scissor",l.viewPort)("scissorTest",!0)("clearColor",r.view2.background),k(2),j("position",r.view2.eye)("up",r.view2.up)("fov",r.view2.fov)("aspect",r.view2.width*r.canvasWidth/(r.view2.height*r.canvasHeight))("near",1)("far",1e4),k(4),j("args",J(90,Ise)),k(),j("scene",o)("viewPort",ah(91,hA,r.view3.left*r.canvasWidth,r.view3.bottom*r.canvasHeight,r.view3.width*r.canvasWidth,r.view3.height*r.canvasHeight))("scissor",d.viewPort)("scissorTest",!0)("clearColor",r.view3.background),k(2),j("position",r.view3.eye)("up",r.view3.up)("fov",r.view3.fov)("aspect",r.view3.width*r.canvasWidth/(r.view3.height*r.canvasHeight))("near",1)("far",1e4)}},dependencies:[Zt,hr,Ri,Bt,uo,kl,Ea,kU,UU,Wf,Cg,Zx,Dt,Fr],encapsulation:2,changeDetection:0})}}return n})();var kV=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(F(Qs),F(et))}}static{this.\u0275dir=Ye({type:n})}}return n})(),$g=(()=>{class n extends kV{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,features:[X]})}}return n})(),Zf=new Se(""),Pse={provide:Zf,useExisting:_e(()=>_A),multi:!0},_A=(()=>{class n extends $g{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&Le("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[ie([Pse]),X]})}}return n})(),Fse={provide:Zf,useExisting:_e(()=>aw),multi:!0};function kse(){let n=ea()?ea().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var jse=new Se(""),aw=(()=>{class n extends kV{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!kse())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Qs),F(et),F(jse,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Le("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ie([Fse]),X]})}}return n})();var Ose=new Se(""),Nse=new Se("");function jV(n){return n!=null}function OV(n){return Yc(n)?Pi(n):n}function NV(n){let t={};return n.forEach(e=>{t=e!=null?pe(pe({},t),e):t}),Object.keys(t).length===0?null:t}function LV(n,t){return t.map(e=>e(n))}function Lse(n){return!n.validate}function BV(n){return n.map(t=>Lse(t)?t:e=>t.validate(e))}function Bse(n){if(!n)return null;let t=n.filter(jV);return t.length==0?null:function(e){return NV(LV(e,t))}}function UV(n){return n!=null?Bse(BV(n)):null}function Use(n){if(!n)return null;let t=n.filter(jV);return t.length==0?null:function(e){let i=LV(e,t).map(OV);return ql(i).pipe(dt(NV))}}function VV(n){return n!=null?Use(BV(n)):null}function TV(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Vse(n){return n._rawValidators}function zse(n){return n._rawAsyncValidators}function fA(n){return n?Array.isArray(n)?n:[n]:[]}function rw(n,t){return Array.isArray(n)?n.includes(t):n===t}function CV(n,t){let e=fA(t);return fA(n).forEach(r=>{rw(e,r)||e.push(r)}),e}function EV(n,t){return fA(t).filter(e=>!rw(n,e))}var ow=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=UV(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=VV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},pA=class extends ow{get formDirective(){return null}get path(){return null}},Wg=class extends ow{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},mA=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Hse={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eWe=Gt(pe({},Hse),{"[class.ng-submitted]":"isSubmitted"}),cw=(()=>{class n extends mA{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Wg,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Wt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[X]})}}return n})();var Vg="VALID",nw="INVALID",qf="PENDING",zg="DISABLED",Yf=class{},sw=class extends Yf{constructor(t,e){super(),this.value=t,this.source=e}},Hg=class extends Yf{constructor(t,e){super(),this.pristine=t,this.source=e}},Gg=class extends Yf{constructor(t,e){super(),this.touched=t,this.source=e}},Xf=class extends Yf{constructor(t,e){super(),this.status=t,this.source=e}};function Gse(n){return(lw(n)?n.validators:n)||null}function Wse(n){return Array.isArray(n)?UV(n):n||null}function $se(n,t){return(lw(t)?t.asyncValidators:n)||null}function qse(n){return Array.isArray(n)?VV(n):n||null}function lw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var gA=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ch(()=>this.statusReactive()),this.statusReactive=cd(void 0),this._pristine=ch(()=>this.pristineReactive()),this.pristineReactive=cd(!0),this._touched=ch(()=>this.touchedReactive()),this.touchedReactive=cd(!1),this._events=new at,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Xo(this.statusReactive)}set status(t){Xo(()=>this.statusReactive.set(t))}get valid(){return this.status===Vg}get invalid(){return this.status===nw}get pending(){return this.status==qf}get disabled(){return this.status===zg}get enabled(){return this.status!==zg}get pristine(){return Xo(this.pristineReactive)}set pristine(t){Xo(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Xo(this.touchedReactive)}set touched(t){Xo(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(CV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(CV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(EV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(EV(t,this._rawAsyncValidators))}hasValidator(t){return rw(this._rawValidators,t)}hasAsyncValidator(t){return rw(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Gt(pe({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Gg(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Gg(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Gt(pe({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Hg(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Hg(!0,i))}markAsPending(t={}){this.status=qf;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Xf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Gt(pe({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=zg,this.errors=null,this._forEachChild(r=>{r.disable(Gt(pe({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new sw(this.value,i)),this._events.next(new Xf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Gt(pe({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Vg,this._forEachChild(i=>{i.enable(Gt(pe({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Gt(pe({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vg||this.status===qf)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new sw(this.value,e)),this._events.next(new Xf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Gt(pe({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zg:Vg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=qf,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=OV(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Xf(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?zg:this.errors?nw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qf)?qf:this._anyControlsHaveStatus(nw)?nw:Vg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Hg(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Gg(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){lw(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Wse(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=qse(this._rawAsyncValidators)}};var zV=new Se("CallSetDisabledState",{providedIn:"root",factory:()=>bA}),bA="always";function Xse(n,t){return[...t.path,n]}function Yse(n,t,e=bA){Qse(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Kse(n,t),eae(n,t),Jse(n,t),Zse(n,t)}function DV(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Zse(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Qse(n,t){let e=Vse(n);t.validator!==null?n.setValidators(TV(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=zse(n);t.asyncValidator!==null?n.setAsyncValidators(TV(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();DV(t._rawValidators,r),DV(t._rawAsyncValidators,r)}function Kse(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HV(n,t)})}function Jse(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HV(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function HV(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eae(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function tae(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function iae(n){return Object.getPrototypeOf(n.constructor)===$g}function nae(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===aw?e=o:iae(o)?i=o:r=o}),r||i||e||null}function AV(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function IV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var rae=class extends gA{constructor(t=null,e,i){super(Gse(e),$se(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lw(e)&&(e.nonNullable||e.initialValueIsDefault)&&(IV(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){AV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){AV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){IV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var oae={provide:Wg,useExisting:_e(()=>qg)},PV=Promise.resolve(),qg=(()=>{class n extends Wg{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new rae,this._registered=!1,this.name="",this.update=new nt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nae(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),tae(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Yse(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){PV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Mi(i);PV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Xse(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(F(pA,9),F(Ose,10),F(Nse,10),F(Zf,10),F(Ai,8),F(zV,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ie([oae]),X,Hn]})}}return n})();var sae={provide:Zf,useExisting:_e(()=>vA),multi:!0},vA=(()=>{class n extends $g{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,r){i&1&&Le("change",function(s){return r.onChange(s.target.value)})("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[ie([sae]),X]})}}return n})();var aae={provide:Zf,useExisting:_e(()=>dw),multi:!0};function GV(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function cae(n){return n.split(":")[0]}var dw=(()=>{class n extends $g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=GV(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=cae(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Le("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ie([aae]),X]})}}return n})(),WV=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(GV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Qs),F(dw,9))}}static{this.\u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),lae={provide:Zf,useExisting:_e(()=>$V),multi:!0};function FV(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function dae(n){return n.split(":")[0]}var $V=(()=>{class n extends $g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);r.push(l)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=dae(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Le("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ie([lae]),X]})}}return n})(),qV=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(FV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(FV(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(Qs),F($V,9))}}static{this.\u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var uae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();var XV=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:zV,useValue:e.callSetDisabledState??bA}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[uae]})}}return n})();var hae=()=>[2,2,2],fae=()=>[1,1,1],pae=()=>[10,10],ZV=()=>[10,10,10],mae=()=>[45,2,.1,100],gae=()=>[0,0,0],_ae=n=>[n],bae=(n,t,e)=>[n,t,e];function vae(n,t){n&1&&fe(0,"th-orbitControls")}function yae(n,t){n&1&&fe(0,"th-mapControls")}function xae(n,t){n&1&&fe(0,"th-arcballControls")}function wae(n,t){if(n&1&&fe(0,"th-transformControls",15),n&2){$t();let e=Pt(26);j("object",e.objRef)}}function Mae(n,t){if(n&1&&fe(0,"th-dragControls",12),n&2){$t();let e=Pt(22),i=Pt(26),r=Pt(30);j("args",Js(3,bae,bt(1,_ae,i.objRef),r.objRef,e.hostElement.nativeElement))}}function Sae(n,t){n&1&&fe(0,"th-flyControls")}function Rae(n,t){n&1&&fe(0,"th-trackballControls")}function Tae(n,t){n&1&&fe(0,"th-firstPersonControls")}var QV=(()=>{class n{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${an}DamagedHelmet.glb`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-on-demand-example"]],decls:39,vars:21,consts:[["canvas",""],["model",""],["camera",""],[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModelChange","ngModel"],["for","ondemand"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"],[3,"object"]],template:function(i,r){if(i&1){let o=Yt();H(0,"div",3)(1,"input",4),sh("ngModelChange",function(a){return ht(o),Ap(r.renderOnDemand,a)||(r.renderOnDemand=a),ft(a)}),ee(),H(2,"label",5),Ft(3,"Render On-Demand"),ee(),H(4,"select",6),sh("ngModelChange",function(a){return ht(o),Ap(r.controlType,a)||(r.controlType=a),ft(a)}),H(5,"option",7),Ft(6,"orbit"),ee(),H(7,"option",7),Ft(8,"map"),ee(),H(9,"option",7),Ft(10,"arcball"),ee(),H(11,"option",7),Ft(12,"transform"),ee(),H(13,"option",7),Ft(14,"drag"),ee(),H(15,"option",8),Ft(16,"fly"),ee(),H(17,"option",8),Ft(18,"trackball"),ee(),H(19,"option",8),Ft(20,"firstpersion"),ee()()(),H(21,"th-canvas",9,0)(23,"th-scene"),fe(24,"th-ambientLight",10),H(25,"th-object3D",11,1),Le("onClick",function(){return ht(o),ft(r.selected=!r.selected)}),ee(),fe(27,"th-gridHelper",12)(28,"th-pointLight",13),H(29,"th-perspectiveCamera",14,2),Fi(31,vae,1,0,"th-orbitControls")(32,yae,1,0,"th-mapControls")(33,xae,1,0,"th-arcballControls")(34,wae,1,1,"th-transformControls",15)(35,Mae,1,7,"th-dragControls",12)(36,Sae,1,0,"th-flyControls")(37,Rae,1,0,"th-trackballControls")(38,Tae,1,0,"th-firstPersonControls"),ee()()()}if(i&2){let o;k(),oh("ngModel",r.renderOnDemand),k(3),oh("ngModel",r.controlType),k(17),j("thStats",!0)("renderOnDemand",r.renderOnDemand),k(3),j("intensity",3),k(),j("url",r.glbPath)("scale",r.selected?J(14,hae):J(15,fae)),k(2),j("args",J(16,pae)),k(),j("position",J(17,ZV))("decay",0),k(),j("args",J(18,mae))("position",J(19,ZV))("lookAt",J(20,gae)),k(2),gn((o=r.controlType)==="orbit"?31:o==="map"?32:o==="arcball"?33:o==="transform"?34:o==="drag"?35:o==="fly"?36:o==="trackball"?37:o==="firstpersion"?38:-1)}},dependencies:[dV,SU,PU,NU,LU,In,GU,Wx,Zt,me,Pr,Ci,fr,Bt,Dt,Xn,ts,Rl,An,WV,qV,_A,dw,cw,qg],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0})}}return n})();var Ol=class n{constructor(t,e,i,r,o="div"){this.parent=t,this.object=e,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id=`lil-gui-name-${++n.nextNameID}`,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",s=>s.stopPropagation()),this.domElement.addEventListener("keyup",s=>s.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled?this:(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t),this)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){let e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},yA=class extends Ol{constructor(t,e,i){super(t,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function xA(n){let t,e;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),e?"#"+e:!1}var Cae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:xA,toHexString:xA},Yg={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},Eae={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,t,e=1){let i=Yg.fromHexString(n);t[0]=(i>>16&255)/255*e,t[1]=(i>>8&255)/255*e,t[2]=(i&255)/255*e},toHexString([n,t,e],i=1){i=255/i;let r=n*i<<16^t*i<<8^e*i<<0;return Yg.toHexString(r)}},Dae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,e=1){let i=Yg.fromHexString(n);t.r=(i>>16&255)/255*e,t.g=(i>>8&255)/255*e,t.b=(i&255)/255*e},toHexString({r:n,g:t,b:e},i=1){i=255/i;let r=n*i<<16^t*i<<8^e*i<<0;return Yg.toHexString(r)}},Aae=[Cae,Yg,Eae,Dae];function Iae(n){return Aae.find(t=>t.match(n))}var wA=class extends Ol{constructor(t,e,i,r){super(t,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=Iae(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let o=xA(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){let e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Xg=class extends Ol{constructor(t,e,i){super(t,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},MA=class extends Ol{constructor(t,e,i,r,o,s){super(t,e,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){let t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=e*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;let e=()=>{let v=parseFloat(this.$input.value);isNaN(v)||(this._stepExplicit&&(v=this._snap(v)),this.setValue(this._clamp(v)))},i=v=>{let b=parseFloat(this.$input.value);isNaN(b)||(this._snapClampSetValue(b+v),this.$input.value=this.getValue())},r=v=>{v.key==="Enter"&&this.$input.blur(),v.code==="ArrowUp"&&(v.preventDefault(),i(this._step*this._arrowKeyMultiplier(v))),v.code==="ArrowDown"&&(v.preventDefault(),i(this._step*this._arrowKeyMultiplier(v)*-1))},o=v=>{this._inputFocused&&(v.preventDefault(),i(this._step*this._normalizeMouseWheel(v)))},s=!1,a,c,l,d,u,h=5,f=v=>{a=v.clientX,c=l=v.clientY,s=!0,d=this.getValue(),u=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)},m=v=>{if(s){let b=v.clientX-a,y=v.clientY-c;Math.abs(y)>h?(v.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(b)>h&&_()}if(!s){let b=v.clientY-l;u-=b*this._step*this._arrowKeyMultiplier(v),d+u>this._max?u=this._max-d:d+u<this._min&&(u=this._min-d),this._snapClampSetValue(d+u)}l=v.clientY},_=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",_)},g=()=>{this._inputFocused=!0},p=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",e),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",o,{passive:!1}),this.$input.addEventListener("mousedown",f),this.$input.addEventListener("focus",g),this.$input.addEventListener("blur",p)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=(p,v,b,y,C)=>(p-v)/(b-v)*(C-y)+y,e=p=>{let v=this.$slider.getBoundingClientRect(),b=t(p,v.left,v.right,this._min,this._max);this._snapClampSetValue(b)},i=p=>{this._setDraggingStyle(!0),e(p.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",o)},r=p=>{e(p.clientX)},o=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)},s=!1,a,c,l=p=>{p.preventDefault(),this._setDraggingStyle(!0),e(p.touches[0].clientX),s=!1},d=p=>{p.touches.length>1||(this._hasScrollBar?(a=p.touches[0].clientX,c=p.touches[0].clientY,s=!0):l(p),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},u=p=>{if(s){let v=p.touches[0].clientX-a,b=p.touches[0].clientY-c;Math.abs(v)>Math.abs(b)?l(p):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else p.preventDefault(),e(p.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this),m=400,_,g=p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();let b=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+b),this.$input.value=this.getValue(),clearTimeout(_),_=setTimeout(f,m)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",d,{passive:!1}),this.$slider.addEventListener("wheel",g,{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){let e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){let t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},SA=class extends Ol{constructor(t,e,i,r){super(t,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}},RA=class extends Ol{constructor(t,e,i){super(t,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},Pae=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function Fae(n){let t=document.createElement("style");t.innerHTML=n;let e=document.querySelector("head link[rel=stylesheet], head style");e?document.head.insertBefore(t,e):document.head.appendChild(t)}var KV=!1,TA=class n{constructor({parent:t,autoPlace:e=t===void 0,container:i,width:r,title:o="Controls",closeFolders:s=!1,injectStyles:a=!0,touchStyles:c=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{(l.code==="Enter"||l.code==="Space")&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),c&&this.domElement.classList.add("allow-touch-styles"),!KV&&a&&(Fae(Pae),KV=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=s}add(t,e,i,r,o){if(Object(i)===i)return new SA(this,t,e,i);let s=t[e];switch(typeof s){case"number":return new MA(this,t,e,i,r,o);case"boolean":return new yA(this,t,e);case"string":return new RA(this,t,e);case"function":return new Xg(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,s)}addColor(t,e,i=1){return new wA(this,t,e,i)}addFolder(t){let e=new n({parent:this,title:t});return this.root._closeFolders&&e.close(),e}load(t,e=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof Xg||i._name in t.controllers&&i.load(t.controllers[i._name])}),e&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){let e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Xg)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),this._onOpenClose!==void 0&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}},JV=TA;var kae=["outlinePass"],jae=()=>["#ffffff"],Oae=()=>[0,0,8],Nae=()=>["#aaaaaa"],Lae=()=>["#ddffdd"],Bae=()=>[3,48,24],CA=(n,t,e)=>[n,t,e];function Uae(n,t){if(n&1){let e=Yt();H(0,"th-mesh",13),Le("onMouseEnter",function(r){ht(e);let o=$t();return ft(o.onHover(r))})("onMouseExit",function(){ht(e);let r=$t();return ft(r.onBlur())})("onPointerDown",function(r){ht(e);let o=$t();return ft(o.onPointerDown(r))}),fe(1,"th-meshPhongMaterial",14),ee()}if(n&2){let e=t.$implicit;$t();let i=Pt(11);j("geometry",i.objRef)("position",Js(7,CA,e.x,e.y,e.z))("scale",Js(11,CA,e.scale,e.scale,e.scale))("receiveShadow",!0)("castShadow",!0),k(),j("flatShading",!0)("color",e.color)}}var ez=(()=>{class n{constructor(e){this.elem=e,this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){let e=new JV({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});e.add(this,"edgeStrength",.01,10),e.add(this,"edgeGlow",0,2),e.add(this,"edgeThickness",1,4),e.add(this,"pulsePeriod",0,5),e.addColor(this,"visibleEdgeColor"),e.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let e=0;e<20;e++)this.meshData.push({color:new ge().setHSL(Math.random(),1,.3),x:Math.random()*4-2,y:Math.random()*4-2,z:Math.random()*4-2,scale:Math.random()*.3+.1})}onHover(e){e.component.objRef&&(this.outlinePass.selectedObjects=[e.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(e){e.component.material?.color.set("#ff0000")}static{this.\u0275fac=function(i){return new(i||n)(F(et))}}static{this.\u0275cmp=L({type:n,selectors:[["app-outline-pass-events-example"]],viewQuery:function(i,r){if(i&1&&qt(kae,7),i&2){let o;ct(o=lt())&&(r.outlinePass=o.first)}},decls:20,vars:32,consts:[["thecanvas",""],["scene",""],["camera",""],["light",""],["geometry",""],["outlinePass",""],[3,"shadow","thStats"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"args"],[3,"geometry","position","scale","receiveShadow","castShadow"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],[3,"onMouseEnter","onMouseExit","onPointerDown","geometry","position","scale","receiveShadow","castShadow"],[3,"flatShading","color"]],template:function(i,r){if(i&1&&(H(0,"th-canvas",6,0)(2,"th-scene",7,1)(4,"th-perspectiveCamera",8,2),fe(6,"th-orbitControls"),ee(),fe(7,"th-ambientLight",9)(8,"th-directionalLight",9,3)(10,"th-sphereGeometry",10,4),ar(12,Uae,2,15,"th-mesh",11,br),ee(),H(14,"th-effectComposer"),fe(15,"th-renderPass")(16,"th-outlinePass",12,5),ki(18,"color"),ki(19,"color"),ee()()),i&2){let o=Pt(3),s=Pt(5);j("shadow",!0)("thStats",!0),k(2),j("background",J(23,jae)),k(2),j("position",J(24,Oae))("fov",45)("near",.1)("far",100),k(3),j("color",J(25,Nae))("intensity",3),k(),j("color",J(26,Lae))("intensity",1.8),k(2),j("args",J(27,Bae)),k(2),cr(r.meshData),k(4),j("args",Js(28,CA,r.outlinePassResolution,o.objRef,s.objRef))("visibleEdgeColor",Gi(18,19,r.visibleEdgeColor))("hiddenEdgeColor",Gi(19,21,r.hiddenEdgeColor))("edgeStrength",r.edgeStrength)("edgeGlow",r.edgeGlow)("edgeThickness",r.edgeThickness)("pulsePeriod",r.pulsePeriod)}},dependencies:[In,Zt,Ci,hr,Ri,Bt,uo,kl,Ea,$U,Wf,Dt,ts,An,Pa],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"],changeDetection:0})}}return n})();var Vae=["camera"],zae=()=>["#72645b",2,15],Hae=n=>[0,n,0],tz=n=>[n,0,0],Gae=()=>[40,40],Wae=()=>({color:"#999999",specular:"#101010"}),$ae=n=>[0,n,.3],qae=()=>[.001,.001,.001],Xae=()=>({color:"#0055ff",flatShading:!0}),Yae=()=>["#443333","#111122"],Zae=()=>[1,1,1],Qae=n=>[.5,1,n],Kae=()=>[35,2,1,15],iz=(()=>{class n{constructor(){this.Math=Math,this.cameraPosition=new R(3,.15,3),this.assetPath=`${an}dolphins.ply`}onBeforeRender(){let e=Date.now()*5e-4;this.camera&&(this.camera.position=new R(Math.sin(e)*2.5,.15,Math.cos(e)*2.5),this.camera.lookAt=[0,.1,0])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-plyloader-example"]],viewQuery:function(i,r){if(i&1&&qt(Vae,5),i&2){let o;ct(o=lt())&&(r.camera=o.first)}},decls:17,vars:58,consts:[["camera",""],[3,"onRender","shadow"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"args","intensity"],[3,"castShadow","position","color","intensity","receiveShadow"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",1),Le("onRender",function(){return ht(o),ft(r.onBeforeRender())}),H(1,"th-scene",2),ki(2,"color"),ki(3,"fog"),H(4,"th-mesh",3),fe(5,"th-planeGeometry",4)(6,"th-meshPhongMaterial",4),ee(),H(7,"th-mesh",5),fe(8,"th-bufferGeometry",6)(9,"th-meshStandardMaterial",4),ee(),fe(10,"th-hemisphereLight",7)(11,"th-directionalLight",8),ki(12,"color"),fe(13,"th-directionalLight",8),ki(14,"color"),fe(15,"th-perspectiveCamera",4,0),ee()()}i&2&&(j("shadow",!0),k(),j("background",Gi(2,32,"#72645b"))("fog",Gi(3,34,J(40,zae))),k(3),j("position",bt(41,Hae,-.5))("rotation",bt(43,tz,-r.Math.PI/2))("receiveShadow",!0),k(),j("args",J(45,Gae)),k(),j("args",J(46,Wae)),k(),j("rotation",bt(47,tz,-r.Math.PI/2))("position",bt(49,$ae,-.2))("scale",J(51,qae))("castShadow",!0)("receiveShadow",!0),k(),j("url",r.assetPath),k(),j("args",J(52,Xae)),k(),j("args",J(53,Yae))("intensity",3),k(),j("castShadow",!0)("position",J(54,Zae))("color",Gi(12,36,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0)("intensity",3),k(2),j("castShadow",!0)("position",bt(55,Qae,-1))("color",Gi(14,38,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0)("intensity",3),k(2),j("args",J(57,Kae)))},dependencies:[Zt,hr,vf,Ri,Bt,uo,Eg,ii,Jo,Dt,uV,Pa,ox],encapsulation:2,changeDetection:0})}}return n})();var Jae=["object"],ece=["light"],tce=n=>[n],ice=n=>({value:n}),nce=n=>({amount:n}),nz=()=>["#ffffff"],rce=n=>[0,0,n],oce=()=>["#333333"],sce=()=>[1,4,4];function ace(n,t){if(n&1&&(H(0,"th-mesh",14),fe(1,"th-meshPhongMaterial",15),ee()),n&2){let e=t.$implicit;$t();let i=Pt(15);j("geometry",i.objRef)("position",e.pos)("rotation",e.rotation)("scale",e.scale),k(),j("flatShading",!0)("color",e.color)}}var rz=(()=>{class n{constructor(){this.DotScreenShader=Px,this.RGBShiftShader=tw,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let e=0;e<100;e++){let i=Math.random()*50;this.meshData.push({pos:new R(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new ao(Math.random()*2,Math.random()*2,Math.random()*2),scale:new R(i,i,i),color:new ge(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-post-processing-example"]],viewQuery:function(i,r){if(i&1&&(qt(Jae,7),qt(ece,7)),i&2){let o;ct(o=lt())&&(r.object=o.first),ct(o=lt())&&(r.light=o.first)}},decls:20,vars:30,consts:[["thecanvas",""],["light",""],["geometry",""],["object",""],["for","shift"],["id","shift","type","range",3,"ngModelChange","ngModel","min","max","step"],[3,"onRender","shadow","thStats"],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"color"],[3,"args"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(i,r){if(i&1){let o=Yt();H(0,"label",4),Ft(1,"Shift Amount"),ee(),H(2,"input",5),sh("ngModelChange",function(a){return ht(o),Ap(r.shiftAmount,a)||(r.shiftAmount=a),ft(a)}),ee(),H(3,"th-canvas",6,0),Le("onRender",function(){return ht(o),ft(r.animate())}),H(5,"th-effectComposer"),fe(6,"th-renderPass")(7,"th-unrealBloomPass",7)(8,"th-shaderPass",8),ee(),H(9,"th-scene",9),fe(10,"th-perspectiveCamera",10)(11,"th-ambientLight",11)(12,"th-directionalLight",12,1)(14,"th-sphereGeometry",13,2),H(16,"th-object3D",null,3),ar(18,ace,2,6,"th-mesh",14,br),ee()()()}i&2&&(k(2),oh("ngModel",r.shiftAmount),j("min",.0015)("max",.2)("step",.005),k(),j("shadow",!0)("thStats",!0),k(4),j("strength",1),k(),j("args",bt(18,tce,r.RGBShiftShader))("uniforms",bt(22,nce,bt(20,ice,r.shiftAmount))),k(),j("background",J(24,nz)),k(),j("position",bt(25,rce,r.zDist))("fov",70)("near",1)("far",1e3),k(),j("color",J(27,oce))("intensity",6),k(),j("color",J(28,nz)),k(2),j("args",J(29,sce)),k(4),cr(r.meshData))},dependencies:[Zt,me,Ci,hr,Ri,Bt,uo,kl,Ea,Wf,Cg,Zx,Dt,An,aw,vA,cw,qg],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0})}}return n})();var EA=n=>[0,n,0],cce=()=>[0,1,0],lce=()=>[4,10,2],dce=n=>[n,0,0],uce=()=>[100,100],hce=()=>[55,2,.1,100],fce=(n,t)=>[n,0,t],pce=()=>[0,0,0],oz=(()=>{class n{constructor(e){this.Math=Math,this.selected=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new co(!0),this.plane=new ur(new R(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1=`
uniform float time;
varying vec2 vUv;

void main( void ) {
  vec2 position = - 1.0 + 2.0 * vUv;

  float red = abs( sin( position.x * position.y + time / 5.0 ) );
  float green = abs( sin( position.x * position.y + time / 4.0 ) );
  float blue = abs( sin( position.x * position.y + time / 3.0 ) );
  gl_FragColor = vec4( red, green, blue, 1.0 );

}
`,this.fragmentShader2=`
  uniform float time;
  varying vec2 vUv;

  void main( void ) {
    vec2 position = vUv;
    float color = 0.0;
    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
    color *= sin( time / 10.0 ) * 0.5;
    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
  }
  `,this.vertexShader=`varying vec2 vUv;
  void main() {
    vUv = uv;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
  }
  `,e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){let e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+this.clock.getElapsedTime()*5}static{this.\u0275fac=function(i){return new(i||n)(F(Sl))}}static{this.\u0275cmp=L({type:n,selectors:[["app-ref-by-id-example"]],decls:17,vars:45,consts:[["shader",""],["light",""],[3,"onRender","thStats","shadow"],[3,"rotation","position"],["loadGLTF","",3,"onClick","castShadow","url","position","rotation"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",2),Le("onRender",function(){return ht(o),ft(r.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight"),H(3,"th-group",3)(4,"th-object3D",4),Le("onClick",function(){ht(o);let a=Pt(7);return r.selected=!r.selected,ft(a.uniformsNeedUpdate=!0)}),H(5,"th-mesh",5),fe(6,"th-shaderMaterial",6,0),ee()()(),fe(8,"th-directionalLight",7,1),ki(10,"color"),H(11,"th-mesh",8),fe(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),ki(14,"color"),ee(),H(15,"th-perspectiveCamera",11),fe(16,"th-orbitControls"),ee()()()}i&2&&(j("thStats",!0)("shadow",!0),k(3),j("rotation",bt(29,EA,r.Math.PI))("position",J(31,cce)),k(),j("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),j("refById","Cube008_2"),k(),j("vertexShader",r.vertexShader)("fragmentShader",r.selected?r.fragmentShader1:r.fragmentShader2)("uniforms",r.uniforms),k(2),j("castShadow",!0)("position",J(32,lce))("lookAt",bt(33,EA,-3))("color",Gi(10,25,"#ffffff"))("intensity",.75),k(3),j("receiveShadow",!0)("rotation",bt(35,dce,3*r.Math.PI/2))("position",bt(37,EA,-3)),k(),j("args",J(39,uce)),k(),j("color",Gi(14,27,"#efefef")),k(2),j("args",J(40,hce))("position",Wn(41,fce,-5,-15))("lookAt",J(44,pce)))},dependencies:[In,Zt,me,Ci,hr,Fl,Ri,Bt,wa,W1,Jo,Dt,Xn,ts,An,$f,Pa],encapsulation:2,changeDetection:0})}}return n})();var DA=()=>[0,0,0],mce=()=>[2,2,2],gce=()=>[1,1,1],_ce=(n,t)=>[n,t],bce=()=>[10,10],sz=()=>[10,10,10],vce=()=>[45,2,.1,100],yce=(()=>{class n extends Ri{constructor(e){super(e)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new Ar({color:"green"}),this.objRef.geometry=new Zi(1,1,1))}static{this.\u0275fac=function(i){return new(i||n)(F(me,4))}}static{this.\u0275cmp=L({type:n,selectors:[["th-box"]],features:[ie(mV(n)),X],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})(),az=(()=>{class n{constructor(){this.THREE=vl,this.box=new vn(new R(0,0,0),new R(1.5,1.5,1.5)),this.color=new ge(1,0,0),this.rotation=[0,0,0],this.material=new Ar,this.selected=!1,this.material.color.set("green"),setInterval(()=>{this.material.color.r!==0?(this.material=new Ar,this.material.color.set("green")):(this.material=new Ar,this.material.color.set("red"))},400)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-simple-example"]],features:[ie([wl()])],decls:8,vars:27,consts:[[3,"onRender"],[3,"intensity"],[3,"position","material","rotation","scale"],[3,"onClick","args","material","position"],[3,"args"],[3,"position","intensity","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(H(0,"th-canvas",0),Le("onRender",function(){return r.onBeforeRender()}),H(1,"th-scene"),fe(2,"th-ambientLight",1)(3,"th-box",2),H(4,"th-box3Helper",3),Le("onClick",function(){return r.selected=!r.selected}),ee(),fe(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),ee()()),i&2&&(k(2),j("intensity",3),k(),j("position",J(15,DA))("material",r.material)("rotation",r.rotation)("scale",r.selected?J(16,mce):J(17,gce)),k(),j("args",Wn(18,_ce,r.box,r.color))("material",r.material)("position",J(21,DA)),k(),j("args",J(22,bce)),k(),j("position",J(23,sz))("intensity",3)("decay",0),k(),j("args",J(24,vce))("position",J(25,sz))("lookAt",J(26,DA)))},dependencies:[Zt,RU,Pr,Ci,fr,Bt,Dt,ts,yce],encapsulation:2,changeDetection:0})}}return n})();var xce=["thecanvas"],wce=(n,t)=>({x:0,y:0,width:n,height:t}),Mce=()=>[0,0,1],Sce=()=>["#ffffff"],Rce=()=>[0,0,0],uw=n=>[n,0,0],Tce=()=>[200,32,16],Cce=()=>["#fac400"],Ece=()=>["#f83f0d"],Dce=()=>[400,0,0],Ace=(n,t,e,i)=>({x:n,y:t,width:e,height:i});function Ice(n,t){if(n&1){let e=Yt();H(0,"th-view",13,4),Le("onRender",function(){let r=ht(e).$implicit,o=Pt(3);$t();let s=Pt(3);return ft(r.updateCamera(o.objRef,s.objRef))}),fe(2,"th-perspectiveCamera",14,5),ee()}if(n&2){let e=t.$implicit,i=Pt(1),r=$t(),o=Pt(3);j("scene",o)("viewPort",ah(11,Ace,e.left*r.canvasWidth,e.bottom*r.canvasHeight,e.width*r.canvasWidth,e.height*r.canvasHeight))("scissor",i.viewPort)("scissorTest",!0)("clearColor",e.background),k(2),j("position",e.eye)("up",e.up)("fov",e.fov)("aspect",e.width*r.canvasWidth/(e.height*r.canvasHeight))("near",1)("far",1e4)}}var cz=(()=>{class n{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new ge(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,i)=>{this.updateSize(),e.position.x+=this.mouseX*.05,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(i.position),e.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new ge(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,i)=>{this.updateSize(),e.position.x-=this.mouseX*.05,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new ge(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,i)=>{this.updateSize(),e.position.y-=this.mouseX*.05,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(i.position),e.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new Xd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;let i=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=e.clientX-i.left-i.width/2,this.mouseY=e.clientY-i.right-i.height/2}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-views-example"]],viewQuery:function(i,r){if(i&1&&qt(xce,7),i&2){let o;ct(o=lt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&Le("mousemove",function(s){return r.onMouseMove(s)},!1,th)},decls:14,vars:38,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview",""],["camera",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"],[3,"position","up","fov","aspect","near","far"]],template:function(i,r){if(i&1&&(H(0,"th-canvas",6,0)(2,"th-scene",null,1),fe(4,"th-directionalLight",7),H(5,"th-mesh",8),fe(6,"th-sphereGeometry",9,2)(8,"th-meshPhongMaterial",10,3),ee(),fe(10,"th-mesh",11)(11,"th-mesh",11),ee(),ar(12,Ice,4,16,"th-view",12,br),ee()),i&2){let o=Pt(7),s=Pt(9);j("disableDefaultView",!0)("viewPort",Wn(20,wce,.5*r.canvasWidth,r.canvasHeight)),k(4),j("position",J(23,Mce))("args",J(24,Sce))("intensity",3),k(),j("position",J(25,Rce))("rotation",bt(26,uw,-r.Math.PI/2)),k(),j("args",J(28,Tce)),k(2),j("flatShading",!1)("shininess",30)("specular",J(29,Cce))("color",J(30,Ece)),k(2),j("position",bt(31,uw,-400))("rotation",bt(33,uw,-r.Math.PI/2))("geometry",o.objRef)("material",s.objRef),k(),j("position",J(35,Dce))("rotation",bt(36,uw,-r.Math.PI/2))("geometry",o.objRef)("material",s.objRef),k(),cr(r.views)}},dependencies:[Zt,hr,Ri,Bt,uo,kl,Dt,Fr],changeDetection:0})}}return n})();var Pce=()=>[0,1,0],Fce=()=>[0,0,.2],kce=()=>[0,0],jce=()=>[10,10],lz=()=>[10,10,10],Oce=()=>[45,2,.1,100],Nce=()=>[0,0,0],dz=(()=>{class n{constructor(){this.assetPath1=`${an}DamagedHelmet.glb`,this.assetPath2=`${an}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}resetRotation(){this.rotation=[0,0,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-multi-renderer-example"]],features:[ie([wl(),BB()])],decls:13,vars:21,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],[3,"position","center"],[1,"label"],[3,"pointerdown"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(H(0,"th-canvas",0),Le("onRender",function(){return r.onBeforeRender()}),H(1,"th-scene",1),fe(2,"th-ambientLight",2),H(3,"th-object3D",3)(4,"th-cSS2DObject",4)(5,"div",5),Ft(6," A Helmet "),H(7,"button",6),Le("pointerdown",function(){return r.resetRotation()}),Ft(8,"Reset"),ee()()()(),fe(9,"th-gridHelper",7)(10,"th-pointLight",8),H(11,"th-perspectiveCamera",9),fe(12,"th-orbitControls"),ee()()()),i&2&&(k(),j("thStats",!0),k(),j("intensity",3),k(),j("url",r.assetPath1)("rotation",r.rotation)("position",J(13,Pce)),k(),j("position",J(14,Fce))("center",J(15,kce)),k(5),j("args",J(16,jce)),k(),j("position",J(17,lz))("decay",0),k(),j("args",J(18,Oce))("position",J(19,lz))("lookAt",J(20,Nce)))},dependencies:[In,Zt,me,Pr,Ci,fr,Bt,cV,Dt,Xn,An],styles:[".label{background-color:#d3d3d3;border-radius:5px;line-height:1rem;padding:.5rem;display:inline-block}"],changeDetection:0})}}return n})();var Lce=()=>[10,10,10],Bce=()=>[45,2,1,1e4],Uce=()=>[0,0,3e3],Vce=()=>[0,0,0];function zce(n,t){if(n&1&&(H(0,"th-cSS3DObject",8)(1,"div",12)(2,"div",13),Ft(3),ee(),H(4,"div",14),Ft(5),ee(),H(6,"div",15),Ft(7),fe(8,"br"),Ft(9),ee()()()),n&2){let e=t.$implicit,i=t.$index,r=$t();j("position",r.poses[i].position),k(),$o("background","rgba(0,127,127,"+(r.Math.random()*.5+.25)+")"),k(2),Ks(" ",i+1," "),k(2),Ks(" ",e[0]," "),k(2),Ks(" ",e[1]," "),k(2),Ks(" ",e[2]," ")}}var uz=(()=>{class n{constructor(){this.Math=Math,this.table=[["H","Hydrogen","1.00794",1,1],["He","Helium","4.002602",18,1],["Li","Lithium","6.941",1,2],["Be","Beryllium","9.012182",2,2],["B","Boron","10.811",13,2],["C","Carbon","12.0107",14,2],["N","Nitrogen","14.0067",15,2],["O","Oxygen","15.9994",16,2],["F","Fluorine","18.9984032",17,2],["Ne","Neon","20.1797",18,2],["Na","Sodium","22.98976...",1,3],["Mg","Magnesium","24.305",2,3],["Al","Aluminium","26.9815386",13,3],["Si","Silicon","28.0855",14,3],["P","Phosphorus","30.973762",15,3],["S","Sulfur","32.065",16,3],["Cl","Chlorine","35.453",17,3],["Ar","Argon","39.948",18,3],["K","Potassium","39.948",1,4],["Ca","Calcium","40.078",2,4],["Sc","Scandium","44.955912",3,4],["Ti","Titanium","47.867",4,4],["V","Vanadium","50.9415",5,4],["Cr","Chromium","51.9961",6,4],["Mn","Manganese","54.938045",7,4],["Fe","Iron","55.845",8,4],["Co","Cobalt","58.933195",9,4],["Ni","Nickel","58.6934",10,4],["Cu","Copper","63.546",11,4],["Zn","Zinc","65.38",12,4],["Ga","Gallium","69.723",13,4],["Ge","Germanium","72.63",14,4],["As","Arsenic","74.9216",15,4],["Se","Selenium","78.96",16,4],["Br","Bromine","79.904",17,4],["Kr","Krypton","83.798",18,4],["Rb","Rubidium","85.4678",1,5],["Sr","Strontium","87.62",2,5],["Y","Yttrium","88.90585",3,5],["Zr","Zirconium","91.224",4,5],["Nb","Niobium","92.90628",5,5],["Mo","Molybdenum","95.96",6,5],["Tc","Technetium","(98)",7,5],["Ru","Ruthenium","101.07",8,5],["Rh","Rhodium","102.9055",9,5],["Pd","Palladium","106.42",10,5],["Ag","Silver","107.8682",11,5],["Cd","Cadmium","112.411",12,5],["In","Indium","114.818",13,5],["Sn","Tin","118.71",14,5],["Sb","Antimony","121.76",15,5],["Te","Tellurium","127.6",16,5],["I","Iodine","126.90447",17,5],["Xe","Xenon","131.293",18,5],["Cs","Caesium","132.9054",1,6],["Ba","Barium","132.9054",2,6],["La","Lanthanum","138.90547",4,9],["Ce","Cerium","140.116",5,9],["Pr","Praseodymium","140.90765",6,9],["Nd","Neodymium","144.242",7,9],["Pm","Promethium","(145)",8,9],["Sm","Samarium","150.36",9,9],["Eu","Europium","151.964",10,9],["Gd","Gadolinium","157.25",11,9],["Tb","Terbium","158.92535",12,9],["Dy","Dysprosium","162.5",13,9],["Ho","Holmium","164.93032",14,9],["Er","Erbium","167.259",15,9],["Tm","Thulium","168.93421",16,9],["Yb","Ytterbium","173.054",17,9],["Lu","Lutetium","174.9668",18,9],["Hf","Hafnium","178.49",4,6],["Ta","Tantalum","180.94788",5,6],["W","Tungsten","183.84",6,6],["Re","Rhenium","186.207",7,6],["Os","Osmium","190.23",8,6],["Ir","Iridium","192.217",9,6],["Pt","Platinum","195.084",10,6],["Au","Gold","196.966569",11,6],["Hg","Mercury","200.59",12,6],["Tl","Thallium","204.3833",13,6],["Pb","Lead","207.2",14,6],["Bi","Bismuth","208.9804",15,6],["Po","Polonium","(209)",16,6],["At","Astatine","(210)",17,6],["Rn","Radon","(222)",18,6],["Fr","Francium","(223)",1,7],["Ra","Radium","(226)",2,7],["Ac","Actinium","(227)",4,10],["Th","Thorium","232.03806",5,10],["Pa","Protactinium","231.0588",6,10],["U","Uranium","238.02891",7,10],["Np","Neptunium","(237)",8,10],["Pu","Plutonium","(244)",9,10],["Am","Americium","(243)",10,10],["Cm","Curium","(247)",11,10],["Bk","Berkelium","(247)",12,10],["Cf","Californium","(251)",13,10],["Es","Einstenium","(252)",14,10],["Fm","Fermium","(257)",15,10],["Md","Mendelevium","(258)",16,10],["No","Nobelium","(259)",17,10],["Lr","Lawrencium","(262)",18,10],["Rf","Rutherfordium","(267)",4,7],["Db","Dubnium","(268)",5,7],["Sg","Seaborgium","(271)",6,7],["Bh","Bohrium","(272)",7,7],["Hs","Hassium","(270)",8,7],["Mt","Meitnerium","(276)",9,7],["Ds","Darmstadium","(281)",10,7],["Rg","Roentgenium","(280)",11,7],["Cn","Copernicium","(285)",12,7],["Nh","Nihonium","(286)",13,7],["Fl","Flerovium","(289)",14,7],["Mc","Moscovium","(290)",15,7],["Lv","Livermorium","(293)",16,7],["Ts","Tennessine","(294)",17,7],["Og","Oganesson","(294)",18,7]],this.poses=[],this.createRandomPoses()}createRandomPoses(){this.poses=[];for(let e=0;e<this.table.length;e++){let i=new Rt;i.position.set(Math.random()*4e3-2e3,Math.random()*4e3-2e3,Math.random()*4e3-2e3),this.poses.push(i)}}createTablePoses(){this.poses=this.table.map(e=>{let i=new Rt;return i.position.x=e[3]*140-1330,i.position.y=-(e[4]*180)+990,i})}createSpherePoses(){let e=new R,i=this.table.length;this.poses=this.table.map((r,o)=>{let s=Math.acos(-1+2*o/i),a=Math.sqrt(i*Math.PI)*s,c=new Rt;return c.position.setFromSphericalCoords(800,s,a),e.copy(c.position).multiplyScalar(2),c.lookAt(e),c})}createHelixPoses(){let e=new R;this.poses=this.table.map((i,r)=>{let o=r*.175+Math.PI,s=-(r*8)+450,a=new Rt;return a.position.setFromCylindricalCoords(900,o,s),e.x=a.position.x*2,e.y=a.position.y,e.z=a.position.z*2,a.lookAt(e),a})}createGridPoses(){this.poses=this.table.map((e,i)=>{let r=new Rt;return r.position.x=i%5*400-800,r.position.y=-(Math.floor(i/5)%5)*400+800,r.position.z=Math.floor(i/25)*1e3-2e3,r})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-css3d-multi-renderer-example"]],features:[ie([Jy()])],decls:17,vars:14,consts:[["id","menu"],["id","table",3,"click"],["id","sphere",3,"click"],["id","helix",3,"click"],["id","grid",3,"click"],[1,"canvas-background",3,"renderOnDemand"],[3,"thStats"],[3,"intensity"],[3,"position"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"minDistance","maxDistance"],[1,"element"],[1,"number"],[1,"symbol"],[1,"details"]],template:function(i,r){i&1&&(H(0,"div",0)(1,"button",1),Le("click",function(){return r.createTablePoses()}),Ft(2,"TABLE"),ee(),H(3,"button",2),Le("click",function(){return r.createSpherePoses()}),Ft(4,"SPHERE"),ee(),H(5,"button",3),Le("click",function(){return r.createHelixPoses()}),Ft(6,"HELIX"),ee(),H(7,"button",4),Le("click",function(){return r.createGridPoses()}),Ft(8,"GRID"),ee()(),H(9,"th-canvas",5)(10,"th-scene",6),fe(11,"th-ambientLight",7),ar(12,zce,10,7,"th-cSS3DObject",8,br),fe(14,"th-pointLight",9),H(15,"th-perspectiveCamera",10),fe(16,"th-trackballControls",11),ee()()()),i&2&&(k(9),j("renderOnDemand",!0),k(),j("thStats",!0),k(),j("intensity",3),k(),cr(r.table),k(2),j("position",J(10,Lce))("intensity",3),k(),j("args",J(11,Bce))("position",J(12,Uce))("lookAt",J(13,Vce)),k(),j("minDistance",500)("maxDistance",6e3))},dependencies:[Wx,Zt,Ci,fr,Bt,Qx,Dt,Rl,An],styles:[".canvas-background[_ngcontent-%COMP%]{background-color:#000}a[_ngcontent-%COMP%]{color:#8ff}#menu[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;z-index:10}.element[_ngcontent-%COMP%]{width:120px;height:160px;box-shadow:0 0 12px #00ffff80;border:1px solid rgba(127,255,255,.25);font-family:Helvetica,sans-serif;text-align:center;line-height:normal;cursor:default}.element[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #00ffffbf;border:1px solid rgba(127,255,255,.75)}.element[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:12px;color:#7fffffbf}.element[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:#ffffffbf;text-shadow:0 0 10px rgba(0,255,255,.95)}.element[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:#7fffffbf}button[_ngcontent-%COMP%]{color:#7fffffbf;background:transparent;outline:1px solid rgba(127,255,255,.75);border:0px;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#00ffff80}button[_ngcontent-%COMP%]:active{color:#000;background-color:#00ffffbf}"],changeDetection:0})}}return n})();var AA=n=>[0,n,0],Hce=()=>[0,1,0],hz=n=>[n,0,0],Gce=n=>[0,.04,n],Wce=()=>[.0043,.0043,.0043],$ce=()=>[1960,1280],qce=()=>[4,10,2],Xce=()=>[100,100],Yce=()=>[55,2,.1,100],Zce=(n,t)=>[n,0,t],Qce=()=>[0,0,0],fz=(()=>{class n{constructor(e){this.THREE=vl,this.Math=Math,this.sprite=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new co(!0),this.rotation=[0,0,0],this.position=[0,0,0],this.webGlRenderer=q(nu),e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.webGlRenderer.domElement.style.pointerEvents="none",this.webGlRenderer.domElement.style.zIndex="1",this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}static{this.\u0275fac=function(i){return new(i||n)(F(Sl))}}static{this.\u0275cmp=L({type:n,selectors:[["app-html-with-css3d-example"]],features:[ie([wl(),Jy()])],decls:23,vars:59,consts:[["holder",""],["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale"],[3,"args"],[3,"opacity","blending","side","color"],["src",Kb`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Yt();H(0,"th-canvas",2),Le("onRender",function(){return ht(o),ft(r.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight",3),H(3,"th-group",4)(4,"th-object3D",5)(5,"th-mesh",6)(6,"th-group",7,0)(8,"th-mesh"),fe(9,"th-planeGeometry",8)(10,"th-meshBasicMaterial",9),ki(11,"color"),ee(),H(12,"th-cSS3DObject"),fe(13,"iframe",10),ee()()()()(),fe(14,"th-directionalLight",11,1),ki(16,"color"),H(17,"th-mesh",12),fe(18,"th-planeGeometry",8)(19,"th-meshBasicMaterial",13),ki(20,"color"),ee(),H(21,"th-perspectiveCamera",14),fe(22,"th-orbitControls"),ee()()()}i&2&&(j("thStats",!0)("shadow",!0),k(2),j("intensity",3),k(),j("rotation",bt(37,AA,r.Math.PI))("position",J(39,Hce)),k(),j("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),j("refById","Cube008_2"),k(),j("rotation",bt(40,hz,-1*r.Math.PI/2))("position",bt(42,Gce,-.02))("scale",J(44,Wce)),k(3),j("args",J(45,$ce)),k(),j("opacity",0)("blending",r.THREE.NoBlending)("side",r.THREE.DoubleSide)("color",Gi(11,31,"black")),k(4),j("castShadow",!0)("position",J(46,qce))("lookAt",bt(47,AA,-3))("color",Gi(16,33,"#ffffff"))("intensity",2.2),k(3),j("receiveShadow",!0)("rotation",bt(49,hz,3*r.Math.PI/2))("position",bt(51,AA,-3)),k(),j("args",J(53,Xce)),k(),j("color",Gi(20,35,"#efefef")),k(2),j("args",J(54,Yce))("position",Wn(55,Zce,-5,-15))("lookAt",J(58,Qce)))},dependencies:[In,Zt,me,Ci,hr,Fl,Ri,Bt,Qx,wa,Jo,Dt,Xn,An,$f,Pa],encapsulation:2,changeDetection:0})}}return n})();var Zg=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:ZB,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:az,declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:xV,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:t3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:MV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:n3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:s3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:yV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:rz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:cz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:SV}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:RV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:YB,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:iz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:QV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:oz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:_V,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:ez,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}},{path:"multi-renderer-example",data:{title:"Multi Renderer Example: WebGL + CSS2D",exampleComponent:dz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.ts"]}},{path:"css3d-renderer-example",data:{title:"CSS3D Renderer Example",exampleComponent:uz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.scss"]}},{path:"html-with-css3d-example",data:{title:"Html with CSS3D Example",exampleComponent:fz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.scss"]}}];Zg.forEach(n=>n.component=yU);var Kce=[];Zg.forEach(n=>{Kce.push(n.component)});var pz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[vT.forRoot(Zg),vT]})}}return n})();var mz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,wi]})}}return n})();var ele=["*"],tle='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-app-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected::before,.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected:focus::before,.cdk-high-contrast-active .mdc-list-item:not(.mdc-list-item--selected):focus::before{border-color:CanvasText}.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item.mdc-list-item--selected::before{border-width:3px;border-style:double}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-app-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-app-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-app-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-app-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-app-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-app-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-app-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-app-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-app-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-app-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-app-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-app-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-app-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-app-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full));--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-app-secondary-container))}',ile=["unscopedContent"],nle=["text"],rle=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],ole=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var sle=new Se("ListOption"),ale=(()=>{class n{constructor(e){this._elementRef=e}static{this.\u0275fac=function(i){return new(i||n)(F(et))}}static{this.\u0275dir=Ye({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}}return n})(),cle=(()=>{class n{constructor(e){this._elementRef=e}static{this.\u0275fac=function(i){return new(i||n)(F(et))}}static{this.\u0275dir=Ye({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}}return n})(),lle=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}}return n})(),gz=(()=>{class n{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static{this.\u0275fac=function(i){return new(i||n)(F(sle,8))}}static{this.\u0275dir=Ye({type:n,hostVars:4,hostBindings:function(i,r){i&2&&Wt("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())},standalone:!0})}}return n})(),dle=(()=>{class n extends gz{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[X]})}}return n})(),ule=(()=>{class n extends gz{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275dir=Ye({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[X]})}}return n})(),hle=new Se("MAT_LIST_CONFIG"),hw=(()=>{class n{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=q(hle,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fo(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=fo(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,hostVars:1,hostBindings:function(i,r){i&2&&Li("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return n})(),fle=(()=>{class n{set lines(e){this._explicitLines=Sc(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=fo(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=fo(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,i,r,o,s,a){this._elementRef=e,this._ngZone=i,this._listBase=r,this._platform=o,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new mi,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=s||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=a==="NoopAnimations",r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new gg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(ds(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static{this.\u0275fac=function(i){return new(i||n)(F(et),F($e),F(hw,8),F(xi),F(lu,8),F(Gn,8))}}static{this.\u0275dir=Ye({type:n,contentQueries:function(i,r,o){if(i&1&&(Yi(o,dle,4),Yi(o,ule,4)),i&2){let s;ct(s=lt())&&(r._avatars=s),ct(s=lt())&&(r._icons=s)}},hostVars:4,hostBindings:function(i,r){i&2&&(Li("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),Wt("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return n})();var _z=(()=>{class n extends fle{get activated(){return this._activated}set activated(e){this._activated=fo(e)}constructor(e,i,r,o,s,a){super(e,i,r,o,s,a),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static{this.\u0275fac=function(i){return new(i||n)(F(et),F($e),F(hw,8),F(xi),F(lu,8),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(i&1&&(Yi(o,cle,5),Yi(o,ale,5),Yi(o,lle,5)),i&2){let s;ct(s=lt())&&(r._lines=s),ct(s=lt())&&(r._titles=s),ct(s=lt())&&(r._meta=s)}},viewQuery:function(i,r){if(i&1&&(qt(ile,5),qt(nle,5)),i&2){let o;ct(o=lt())&&(r._unscopedContent=o.first),ct(o=lt())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Li("aria-current",r._getAriaCurrent()),Wt("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[X,Ti],ngContentSelectors:ole,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(i,r){if(i&1){let o=Yt();ae(rle),K(0),H(1,"span",1),K(2,1),K(3,2),H(4,"span",2,0),Le("cdkObserveContent",function(){return ht(o),ft(r._updateItemLines(!0))}),K(6,3),ee()(),K(7,4),K(8,5),fe(9,"div",3)}},dependencies:[ux],encapsulation:2,changeDetection:0})}}return n})();var bz=(()=>{class n extends hw{constructor(){super(...arguments),this._isNonInteractive=!1}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],standalone:!0,features:[ie([{provide:hw,useExisting:n}]),X,Ti],ngContentSelectors:ele,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},styles:[tle],encapsulation:2,changeDetection:0})}}return n})();var Qg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[hx,Yo,wi,du,y1,mz]})}}return n})();var mle=["*",[["mat-toolbar-row"]]],gle=["*","mat-toolbar-row"],_le=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),vz=(()=>{class n{constructor(e,i,r){this._elementRef=e,this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(xi),F(yt))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,o){if(i&1&&Yi(o,_le,5),i&2){let s;ct(s=lt())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(qo(r.color?"mat-"+r.color:""),Wt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Ti],ngContentSelectors:gle,decls:2,vars:0,template:function(i,r){i&1&&(ae(mle),K(0),K(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var Kg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,wi]})}}return n})();var mw=["*"],yle=["content"],xle=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],wle=["mat-drawer","mat-drawer-content","*"];function Mle(n,t){if(n&1){let e=Yt();H(0,"div",1),Le("click",function(){ht(e);let r=$t();return ft(r._onBackdropClicked())}),ee()}if(n&2){let e=$t();Wt("mat-drawer-shown",e._isShowingBackdrop())}}function Sle(n,t){n&1&&(H(0,"mat-drawer-content"),K(1,2),ee())}var Rle=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Tle=["mat-sidenav","mat-sidenav-content","*"];function Cle(n,t){if(n&1){let e=Yt();H(0,"div",1),Le("click",function(){ht(e);let r=$t();return ft(r._onBackdropClicked())}),ee()}if(n&2){let e=$t();Wt("mat-drawer-shown",e._isShowingBackdrop())}}function Ele(n,t){n&1&&(H(0,"mat-sidenav-content"),K(1,2),ee())}var Dle='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',yz={transformDrawer:Tx("transform",[pu("open, open-instant",ns({transform:"none",visibility:"visible"})),pu("void",ns({"box-shadow":"none",visibility:"hidden"})),mu("void => open-instant",fu("0ms")),mu("void <=> open, open-instant => void",fu("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var Ale=new Se("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:Ile}),IA=new Se("MAT_DRAWER_CONTAINER");function Ile(){return!1}var fw=(()=>{class n extends Dl{constructor(e,i,r,o,s){super(r,o,s),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(i){return new(i||n)(F(Ai),F(_e(()=>wz)),F(et),F(Lf),F($e))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,r){i&2&&$o("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},standalone:!0,features:[ie([{provide:Dl,useExisting:n}]),X,Ti],ngContentSelectors:mw,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})(),xz=(()=>{class n{get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=fo(e)}get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=fo(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(fo(e))}constructor(e,i,r,o,s,a,c,l){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=o,this._ngZone=s,this._interactivityChecker=a,this._doc=c,this._container=l,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new at,this._animationEnd=new at,this._animationState="void",this.openedChange=new nt(!0),this._openedStream=this.openedChange.pipe(li(d=>d),dt(()=>{})),this.openedStart=this._animationStarted.pipe(li(d=>d.fromState!==d.toState&&d.toState.indexOf("open")===0),ku(void 0)),this._closedStream=this.openedChange.pipe(li(d=>!d),dt(()=>{})),this.closedStart=this._animationStarted.pipe(li(d=>d.fromState!==d.toState&&d.toState==="void"),ku(void 0)),this._destroyed=new at,this.onPositionChanged=new nt,this._modeChanged=new at,this._injector=q(Xi),this._changeDetectorRef=q(Ai),this.openedChange.pipe(gi(this._destroyed)).subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Lo(this._elementRef.nativeElement,"keydown").pipe(li(d=>d.keyCode===27&&!this.disableClose&&!jf(d)),gi(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.subscribe(d=>{let{fromState:u,toState:h}=d;(h.indexOf("open")===0&&u==="void"||h==="void"&&u.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Wo(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);let r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,i,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(xr(1)).subscribe(s=>o(s?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,r=i.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}static{this.\u0275fac=function(i){return new(i||n)(F(et),F(D3),F(mg),F(xi),F($e),F(f1),F(yt,8),F(IA,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(i&1&&qt(yle,5),i&2){let o;ct(o=lt())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,r){i&1&&sR("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),i&2&&(oR("@transform",r._animationState),Li("align",null),Wt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side")("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[Ti],ngContentSelectors:mw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(ae(),H(0,"div",1,0),K(2),ee())},dependencies:[Dl],encapsulation:2,data:{animation:[yz.transformDrawer]},changeDetection:0})}}return n})(),wz=(()=>{class n{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=fo(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:fo(e)}get scrollable(){return this._userContent||this._content}constructor(e,i,r,o,s,a=!1,c){this._dir=e,this._element=i,this._ngZone=r,this._changeDetectorRef=o,this._animationMode=c,this._drawers=new qs,this.backdropClick=new nt,this._destroyed=new at,this._doCheckSubject=new at,this._contentMargins={left:null,right:null},this._contentMarginChanges=new at,this._injector=q(Xi),e&&e.change.pipe(gi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),s.change().pipe(gi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}ngAfterContentInit(){this._allDrawers.changes.pipe(yo(this._allDrawers),gi(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(yo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(us(10),gi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let r=this._left._getWidth();e+=r,i-=r}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let r=this._right._getWidth();i+=r,e-=r}}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(li(i=>i.fromState!==i.toState),gi(this._drawers.changes)).subscribe(i=>{i.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(gi(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(gi(this._drawers.changes)).subscribe(()=>{Wo(()=>{this._validateDrawers()},{injector:this._injector,phase:Oc.Read})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(gi(ds(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static{this.\u0275fac=function(i){return new(i||n)(F(Ta,8),F(et),F($e),F(Ai),F(Al),F(Ale),F(Gn,8))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,o){if(i&1&&(Yi(o,fw,5),Yi(o,xz,5)),i&2){let s;ct(s=lt())&&(r._content=s.first),ct(s=lt())&&(r._allDrawers=s)}},viewQuery:function(i,r){if(i&1&&qt(fw,5),i&2){let o;ct(o=lt())&&(r._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){i&2&&Wt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[ie([{provide:IA,useExisting:n}]),Ti],ngContentSelectors:wle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(ae(xle),Fi(0,Mle,1,2,"div",0),K(1),K(2,1),Fi(3,Sle,2,0,"mat-drawer-content")),i&2&&(gn(r.hasBackdrop?0:-1),k(3),gn(r._content?-1:3))},dependencies:[fw],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}}return n})(),pw=(()=>{class n extends fw{constructor(e,i,r,o,s){super(e,i,r,o,s)}static{this.\u0275fac=function(i){return new(i||n)(F(Ai),F(_e(()=>FA)),F(et),F(Lf),F($e))}}static{this.\u0275cmp=L({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(i,r){i&2&&$o("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},standalone:!0,features:[ie([{provide:Dl,useExisting:n}]),X,Ti],ngContentSelectors:mw,decls:1,vars:0,template:function(i,r){i&1&&(ae(),K(0))},encapsulation:2,changeDetection:0})}}return n})(),PA=(()=>{class n extends xz{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=fo(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Sc(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Sc(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(i,r){i&2&&(Li("align",null),$o("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),Wt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side")("mat-drawer-opened",r.opened)("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[X,Ti],ngContentSelectors:mw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(ae(),H(0,"div",1,0),K(2),ee())},dependencies:[Dl],encapsulation:2,data:{animation:[yz.transformDrawer]},changeDetection:0})}}return n})(),FA=(()=>{class n extends wz{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=be(n)))(r||n)}})()}static{this.\u0275cmp=L({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(i,r,o){if(i&1&&(Yi(o,pw,5),Yi(o,PA,5)),i&2){let s;ct(s=lt())&&(r._content=s.first),ct(s=lt())&&(r._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,r){i&2&&Wt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[ie([{provide:IA,useExisting:n}]),X,Ti],ngContentSelectors:Tle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(ae(Rle),Fi(0,Cle,1,2,"div",0),K(1),K(2,1),Fi(3,Ele,2,0,"mat-sidenav-content")),i&2&&(gn(r.hasBackdrop?0:-1),k(3),gn(r._content?-1:3))},dependencies:[pw],styles:[Dle],encapsulation:2,changeDetection:0})}}return n})(),Mz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,hu,hu,wi]})}}return n})();function Fle(n,t){if(n&1&&(H(0,"a",3),Ft(1),ee()),n&2){let e=t.$implicit;j("routerLink",e.path),k(),Xc(e.data.title)}}function kle(n,t){if(n&1){let e=Yt();H(0,"button",10),Le("click",function(){ht(e),$t();let r=Pt(2);return ft(r.toggle())}),H(1,"mat-icon",11),Ft(2,"menu"),ee()()}}function jle(n,t){if(n&1){let e=Yt();H(0,"button",12),Le("click",function(r){ht(e);let o=$t();return ft(o.editorService.toCodeSandbox(r))}),H(1,"mat-icon"),Ft(2,"crop_din"),ee(),Ft(3," CodeSandbox "),ee()}}function Ole(n,t){if(n&1){let e=Yt();H(0,"button",12),Le("click",function(r){ht(e);let o=$t();return ft(o.editorService.toStackblitz(r))}),H(1,"mat-icon"),Ft(2,"bolt"),ee(),Ft(3," Stackblitz "),ee()}}var Sz=(()=>{class n{constructor(e,i){this.breakpointObserver=e,this.editorService=i,this.routes=Zg,this.isHandset$=this.breakpointObserver.observe(S3.Handset).pipe(dt(r=>r.matches),Na())}static{this.\u0275fac=function(i){return new(i||n)(F(fx),F(Sa))}}static{this.\u0275cmp=L({type:n,selectors:[["app-navigation-shell"]],decls:22,vars:14,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["mat-list-item","",3,"routerLink"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button",""],[1,"toolbar-spacer"],["mat-button","","href","#"],[1,"main-route-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(i,r){i&1&&(H(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),ki(3,"async"),ki(4,"async"),ki(5,"async"),H(6,"mat-toolbar"),Ft(7,"ngx-three"),ee(),H(8,"mat-nav-list"),ar(9,Fle,2,2,"a",3,br),ee()(),H(11,"mat-sidenav-content",4)(12,"mat-toolbar",5),Fi(13,kle,3,0,"button",6),ki(14,"async"),H(15,"span"),Ft(16,"ngx-three-demo"),ee(),fe(17,"span",7),Fi(18,jle,4,0,"button",8)(19,Ole,4,0,"button",8),ee(),H(20,"div",9),fe(21,"router-outlet"),ee()()()),i&2&&(k(),j("mode",Gi(3,6,r.isHandset$)?"over":"side")("opened",Gi(4,8,r.isHandset$)===!1),Li("role",Gi(5,10,r.isHandset$)?"dialog":"navigation"),k(8),cr(r.routes),k(4),gn(Gi(14,12,r.isHandset$)?13:-1),k(5),gn(r.editorService.urls.length?18:-1),k(),gn(r.editorService.urls.length?19:-1))},dependencies:[fT,MN,vx,G3,bz,_z,wx,vz,PA,FA,pw,xv],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0})}}return n})();var Rz=(()=>{class n{constructor(){this.title="ngx-three-demo"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=L({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&fe(0,"app-navigation-shell")},dependencies:[Sz],changeDetection:0})}}return n})();var Tz=dx(),kA=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Bn(-this._previousScrollPosition.left),t.style.top=Bn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Tz&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Tz&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var jA=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(li(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},gw=class{enable(){}disable(){}attach(){}};function OA(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,o=n.right<e.left,s=n.left>e.right;return i||r||o||s})}function Cz(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,o=n.left<e.left,s=n.right>e.right;return i||r||o||s})}var NA=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();OA(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Lle=(()=>{class n{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new gw,this.close=s=>new jA(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new kA(this._viewportRuler,this._document),this.reposition=s=>new NA(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static{this.\u0275fac=function(i){return new(i||n)(de(Lf),de(Al),de($e),de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LA=class{constructor(t){if(this.scrollStrategy=new gw,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var BA=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Fz=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(de(yt))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ble=(()=>{class n extends Fz{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{let o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){let a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de($e,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ule=(()=>{class n extends Fz{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=is(o)},this._clickListener=o=>{let s=is(o),a=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){let d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(Ez(d.overlayElement,s)||Ez(d.overlayElement,a))break;let u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o)}}}add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de(xi),de($e,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ez(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var kz=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||pg()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),pg()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de(xi))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UA=class{constructor(t,e,i,r,o,s,a,c,l,d=!1,u){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._injector=u,this._backdropElement=null,this._backdropClick=new at,this._attachments=new at,this._detachments=new at,this._locationChanges=mi.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new at,this._outsidePointerEvents=new at,this._renders=new at,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Xo(()=>rR(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Wo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=pe(pe({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Gt(pe({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Bn(this._config.width),t.height=Bn(this._config.height),t.minWidth=Bn(this._config.minWidth),t.minHeight=Bn(this._config.minHeight),t.maxWidth=Bn(this._config.maxWidth),t.maxHeight=Bn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=Of(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(gi(ds(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Dz="cdk-overlay-connected-position-bounding-box",Vle=/([A-Za-z%]+)$/,VA=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new at,this._resizeSubscription=mi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Dz),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),l=this._getOverlayPoint(c,e,a),d=this._getOverlayFit(l,e,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,i)){o.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:e})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Dz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){let o=Iz(e),{x:s,y:a}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let d=0-s,u=s+o.width-i.width,h=0-a,f=a+o.height-i.height,m=this._subtractOverflows(o.width,d,u),_=this._subtractOverflows(o.height,h,f),g=m*_;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=Az(this._overlayRef.getConfig().minHeight),a=Az(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=r,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=Iz(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-i.top-t.y,0),l=Math.max(o.left-i.left-t.x,0),d=0,u=0;return r.width<=o.width?d=l||-s:d=t.x<this._viewportMargin?o.left-i.left-t.x:0,r.height<=o.height?u=c||-a:u=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!zle(this._lastScrollVisibility,i)){let r=new BA(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=t.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-t.y+i.top,t.y),m=this._lastBoundingBoxSize.height;o=f*2,s=t.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-m/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,l=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,d,u,h;if(l)h=i.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(c)u=t.x,d=i.right-t.x;else{let f=Math.min(i.right-t.x+i.left,t.x),m=this._lastBoundingBoxSize.width;d=f*2,u=t.x-f,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-m/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Bn(i.height),r.top=Bn(i.top),r.bottom=Bn(i.bottom),r.width=Bn(i.width),r.left=Bn(i.left),r.right=Bn(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Bn(o)),s&&(r.maxWidth=Bn(s))}this._lastBoundingBoxSize=i,bu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){bu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();bu(i,this._getExactOverlayY(e,t,d)),bu(i,this._getExactOverlayX(e,t,d))}else i.position="static";let a="",c=this._getOffset(e,"x"),l=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Bn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Bn(s.maxWidth):o&&(i.maxWidth="")),bu(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Bn(o.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Bn(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Cz(t,i),isOriginOutsideView:OA(t,i),isOverlayClipped:Cz(e,i),isOverlayOutsideView:OA(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Of(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof et)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function bu(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Az(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(Vle);return!e||e==="px"?parseFloat(t):null}return n||null}function Iz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function zle(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var Pz="cdk-global-overlay-wrapper",zA=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Pz),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",_="";c?_="flex-start":d==="center"?(_="center",h?m=u:f=u):h?d==="left"||d==="end"?(_="flex-end",f=u):(d==="right"||d==="start")&&(_="flex-start",m=u):d==="left"||d==="start"?(_="flex-start",f=u):(d==="right"||d==="end")&&(_="flex-end",m=u),t.position=this._cssPosition,t.marginLeft=c?"0":f,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":m,e.justifyContent=_,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Pz),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Hle=(()=>{class n{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new zA}flexibleConnectedTo(e){return new VA(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(de(Al),de(yt),de(xi),de(kz))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gle=0,Qf=(()=>{class n{constructor(e,i,r,o,s,a,c,l,d,u,h,f){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(e){let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new LA(e);return s.direction=s.direction||this._directionality.value,new UA(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(gr))}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=`cdk-overlay-${Gle++}`,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(gs)),new Sx(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(de(Lle),de(kz),de(Uo),de(Hle),de(Ble),de(Xi),de($e),de(yt),de(Ta),de(Zc),de(Ule),de(Gn,8))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wle=new Se("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=q(Qf);return()=>n.scrollStrategies.reposition()}});function $le(n){return()=>n.scrollStrategies.reposition()}var qle={provide:Wle,deps:[Qf],useFactory:$le},jz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[Qf,qle],imports:[El,iU,R1,R1]})}}return n})();var Oz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,Yo,hx,wi]})}}return n})();var Xle=new Se("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=q(Qf);return()=>n.scrollStrategies.reposition()}});function Yle(n){return()=>n.scrollStrategies.reposition()}var Zle={provide:Xle,deps:[Qf],useFactory:Yle};var HA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[Zle],imports:[Yo,jz,x1,wi,hu,Oz,x1,wi]})}}return n})();var GA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[wi,du]})}}return n})();var Qle=[bg,Qg,yg,w1,Kg,HA,F1,GA],Nz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({imports:[Qle,bg,Qg,yg,w1,Kg,HA,F1,GA]})}}return n})();function Lz(n){return new je(3e3,!1)}function Kle(){return new je(3100,!1)}function Jle(){return new je(3101,!1)}function ede(n){return new je(3001,!1)}function tde(n){return new je(3003,!1)}function ide(n){return new je(3004,!1)}function nde(n,t){return new je(3005,!1)}function rde(){return new je(3006,!1)}function ode(){return new je(3007,!1)}function sde(n,t){return new je(3008,!1)}function ade(n){return new je(3002,!1)}function cde(n,t,e,i,r){return new je(3010,!1)}function lde(){return new je(3011,!1)}function dde(){return new je(3012,!1)}function ude(){return new je(3200,!1)}function hde(){return new je(3202,!1)}function fde(){return new je(3013,!1)}function pde(n){return new je(3014,!1)}function mde(n){return new je(3015,!1)}function gde(n){return new je(3016,!1)}function _de(n,t){return new je(3404,!1)}function bde(n){return new je(3502,!1)}function vde(n){return new je(3503,!1)}function yde(){return new je(3300,!1)}function xde(n){return new je(3504,!1)}function wde(n){return new je(3301,!1)}function Mde(n,t){return new je(3302,!1)}function Sde(n){return new je(3303,!1)}function Rde(n,t){return new je(3400,!1)}function Tde(n){return new je(3401,!1)}function Cde(n){return new je(3402,!1)}function Ede(n,t){return new je(3505,!1)}function Nl(n){switch(n.length){case 0:return new Il;case 1:return n[0];default:return new wg(n)}}function Kz(n,t,e=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(t.forEach(c=>{let l=c.get("offset"),d=l==s,u=d&&a||new Map;c.forEach((h,f)=>{let m=f,_=h;if(f!=="offset")switch(m=n.normalizePropertyName(m,r),_){case Cx:_=e.get(f);break;case Ca:_=i.get(f);break;default:_=n.normalizeStyleValue(f,m,_,r);break}u.set(m,_)}),d||o.push(u),a=u,s=l}),r.length)throw bde(r);return o}function fI(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&WA(e,"start",n)));break;case"done":n.onDone(()=>i(e&&WA(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&WA(e,"destroy",n)));break}}function WA(n,t,e){let i=e.totalTime,r=!!e.disabled,o=pI(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function pI(n,t,e,i,r="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Oo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function Bz(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var Dde=typeof document>"u"?null:document.documentElement;function mI(n){let t=n.parentNode||n.host||null;return t===Dde?null:t}function Ade(n){return n.substring(1,6)=="ebkit"}var vu=null,Uz=!1;function Ide(n){vu||(vu=Pde()||{},Uz=vu.style?"WebkitAppearance"in vu.style:!1);let t=!0;return vu.style&&!Ade(n)&&(t=n in vu.style,!t&&Uz&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vu.style)),t}function Pde(){return typeof document<"u"?document.body:null}function Jz(n,t){for(;t;){if(t===n)return!0;t=mI(t)}return!1}function eH(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var gI=(()=>{class n{validateStyleProperty(e){return Ide(e)}containsElement(e,i){return Jz(e,i)}getParentElement(e){return mI(e)}query(e,i,r){return eH(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],c){return new Il(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),wu=class{static{this.NOOP=new gI}},Mu=class{};var Fde=1e3,tH="{{",kde="}}",iH="ng-enter",QA="ng-leave",_w="ng-trigger",ww=".ng-trigger",Vz="ng-animating",KA=".ng-animating";function Dc(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:JA(parseFloat(t[1]),t[2])}function JA(n,t){switch(t){case"s":return n*Fde;default:return n}}function Mw(n,t,e){return n.hasOwnProperty("duration")?n:jde(n,t,e)}function jde(n,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return t.push(Lz(n)),{duration:0,delay:0,easing:""};r=JA(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=JA(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=n;if(!e){let a=!1,c=t.length;r<0&&(t.push(Kle()),a=!0),o<0&&(t.push(Jle()),a=!0),a&&t.splice(c,0,Lz(n))}return{duration:r,delay:o,easing:s}}function Ode(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function ka(n,t,e){t.forEach((i,r)=>{let o=_I(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i})}function xu(n,t){t.forEach((e,i)=>{let r=_I(i);n.style[r]=""})}function Jg(n){return Array.isArray(n)?n.length==1?n[0]:rU(n):n}function Nde(n,t,e){let i=t.params||{},r=nH(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(ede(o))})}var eI=new RegExp(`${tH}\\s*(.+?)\\s*${kde}`,"g");function nH(n){let t=[];if(typeof n=="string"){let e;for(;e=eI.exec(n);)t.push(e[1]);eI.lastIndex=0}return t}function t_(n,t,e){let i=`${n}`,r=i.replace(eI,(o,s)=>{let a=t[s];return a==null&&(e.push(tde(s)),a=""),a.toString()});return r==i?n:r}var Lde=/-+([a-z0-9])/g;function _I(n){return n.replace(Lde,(...t)=>t[1].toUpperCase())}function Bde(n,t){return n===0||t===0}function Ude(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,bI(n,a)))}}return t}function jo(n,t,e){switch(t.type){case ni.Trigger:return n.visitTrigger(t,e);case ni.State:return n.visitState(t,e);case ni.Transition:return n.visitTransition(t,e);case ni.Sequence:return n.visitSequence(t,e);case ni.Group:return n.visitGroup(t,e);case ni.Animate:return n.visitAnimate(t,e);case ni.Keyframes:return n.visitKeyframes(t,e);case ni.Style:return n.visitStyle(t,e);case ni.Reference:return n.visitReference(t,e);case ni.AnimateChild:return n.visitAnimateChild(t,e);case ni.AnimateRef:return n.visitAnimateRef(t,e);case ni.Query:return n.visitQuery(t,e);case ni.Stagger:return n.visitStagger(t,e);default:throw ide(t.type)}}function bI(n,t){return window.getComputedStyle(n)[t]}var Vde=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Sw=class extends Mu{normalizePropertyName(t,e){return _I(t)}normalizeStyleValue(t,e,i,r){let o="",s=i.toString().trim();if(Vde.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(nde(t,i))}return s+o}};var Rw="*";function zde(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Hde(i,e,t)):e.push(n),e}function Hde(n,t,e){if(n[0]==":"){let c=Gde(n,e);if(typeof c=="function"){t.push(c);return}n=c}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(mde(n)),t;let r=i[1],o=i[2],s=i[3];t.push(zz(r,s));let a=r==Rw&&s==Rw;o[0]=="<"&&!a&&t.push(zz(s,r))}function Gde(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(gde(n)),"* => *"}}var bw=new Set(["true","1"]),vw=new Set(["false","0"]);function zz(n,t){let e=bw.has(n)||vw.has(n),i=bw.has(t)||vw.has(t);return(r,o)=>{let s=n==Rw||n==r,a=t==Rw||t==o;return!s&&e&&typeof r=="boolean"&&(s=r?bw.has(n):vw.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?bw.has(t):vw.has(t)),s&&a}}var rH=":self",Wde=new RegExp(`s*${rH}s*,?`,"g");function oH(n,t,e,i){return new tI(n).build(t,e,i)}var Hz="",tI=class{constructor(t){this._driver=t}build(t,e,i){let r=new iI(e);return this._resetContextStyleTimingState(r),jo(this,Jg(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=Hz,t.collectedStyles=new Map,t.collectedStyles.set(Hz,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(rde()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==ni.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,e))}),c.name=l}else if(a.type==ni.Transition){let c=this.visitTransition(a,e);i+=c.queryCount,r+=c.depCount,s.push(c)}else e.errors.push(ode())}),{type:ni.Trigger,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{nH(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&e.errors.push(sde(t.name,[...o.values()]))}return{type:ni.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=jo(this,Jg(t.animation),e),r=zde(t.expr,e.errors);return{type:ni.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:yu(t.options)}}visitSequence(t,e){return{type:ni.Sequence,steps:t.steps.map(i=>jo(this,i,e)),options:yu(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,o=t.steps.map(s=>{e.currentTime=i;let a=jo(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:ni.Group,steps:o,options:yu(t.options)}}visitAnimate(t,e){let i=Yde(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:ns({});if(o.type==ni.Keyframes)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let l={};i.easing&&(l.easing=i.easing),s=ns(l)}e.currentTime+=i.duration+i.delay;let c=this.visitStyle(s,e);c.isEmptyStep=a,r=c}return e.currentAnimateTimings=null,{type:ni.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)typeof a=="string"?a===Ca?i.push(a):e.errors.push(ade(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(tH)>=0){o=!0;break}}}),{type:ni.Style,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=e.collectedStyles.get(e.currentQuerySelector),d=l.get(c),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(e.errors.push(cde(c,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&l.set(c,{startTime:o,endTime:r}),e.options&&Nde(a,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:ni.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(lde()),i;let r=1,o=0,s=[],a=!1,c=!1,l=0,d=t.steps.map(p=>{let v=this._makeStyleAst(p,e),b=v.offset!=null?v.offset:Xde(v.styles),y=0;return b!=null&&(o++,y=v.offset=b),c=c||y<0||y>1,a=a||y<l,l=y,s.push(y),v});c&&e.errors.push(dde()),a&&e.errors.push(ude());let u=t.steps.length,h=0;o>0&&o<u?e.errors.push(hde()):o==0&&(h=r/(u-1));let f=u-1,m=e.currentTime,_=e.currentAnimateTimings,g=_.duration;return d.forEach((p,v)=>{let b=h>0?v==f?1:h*v:s[v],y=b*g;e.currentTime=m+_.delay+y,_.duration=y,this._validateStyleAst(p,e),p.offset=b,i.styles.push(p)}),i}visitReference(t,e){return{type:ni.Reference,animation:jo(this,Jg(t.animation),e),options:yu(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:ni.AnimateChild,options:yu(t.options)}}visitAnimateRef(t,e){return{type:ni.AnimateRef,animation:this.visitReference(t.animation,e),options:yu(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=$de(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,Oo(e.collectedStyles,e.currentQuerySelector,new Map);let a=jo(this,Jg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:ni.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:yu(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(fde());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Mw(t.timings,e.errors,!0);return{type:ni.Stagger,animation:jo(this,Jg(t.animation),e),timings:i,options:null}}};function $de(n){let t=!!n.split(/\s*,\s*/).find(e=>e==rH);return t&&(n=n.replace(Wde,"")),n=n.replace(/@\*/g,ww).replace(/@\w+/g,e=>ww+"-"+e.slice(1)).replace(/:animating/g,KA),[n,t]}function qde(n){return n?pe({},n):null}var iI=class{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Xde(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Yde(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Mw(n,t).duration;return $A(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=$A(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=Mw(e,t);return $A(r.duration,r.delay,r.easing)}function yu(n){return n?(n=pe({},n),n.params&&(n.params=qde(n.params))):n={},n}function $A(n,t,e){return{duration:n,delay:t,easing:e}}function vI(n,t,e,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var i_=class{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Zde=1,Qde=":enter",Kde=new RegExp(Qde,"g"),Jde=":leave",eue=new RegExp(Jde,"g");function sH(n,t,e,i,r,o=new Map,s=new Map,a,c,l=[]){return new nI().buildKeyframes(n,t,e,i,r,o,s,a,c,l)}var nI=class{buildKeyframes(t,e,i,r,o,s,a,c,l,d=[]){l=l||new i_;let u=new rI(t,e,l,r,o,d,[]);u.options=c;let h=c.delay?Dc(c.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,c),jo(this,i,u);let f=u.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let _=f.length-1;_>=0;_--){let g=f[_];if(g.element===e){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,u.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[vI(e,[],[],[],0,h,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let o=r?.delay;if(o){let s=typeof o=="number"?o:Dc(t_(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?Dc(i.duration):null,a=i.delay!=null?Dc(i.delay):null;return s!==0&&t.forEach(c=>{let l=e.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),jo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==ni.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Tw);let s=Dc(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>jo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Dc(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),jo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?t_(i,e.params,e.errors):i;return Mw(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let o=t.style;o.type==ni.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Dc(r.delay):0;o&&(e.previousNode.type===ni.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Tw);let s=i,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let c=null;a.forEach((l,d)=>{e.currentQueryIndex=d;let u=e.createSubContext(t.options,l);o&&u.delayNextStep(o),l===e.element&&(c=u.currentTimeline),jo(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),c=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let d=e.currentTimeline;c&&d.delayNextStep(c);let u=d.currentTime;jo(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-u+(r.startTime-i.currentTimeline.startTime)}},Tw={},rI=class n{constructor(t,e,i,r,o,s,a,c){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Cw(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=Dc(i.duration)),i.delay!=null&&(r.delay=Dc(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=t_(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Tw,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new oI(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=t.replace(Kde,"."+this._enterClassName),t=t.replace(eue,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,t,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!o&&a.length==0&&s.push(pde(e)),a}},Cw=class n{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Zde,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ca),this._currentKeyframe.set(e,Ca);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},s=tue(t,this._globalTimelineStyles);for(let[a,c]of s){let l=t_(c,o,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ca),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,u)=>{d===Cx?t.add(u):d===Ca&&e.add(u)}),i||l.set("offset",c/this.duration),r.push(l)});let o=[...t.values()],s=[...e.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return vI(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},oI=class extends Cw{constructor(t,e,i,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,a=e/s,c=new Map(t[0]);c.set("offset",0),o.push(c);let l=new Map(t[0]);l.set("offset",Gz(a)),o.push(l);let d=t.length-1;for(let u=1;u<=d;u++){let h=new Map(t[u]),f=h.get("offset"),m=e+f*i;h.set("offset",Gz(m/s)),o.push(h)}i=s,e=0,r="",t=o}return vI(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function Gz(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function tue(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let o of i)e.set(o,Ca)}else for(let[o,s]of r)e.set(o,s)}),e}function Wz(n,t,e,i,r,o,s,a,c,l,d,u,h){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:u,errors:h}}var qA={},Ew=class{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return iue(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,s,a,c,l,d){let u=[],h=this.ast.options&&this.ast.options.params||qA,f=a&&a.params||qA,m=this.buildStyles(i,f,u),_=c&&c.params||qA,g=this.buildStyles(r,_,u),p=new Set,v=new Map,b=new Map,y=r==="void",C={params:aH(_,h),delay:this.ast.options?.delay},S=d?[]:sH(t,e,this.ast.animation,o,s,m,g,C,l,u),M=0;return S.forEach(A=>{M=Math.max(A.duration+A.delay,M)}),u.length?Wz(e,this._triggerName,i,r,y,m,g,[],[],v,b,M,u):(S.forEach(A=>{let T=A.element,x=Oo(v,T,new Set);A.preStyleProps.forEach(V=>x.add(V));let I=Oo(b,T,new Set);A.postStyleProps.forEach(V=>I.add(V)),T!==e&&p.add(T)}),Wz(e,this._triggerName,i,r,y,m,g,S,[...p.values()],v,b,M))}};function iue(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}function aH(n,t){let e=pe({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var sI=class{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=aH(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=t_(s,r,e));let c=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,c,s,e),i.set(a,s)})}),i}};function nue(n,t,e){return new aI(n,t,e)}var aI=class{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new sI(r.style,o,i))}),$z(this.states,"true","1"),$z(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Ew(t,r,this.states))}),this.fallbackTransition=rue(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(s=>s.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function rue(n,t,e){let i=[(s,a)=>!0],r={type:ni.Sequence,steps:[],options:null},o={type:ni.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Ew(n,o,t)}function $z(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var oue=new i_,cI=class{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){let i=[],r=[],o=oH(this._driver,e,i,r);if(i.length)throw vde(i);r.length&&void 0,this._animations.set(t,o)}_buildPlayer(t,e,i){let r=t.element,o=Kz(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],o=this._animations.get(t),s,a=new Map;if(o?(s=sH(this._driver,e,o,iH,QA,new Map,new Map,i,oue,r),s.forEach(d=>{let u=Oo(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(yde()),s=[]),r.length)throw xde(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,Ca))})});let c=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),l=Nl(c);return this._playersById.set(t,l),l.onDestroy(()=>this.destroy(t)),this.players.push(l),l}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw wde(t);return e}listen(t,e,i,r){let o=pI(e,"","","");return fI(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},qz="ng-animate-queued",sue=".ng-animate-queued",XA="ng-animate-disabled",aue=".ng-animate-disabled",cue="ng-star-inserted",lue=".ng-star-inserted",due=[],cH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},uue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ls="__ng_removed",n_=class{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=fue(r),i){let o=t,{value:s}=o,a=Ow(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},e_="void",YA=new n_(e_),lI=class{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,os(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw Mde(i,e);if(i==null||i.length==0)throw Sde(e);if(!pue(i))throw Rde(i,e);let o=Oo(this._elementListeners,t,[]),s={name:e,phase:i,callback:r};o.push(s);let a=Oo(this._engine.statesByElement,t,new Map);return a.has(e)||(os(t,_w),os(t,_w+"-"+e),a.set(e,YA)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw Tde(t);return e}trigger(t,e,i,r=!0){let o=this._getTrigger(e),s=new r_(this.id,e,t),a=this._engine.statesByElement.get(t);a||(os(t,_w),os(t,_w+"-"+e),this._engine.statesByElement.set(t,a=new Map));let c=a.get(e),l=new n_(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(e,l),c||(c=YA),!(l.value===e_)&&c.value===l.value){if(!_ue(c.params,l.params)){let _=[],g=o.matchStyles(c.value,c.params,_),p=o.matchStyles(l.value,l.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{xu(t,g),ka(t,p)})}return}let h=Oo(this._engine.playersByElement,t,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==e&&_.queued&&_.destroy()});let f=o.matchTransition(c.value,l.value,t,l.params),m=!1;if(!f){if(!r)return;f=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:m}),m||(os(t,qz),s.onStart(()=>{Kf(t,qz)})),s.onDone(()=>{let _=this.players.indexOf(s);_>=0&&this.players.splice(_,1);let g=this._engine.playersByElement.get(t);if(g){let p=g.indexOf(s);p>=0&&g.splice(p,1)}}),this.players.push(s),h.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,ww,!0);i.forEach(r=>{if(r[Ls])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let d=this.trigger(t,l,e_,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&Nl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=i.get(s)||YA,d=new n_(e_),u=new r_(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:c,fromState:l,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let o=t[Ls];(!o||o===cH)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){os(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let c=pI(o,i.triggerName,i.fromState.value,i.toState.value);c._data=t,fI(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},dI=class{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new lI(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(t,e,i,r){if(yw(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!yw(e))return;let o=e[Ls];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),os(t,XA)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kf(t,XA))}removeNode(t,e,i){if(yw(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[Ls]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return yw(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,ww,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,KA,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Nl(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Ls];if(e&&e.setForRemoval){if(t[Ls]=cH,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(XA)&&this.markElementAsDisabled(t,!1),this.driver.query(t,aue,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];os(r,cue)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Nl(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw Cde(t)}_flushAnimations(t,e){let i=new i_,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(B=>{d.add(B);let G=this.driver.query(B,sue,!0);for(let U=0;U<G.length;U++)d.add(G[U])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Zz(h,this.collectedEnterElements),m=new Map,_=0;f.forEach((B,G)=>{let U=iH+_++;m.set(G,U),B.forEach(se=>os(se,U))});let g=[],p=new Set,v=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){let G=this.collectedLeaveElements[B],U=G[Ls];U&&U.setForRemoval&&(g.push(G),p.add(G),U.hasAnimation?this.driver.query(G,lue,!0).forEach(se=>p.add(se)):v.add(G))}let b=new Map,y=Zz(h,Array.from(p));y.forEach((B,G)=>{let U=QA+_++;b.set(G,U),B.forEach(se=>os(se,U))}),t.push(()=>{f.forEach((B,G)=>{let U=m.get(G);B.forEach(se=>Kf(se,U))}),y.forEach((B,G)=>{let U=b.get(G);B.forEach(se=>Kf(se,U))}),g.forEach(B=>{this.processLeaveNode(B)})});let C=[],S=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(e).forEach(U=>{let se=U.player,Ce=U.element;if(C.push(se),this.collectedEnterElements.length){let N=Ce[Ls];if(N&&N.setForMove){if(N.previousTriggersValues&&N.previousTriggersValues.has(U.triggerName)){let we=N.previousTriggersValues.get(U.triggerName),Ne=this.statesByElement.get(U.element);if(Ne&&Ne.has(U.triggerName)){let Ue=Ne.get(U.triggerName);Ue.value=we,Ne.set(U.triggerName,Ue)}}se.destroy();return}}let Ie=!u||!this.driver.containsElement(u,Ce),Qe=b.get(Ce),vt=m.get(Ce),Q=this._buildInstruction(U,i,vt,Qe,Ie);if(Q.errors&&Q.errors.length){S.push(Q);return}if(Ie){se.onStart(()=>xu(Ce,Q.fromStyles)),se.onDestroy(()=>ka(Ce,Q.toStyles)),r.push(se);return}if(U.isFallbackTransition){se.onStart(()=>xu(Ce,Q.fromStyles)),se.onDestroy(()=>ka(Ce,Q.toStyles)),r.push(se);return}let Ee=[];Q.timelines.forEach(N=>{N.stretchStartingKeyframe=!0,this.disabledNodes.has(N.element)||Ee.push(N)}),Q.timelines=Ee,i.append(Ce,Q.timelines);let We={instruction:Q,player:se,element:Ce};s.push(We),Q.queriedElements.forEach(N=>Oo(a,N,[]).push(se)),Q.preStyleProps.forEach((N,we)=>{if(N.size){let Ne=c.get(we);Ne||c.set(we,Ne=new Set),N.forEach((Ue,O)=>Ne.add(O))}}),Q.postStyleProps.forEach((N,we)=>{let Ne=l.get(we);Ne||l.set(we,Ne=new Set),N.forEach((Ue,O)=>Ne.add(O))})});if(S.length){let B=[];S.forEach(G=>{B.push(Ede(G.triggerName,G.errors))}),C.forEach(G=>G.destroy()),this.reportError(B)}let M=new Map,A=new Map;s.forEach(B=>{let G=B.element;i.has(G)&&(A.set(G,G),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,M))}),r.forEach(B=>{let G=B.element;this._getPreviousPlayers(G,!1,B.namespaceId,B.triggerName,null).forEach(se=>{Oo(M,G,[]).push(se),se.destroy()})});let T=g.filter(B=>Qz(B,c,l)),x=new Map;Yz(x,this.driver,v,l,Ca).forEach(B=>{Qz(B,c,l)&&T.push(B)});let V=new Map;f.forEach((B,G)=>{Yz(V,this.driver,new Set(B),c,Cx)}),T.forEach(B=>{let G=x.get(B),U=V.get(B);x.set(B,new Map([...G?.entries()??[],...U?.entries()??[]]))});let W=[],te=[],ne={};s.forEach(B=>{let{element:G,player:U,instruction:se}=B;if(i.has(G)){if(d.has(G)){U.onDestroy(()=>ka(G,se.toStyles)),U.disabled=!0,U.overrideTotalTime(se.totalTime),r.push(U);return}let Ce=ne;if(A.size>1){let Qe=G,vt=[];for(;Qe=Qe.parentNode;){let Q=A.get(Qe);if(Q){Ce=Q;break}vt.push(Qe)}vt.forEach(Q=>A.set(Q,Ce))}let Ie=this._buildAnimation(U.namespaceId,se,M,o,V,x);if(U.setRealPlayer(Ie),Ce===ne)W.push(U);else{let Qe=this.playersByElement.get(Ce);Qe&&Qe.length&&(U.parentPlayer=Nl(Qe)),r.push(U)}}else xu(G,se.fromStyles),U.onDestroy(()=>ka(G,se.toStyles)),te.push(U),d.has(G)&&r.push(U)}),te.forEach(B=>{let G=o.get(B.element);if(G&&G.length){let U=Nl(G);B.setRealPlayer(U)}}),r.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<g.length;B++){let G=g[B],U=G[Ls];if(Kf(G,QA),U&&U.hasAnimation)continue;let se=[];if(a.size){let Ie=a.get(G);Ie&&Ie.length&&se.push(...Ie);let Qe=this.driver.query(G,KA,!0);for(let vt=0;vt<Qe.length;vt++){let Q=a.get(Qe[vt]);Q&&Q.length&&se.push(...Q)}}let Ce=se.filter(Ie=>!Ie.destroyed);Ce.length?mue(this,G,Ce):this.processLeaveNode(G)}return g.length=0,W.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();let G=this.players.indexOf(B);this.players.splice(G,1)}),B.play()}),W}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let c=!o||o==e_;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,i){let r=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:r;for(let c of e.timelines){let l=c.element,d=l!==o,u=Oo(i,l,[]);this._getPreviousPlayers(l,d,s,a,e.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),u.push(f)})}xu(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,s){let a=e.triggerName,c=e.element,l=[],d=new Set,u=new Set,h=e.timelines.map(m=>{let _=m.element;d.add(_);let g=_[Ls];if(g&&g.removedBeforeQueried)return new Il(m.duration,m.delay);let p=_!==c,v=gue((i.get(_)||due).map(M=>M.getRealPlayer())).filter(M=>{let A=M;return A.element?A.element===_:!1}),b=o.get(_),y=s.get(_),C=Kz(this._normalizer,m.keyframes,b,y),S=this._buildPlayer(m,C,v);if(m.subTimeline&&r&&u.add(_),p){let M=new r_(t,a,_);M.setRealPlayer(S),l.push(M)}return S});l.forEach(m=>{Oo(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>hue(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>os(m,Vz));let f=Nl(h);return f.onDestroy(()=>{d.forEach(m=>Kf(m,Vz)),ka(c,e.toStyles)}),u.forEach(m=>{Oo(r,m,[]).push(f)}),f}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Il(t.duration,t.delay)}},r_=class{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Il,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>fI(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Oo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function hue(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function fue(n){return n??null}function yw(n){return n&&n.nodeType===1}function pue(n){return n=="start"||n=="done"}function Xz(n,t){let e=n.style.display;return n.style.display=t??"none",e}function Yz(n,t,e,i,r){let o=[];e.forEach(c=>o.push(Xz(c)));let s=[];i.forEach((c,l)=>{let d=new Map;c.forEach(u=>{let h=t.computeStyle(l,u,r);d.set(u,h),(!h||h.length==0)&&(l[Ls]=uue,s.push(l))}),n.set(l,d)});let a=0;return e.forEach(c=>Xz(c,o[a++])),s}function Zz(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let i=1,r=new Set(t),o=new Map;function s(a){if(!a)return i;let c=o.get(a);if(c)return c;let l=a.parentNode;return e.has(l)?c=l:r.has(l)?c=i:c=s(l),o.set(a,c),c}return t.forEach(a=>{let c=s(a);c!==i&&e.get(c).push(a)}),e}function os(n,t){n.classList?.add(t)}function Kf(n,t){n.classList?.remove(t)}function mue(n,t,e){Nl(e).onDone(()=>n.processLeaveNode(t))}function gue(n){let t=[];return lH(n,t),t}function lH(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof wg?lH(i.players,t):t.push(i)}}function _ue(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function Qz(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}var Jf=class{constructor(t,e,i){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new dI(t.body,e,i),this._timelineEngine=new cI(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){let s=t+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],d=oH(this._driver,o,c,l);if(c.length)throw _de(r,c);l.length&&void 0,a=nue(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[o,s]=Bz(i),a=r;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if(i.charAt(0)=="@"){let[s,a]=Bz(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function bue(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=ZA(t[0]),t.length>1&&(i=ZA(t[t.length-1]))):t instanceof Map&&(e=ZA(t)),e||i?new uI(n,e,i):null}var uI=class n{static{this.initialStylesByElement=new WeakMap}constructor(t,e,i){this._element=t,this._startStyles=e,this._endStyles=i,this._state=0;let r=n.initialStylesByElement.get(t);r||n.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ka(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ka(this._element,this._initialStyles),this._endStyles&&(ka(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(xu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xu(this._element,this._endStyles),this._endStyles=null),ka(this._element,this._initialStyles),this._state=3)}};function ZA(n){let t=null;return n.forEach((e,i)=>{vue(i)&&(t=t||new Map,t.set(i,e))}),t}function vue(n){return n==="display"||n==="position"}var Dw=class{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:bI(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Aw=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return Jz(t,e)}getParentElement(t){return mI(t)}query(t,e,i){return eH(t,e,i)}computeStyle(t,e,i){return bI(t,e)}animate(t,e,i,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};o&&(c.easing=o);let l=new Map,d=s.filter(f=>f instanceof Dw);Bde(i,r)&&d.forEach(f=>{f.currentSnapshot.forEach((m,_)=>l.set(_,m))});let u=Ode(e).map(f=>new Map(f));u=Ude(t,u,l);let h=bue(t,u);return new Dw(t,u,c,h)}};var xw="@",dH="@.disabled",Iw=class{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==xw&&e==dH?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},hI=class extends Iw{constructor(t,e,i,r,o){super(e,i,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==xw?e.charAt(1)=="."&&e==dH?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if(e.charAt(0)==xw){let r=yue(t),o=e.slice(1),s="";return o.charAt(0)!=xw&&([o,s]=xue(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(t,e,i)}};function yue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function xue(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var Pw=class{constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(t,e){let i="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let l=this._rendererCache,d=l.get(r);if(!d){let u=()=>l.delete(r);d=new Iw(i,r,this.engine,u),l.set(r,d)}return d}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,t,l.name,l)};return e.data.animation.forEach(a),new hI(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Mue=(()=>{class n extends Jf{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(de(yt),de(wu),de(Mu))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();function Sue(){return new Sw}function Rue(n,t,e){return new Pw(n,t,e)}var hH=[{provide:Mu,useFactory:Sue},{provide:Jf,useClass:Mue},{provide:Hc,useFactory:Rue,deps:[Ev,Jf,$e]}],uH=[{provide:wu,useFactory:()=>new Aw},{provide:Gn,useValue:"BrowserAnimations"},...hH],Tue=[{provide:wu,useClass:gI},{provide:Gn,useValue:"NoopAnimations"},...hH],fH=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Tue:uH}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:uH,imports:[Av]})}}return n})();var pH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=it({type:n,bootstrap:[Rz]})}static{this.\u0275inj=tt({providers:[fU({fullLibraryLoader:()=>import("./chunk-Y4VJBSUU.js")}),Sa],imports:[Av,pz,pV,Nz,XV,mU,bU,fH,M3,Kg,bg,Mz,yg,Qg,CO]})}}return n})();var mH={production:!0};mH.production&&void 0;kO().bootstrapModule(pH,{ngZoneEventCoalescing:!0,ngZoneRunCoalescing:!0}).catch(n=>console.error(n));
